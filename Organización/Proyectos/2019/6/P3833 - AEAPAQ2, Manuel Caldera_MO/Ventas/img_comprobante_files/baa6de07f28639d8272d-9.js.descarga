webpackJsonp([9],{1553:function(e,o){},1554:function(e,o,t){t(1555),t(1556)},1555:function(e,o){!(function(){function e(){ns.events.off("onCollectorCheckStart"),ns.events.off("onCollectorCheckSuccess"),ns.events.off("onCollectorCheckFail"),ns.events.off("onCollectorEditFail"),ns.events.off("daria:oauth-token:update")}ns.action.define("collector.update-oauth-token",(function(e,o,t,n){ns.events.on("daria:oauth-token:update",(function(e,o){$(t).find('[name="social_task_id"]').val(o.task_id),ns.action.run("collector.edit-password",o,t,n)})),ns.action.run("generate-oauth-token",o)})),ns.action.define("collector.warning",(function(e,t,r,i){var a;i?(a=i.target,Jane.c(["Left column","Broken collector","click on stripe"])):a=t;var s=$(a).closest(".js-collectors-item-warning"),l=s.prev(),d=l.attr("data-popid"),u=ns.Model.get("collectors"),c=u.getById(d);if(c){var f={};$.each(c,(function(e,o){if("password"===e)return!0;f[e]=o})),"1"===c.is_oauth&&(f.social_task_id="");var m=l.text(),p=l.data("help-link"),h=l.data("company")||m.split("@")[1],g={hidden:f,mail:m,popid:d,is_oauth:c.is_oauth,oauth_app:c.oauth_app,time:c.human_time,server:h,company:h.substr(0,1).toUpperCase()+h.substr(1)};p&&(g.link=p);var v=l.offset().top+l.outerHeight()/2+1,b=o(l,g);Daria.hasAsideScrollContainer()&&ns.Model.get("collectors").set(".collectorWarningData",{node:l[0],action:function(e){var o=Math.ceil(ns.Model.get("scroller-left-block").getHeight()/2);n(l,e?o:void 0)}});b.find("form, .b-mail-button").filter("form").data({popid:d,y:v,$warning:s,$unactive:l})}})),ns.action.define("collector.edit-password",(function(o,t,n,r){function i(o,t){e(),ns.events.trigger("daria:vCollectors:log","click on new password error"),window.clearTimeout(s),m.addClass("g-hidden"),(t&&"1"===t.is_oauth?f:c).removeClass("g-hidden"),Jane.enableButton(p)}var a={event:r,params:t};a.event.preventDefault();var s,l=$(a.event.target),d=l.data(),u=l.find(".b-notification_loading, .b-mail-button, .b-notification_auth_failed, .b-notification_oauth_failed"),c=u.filter(".b-notification_auth_failed"),f=u.filter(".b-notification_oauth_failed"),m=u.filter(".b-notification_loading"),p=u.filter(".b-mail-button");e(),ns.events.on("onCollectorCheckStart",(function(){s=window.setTimeout((function(){m.removeClass("g-hidden"),c.addClass("g-hidden")}),250)})),ns.events.on("onCollectorCheckFail",i),ns.events.on("onCollectorEditFail",i),ns.events.on("onCollectorEditSuccess.password-"+a.params.popid,(function(){e(),ns.events.trigger("daria:vCollectors:log","click on new password success"),window.clearTimeout(s),ns.forcedRequest(["do-collector-run","do-collector-on"],{popid:d.popid}),Daria.Dialog.open({body:Jane.tt("left:collector-warning-popup-header",{header:i18n("%Setup_Collectors_Сбор_писем_прождолжен"),src:"b-mail-icon_green-tick.gif"}),onTarget:{target:$(".js-collector-unactive[data-popid="+a.params.popid+"]"),side:"left",pos:"top"},onopen:function(){window.setTimeout((function(){Daria.Dialog.$dialog.hasClass("b-collectors__tick")&&Daria.Dialog.close()}),2e3)},additionalClass:"b-popup_yellow b-collectors__popup b-collectors__tick"}),d.$warning.remove()})),Jane.Services.runModules(["setup.js"],(function(){Daria.Collectors.Editor.run(l,a.params.owner)}))})),ns.action.define("collector.stop",(function(e,o,t,n){var r={event:n,params:o};ns.events.trigger("daria:vCollectors:log","click on stop message collecting");var i={};r.event&&(i=$(r.event.target).closest("form").data()),Daria.Dialog.close().open({title:Jane.tt("left:collector-warning-popup-header",{header:i18n("%Setup_Collectors_remove")}),body:Jane.tt("left:collector-remove-popup",{mail:r.params.mail,popid:r.params.popid}),width:480,onTarget:{x:$(".ns-view-left-box").outerWidth()+9,y:i.y-$(window).scrollTop(),side:"left",pos:"top"},additionalClass:"b-popup_yellow b-collectors__popup"}).$dialog.data(i)})),ns.action.define("collector.kill",(function(e,o){var t=o.popid;ns.forcedRequest([{id:"do-collector-remove",params:{popid:t}},{model:ns.Model.get("collectors").getMasterRequest()}]).then((function(){var e=Vow.resolve(),o=ns.Model.get("filters").getForCollector(t),n=_.map(o,(function(e){return{id:"do-filters-delete",params:{id:e.filid}}}));n.length&&(e=ns.forcedRequest([].concat(n,[{model:ns.Model.get("filters").getMasterRequest()}]))),e.then((function(){ns.events.atrigger("daria:vCollectors:update")}))})),Daria.Dialog.close()})),ns.action.define("collector.close-remove-popup",(function(){Daria.Dialog.close()})),ns.action.define("collector.help-go",(function(){return ns.events.trigger("daria:vCollectors:log","go to settings"),!0})),ns.action.define("collector.support-go",(function(){return ns.events.trigger("daria:vCollectors:log","go to support"),!0})),ns.action.define("message-collector.disable",(function(){var e={no_collectors_promo:!0};return ns.Model.get("settings").setSettings(e,(function(){ns.events.trigger("daria:vCollectors:update")})),Jane.c("message-collector","Клик на нет других ящиков"),!0}));var o=function(e,o){var r="1"===o.is_oauth?"left:oauth-collector-warning-popup":"left:collector-warning-popup";Daria.Dialog.open({title:Jane.tt("left:collector-warning-popup-header",{header:i18n("%Setup_Collectors_warning-popup-header",_.escape(o.mail))}),body:Jane.tt(r,o),width:480,onopen:function(o){Jane.c(["Left column","Broken collector","show"]),o._repositionDialog=n.bind(this,e),ns.events.on("minify",o._repositionDialog)},onTarget:t(e),onclose:function(e){ns.events.trigger("daria:vCollectors:log","closing popup"),ns.events.trigger("daria:vCollectors:setBrokenCollectorCookie"),ns.events.off("minify",e._repositionDialog),delete e._repositionDialog},oncancel:function(){Jane.c("Left column","Collectors promo","Click on cross")},additionalClass:"b-popup_yellow b-collectors__popup"});var i=Daria.Dialog.$dialog,a=i.find(".js-dialog-button");return i.on("keyup",".js-collector-passwd",(function(){var e=nb.block(a.get(0)),o=nb.block(this);return e?$.trim(o.getValue())?void e.enable():void e.disable():e})),i},t=function(e,o){var t={default:{target:e,side:"left",pos:"top",needTail:!0}};return o&&Object.assign(t.default,{newTop:o}),t.default},n=function(e,o){Daria.Dialog.params.onTarget=t(e,o),Daria.Dialog.position()}})()},1556:function(e,o){ns.action.define("hide",(function(e,o,t){t.style.display="none"}))},1557:function(e,o){ns.layout.define("common-folder-layout",{folder:{}}),ns.layout.define("user-folder-layout",{"user-folder":{}}),ns.layout.define("system-folder-layout",{"system-folder":{}}),ns.layout.define("label",{label:{}}),ns.layout.define("collectors-item",{"collectors-item":{}})},1558:function(e,o,t){t(1559),t(1561),t(1562),t(1563),t(1564),t(1565),t(1566),t(1567),t(1568),t(1569),t(1570),t(1571),t(1572),t(1573),t(1574),t(1575),t(1576),t(1577),t(1578),t(1579),t(1580),t(1581),t(1582),t(1583),t(1584)},1559:function(e,o,t){!(function(){var e={useSSL:!0,useProtocol:"imap",imap:{port:143,tpl:"login@domain",ssl:{port:993}},pop:{port:110,tpl:"login@domain",ssl:{port:995}}},o=t(1560);ns.Model.define("collector-settings",{events:{"ns-model-init":function(){this.setData(o)}},methods:{getDefaultConfig:function(o,t){var n=$.extend({},e);return void 0!==o&&null!==o||(o=n.useProtocol),$.extend(n,n[o]),void 0!==t&&null!==t||(t=n.useSSL),t&&$.extend(n,n[o].ssl||{}),n.useProtocol=o,n.useSSL=t,delete n.imap,delete n.pop,delete n.ssl,n},getByDomain:function(o,t,n){if(!o)return null;for(var r,i=this.getData(),a=0,s=i.length;a<s;a++){var l=i[a];if(l.name&&$.inArray(o,l.name)>-1){r=$.extend(!0,{},e,l);break}}if(!r)return null;if(void 0!==t&&null!==t||(t=r.imap?"imap":"pop"),!r[t])return null;if($.extend(r,r[t]),void 0!==n&&null!==n||(n=r.useSSL),n){if(!r[t].ssl)return null;$.extend(r,r[t].ssl||{})}return r.useProtocol=t,r.useSSL=n,delete r.imap,delete r.pop,delete r.name,delete r.ssl,r},getByServer:function(e){return _.find(this.getData(),(function(o){return o.pop&&o.pop.server===e||o.imap&&o.imap.server===e}))}}},ns.ModelStatic)})()},1560:function(e,o){e.exports=[{name:["mail.ru"],useProtocol:"imap",imap:{server:"imap.mail.ru"},pop:{server:"pop.mail.ru",tpl:"login"},teaser:"mail",help:"http://help.mail.ru/mail-support",company:"mail.ru",SSLOnly:!0},{name:["list.ru"],useProtocol:"imap",imap:{server:"imap.mail.ru"},pop:{server:"pop.list.ru",tpl:"login"},favicon:"mail.ru",teaser:"mail",help:"http://help.mail.ru/mail-support",company:"mail.ru",SSLOnly:!0},{name:["bk.ru"],useProtocol:"imap",imap:{server:"imap.mail.ru"},pop:{server:"pop.bk.ru",tpl:"login"},favicon:"mail.ru",teaser:"mail",help:"http://help.mail.ru/mail-support",company:"mail.ru",SSLOnly:!0},{name:["inbox.ru"],useProtocol:"imap",imap:{server:"imap.mail.ru"},pop:{server:"pop.inbox.ru",tpl:"login"},favicon:"mail.ru",teaser:"mail",help:"http://help.mail.ru/mail-support",company:"mail.ru",SSLOnly:!0},{name:["gmail.com"],useProtocol:"imap",imap:{server:"imap.gmail.com"},pop:{server:"pop.gmail.com"},favicon:"mail.google.com",teaser:"gmail",help:"http://support.google.com/mail",company:"gmail.com"},{name:["km.ru"],useSSL:!1,imap:null,pop:{server:"pop.km.ru"}},{name:["bossmail.ru"],useSSL:!1,imap:null,pop:{server:"pop.bossmail.ru"},favicon:"km.ru"},{name:["girlmail.ru"],useSSL:!1,imap:null,pop:{server:"pop.girlmail.ru"},favicon:"km.ru"},{name:["boymail.ru"],useSSL:!1,imap:null,pop:{server:"pop.boymail.ru"},favicon:"km.ru"},{name:["freemail.ru"],useSSL:!1,imap:null,pop:{server:"pop.freemail.ru"},favicon:"km.ru"},{name:["megabox.ru"],useSSL:!1,imap:null,pop:{server:"pop.megabox.ru"},favicon:"km.ru"},{name:["safebox.ru"],useSSL:!1,imap:null,pop:{server:"pop.safebox.ru"},favicon:"km.ru"},{name:["ua.fm"],imap:null,pop:{server:"pop.ua.fm"},favicon:"i.ua"},{name:["ngs.ru","eml.ru","mosk.ru"],imap:null,pop:{server:"mail.ngs.ru"}},{name:["mtu.ru","mtu-net.ru"],useSSL:!1,imap:null,pop:{server:"pop.mtu.ru",tpl:"login"},favicon:"mts.ru"},{name:["umail.ru"],imap:null,pop:{server:"pop.umail.ru",tpl:"login"}},{name:["nic.ru"],useProtocol:"imap",imap:{server:"mail.nic.ru",tpl:"login"},pop:{server:"mail.nic.ru",tpl:"login"}},{name:["i.ua"],imap:null,pop:{server:"pop.i.ua"}},{name:["yahoo.com","yahoo.co.kr","yahoo.co.nz","yahoo.com.mx","yahoo.com.tr","yahoo.dk","yahoo.gr","yahoo.ie","yahoo.in","yahoo.nl","yahoo.no","yahoo.pl","yahoo.ru","yahoo.se","yahoo.","yahoo.","yahoo.","yahoo."],useProtocol:"imap",imap:{server:"imap.mail.yahoo.com"},pop:{server:"pop.mail.yahoo.com"},teaser:"yahoo"},{name:["yahoo.ca"],useProtocol:"imap",imap:{server:"imap.mail.yahoo.com"},pop:{server:"pop.mail.yahoo.ca"},teaser:"yahoo"},{name:["yahoo.cn"],useProtocol:"imap",imap:{server:"imap.mail.yahoo.com"},pop:{server:"pop.mail.yahoo.cn"},teaser:"yahoo"},{name:["yahoo.co.id"],useProtocol:"imap",imap:{server:"imap.mail.yahoo.com"},pop:{server:"pop.mail.yahoo.co.id"},teaser:"yahoo"},{name:["yahoo.co.in"],useProtocol:"imap",imap:{server:"imap.mail.yahoo.com"},pop:{server:"pop.mail.yahoo.co.in"},teaser:"yahoo"},{name:["yahoo.co.jp"],useProtocol:"imap",imap:{server:"imap.mail.yahoo.co.jp"},pop:{server:"pop.mail.yahoo.co.jp",tpl:"login"},teaser:"yahoo"},{name:["yahoo.co.th"],useProtocol:"imap",imap:{server:"imap.mail.yahoo.com"},pop:{server:"pop.mail.yahoo.co.th"},teaser:"yahoo"},{name:["yahoo.co.uk"],useProtocol:"imap",imap:{server:"imap.mail.yahoo.com"},pop:{server:"pop.mail.yahoo.co.uk"},teaser:"yahoo"},{name:["yahoo.com.ar"],useProtocol:"imap",imap:{server:"imap.mail.yahoo.com"},pop:{server:"pop.mail.yahoo.com.ar"},teaser:"yahoo"},{name:["yahoo.com.au"],useProtocol:"imap",imap:{server:"imap.mail.yahoo.com"},pop:{server:"pop.mail.yahoo.com.au"},teaser:"yahoo"},{name:["yahoo.com.br"],useProtocol:"imap",imap:{server:"imap.mail.yahoo.com"},pop:{server:"pop.mail.yahoo.com.br"},teaser:"yahoo"},{name:["yahoo.com.cn"],useProtocol:"imap",imap:{server:"imap.mail.yahoo.com"},pop:{server:"pop.mail.yahoo.com.cn"},teaser:"yahoo"},{name:["yahoo.com.hk"],useProtocol:"imap",imap:{server:"imap.mail.yahoo.com"},pop:{server:"pop.mail.yahoo.com.hk"},teaser:"yahoo"},{name:["yahoo.com.my"],useProtocol:"imap",imap:{server:"imap.mail.yahoo.com"},pop:{server:"pop.mail.yahoo.com.my"},teaser:"yahoo"},{name:["yahoo.com.pe"],useProtocol:"imap",imap:{server:"imap.mail.yahoo.com"},pop:{server:"pop.mail.yahoo.com.ar"},teaser:"yahoo"},{name:["yahoo.com.ph"],useProtocol:"imap",imap:{server:"imap.mail.yahoo.com"},pop:{server:"pop.mail.yahoo.com.ph"},teaser:"yahoo"},{name:["yahoo.com.sg"],useProtocol:"imap",imap:{server:"imap.mail.yahoo.com"},pop:{server:"pop.mail.yahoo.com.sg"},teaser:"yahoo"},{name:["yahoo.com.tw"],useProtocol:"imap",imap:{server:"imap.mail.yahoo.com"},pop:{server:"pop.mail.yahoo.com.tw"},teaser:"yahoo"},{name:["yahoo.com.vn"],useProtocol:"imap",imap:{server:"imap.mail.yahoo.com"},pop:{server:"pop.mail.yahoo.com.vn"},teaser:"yahoo"},{name:["yahoo.de"],useProtocol:"imap",imap:{server:"imap.mail.yahoo.com"},pop:{server:"pop.mail.yahoo.de"},teaser:"yahoo"},{name:["yahoo.es"],useProtocol:"imap",imap:{server:"imap.mail.yahoo.com"},pop:{server:"pop.mail.yahoo.es"},teaser:"yahoo"},{name:["yahoo.fr"],useProtocol:"imap",imap:{server:"imap.mail.yahoo.com"},pop:{server:"pop.mail.yahoo.fr"},teaser:"yahoo"},{name:["yahoo.it"],useProtocol:"imap",imap:{server:"imap.mail.yahoo.com"},pop:{server:"pop.mail.yahoo.it"},teaser:"yahoo"},{name:["ameritech.net"],imap:null,pop:{server:"pop.ameritech.yahoo.com"},teaser:"yahoo"},{name:["flash.net"],imap:null,pop:{server:"pop.flash.yahoo.com"},teaser:"yahoo"},{name:["nvbell.net"],imap:null,pop:{server:"pop.nvbell.yahoo.com"},teaser:"yahoo"},{name:["pacbell.net"],imap:null,pop:{server:"pop.pacbell.yahoo.com"},teaser:"yahoo"},{name:["prodigy.net"],imap:null,pop:{server:"pop.prodigy.yahoo.com"},teaser:"yahoo"},{name:["sbcglobal.net"],imap:null,pop:{server:"pop.sbcglobal.yahoo.com"},teaser:"yahoo"},{name:["snet.net"],imap:null,pop:{server:"pop.snet.yahoo.com"},teaser:"yahoo"},{name:["swbell.net"],imap:null,pop:{server:"pop.swbell.yahoo.com"},teaser:"yahoo"},{name:["verizon.net"],imap:null,pop:{server:"incoming.yahoo.verizon.net"},teaser:"yahoo"},{name:["wans.net"],imap:null,pop:{server:"pop.wans.yahoo.com"},teaser:"yahoo"},{name:["btinternet.com"],imap:null,pop:{server:"mail.btinternet.com"},teaser:"yahoo"},{name:["rogers.com","nl.rogers.com"],imap:null,pop:{server:"pop.broadband.rogers.com"},teaser:"yahoo"},{name:["aol.com"],useSSL:!1,useProtocol:"imap",imap:{server:"imap.aol.com",tpl:"login"},pop:{server:"pop.aol.com",tpl:"login"},favicon:"aol.com",teaser:"aol"},{name:["wow.com","love.com","game.com"],useSSL:!1,useProtocol:"imap",imap:{server:"imap.aol.com",tpl:"login"},pop:{server:"pop.aol.com",tpl:"login"},teaser:"aol"},{name:["rol.ru"],useProtocol:"imap",imap:{server:"imap.rol.ru"},pop:{server:"pop.rol.ru"}},{name:["ukr.net"],useProtocol:"imap",imap:{server:"imap.ukr.net"},pop:{server:"pop3.ukr.net"}},{name:["freemail.ukr.net"],imap:null,pop:{server:"freemail.ukr.net"}},{name:["infobox.ru"],imap:null,pop:{server:"mail.infobox.ru"}},{name:["mtw.ru"],useProtocol:"imap",imap:{server:"imap.mtw.ru",tpl:"login"},pop:{server:"pop.mtw.ru",tpl:"login"}},{name:["aaanet.ru"],useSSL:!1,imap:null,pop:{server:"pop3.aaanet.ru",tpl:"login"}},{name:["tochka.ru"],imap:null,pop:{server:"pop.tochka.ru",tpl:"login"}},{name:["mx.kaluga.ru"],imap:null,pop:{server:"mx.kaluga.ru",tpl:"login"},favicon:"kaluga.ru"},{name:["permonline.ru"],imap:null,pop:{server:"pop.permonline.ru"}},{name:["yandex.ru","narod.ru","ya.ru","yandex.com","yandex.com.tr","yandex.ua","yandex.kz","yandex.by","yandex.az","yandex.com.am","yandex.com.ge","yandex.co.il","yandex.kg","yandex.lv","yandex.lt","yandex.md","yandex.tj","yandex.tm","yandex.uz","yandex.fr","yandex.ee","яндекс.рф","aeterna.ru","avril.ru","borda.ru","fotoplenka.ru","fromru.com","front.ru","hotbox.ru","hotmail.ru","justlunch.ru","krovatka.su","land.ru","loveplanet.ru","mail15.com","mail333.com","memori.ru","newmail.ru","nightmail.ru","nm.ru","photofile.ru","pisem.net","pochta.com","pochta.ru","pochtamt.ru","pop3.ru","qip.ru","rbcmail.ru","smtp.ru","webmail.ru","zahvat.ru","ziza.ru","5ballov.ru","e1.ru"],useProtocol:"imap",imap:{server:"imap.yandex.ru"},pop:{server:"pop.yandex.ru"},favicon:"mail.yandex.ru","is-own":!0,teaser:"yandex",help:"https://yandex.ru/support/mail/web/preferences/collector.html#collector-problems__yes"},{name:["mynet.com"],imap:null,pop:{server:"pop.mynet.com"},useSSL:!1},{name:["superonline.com"],pop:null,imap:{server:"mail.superonline.com"},useProtocol:"imap",useSSL:!0},{name:["e-kolay.net"],pop:null,imap:{server:"pop3.e-kolay.net"},useProtocol:"imap",useSSL:!0,favicon:"ekolay.net"},{name:["ttnet.net.tr"],pop:null,imap:{server:"mail.ttnet.net.tr"},useProtocol:"imap",useSSL:!0,favicon:"ttnet.com.tr"},{name:["turk.net"],pop:null,imap:{server:"pop3.turk.net"},useProtocol:"imap",useSSL:!0},{name:["mynet.com.tr"],imap:null,pop:{server:"pop.mynet.com.tr"},favicon:"mynet.com"},{name:["74.ru","chelyabinsk.ru","chel.ru","domchel.ru","autochel.ru","chelfin.ru","mychel.ru","2074.ru","cheldiplom.ru"],imap:null,pop:{server:"pop3.74.ru"}},{name:["t-online.de"],useProtocol:"imap",imap:{server:"secureimap.t-online.de"},pop:{server:"popmail.t-online.de"},teaser:"yahoo"},{name:["alice.fr","aliceadsl.fr"],imap:null,pop:{server:"pop.alice.fr"},teaser:"yahoo"},{name:["arcor.de"],useProtocol:"imap",imap:{server:"imap.arcor.de",tpl:"login"},pop:{server:"pop3.arcor.de",tpl:"login"},teaser:"yahoo"},{name:["bbox.fr"],useProtocol:"imap",imap:{server:"imap.bbox.fr"},pop:{server:"pop3.bbox.fr"},teaser:"yahoo"},{name:["bouygtel.fr"],useProtocol:"imap",imap:{server:"imap.bouygtel.fr"},pop:{server:"pop.bouygtel.fr"},teaser:"yahoo"},{name:["caramail.com"],imap:null,pop:{server:"pop.lycos.co.uk"},teaser:"yahoo"},{name:["cegetel.fr","cegetel.net"],pop:null,imap:{server:"imap.cegetel.net"},useProtocol:"imap",teaser:"yahoo"},{name:["club-internet.fr","club-internet.net"],imap:null,pop:{server:"pop3.club-internet.fr"},teaser:"yahoo"},{name:["email.de"],imap:null,pop:{server:"pop3.web.de"},teaser:"yahoo"},{name:["fastwebnet.it"],imap:null,pop:{server:"pop.fastwebnet.it"},teaser:"yahoo"},{name:["free.fr"],useProtocol:"imap",pop:{server:"pop.free.fr",tpl:"login"},imap:{server:"imap.free.fr",tpl:"login"},teaser:"yahoo"},{name:["freenet.de"],useProtocol:"imap",imap:{server:"mx.freenet.de"},pop:{server:"mx.freenet.de"},teaser:"yahoo"},{name:["gmx.de","gmx.net","gmx.at","gmx.ch","gmx.eu","gmx.biz","gmx.org","gmx.info"],useProtocol:"imap",imap:{server:"imap.gmx.net"},pop:{server:"pop.gmx.net"},teaser:"yahoo"},{name:["googlemail.com"],useProtocol:"imap",pop:{server:"pop.googlemail.com"},imap:{server:"imap.googlemail.com"},teaser:"yahoo"},{name:["laposte.net"],useProtocol:"imap",imap:{server:"imap.laposte.net",tpl:"login"},pop:{server:"pop.laposte.net",tpl:"login"},teaser:"yahoo"},{name:["libero.it","iol.it","blu.it","inwind.it"],useProtocol:"imap",pop:{server:"popmail.libero.it"},imap:{server:"imapmail.libero.it"},useSSL:!1,teaser:"yahoo"},{name:["lybertysurf.fr"],imap:null,pop:{server:"pop.libertysurf.fr"},teaser:"yahoo"},{name:["lycos.co.uk"],imap:null,pop:{server:"pop.lycos.co.uk",tpl:"login"},teaser:"yahoo"},{name:["netcourrier.com"],imap:null,pop:{server:"mail.netcourrier.com"},teaser:"yahoo"},{name:["neuf.fr","sfr.fr"],useProtocol:"imap",pop:{server:"pop.sfr.fr"},imap:{server:"imap.sfr.fr"},useSSL:!1,teaser:"yahoo"},{name:["noos.fr"],imap:null,pop:{server:"pop.noos.fr"},teaser:"yahoo"},{name:["o2online.de"],imap:null,pop:{server:"pop.o2online.de"},teaser:"yahoo"},{name:["orange.fr"],useProtocol:"imap",imap:{server:"imap.orange.fr",tpl:"login"},pop:{server:"pop.orange.fr",tpl:"login"},useSSL:!1,teaser:"yahoo"},{name:["wanadoo.fr"],useProtocol:"imap",imap:{server:"imap.wanadoo.fr"},pop:{server:"pop.wanadoo.fr"},teaser:"yahoo"},{name:["tele2.fr"],imap:null,pop:{server:"pop.tele2.fr"},teaser:"yahoo"},{name:["telefonica.net"],pop:null,imap:{server:"imap.telefonica.net"},useProtocol:"imap",teaser:"yahoo"},{name:["terra.es"],useProtocol:"imap",pop:{server:"pop3.terra.es"},imap:{server:"imap4.terra.es"},useSSL:!1,teaser:"yahoo"},{name:["tim.it"],pop:null,imap:{server:"easyimap4.posta.tim.it"},useProtocol:"imap",teaser:"yahoo"},{name:["tin.it"],imap:null,pop:{server:"box.tin.it"},teaser:"yahoo"},{name:["tiscali.fr"],useProtocol:"imap",imap:{server:"imap.tiscali.fr"},pop:{server:"pop.tiscali.fr"},teaser:"yahoo"},{name:["tiscali.it"],useProtocol:"imap",imap:{server:"imap.tiscali.it"},pop:{server:"pop.tiscali.it"},teaser:"yahoo"},{name:["tre.it"],pop:null,imap:{server:"imap.tre.it"},useProtocol:"imap",teaser:"yahoo"},{name:["virgilio.it"],imap:null,pop:{server:"in.virgilio.it",tpl:"login"},teaser:"yahoo"},{name:["vodafone.de"],imap:null,pop:{server:"pop.email.vodafone.de"},teaser:"yahoo"},{name:["vodafone.it"],imap:null,pop:{server:"popmail.vodafone.it"},teaser:"yahoo"},{name:["email.ua"],imap:{server:"imap.email.ua"},pop:{server:"pop.email.ua"}},{name:["3g.ua"],imap:null,pop:{server:"pop.3g.ua"}},{name:["mail.ua"],useProtocol:"imap",imap:{server:"imap.mail.ru"},pop:{server:"pop.mail.ru"},useSSL:!0},{name:["a.ua"],useProtocol:"imap",imap:{server:"imap.a.ua"},pop:{server:"pop.a.ua"}},{name:["ukrpost.net"],useProtocol:"imap",imap:{server:"mail.ukrpost.ua"},pop:{server:"mail.ukrpost.ua"}},{name:["online.ua"],imap:null,pop:{server:"pop3.online.ua"},useSSL:!1},{name:["meta.ua"],imap:null,pop:{server:"pop.meta.ua"},useSSL:!0},{name:["tut.by"],useProtocol:"imap",imap:{server:"imap.yandex.ru"},pop:{server:"pop.yandex.ru"},useSSL:!0}]},1561:function(e,o){!(function(){ns.Model.define("collectors",{params:{no_cache:null},split:{items:".",params:{popid:".popid"},model_id:"collector"},methods:{getMasterRequest:function(){var e=this,o=ns.Model.get(this.id,_.assign({},this.params,{no_cache:1}));return o.destroy(),o.once("ns-model-changed",(function(){e.setData(this.getData())})),o},getData:function(){return this.data||[]},exists:function(e){return this.models.some((function(o){return o.get(".email")===e}))},getById:function(e){return ns.Model.get("collector",{popid:e}).getData()},getCount:function(){return this.models.length}}})})()},1562:function(e,o){ns.Model.define("collector",{events:{"ns-model-changed":"onModelChanged"},params:{popid:null},methods:{preprocessData:function(e){e.body&&(e=e.body);var o=e.email;if(!o)if(_.contains(e.login,"@"))o=e.login;else{var t=ns.Model.get("collector-settings").getByServer(e.server);o=t?e.login+"@"+t.name:e.login}return e.email=o,e},onModelChanged:function(){var e=this.getData();e.last_connect&&(e.human_time=Jane.Date.humanDate(new Date(1e3*e.last_connect)))}}})},1563:function(e,o){ns.Model.define("do-folder-clear",{params:{fid:null,method:null,old_f:null,from_f:null,subj_f:null}})},1564:function(e,o){ns.Model.define("do-folder-mark-read",{params:{fid:null}})},1565:function(e,o){ns.Model.define("do-folder-move",{params:{fid:null,parent_id:null}})},1566:function(e,o){ns.Model.define("do-folder-rename",{params:{fname:null,fid:null,parent_id:null}})},1567:function(e,o){ns.Model.define("do-folder-set-options",{params:{fid:null,prev:null}})},1568:function(e,o){ns.Model.define("do-folder-set-symbol",{params:{fid:null,symbol:null}})},1569:function(e,o){ns.Model.define("do-folders-add",{params:{folder_name:null,parent_id:null,symbol:null},methods:{getFid:function(){return this.get(".body.updated")}}})},1570:function(e,o){ns.Model.define("do-labels-add",{params:{label_name:null,label_color:null,label_type:null}})},1571:function(e,o){ns.Model.define("do-labels-add-by-symbol",{params:{symbol:null}})},1572:function(e,o){ns.Model.define("do-label",{params:{lid:null,ids:null,tids:null,fid:null},methods:{getAffectedTids:function(){return this.select('.thread[.lid == "'+this.params.lid+'"].tid')}}})},1573:function(e,o){ns.Model.define("do-unlabel",{params:{lid:null,ids:null,tids:null,fid:null},methods:{getAffectedTids:function(){return this.select('.thread[.lid != "'+this.params.lid+'"].tid')}}})},1574:function(e,o){ns.Model.define("tab",{params:{id:null},methods:{getUnreadCount:function(){return this.get(".counters.new")||0},_setUnreadCount:function(e){return this.set(".counters.new",e)},adjustUnreadCount:function(e){var o=this.getUnreadCount(),t=Math.max(Number(o)+Number(e),0);o!==t&&this._setUnreadCount(t)}}})},1575:function(e,o,t){"use strict";var n=[{id:"default",title:i18n("%Folder_tabs_Inbox"),description:"",iconName:"mail--NewTabs-Default"},{id:"news",title:i18n("%Folder_tabs_News"),description:i18n("%Folder_tabs_News_descr"),iconName:"mail--NewTabs-News"},{id:"social",title:i18n("%Folder_tabs_Social"),description:i18n("%Folder_tabs_Social_descr"),iconName:"mail--NewTabs-Social"}];ns.Model.define("tabs",{split:{items:".tabs",params:{id:".id"},model_id:"tab"},methods:{preprocessData:function(e){return{tabs:n.map((function(o){return Object.assign({},o,e[o.id])}))}},getTab:function(e){var o=ns.Model.get("tab",{id:e});return o.isValid()?o:null},getTabs:function(){return this.models.slice()},adjustUnreadCounters:function(e){var o=this;Object.keys(e).forEach((function(t){var n=o.getTab(t);n&&n.adjustUnreadCount(e[t])}))}}})},1576:function(e,o){ns.Model.define("folder",{params:{fid:null},methods:{preprocessData:function(e){if(Daria.IS_CORP&&this.data){["new","count"].some((function(o){return this.get("."+o)!==e[o]}),this)&&this._messagesInvalidate()}return e},hasDataChanged:function(e){return!_.isEqual(this.getData(),e)},adjustUnreads:function(e){if(this.isValid()){var o=this.getUnreadsCount(),t=Math.max(o+e,0);t!==o&&(this.set(".new",t),this.setHasUnread(t>0))}},getParent:function(){var e=this.get(".parent_id");return e?ns.Model.get("folder",{fid:e}):null},getUnreadsCount:function(){return this.get(".new")},getSubfolders:function(){return this.get(".subfolder")},hasUnreads:function(){return this.getUnreadsCount()>0},hasUnreadsDeep:function(){return this.get(".has-unread")||this.hasUnreads()},hasNestingToggler:function(){var e=this.getSubfolders();if(!e||!e.length)return!1;var o=!0;if(ns.Model.get("settings").getSetting("hide_empty_folders")&&this.hasUnreads()){var t=!1;e.forEach((function(e){t=t||!ns.Model.get("folders").isIncoming(e)||ns.Model.get("folder",{fid:e}).hasUnreads()})),t||(o=!1)}return o},isFolded:function(){return this.get(".folded")},isOpen:function(){return this.get(".opened")},updateCounts:function(e){if(this.isValid()){var o={};if(_.isNumber(e.count)){var t=this.get(".count"),n=e.count;o.count=n-t,0!==o.count&&this.set(".count",n)}if(_.isNumber(e.new)){var r=this.getUnreadsCount(),i=e.new;if(o.new=i-r,0!==o.new){this.set(".new",i);var a=ns.Model.get("folders");a.spamOrTrash(this.params.fid)||a.adjustAllUnreads(o.new)}}return o}},recalcOpened:function(){var e=ns.Model.get("folders").isFolder(this.get(".fid"),"archive");if(Daria.areFoldersTabsEnabled()&&e)return void this.setIfChanged(".opened",!0);var o=this.getParent();if(o){var t=!0;o.isFolded()&&(t=!1),o.isOpen()||(t=!1),this.set(".opened",t),this._toggleSubfoldersOpened()}},setHasUnread:function(e){var o=e||this.hasUnreads();o||this.getSubfolders().forEach((function(e){var t=ns.Model.get("folder",{fid:e}).get(".has-unread");o=o||t})),this.setIfChanged(".has-unread",o);var t=this.getParent();t&&"inbox"!==t.get(".symbol")&&t.setHasUnread(e)},setRecent:function(){this.setIfChanged(".recent",!0)},switchFolded:function(e){var o=this.getData(),t=this.get(".fid");if(!this.getSubfolders().length)return!1;var n=ns.Model.get("folders"),r=n.getOpenedFolders(),i=o.folded;if(_.isBoolean(e)){if(e===i)return i;i=!e}return Jane.Array.remove(r,t),i?(this.set(".folded",!1),r.push(t)):this.set(".folded",!0),ns.Model.get("settings").setOpenedFolders(r),this._toggleSubfoldersOpened(),!i},_toggleSubfoldersOpened:function(){this.getSubfolders().forEach((function(e){ns.Model.get("folder",{fid:e}).recalcOpened()}))},_messagesInvalidate:function(){var e=this.params.fid;ns.page.current.params.current_folder!==e&&(ns.Model.invalidate("messages",(function(o){if(o.params.current_folder===e)return o.models.length&&o.models.forEach((function(e){ns.Model.get("messages",{thread_id:e.get(".tid")}).invalidate()})),!0})),ns.Model.invalidate("messages-item-state",(function(o){return o.params.current_folder===e})))}}})},1577:function(e,o){function t(e){return i(e)||r(e)||n()}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function r(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function i(e){if(Array.isArray(e)){for(var o=0,t=new Array(e.length);o<e.length;o++)t[o]=e[o];return t}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!(function(){function e(){return i.slice()}function o(e,t){var n=e[t.parent_id];return n.parent_id?o(e,n):n}var n={},r={inbox:i18n("%Folder_inbox"),sent:i18n("%Folder_sent"),trash:i18n("%Folder_trash"),spam:i18n("%Folder_spam"),draft:i18n("%Folder_draft"),outbox:i18n("%Folder_outbox"),template:i18n("%Folder_templates"),archive:i18n("%Folder_archive")},i=["draft","outbox","sent","spam","trash","template","archive","inbox"];n.getFolderById=function(e){return ns.Model.get("folder",{fid:e}).getData()},n.getFoldersByName=function(e){var o;return"object"===a(this.data)&&(o=_.find(this.data.folder,(function(o){return o.name===e}))),[o]},n.getSubfolders=function(e){return jpath(this.data,'.folder[.parent_id == "'+e+'"]')},n.isPresentAndNotShared=function(e){return Boolean(jpath(this.data,'.folder[.fid == "'+e+'" && !.shared ]').length)},n.getSubfoldersFid=function(e){return $.map(this.getSubfolders(e)||[],(function(e){return e.fid}))},n.getAllSubfoldersFid=function(e){return function e(o){for(var t=this.getSubfoldersFid(o),n=t.length;n--;)t=t.concat(e.call(this,t[n]));return t}.call(this,e)},n.getInboxFolders=function(){var e=this.get(".folder"),t=e[0].fid,n=e.reduce((function(e,o){return e[o.fid]=o,e}),{}),r=e.reduce((function(e,t){return e[t.fid]=t.parent_id?o(n,t).fid:t.fid,e}),{});return Object.keys(r).filter((function(e){return r[e]===t&&!n[e].shared}))},n.spamOrTrash=function(e){return this.isFolder(e,["trash","spam"])},n.isIncoming=function(e){return!this.isFolder(e,["draft","outbox","sent","spam","trash","template","archive"])},n.isSystemFolder=function(o){var t=this.getFolderById(o);return!!t&&(!t.user&&this.isFolder(o,e()))},n.isSystemFolderChild=function(o,t){var n=this,r=this.getFolderById(o);if(!r||!r.user||this.isSystemFolder(o))return!1;var i=e(),a="function"==typeof t?i.filter(t):i;return!!a.length&&a.some((function(e){return n.hasChildByFid(n.getFidBySymbol(e),o)}))},n.getDroppableListFid=function(){var e=this,o=$.grep(this.get(".folder"),(function(o){return e.isDroppable(o.fid)}));return o=$.map(o,(function(e){return e.fid}))},n.getMoveFoldersFid=function(e){if(!this.isDraggable(e))return[];var o=this.getDroppableListFid(),t=this.getAllSubfoldersFid(e);return t=t.concat(e),o=$.grep(o,(function(e){return-1===$.inArray(e,t)}))},n.comparePosition=function(e,o){var t=!e.symbol&&e.user,n=!o.symbol&&o.user,r=e.name.toLowerCase(),i=o.name.toLowerCase(),a=e.folder_options.position,s=o.folder_options.position,l=t?a:1e12+Number(e.order||0),d=n?s:1e12+Number(o.order||0);return"inbox"===e.symbol&&(l=-1),"inbox"===o.symbol&&(d=-1),l<d?-1:l>d?1:r<i?-1:r>i?1:0},n.getNeighborFids=function(e){var o=e&&this.getFolderById(e);if(!o)return[];var t;return t=o.parent_id?this.getSubfolders(o.parent_id):$.grep(this.get(".folder"),(function(e){return!e.parent_id&&e.user&&!e.symbol})),t.sort(this.comparePosition),$.map(t,(function(e){return e.fid}))},n.getParentFid=function(e){var o=e&&this.getFolderById(e);return o&&o.parent_id||this.getFolderBySymbol("inbox").fid},n.getTopParent=function(e){for(var o=this.getFolderById(this.getParentFid(e));o&&!o.symbol;)o=this.getFolderById(this.getParentFid(o.fid));return o},n.isDroppable=function(e){var o=e&&this.getFolderById(e);if(!o)return!1;var t=this.getTopParent(e);return!(!t||"inbox"!==t.symbol)&&(o.user&&!o.symbol&&!o.shared||"inbox"===o.symbol)},n.isDraggable=function(e){var o=e&&this.getFolderById(e);if(!o)return!1;var t=this.getTopParent(e);return!(!t||"inbox"!==t.symbol)&&(o.user&&!o.symbol&&!o.shared)},n.moveIn=function(e,o){var t=$.Deferred();if(e===o)return t.resolve("donot"),t.promise();var n=this.getFolderById(e),r=this.getParentFid(e),i=this.getFolderById(o);if(!n||!i)return t.reject("notfound"),t.promise();if(!this.isDraggable(e)||!this.isDroppable(o))return t.reject("noaccess"),t.promise();if(r===o)return t.resolve("donot"),t.promise();var a;a=o?this.getSubfolders(o):$.grep(this.get(".folder"),(function(e){return!e.parent_id}));for(var s=0;s<a.length;s++)if(a[s].name===n.name)return t.reject("nameduplicate"),t.promise();return this.getFolderBySymbol("inbox").fid===o&&(o=0),ns.forcedRequest([{id:"do-folder-move",params:{fid:e,parent_id:o}},{id:"folders"}]).then((function(){t.resolve("ok")}),(function(){t.reject("actionerror")})),t.promise()},n.moveAfter=function(e,o){var t=$.Deferred();if(e===o)return t.resolve("donot"),t.promise();var n=this.getFolderById(e);if(!n||!$.isPlainObject(n.folder_options))return t.reject("notfound"),t.promise();if(!this.isDraggable(e))return t.reject("noaccessfid"),t.promise();var r,i=$({}),a=this;if(o){if(!this.isDroppable(o))return t.reject("noaccessover"),t.promise();var s=this.getParentFid(e),l=this.getParentFid(o);if(s!==l)i.queue((function(o){a.moveIn(e,l).done(o).fail(t.reject)}));else if(r=this.getNeighborFids(e),$.inArray(e,r)===$.inArray(o,r)+1)return t.resolve("donot"),t.promise()}else if(r=this.getNeighborFids(e),0===$.inArray(e,r))return t.resolve("donot"),t.promise();return i.queue((function(){ns.forcedRequest([{id:"do-folder-set-options",params:{fid:e,prev:o||0}},{id:"folders"}]).then((function(){t.resolve("ok");var n=a.getNeighborFids(o||e),r=$.inArray(e,n),i=$.inArray(o,n);(o&&r!==i+1||!o&&0!==r)&&Jane.ErrorLog.send({event:"folders.move.position",status:"position_error",fid:e+":"+a.getFolderById(e).folder_options.position,overFid:o+":"+a.getFolderById(o).folder_options.position})}),(function(){t.reject("actionerror")}))})),t.promise()},n.moveBefore=function(e,o){var t=$.Deferred(),n=this.getNeighborFids(o),r=n[$.inArray(o,n)-1];if(r)this.moveAfter(e,r).done(t.resolve).fail(t.reject);else{var i=$({}),a=this,s=this.getParentFid(o);i.queue((function(o){a.moveIn(e,s).done(o).fail(t.reject)})),i.queue((function(){a.moveAfter(e,!1).done(t.resolve).fail(t.reject)}))}return t.promise()},n.getCount=function(e){var o=this.getFolderById(e);return o?o.count:null},n.getUnreadCount=function(e){var o=e?this.getFolderById(e):this.data;return o?Number(o.new):null},n.getFoldersHash=function(){var e=this.getData(),o={};return e&&$.each(e.folder,(function(){o[this.fid]=0})),o},n.isShared=function(e){var o=this.getFolderById(e);return Boolean(o&&o.shared)},n.getDefaultFolderName=function(e){return r[e]},n.setSymbol=function(e,o){var t=[{id:"do-folder-set-symbol",params:{fid:e,symbol:o}},{id:"folders"}];return ns.forcedRequest(t).then((function(e){var t=Vow.promise(),n=e[1].getFolderBySymbol(o);return n?(ns.events.trigger("daria:mFolders:symbolSet",n),t.fulfill(n)):t.reject(new Error(Daria.supplant("Symbol {symbol} was not set on folder",{symbol:o}))),t}))},n.isArchive=function(e){var o=this.getFolderById(e);return!!o&&"archive"===o.symbol},n.getCountUserFolders=function(){return jpath(this.data,".folder[.user]").length},n.createArchiveFolder=function(){var e,o=this,t=o.getFolderBySymbol("archive"),n=o.getFoldersByName("Archive").shift(),r="Archive"!==i18n("%Folder_archive")?o.getFoldersByName(i18n("%Folder_archive")).shift():null,i=Vow.promise();return t||n||r?t||!n&&!r?i.fulfill(t):n?i=o.setSymbol(n.fid,"archive"):r&&(e=[{id:"do-folder-rename",params:{fname:"Archive",fid:r.fid}},{id:"folders"}],i=ns.forcedRequest(e).then((function(){return o.setSymbol(r.fid,"archive").fail((function(){}))}))):(e=[{id:"do-folders-add",params:{folder_name:"Archive"}},{id:"folders"}],i=ns.forcedRequest(e).then((function(e){var o=Vow.promise(),t=e[1],n=t.getFolderByName("Archive");return n&&n.fid?o.fulfill(n):o.reject("New folder has no fid"),o})).then((function(e){return o.setSymbol(e.fid,"archive").fail((function(){}))}))),i},n.getHierarchyStructure=function(e,o){function n(o){var t=[];o=o.sort(r.comparePosition);for(var a=0;a<o.length;++a){var s=o[a];_.isFunction(e)&&!e(s)||(s=_.clone(s),s.subfolder&&(s.items=n(s.subfolder.map(i))),delete s.subfolder,delete s.parent_id,t.push(s))}return t}var r=this,i=this.getFolderById.bind(this),a=this.get(".folder");_.find(a,{symbol:"inbox"}).items=n(_.filter(a,(function(e){return e.user&&!e.parent_id})));var s=_.filter(a,(function(e){return!e.user&&!e.parent_id})),l=n(s,!0);if(o){var d=_.findIndex(l,{symbol:"inbox"}),u=l[d].items,c=s.slice(0,d),f=s.slice(d+1);l=[].concat(t(c),t(u),t(f))}return l},n.logDragndropAbility=function(){for(var e=this.get(".folder"),o=0,t=0,n=e.length;t<n;t++)if(this.isDraggable(e[t].fid)&&++o>1)return void Jane.c("Drag-n-drop","Драгндроп папок","Показ папок в инбоксе (больше 1, драг разрешен)")},ns.Model.define("folders",{split:{items:".folder",params:{fid:".fid"},model_id:"folder"},methods:$.extend({_ids:{},_symbols:{},_cacheBySymbol:{},preprocessData:function(e){this._hasUserFolders=!1,this._hasNestedFolders=!1;for(var o=ns.page.current.params.current_folder,t={},n={},i={},a=e.folder,s={},l=this._getOpenedFolders(e),d=0,u=a.length;d<u;d++){var c=a[d],f=c.fid,m=c.symbol;s[f]=c;var p=o&&f!==o,h=this.getFolderById(f),g=h&&c.count!==h.count;p&&g&&Daria.messages.clearCacheByFID(f),m&&(m in r&&(c.name=r[m]),t[m]=f,n[m]=c,i[f]=m),!this._hasUserFolders&&c.user&&(this._hasUserFolders=!0),this._hasNestedFolders||!c.user&&!c.parent_id||(this._hasNestedFolders=!0),c.subfolder.length>0?c.folded=!_.includes(l,f):c.folded=!1,c.opened=!0;var v=Daria.areFoldersTabsEnabled()&&"archive"===c.symbol;if(c.parent_id&&!v){var b=s[c.parent_id];b.folded&&(c.opened=!1),b.opened||(c.opened=!1)}}return this._ids=t,this._cacheBySymbol=n,this._symbols=i,this.toggleMarkFolders(e),e},_getOpenedFolders:function(e){return ns.Model.get("settings").hasSetting("folders_open")?this._getOpenedFoldersFromSettings():this._getOpenedFoldersFromData(e)},_getOpenedFoldersFromSettings:function(){var e=ns.Model.get("settings").getSetting("folders_open");return e?e.split(","):[]},_getOpenedFoldersFromData:function(e){var o=[];return e.folder.forEach((function(e){"inbox"!==e.symbol&&"draft"!==e.symbol||o.push(e.fid),e.subfolder.length&&Array.prototype.push.apply(o,e.subfolder)})),_.uniq(o)},getOpenedFolders:function(){return this._getOpenedFolders(this.data)},symbols:function(){return this._ids},ids:function(){return this._symbols},hasUserFolders:function(){return this._hasUserFolders},hasNestedFolders:function(){return this._hasNestedFolders},getFolderByName:function(e,o){var t,n=this.getData();if(n){var r;o||(r=this.getFidBySymbol("inbox")),t=_.find(n.folder,(function(t){return t.name===e&&(o?t.parent_id===o:!t.parent_id||t.parent_id===r)}))}return t},getFolderBySymbol:function(e){return this._cacheBySymbol[e]},getFidBySymbol:function(e){return this._ids[e]},isFolder:function(e,o){if(!e)return!1;Array.isArray(o)||(o=[o]);for(var t=0,n=o.length;t<n;t++){var r=o[t];if(this._ids.hasOwnProperty(r)&&e===this._ids[r])return!0}return!1},isCurrentFolder:function(e){return this.isFolder(ns.page.current.params.current_folder,e)},createTemplateFolder:function(){var e,o=Vow.promise(),t=this.getFolderBySymbol("template"),n=this.getFidBySymbol("draft"),i=this.getSubfolders(n),a=_.find(i,(function(e){return"template"===e.name})),s=_.find(i,(function(e){return e.name===r.template}));return t||a||s?t||!a&&!s?o.fulfill(t):a?o=this.setSymbol(a.fid,"template"):s&&(e=[{id:"do-folder-rename",params:{fname:"template",fid:s.fid,parent_id:n}},{id:"folders"}],o=ns.forcedRequest(e).then(function(){return this.setSymbol(s.fid,"template")}.bind(this))):(e=[{id:"do-folders-add",params:{folder_name:"template",parent_id:n}}],o=ns.forcedRequest(e).then(function(e){var o=e[0];return this.setSymbol(o.getFid(),"template")}.bind(this))),o},adjustUnreadCounters:function(e){var o=!1,t=0;for(var n in e){var r=ns.Model.get("folder",{fid:n});r.adjustUnreads(e[n]),-1===["spam","trash"].indexOf(r.get(".symbol"))&&(t+=e[n],o=!0)}return o&&this.adjustAllUnreads(t),o},toggleMarkFolders:function(e){var o={};$.each(jpath(e,".folder[.parent_id && !.subfolders]"),(function(t,n){var r,i=0;do{if(n=r?jpath(e,'.folder[.fid == "'+r+'"]')[0]:n,"inbox"===n.symbol)return!0;if(i+=Number(n.new),r in o)return!0;i?(n["has-unread"]=!0,o[n.fid]=1):n["has-unread"]=!1,r=n.parent_id}while(r)}))},hasChildByFid:function(e,o){var t=this.getFolderById(e),n=t&&t.subfolder?t.subfolder:[],r=0!==n.length&&n.indexOf(o)>-1,i=this;return _.forEach(n,(function(e){r=r||i.hasChildByFid(e,o)})),r},adjustAllUnreads:function(e){var o=this.get(".new"),t=Math.max(o+e,0);o!==t&&this.set(".new",t)}},n)})})()},1578:function(e,o){ns.Model.define("messages-filters",{events:{"ns-model-init":"_onInit","ns-model-destroyed":"_onDestroy"},ctor:function(){this._onPageBeforeLoad=this._onPageBeforeLoad.bind(this)},methods:{_onInit:function(){this.setData({}),this._onLoad(ns.page.current.params),ns.events.on("ns-page-before-load",this._onPageBeforeLoad)},_onDestroy:function(){ns.events.off("ns-page-before-load",this._onPageBeforeLoad)},_onPageBeforeLoad:function(e,o){this._onLoad(o[1].params)},_onLoad:function(e){var o,t=ns.Model.get("labels"),n=e.current_label===t.getImportantLID();o=e.important||n?"important":e.attachments?"attachments":e.unread?"unread":"inbox";var r=ns.Model.get("labels").getWaitingForReplyLabel();e.current_label&&e.current_label===r.lid&&(o="wait"),this.setIfChanged(".filter",o)}}},ns.ModelStatic)},1579:function(e,o){ns.Model.define("label",{events:{"ns-model-changed.count":"_onChangedCount"},params:{lid:null},methods:{_onChangedCount:function(){if(this.data&&this.data.hasOwnProperty("unused")){var e=this.get(".count");this.setIfChanged(".unused",!e,{silent:!0})}}}})},1580:function(e,o){!(function(){ns.Model.define("labels",{split:{items:".label",params:{lid:".lid"},model_id:"label"},methods:{_cacheByLid:{},_cacheByName:{},_cacheUserLabelsByName:{},LABEL_PINNED_SYMBOL_NAME:"pinned_label",LABEL_MUTE_SYMBOL_NAME:"mute_label",preprocessData:function(e){return this._cacheByName={},this._cacheUserLabelsByName={},this._cacheByLid={},this.sortLabels(e.label),e.label.forEach((function(e){var o,t=e.name,r=n[t];r?("dating"===r?o=i18n("%Labels_Social_Label_Datingsite"):"groupon"===r?o=i18n("%Labels_Social_Label_Grouponsite"):"yasupport"===r?(o=i18n("%Labels_Social_Label_Yasupport"),e.yaservice=!0):"videoletter"===r?(o=i18n("%Labels_Social_Label_Videoletter"),e.yaservice=!0):"eticket"===r?o=i18n("%Labels_Social_Label_Eticket"):t.indexOf("ya")>-1||"moikrug"===t?(o=i18n("%Labels_Social_Label_Yandex",r),e.yaservice=!0):o=i18n("%Labels_Social_Label",r),e.social=!0,e.title=o):(e.user&&e.name.length>15&&(e.name=e.name.substr(0,15)+"…"),delete e.social),"important_label"===e.symbolicName&&(e.name=i18n("%Labels_Important"))})),e},sortLabels:function(e){var o=ns.Model.get("settings").getSetting("label_sort");o&&e.sort(r[o])},getSOLabelName:function(o){var t=this.getLabelById(o);return t&&t.name&&0===t.name.indexOf(e)?t.name:null},getImportantLID:function(){var e=this.getLabelBySymbolicName("important_label");return e?e.lid:null},getPriorityLID:function(){var e=this.getLabelBySymbolicName("hamon_label");return e?e.lid:null},getLIDByName:function(e){var o=this.getLabelByName(e);return o?o.lid:null},getLabelById:function(e){return ns.Model.get("label",{lid:e}).getData()},getLabelBySymbolicName:function(e){if(!this._cacheByLid.hasOwnProperty(e)){var o=_.find(this.models,(function(o){return o.get(".symbolicName")===e}));o&&(this._cacheByLid[e]=o.getData())}return this._cacheByLid[e]},getLabelByName:function(e){if(!this._cacheByName.hasOwnProperty(e)&&!this._cacheUserLabelsByName.hasOwnProperty(e)){var o=_.find(this.models,(function(o){return o.get(".name")===e}));o&&(this._cacheByName[e]=o.getData())}return this._cacheByName[e]||this._cacheUserLabelsByName[e]},getUserLabelByName:function(e){if(!this._cacheUserLabelsByName.hasOwnProperty(e)){var o=_.find(this.models,(function(o){return o.get(".user")&&o.get(".name")===e}));o&&(this._cacheUserLabelsByName[e]=o.getData())}return this._cacheUserLabelsByName[e]},adjustCounters:function(e){var o=!1;for(var t in e){var n=this.getLabelById(t);if(n){ns.Model.get("label",{lid:n.lid}).set(".count",n.count+e[t]),o=!0}}return o&&this.touch(),o},getLabelsHash:function(){var e={};return this.models.forEach((function(o){var t=o.getData();t.lid&&(t.user||t.default)&&!t.social&&!("deleted"===t.name&&t.default)&&(e[t.lid]=0)})),e},getUserLabelsCount:function(){var e=0;return this.models.forEach((function(o){o.get(".user")&&e++})),e},isSocial:function(e){var o=this.getLabelById(e);return Boolean(o&&"social"in o)},getWaitingForReplyLabel:function(){return this.getLabelByName(o)},getDelayedMessageLabel:function(){return this.getLabelByName(t)},getPinnedLabel:function(){return this.getLabelBySymbolicName(this.LABEL_PINNED_SYMBOL_NAME)},canShowEventWidget:function(e){var o=this;return!e.some((function(e){var t=o.getLabelById(e);return t&&"not_show_widget_event"===t.name}))},getMuteThreadLabel:function(){return this.getLabelBySymbolicName(this.LABEL_MUTE_SYMBOL_NAME)},hasUnusedUserLabels:function(){return this.models.some((function(e){return e.get(".user")&&e.get(".unused")}))}}});var e="SystMetkaSO:",o="remindme_threadabout:mark",t="delayed_message",n={yaru:"Я.ру",yandexfotki:"Яндекс.Фотки",yandexvideo:"Яндекс.Видео",yadirect:"Яндекс.Директ",yacards:"Яндекс.Открытки",yamarket:"Яндекс.Маркет",yanarod:"Яндекс.Народ",yaauto:"Яндекс.Авто",yacal:"Яндекс.Календарь",yasupport:"yasupport",yamoney:"Яндекс.Деньги",yandexmusic:"Яндекс.Музыка",yandexwiki:"Яндекс.Вики",yasitesearch:"Яндекс.Поиск",yaxml:"Яндекс.XML",yawebmaster:"Яндекс.Вебмастер",yabetatest:"Яндекс.Бета",yadisk:"Яндекс.Диск",videoletter:"videoletter",moikrug:"Мой Круг",jira:"jira",yandexcom:"Yandex",yandexru:"Яндекс",yandexcomtr:"Yandex",atushka:"atushka",odnoklassniki:"Odnoklassniki.ru",vtnrf0okru:"Odnoklassniki.ru",liveinternet:"Liveinternet.ru",livejournal:"Livejournal.com",vkontakte:"VK.com",vtnrf0vkcom:"VK.com",facebook:"Facebook.com",friendfeed:"Friendfeed.com",habrahabr:"Habrahabr.ru",mirtesen:"Mirtesen.ru",twitter:"Twitter.com",headhunter:"HeadHunter.ru",ozonru:"Ozon.ru",fotostrana:"Fotostrana.ru",subscribe:"Subscribe.ru",mnogoru:"Mnogo.ru",executive:"E-xecutive.ru",myspace:"Myspase.com",youtube:"Youtube.com",professionali:"Professionali.ru",rutube:"Rutube.ru",pingadmin:"Ping-admin.ru",markafoni:"Markafoni.com",yonja:"Yonja.com",formspring:"Formspring.me",oley:"Oley.com",stumbleupon:"Stumbleupon.com",vedomostiru:"Ведомости","yves-rocherru":"yves-rocher.ru",workua:"Work.ua",wordpresscom:"Wordpress",womanjournalru:"wmj.ru",vshtate:"vshtate.ru",vkrugudruzei:"vkrugudruzei",victoriassecretcom:"Victoria's Secret",topshopru:"TOPSHOP",superjob:"SuperJob.ru",smartresponderru:"smartresponder.ru",skyperu:"skype.com",ottoru:"otto.ru",molotokru:"molotok.ru",mcafeecom:"McAfee.com",linkedin:"Linkedin",lamodaru:"lamoda.ru",geometriaru:"Geometria.ru",futuretodayru:"FutureToday.ru",freelance:"Free-lance.ru",evernoteru:"Evernote.com",dissercatcom:"disserCat.com",bookingcom:"Booking.com",b2bcenterru:"B2B-Center.ru",applecom:"Apple.com","24open":"24open",datingsite:"dating",vtnrf0datingsite:"dating",grouponsite:"groupon","4square":"foursquare.com",allegropl:"allegro.pl",darudarorg:"darudar.org",ebaycom:"ebay.com",forum2x2ru:"forum2x2.ru",gideparkru:"gidepark.ru",joobleru:"jooble.ru",justclickru:"JustClick.ru",kolizeoru:"kolizeo.ru",newsprofipostorg:"profi-post.org",newsquickofficecom:"Quickoffice.com",servicegirlsgogamesru:"GirlsgoGames.ru",tradesu:"trade.su",biznesbombaru:"biznesbomba.ru",gate32ru:"gate-32.ru",specservercom:"specserver.com",butikru:"butik.ru",pcdaysru:"pcdays.ru","7yaru":"7ya.ru",info74ru:"info74.ru",floridecorru:"floridecor.ru",allsoftru:"allsoft.ru",forumhouseru:"forumhouse.ru",shopdeluxeru:"shopdeluxe.ru",loccitaneru:"loccitane.ru",emeacom:"ea.com",yarabota:"Яндекс.Работа",yarealty:"Яндекс.Недвижимость",vtnrf024open:"24open.ru",vtnrf04square:"Foursquare",vtnrf07yaru:"7я.ру",vtnrf0afyru:"AFY.ru",vtnrf0allegropl:"Аллегро",vtnrf0allsoftru:"Allsoft",vtnrf0applecom:"Apple",vtnrf0aukroua:"Aukro.ua",vtnrf0avitoru:"AVITO.ru",vtnrf0b2bcenterru:"В2В-Center",vtnrf0beonru:"BeOn",vtnrf0bigbuzzyru:"groupon",vtnrf0biznesbombaru:"Biznesbomba",vtnrf0bookingcom:"Booking.com",vtnrf0burningmancom:"BurningMan.com",vtnrf0busuucom:"busuu.com",vtnrf0butikru:"Бутик.ру",vtnrf0chocolifeme:"Chocolife.me",vtnrf0crewardscom:"crewards.com",vtnrf0darudarorg:"Дару-дар",vtnrf0dealextremecom:"DealExtreme",vtnrf0diaryru:"Diary.ru",vtnrf0dissercatcom:"DisserCat.com",vtnrf0drimmicom:"Drimmicom",vtnrf0ebaycom:"Ebay",vtnrf0emeacom:"EA.com",vtnrf0emirates:"Emirates",vtnrf0evernoteru:"Evernote",vtnrf0executive:"Executive",vtnrf0facebook:"Facebook",vtnrf0floridecorru:"Флор&Декор",vtnrf0formspring:"Formspring",vtnrf0forum2x2ru:"2x2",vtnrf0forumhouseru:"Хост.ру",vtnrf0freelance:"Freelance",vtnrf0friendfeed:"Friendfeed",vtnrf0futuretodayru:"Futuretoday",vtnrf0gate32ru:"Gate32",vtnrf0geometriaru:"Geometria",vtnrf0getresponsecom:"Getresponse.com",vtnrf0gideparkru:"Гайдпарк",vtnrf0githubcom:"Github.com",vtnrf0googlegroupscom:"Google groups",vtnrf0googlecom:"Google",vtnrf0grouponsite:"groupon",vtnrf0gurboyru:"groupon",vtnrf0habrahabr:"Хабрахабр",vtnrf0headhunter:"HH.ru",vtnrf0imnicamailcom:"Imnica mail",vtnrf0info74ru:"Инфо74",vtnrf0infobonprixde:"Bonprix",vtnrf0internetprosru:"Интернет опрос",vtnrf0iskusnitsaru:"Искусница",vtnrf0jobsmarketru:"Jobsmarket.ru",vtnrf0joobleru:"Joobler.u",vtnrf0justclickru:"Just Click",vtnrf0kolizeoru:"KOLIZEO.ru",vtnrf0lamodaru:"Lamoda.ru",vtnrf0linkedin:"Linkedin",vtnrf0liveinternet:"LiveInternet",vtnrf0livejournal:"Livejournal",vtnrf0loccitaneru:"L'occitane",vtnrf0mailluxaleru:"Luxale",vtnrf0markafoni:"Markafoni",vtnrf0mcafeecom:"McAfee",vtnrf0mirtesen:"Мир Тесен",vtnrf0mnogoru:"MNOGO.ru",vtnrf0moikrug:"Мой Круг",vtnrf0molotokru:"Молоток.ру",vtnrf0myfantru:"groupon",vtnrf0myspace:"MY SPACE ",vtnrf0notifyastrostarru:"Астростар.ру",vtnrf0oley:"Oley",vtnrf0ottoru:"Oтто.ру",vtnrf0ozonru:"Озон.ру",vtnrf0pathcom:"Path.com",vtnrf0paypalcom:"PayPal.com",vtnrf0pcdaysru:"PC Days",vtnrf0pingadmin:"Ping-Admin.Ru",vtnrf0professionali:"Профессионалы",vtnrf0quelleinforu:"Quelle",vtnrf0quickofficecom:"Quickoffice",vtnrf0radiomarketru:"Радио Маркет",vtnrf0rdwru:"Работа для Вас",vtnrf0regru:"reg.ru",vtnrf0rutube:"Rutube",vtnrf0servicegirlsgogamesru:"GirlsgoGames",vtnrf0skyperu:"Skype.ru",vtnrf0smartresponderru:"SmartResponder",vtnrf0specservercom:"specserver.com",vtnrf0sprashivairu:"Спрашивай.ру",vtnrf0stumbleupon:"Stumbleupon",vtnrf0subscribe:"Subscribe",vtnrf0superjob:"Superjob",vtnrf0teszveszhu:"teszves",vtnrf0topshopru:"Топ-Шоп.ру",vtnrf0tradesu:"TRADE.SU",vtnrf0twitter:"twitter",vtnrf0vabankcom:"vabank.com",vtnrf0vedomostiru:"Ведомости",vtnrf0victoriassecretcom:"Victoria's secret",vtnrf0vkrugudruzei:"В кругу друзей ",vtnrf0vshtate:"В Штате",vtnrf0wmjru:"Womanjournal",vtnrf0wordpresscom:"Wordpress",vtnrf0workua:"Work.ua",vtnrf0yangutucom:"Yangutu",vtnrf0yonja:"Yonja",vtnrf0youtube:"Youtube","vtnrf0yves-rocherru":"Yves Rocher",vtnrf07vetrovmskru:"7 Ветров",vtnrf0anketkaru:"Анкетка.ру",vtnrf0askfm:"Ask.fm",vtnrf0aviasalesru:"Aviasales.ru",vtnrf0babyblogru:"БебиБлог",vtnrf0babyru:"бэби.ру",vtnrf0bio4freecom:"Bio4free.com",vtnrf0chingoraclecom:"Chingoracle.com",vtnrf0dotnewsru:"Dotnews.ru",vtnrf0edarlingru:"Edarling.ru",vtnrf0finance1ru:"Finance1.ru",vtnrf0fxcluborg:"Forex club",vtnrf0gamenetru:"GameNet",vtnrf0horoscopofreecom:"Horoscopofree.com",vtnrf0jobru:"Job.ru",vtnrf0kissesru:"Kisses.ru",vtnrf0liststarotaroru:"ТароТаро",vtnrf0liveexpertru:"Liveexpert.ru",vtnrf0livemasterru:"Livemaster.ru",vtnrf0malinaru:"Малина",vtnrf0mamsyru:"Mamsy.ru",vtnrf0meggymallru:"Meggy Mall",vtnrf0mithostru:"Mitinfo.ru",vtnrf0pokerstarscom:"PokerStars.com",vtnrf0prestigeua:"Prestige",vtnrf0probelovnet:"Пробелов.Нет",vtnrf0promenadru:"Promenad",vtnrf0qualitynetua:"Quality.net",vtnrf0rabotaua:"Rabota.ua",vtnrf0rugionru:"RUgion",vtnrf0sapatoru:"Sapato.ru",vtnrf0slandoru:"Slando.ru",vtnrf0softkeyru:"Softkey.ru",vtnrf0stilagoinfo:"Emailvision",vtnrf0taggedmailcom:"Tagged",vtnrf0theboutiqueru:"Boutique.ru",vtnrf0topfacecom:"Topface",vtnrf0torrnadoru:"torrНадо.ru",vtnrf0transportlineru:"TransportLine",vtnrf0trudcom:"Trud.com",vtnrf0westwingru:"Westwing",vtnrf0wildberriesru:"Wildberries",vtnrf0wmmailru:"Wmmail.ru",vtnrf0worldoftanksru:"World of Tanks",vtnrf0yourclotheseu:"Boutique.ru"},r={by_abc:function(e,o){return e instanceof ns.Model&&(e=e.getData()),o instanceof ns.Model&&(o=o.getData()),e.name.toLowerCase().localeCompare(o.name.toLowerCase())||e.user-o.user},by_count:function(e,o){return e instanceof ns.Model&&(e=e.getData()),o instanceof ns.Model&&(o=o.getData()),e.user||o.user?o.count-e.count||r.by_abc(e,o):-1}}})()},1581:function(e,o){ns.Model.define("labels-state",{events:{"ns-model-init":"_onInit"},methods:{_onInit:function(){this.setData({isVisibleUnused:!1})},toggleVisibleUnused:function(){this.set(".isVisibleUnused",!this.isVisibleUnused())},isVisibleUnused:function(){return this.get(".isVisibleUnused")}}},ns.ModelStatic)},1582:function(e,o){ns.Model.define("scroller-left",{events:{"ns-model-init":"clean"},methods:{EVENT_NAME:"daria:vScrollerLeft:scroll",_getScroller:function(){return Daria.is2pane()?$(window):$(".js-scroller-left")},getScrollOffset:function(){return 30}}},"scroller-common")},1583:function(e,o){ns.Model.define("scroller-left-block",{events:{"ns-model-init":"clean"},methods:{EVENT_NAME:"daria:vScrollerLeftBlock:scroll",getScrollOffset:function(){return 126},_getScroller:function(){return $(".js-aside-scroll-container")},isNodeVisibleInViewport:function(e){var o=this.getVDimensions(),t=e.position().top+o.top,n=e.height()+t;return t>=o.top&&n<=o.bottom}}},"scroller-common")},1584:function(e,o){ns.Model.define("do-collector-remove",{params:{popid:null,fids:null}})},1585:function(e,o,t){t(1586),t(1587),t(1588),t(1589),t(1590),t(1591),t(1592),t(1593),t(1594),t(1595),t(1596),t(1597),t(1598),t(1599),t(1600),t(1601),t(1602),t(1603),t(1604),t(1605),t(1606),t(1607),t(1608),t(1609),t(1610),t(1611),t(1612),t(1613),t(1614),t(1615)},1586:function(e,o){ns.View.define("left-col-setup-focus-mixin",{methods:{getFocusableChildren:function(){return[this]},onFocusEvent:function(e){switch(e.type){case"focus":this.focusOn();break;case"blur":this.focusOff();break;case"enter":this.focusAction()}},focusOn:function(){this.$node.find(".js-left-col-setup-focus-target").addClass("is-focused")},focusOff:function(){this.$node.find(".js-left-col-setup-focus-target").removeClass("is-focused")}}})},1587:function(e,o){!(function(){var e=Daria.getCookie("broken_collector");ns.ViewCollection.edefine("collectors",{models:{collectors:{"ns-model-changed":"forceUpdate","ns-model-insert":"onCollectorsListChanged","ns-model-remove":"onCollectorsListChanged","ns-model-destroyed":"onCollectorsListChanged"},"collector-settings":!0,settings:{"ns-model-changed":!1,"ns-model-changed.no_collectors_promo":"invalidate"}},split:{byModel:"collectors",intoViews:function(e){return!!e.get(".email")&&"collectors-item"}},events:{"ns-view-htmlinit":"onHtmlInit","ns-view-show":"onShow","ns-view-hide":"onHide","daria:vCollectors:log@show":"_log","daria:vCollectors:setBrokenCollectorCookie@show":"_setBrokenCollectorCookie","daria:vCollectors:showPopupAboutCreate@show":"_showPopupAboutCreate","daria:vCollectors:update@show":"forceUpdate"},yateModule:"left",methods:{Metrika:"Промо сборщиков",onShow:function(){this._cmBaseBindMenuableElements({$node:this.$node,selector:".js-context-menu-target"})},onHide:function(){this._cmBaseUnbindMenuableElements()},onHtmlInit:function(){var o=this.$node.find(".js-collector-unactive"),t=o.first().next();this.$warnings=o.next(),t.length&&(e?this.$warnings.removeClass("g-hidden").each((function(){Jane.c(["Left column","Broken collector","show stripe on the left"])})):window.setTimeout((function(){ns.action.run("collector.warning",t)}),100))},onCollectorsListChanged:function(){this.invalidate(),this.forceUpdate()},_log:function(o,t){e?Jane.c(["Left column","Broken collector","click on stripe",t]):Jane.c(["Left column","Broken collector",t])},_showPopupAboutCreate:function(e,o){this.update().then((function(){var e=this.$node.find('.js-collectors-item[data-email="'+o.email+'"]');if(e.length){var t=e.offset().top+e.height()/2-$(window).scrollTop();Daria.Dialog.open({title:i18n("%Collectors_Promo_ящик_добавлен_заголовок"),body:i18n("%Collectors_Promo_ящик_добавлен_тело",o.email),onTarget:{x:225,y:t,side:"left",pos:"bottom"},width:455})}}),this)},_setBrokenCollectorCookie:function(){this.$warnings.first().hasClass("g-hidden")&&(this.$warnings.removeClass("g-hidden").each((function(){Jane.c(["Left column","Broken collector","show stripe on the left"])})),Daria.setCookie("broken_collector","1",30),Daria.hasAsideScrollContainer()&&ns.Model.get("collectors").set(".collectorWarningData",null))},getFocusableChildren:function(){return Daria.nsTreeWalker.getViewsChildren(this)},canShowCollectorsPromo:function(){var e=this.getModel("settings"),o=this.getModel("collectors").getData(),t=Array.isArray(o)&&o.length;return!Daria.IS_CORP&&!t&&"on"!==e.getSetting("no_collectors_promo")},isIE:function(){return Boolean(Modernizr.ie11)}}},"context-menu-mixin-collectors",ns.ViewCollection)})()},1588:function(e,o){ns.View.define("collectors-item",{models:{collector:"keepValid","collector-settings":"keepValid"},params:{popid:null},yateModule:"left",methods:{onFocusEvent:function(e){switch(e.type){case"focus":this.focusOn();break;case"blur":this.focusOff();break;case"enter":this.open()}},open:function(){var e=this.getModel("collector").get(".info");ns.page.go(ns.router.generateUrl("messages",{request:e,scope:"rpopinfo",search:"search"}))},focusOn:function(){this.$node.find(".js-collectors-item").addClass("mail-CollectorsList-Item_focus")},focusOff:function(){this.$node.find(".js-collectors-item").removeClass("mail-CollectorsList-Item_focus")}}})},1589:function(e,o){ns.View.edefine("collectors-setup",{models:{collectors:"invalidate"},events:{"ns-view-show":"onInit"},yateModule:"left",methods:{onInit:function(){this.getModel("collectors").getCount()>0&&Jane.c("Left column","Collectors promo","Add mailbox","Show")},focusAction:function(){ns.page.go("#setup/collectors")}}},"left-col-setup-focus-mixin",ns.View)},1590:function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=t(549);ns.View.define("folder",{events:{"ns-view-init":"onInit","click@show .js-folder-mark-all-read":"onClickMarkAllRead","click@show .js-switch-open":"onClickSwitchFolded","click@show .js-folder-info-link":"onClickInfoLink"},models:{folder:{"ns-model-changed":"onFolderModelChanged","ns-model-changed.folded":"onFolderModelChanged"},settings:{"ns-model-changed":!1,"ns-model-changed.hide_empty_folders":"forceUpdate"}},yateModule:"left",methods:{onInit:function(){this._folderId=this.params.fid},onFolderModelChanged:function(e,o){if("ns-model-changed.folded"===e)return void this.$node.toggleClass("is-folded",this.getModel("folder").isFolded());".folded"!==o&&this.forceUpdate()},onClickSwitchFolded:function(){return this.switchFolded(),!1},onClickMarkAllRead:function(e){e.preventDefault(),e.stopPropagation(),nb.trigger("popup-close"),Daria.Dialog.close(),Object(n.a)(this._folderId,"прыщ"),ns.Model.get("settings").isSet("no_popup_mark_read")?Daria.Folder.markRead(this._folderId):this.showMarkAllReadPopup(this._folderId)},onClickInfoLink:function(e){ns.events.trigger("daria:vMessages:recalculate"),Object(n.a)(this._folderId,"каунтер непрочитанные"),e.stopPropagation()},showMarkAllReadPopup:function(e){var o={withoutTail:!0,autofocus:!0,autoclose:!0,where:this.$node,how:{my:"left bottom",at:"right-105px top"}};this._popup||(this._popup=nb.block(ns.renderNode({},"mark-all-as-read-dialog-popup","left")),this._popup.on("nb-closed",(function(){this.off("click .js-apply-mark-read"),this.off("click .js-cancel-mark-read"),this.off("click .js-always-mark-read")}))),this._popup.on("click .js-apply-mark-read",this.onMarkAllAsReadPopupApply.bind(this,e)),this._popup.on("click .js-cancel-mark-read",this.onMarkAllAsReadPopupCancel.bind(this)),this._popup.open(o),this._popup.$node.find("input[name=js-always-mark-all-read]").prop("checked",!1)},onMarkAllAsReadPopupApply:function(e){this._popup.$node.find("input[name=js-always-mark-all-read]").prop("checked")&&ns.Model.get("settings").setSettingOn("no_popup_mark_read"),e&&Daria.Folder.markRead(e),this._popup.close()},onMarkAllAsReadPopupCancel:function(){this._popup.close()},switchFolded:function(){this.getModel("folder").switchFolded()},open:function(){ns.page.go(ns.router.generateUrl("messages",{current_folder:this.params.fid}))},onFocusEvent:function(e){switch(e.type){case"focus":this.focusOn();break;case"blur":this.focusOff();break;case"space":this.switchFolded();break;case"enter":this.open()}},focusOn:function(){this.$node.addClass("mail-FolderList-Item_focus")},focusOff:function(){this.$node.removeClass("mail-FolderList-Item_focus")},getParentReferenceParams:function(){var e=ns.Model.get("folder",{fid:this._folderId});if(e){var o=e.getParent();return o&&o.isFolded()?{params:{fid:o.params.fid}}:void 0}}}})},1591:function(e,o){ns.View.edefine("user-folder",{models:{folder:{"ns-model-changed":"onFolderModelChanged","ns-model-changed.folded":"onFolderModelChanged"},settings:{"ns-model-changed":!1,"ns-model-changed.hide_empty_folders":"forceUpdate"}},yateModule:"left"},"folder",ns.View)},1592:function(e,o){ns.View.edefine("system-folder",{models:{folder:{"ns-model-changed":"onFolderModelChanged","ns-model-changed.folded":"onFolderModelChanged"},settings:{"ns-model-changed":!1,"ns-model-changed.hide_empty_folders":"forceUpdate"}},yateModule:"left"},"folder",ns.View)},1593:function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=t(549);!(function(){ns.ViewCollection.edefine("folders",{models:{folders:{"ns-model-changed":"forceUpdate"},settings:{"ns-model-changed":"keepValid","ns-model-changed.folders_open":"forceUpdate","ns-model-changed.hide_empty_folders":"forceUpdate"}},split:{byModel:"folders",intoLayouts:function(e){var o=this.getModel("settings"),t=e.get(".symbol");if("outbox"===t&&0===e.get(".count"))return!1;if(!e.isOpen())return!1;if(o.isSet("hide_empty_folders")){return!(!_.includes(["inbox","draft","outbox","sent","template","trash","spam","archive"],t)&&!e.hasUnreadsDeep())&&"common-folder-layout"}return"common-folder-layout"}},events:{"ns-view-htmldestroy":"_onNsViewHtmldestroy","ns-view-hide":"_onNsViewHide","ns-view-show":"_onNsViewShow","ns-view-touch":"_onNsViewTouch","daria:folders.move:done@show":"_onUpdate","daria:vFolders:update@show":"_onUpdate","daria:folder-remove-done@show":"_onUpdate","dragndrop.dragenter@show":"_onDragEnter","dragndrop.drop@show":"_onDrop","click@show .js-folders-item":"_onClickFoldersItem","ns-page-after-load@show":"_onPageAfterLoad"},yateModule:"left",methods:{CLASS_CURRENT:"mail-NestedList-Item_current",CLASS_UPDATED:"mail-NestedList-Item_updated",CLASS_CLOSED:"is-folded",CLASS_JS_NESTING:"js-folders-nesting",CLASS_JS_NESTING_INBOX:"js-folders-nesting-inbox",CLASS_JS_ITEM:"js-folders-item",CLASSES_FOLDERS_GROUP:"mail-FolderList mail-NestedList js-folders",CLASS_FAKE_FOLDER_GROUP:"mail-FolderList_fake",_onNsViewShow:function(){this._cmBaseBindMenuableElements({$node:this.$node,selector:"."+this.CLASS_JS_ITEM})},_onNsViewHide:function(){this._cmBaseUnbindMenuableElements()},_onNsViewHtmldestroy:function(){this.focus&&(this.focus.destroy(),this.focus=null)},_onNsViewTouch:function(){var e=ns.page.current.params,o=this._getFolderIdByParams(e);if(this.selected&&this.selected!==o&&this._getItemNodeByFid(this.selected).removeClass(this.CLASS_CURRENT),o){var t=this.getModel("folders");this._getItemNodeByFid(o).addClass(this.CLASS_CURRENT).removeClass(this.CLASS_UPDATED);var n=t.getFolderById(o);n&&ns.Model.get("reset-unvisited",{fid:n.fid}).resetUnvisited().then((function(e){e&&"recent"in n&&delete n.recent})),this.selected=o,ns.events.trigger("daria:vFolder:changed")}},_getItemNode:function(e){return $(e).closest("."+this.CLASS_JS_ITEM)},_getItemNodeByFid:function(e){return this.$node.find(".fid-"+e)},_onClickFoldersItem:function(e){var o=$(e.currentTarget).hasClass(this.CLASS_CURRENT),t=String($(e.currentTarget).data("fid"));return o&&Object(n.b)("current user folder","click"),Object(n.a)(t,"click"),!!Daria.is3pane()||(!Daria.messages.params4SimplePath(ns.page.current.params)||(o&&ns.page.go(Daria.Page.generateUrl.closeMessage()),o||ns.events.trigger("daria:vFolders:folder-transition"),!0))},_onDragEnter:function(e,o){var t=this._getItemNode(o.currentTarget);this._timer=setTimeout((function(){t.removeClass(this.CLASS_CLOSED),ns.Model.get("folder",{fid:o.fid}).switchFolded(!1)}),300)},_onDrop:function(){this._timer&&clearTimeout(this._timer)},_onUpdate:function(){this.forceUpdate()},_getFolderIdByParams:function(e){var o,t=this.getModel("folders");if(!e.search){if("message"===ns.page.current.page&&e.ids)o=ns.Model.get("message",{ids:e.ids}).getFolderId();else if(Daria.isComposePage()&&e.ids){var n=ns.Model.get("message",{ids:e.ids}).getFolderId(),r=Daria.array2obj([t.getFidBySymbol("outbox"),t.getFidBySymbol("draft"),t.getFidBySymbol("template")]);n in r&&(o=n)}else o=e.current_folder;if(Daria.is3pane()&&!o){var i=e.ids||e.thread_id;i&&(o=ns.Model.get("message",{ids:i}).getFolderId())}return o}},getFocusableChildren:function(){return Daria.nsTreeWalker.getViewsChildren(this)},_logTransitionToFolder:function(e){Daria.monitoring.journal("open",{target:"folder",fid:e.get(".fid"),fidName:e.get(".name"),isUserFolder:e.get(".user")})},_onPageAfterLoad:function(){var e=ns.page.current.params,o=e.current_folder,t=e.tabId,n=ns.page.currentUrl===Daria.Page.referrerUrl,r=Daria.areFoldersTabsEnabled()&&t;if(!n&&o&&!r){var i=ns.Model.get("folder",{fid:o});i.isValid()&&this._logTransitionToFolder(i)}}}},"context-menu-mixin-folders",ns.ViewCollection)})()},1594:function(e,o){!(function(){ns.ViewCollection.define("user-folders",{models:{folders:{"ns-model-changed":"forceUpdate"},settings:{"ns-model-changed":"keepValid","ns-model-changed.folders_open":"forceUpdate","ns-model-changed.hide_empty_folders":"forceUpdate"}},events:{"user-folders-folded":"forceUpdate","ns-view-htmldestroy":"_onNsViewHtmldestroy","ns-view-hide":"_onNsViewHide","ns-view-show":"_onNsViewShow","ns-view-touch":"_onNsViewTouch","click@show .js-folders-item":"_onClickFoldersItem","daria:folders.move:done@show":"_onUpdate","daria:vFolders:update@show":"_onUpdate","daria:folder-remove-done@show":"_onUpdate","dragndrop.dragenter@show":"_onDragEnter","dragndrop.drop@show":"_onDrop","ns-page-after-load@show":"_onPageAfterLoad"},split:{byModel:"folders",intoLayouts:function(e){return!(!e.isOpen()||!this.shouldShowAsUserFolder(e))&&(!(this.getModel("settings").isSet("hide_empty_folders")&&!e.hasUnreadsDeep())&&"user-folder-layout")}},methods:{shouldShowAsUserFolder:function(e){if(!e.isValid())return!1;var o=this.getModel("folders"),t=e.get(".fid");return e.get(".user")&&o.hasChildByFid(o.getFidBySymbol("inbox"),t)&&!o.isFolder(t,"archive")},_onDragEnter:function(e,o){if(o.fid){var t=ns.Model.get("folder",{fid:o.fid});this.shouldShowAsUserFolder(t)&&this.super_._onDragEnter(e,o)}},_logTransitionToFolder:function(e){this.shouldShowAsUserFolder(e)&&this.super_._logTransitionToFolder(e)}},yateModule:"left"},"folders")})()},1595:function(e,o){ns.View.define("user-folders-switcher",{models:{folders:{"ns-model-changed":"keepValid","ns-model-remove":"forceUpdate","ns-model-insert":"forceUpdate"}},events:{"ns-view-show":"onShow","ns-view-hide":"onHide",click:"onUserFoldersSwitch"},ctor:function(){this._bindedForceUpdate=this.forceUpdate.bind(this),this._isInFocus=!1},methods:{_FOCUS_CLASS:"is-focused",onShow:function(){this._getInboxFolder().on("ns-model-changed.folded",this._bindedForceUpdate)},onHide:function(){this._getInboxFolder().off("ns-model-changed.folded",this._bindedForceUpdate)},onUserFoldersSwitch:function(e){return e.preventDefault(),this.toggleUserFoldersFolding(),ns.events.trigger("user-folders-folded",{isFolded:this.isFoldersFolded()}),!1},toggleUserFoldersFolding:function(){this._getInboxFolder().switchFolded()},isFoldersFolded:function(){return this._getInboxFolder().isFolded()},getUserFoldersCount:function(){var e=this.getModel("folders");return e.getAllSubfoldersFid(e.getFidBySymbol("inbox")).length},getFocusableChildren:function(){return[this]},onFocusEvent:function(e){switch(e.type){case"focus":this.focusOn();break;case"blur":this.focusOff();break;case"space":this.toggleUserFoldersFolding()}},focusOn:function(){this.$node.addClass(this.getFocusClass()),this._isInFocus=!0},focusOff:function(){this.$node.removeClass(this.getFocusClass()),this._isInFocus=!1},isInFocus:function(){return this._isInFocus},getFocusClass:function(){return this._FOCUS_CLASS},_getInboxFolder:function(){return ns.Model.get("folder",{fid:this.getModel("folders").getFidBySymbol("inbox")})}},yateModule:"left"})},1596:function(e,o){!(function(){ns.ViewCollection.define("system-folders",{models:{folders:{"ns-model-changed":"forceUpdate"},settings:{"ns-model-changed":"keepValid","ns-model-changed.folders_open":"forceUpdate","ns-model-changed.hide_empty_folders":"forceUpdate"}},events:{"ns-view-htmldestroy":"_onNsViewHtmldestroy","ns-view-hide":"_onNsViewHide","ns-view-show":"_onNsViewShow","ns-view-touch":"_onNsViewTouch","click@show .js-folders-item":"_onClickFoldersItem","daria:folders.move:done@show":"_onUpdate","daria:vFolders:update@show":"_onUpdate","daria:folder-remove-done@show":"_onUpdate","dragndrop.dragenter@show":"_onDragEnter","dragndrop.drop@show":"_onDrop","ns-page-after-load@show":"_onPageAfterLoad"},split:{byModel:"folders",intoLayouts:function(e){var o=this.getModel("folders"),t=e.get(".fid");if(!e.isOpen()||!this.shouldShowAsSystemFolder(e))return!1;if(o.isFolder(t,"outbox")&&0===e.get(".count"))return!1;var n=this.getModel("settings"),r=o.isSystemFolder(t);return!(n.isSet("hide_empty_folders")&&!e.hasUnreadsDeep()&&!r)&&"system-folder-layout"}},methods:{shouldShowAsSystemFolder:function(e){if(!e.isValid())return!1;var o=this.getModel("folders"),t=e.get(".fid"),n=["inbox"],r=o.isFolder(t,"archive")||o.isSystemFolder(t)&&!o.isFolder(t,n),i=!r&&o.isSystemFolderChild(t,(function(e){return-1===n.indexOf(e)}));return r||i},_onDragEnter:function(e,o){if(o.fid){var t=ns.Model.get("folder",{fid:o.fid});this.shouldShowAsSystemFolder(t)&&this.super_._onDragEnter(e,o)}},_logTransitionToFolder:function(e){this.shouldShowAsSystemFolder(e)&&this.super_._logTransitionToFolder(e)}},yateModule:"left"},"folders")})()},1597:function(e,o){ns.View.edefine("folders-setup",{yateModule:"left",models:{settings:{"ns-model-changed":"keepValid","ns-model-changed.show_folders_tabs":"invalidate"}},events:{"ns-view-show":"onShow","ns-view-hide":"onHide","click .js-folders-setup-add":"addFolder"},ctor:function(){this._bindedForceUpdate=this.forceUpdate.bind(this)},methods:{onShow:function(){this._getInboxFolder().on("ns-model-changed.folded",this._bindedForceUpdate)},onHide:function(){this._getInboxFolder().off("ns-model-changed.folded",this._bindedForceUpdate)},focusAction:function(){this.addFolder()},addFolder:function(){ns.action.run("folders.add",{"only-create":1})},_getInboxFolder:function(){var e=ns.Model.get("folders");return ns.Model.get("folder",{fid:e.getFidBySymbol("inbox")})},isInboxFolded:function(){return this._getInboxFolder().isFolded()},getFocusableChildren:function(){return Daria.areFoldersTabsEnabled()&&this.isInboxFolded()?[]:[this]}}},"left-col-setup-focus-mixin",ns.View)},1598:function(e,o){ns.View.define("messages-filters",{models:{"messages-filters":!0},yateModule:"left"})},1599:function(e,o){ns.View.define("messages-filters-metrics-mixin",{events:{click:"sendMetricOnClick","ns-view-show":"sendMetricOnShow"},methods:{sendMetricOnShow:Daria.memoizeMetricsById([],(function(){return this.__uniqueId}),(function(){return this.sendMetric("Show")})),sendMetricOnClick:function(){this.sendMetric("Click")},sendMetric:function(){for(var e,o=Daria.is2pane()?"2pane":"3pane",t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=Jane).c.apply(e,["Left column",o,"System labels",this.METRIC_NAME].concat(n))}}})},1600:function(e,o){ns.View.define("messages-filters-focus-mixin",{methods:{getFocusableChildren:function(){return[this]},onFocusEvent:function(e){switch(e.type){case"focus":this.focusOn();break;case"blur":this.focusOff();break;case"enter":this.open()}},focusOn:function(){this.$node.find(".js-labels-item").addClass("mail-LabelList-Item_focus")},focusOff:function(){this.$node.find(".js-labels-item").removeClass("mail-LabelList-Item_focus")}}})},1601:function(e,o){ns.View.edefine("messages-filters-wait",{models:{"messages-filters":!0,labels:{"ns-model-changed":"forceUpdate"},folders:{"ns-model-changed":"forceUpdate"}},yateModule:"left",methods:{METRIC_NAME:"Waiting for answer",open:function(){var e=ns.Model.get("labels"),o=e.getLabelByName("remindme_threadabout:mark");ns.page.go(ns.router.generateUrl("messages",{current_label:o.lid}))}}},"messages-filters-focus-mixin","messages-filters-metrics-mixin",ns.View)},1602:function(e,o){ns.View.edefine("messages-filters-important",{models:{"messages-filters":!0,labels:{"ns-model-changed":"forceUpdate"},folders:{"ns-model-changed":"forceUpdate"}},yateModule:"left",methods:{METRIC_NAME:"Important",open:function(){ns.page.go(ns.router.generateUrl("messages",{important:"important"}))}}},"messages-filters-focus-mixin","messages-filters-metrics-mixin",ns.View)},1603:function(e,o){ns.View.edefine("messages-filters-unread",{models:{"messages-filters":!0,labels:{"ns-model-changed":"forceUpdate"},folders:{"ns-model-changed":"forceUpdate"}},yateModule:"left",methods:{METRIC_NAME:"Unread",open:function(){ns.page.go(ns.router.generateUrl("messages",{unread:"unread"}))}}},"messages-filters-focus-mixin","messages-filters-metrics-mixin",ns.View)},1604:function(e,o){ns.View.edefine("messages-filters-attachments",{models:{"messages-filters":!0,labels:{"ns-model-changed":"forceUpdate"},folders:{"ns-model-changed":"forceUpdate"}},yateModule:"left",methods:{METRIC_NAME:"With attachments",open:function(){ns.page.go(ns.router.generateUrl("messages",{attachments:"attachments"}))}}},"messages-filters-focus-mixin","messages-filters-metrics-mixin",ns.View)},1605:function(e,o){ns.View.edefine("log-show-of-empty-labels-mixin",{methods:{_timerThatLogsShowOfEmptyLabels:null,logIfEmptyWithDelay:function(){0!==this.$node.find(".js-error-mode").length?this.startLogShowOfEmptyLabels():this.cancelLogShowOfEmptyLabels()},startLogShowOfEmptyLabels:function(){this._timerThatLogsShowOfEmptyLabels||(this._timerThatLogsShowOfEmptyLabels=setTimeout(this.logShowOfEmptyLabels.bind(this),1e4))},cancelLogShowOfEmptyLabels:function(){this._timerThatLogsShowOfEmptyLabels&&(clearTimeout(this._timerThatLogsShowOfEmptyLabels),this._timerThatLogsShowOfEmptyLabels=null)},logShowOfEmptyLabels:function(){this._timerThatLogsShowOfEmptyLabels=null,Jane.ErrorLog.send({errorType:"labels_show_empty"})}}})},1606:function(e,o){!(function(){ns.ViewCollection.edefine("labels",{models:{labels:{"ns-model-changed":"onModelLabelsChanged"},"labels-state":{"ns-model-changed":"keepValid","ns-model-changed.isVisibleUnused":"forceUpdate"}},split:{byModel:"labels",intoViews:function(e){if(e.get(".user")){var o=this.getModel("labels-state").isVisibleUnused();Daria.resize.isWithCompactLeftColumn&&(o=!1);var t=e.get(".lid")===ns.page.current.params.current_label;if(o||t||!o&&!e.get(".unused"))return"label"}return!1}},events:{"ns-view-show":"onShow","ns-view-hide":"onHide","daria:vLabels:update@show":"forceUpdate","daria:label-remove-done@show":"forceUpdate","ns-page-after-load@show":"_onPageAfterLoad"},yateModule:"left",methods:{onShow:function(){this._cmBaseBindMenuableElements({$node:this.$node,selector:".js-labels-item"}),this.logIfEmptyWithDelay()},onHide:function(){this._cmBaseUnbindMenuableElements(),this.cancelLogShowOfEmptyLabels()},onModelLabelsChanged:function(){var e=this.getModel("labels");e.sortLabels(e.models),this.forceUpdate()},getFocusableChildren:function(){return Daria.nsTreeWalker.getViewsChildren(this)},_onPageAfterLoad:function(){var e=ns.page.current.params.current_label,o=this.getModel("labels").getLabelById(e);if(!o)return null;Daria.monitoring.journal("open",{target:"label",lid:o.lid,lidName:o.name,isUserLabel:o.user})}}},"context-menu-mixin-labels","log-show-of-empty-labels-mixin",ns.ViewCollection)})()},1607:function(e,o){ns.View.define("label",{events:{"ns-page-after-load":"onAfterPageLoad"},models:{label:"forceUpdate"},params:{lid:null},yateModule:"left",methods:{onAfterPageLoad:function(){var e=ns.page.current.params,o=this.params.lid===e.current_label;this.$node.find(".js-labels-item ").toggleClass("is-checked",o)},onFocusEvent:function(e){switch(e.type){case"focus":this.focusOn();break;case"blur":this.focusOff();break;case"enter":this.open()}},open:function(){ns.page.go(ns.router.generateUrl("messages",{current_label:this.params.lid}))},focusOn:function(){this.$node.find(".js-labels-item").addClass("mail-LabelList-Item_focus")},focusOff:function(){this.$node.find(".js-labels-item").removeClass("mail-LabelList-Item_focus")}}})},1608:function(e,o){ns.View.edefine("labels-setup",{models:{labels:{"ns-model-changed":!1,"ns-model-remove":"forceUpdate"},"labels-state":!0},events:{"click .js-labels-setup-add":"addLabel","click@show .js-hidden-labels-toggler":"onClickHiddenLabelsToggler"},yateModule:"left",methods:{onClickHiddenLabelsToggler:function(){this.getModel("labels-state").toggleVisibleUnused()},focusAction:function(){this.addLabel()},addLabel:function(){ns.action.run("labels.add",{"only-create":1})}}},"left-col-setup-focus-mixin",ns.View)},1609:function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=t(325),r=t(353),i=t(337);ns.View.define("main-action-buttons",{models:{"abook-selected":!1},events:{"ns-view-show":"ajustElementsForStickyComposeButtons","click .js-main-action-compose":"onComposeClick","click .js-main-action-refresh":"onClickRefreshButton","toolbar.fixed":"ajustElementsForStickyComposeButtons","daria:vApp:changeLeftColumWidth@show":"ajustElementsForStickyComposeButtons","Daria:vToolbar:toggleVisibilityWithUnfoldedSearch":"toggleVisibilityStickyComposeButtons"},yateModule:"left",methods:{_getComposeButtonsContainer:function(){return this.$node.find(".js-compose-button-container")},_getResizeLeftColumnToggler:function(){return $(".js-layout-left-toggler")},_isMainToolbarHidden:function(){return $(".js-toolbar").hasClass("is-hidden")},_addUnfoldedSearchFlag:function(e){ns.Model.get("app-state").updatePageClasses({"with-unfolded-search":e})},toggleFixedLeftColumnToggler:function(){this._getResizeLeftColumnToggler().toggleClass("is-fixed",this._isMainToolbarFixed())},toggleFixedComposeButtons:function(){Daria.is2pane()&&this.$node.toggleClass("is-fixed",this._isMainToolbarFixed())},toggleVisibilityStickyComposeButtons:function(e,o){(Daria.CompactMode.isCompactHeader()||Daria.is2pane())&&this._addUnfoldedSearchFlag(o||this._isMainToolbarHidden())},isComposeButtonsScrolled:function(){return 0!==this._getScrollerModel().getScroller().scrollTop()},isMessagesListIn3paneScrolled:function(){return 0!==ns.Model.get("scroller-messages").getScroller().scrollTop()},_isMainToolbarFixed:function(){var e=ns.page.current.page;return ns.Model.get("toolbar",{layout:e}).isFixed()},_getScrollerModel:function(){var e=Daria.hasAsideScrollContainer()?"scroller-left-block":"scroller-left";return ns.Model.get(e)},ajustElementsForStickyComposeButtons:function(){this.toggleFixedComposeButtons(),this.setOptimalWidthForComposeButtons(),this.toggleFixedLeftColumnToggler(),this.setOptimalIndentForControlResizeLeftColumn(),this.toggleVisibilityStickyComposeButtons()},setOptimalWidthForComposeButtons:function(){this._isMainToolbarFixed()||Daria.is3pane()&&this.isComposeButtonsScrolled()?this._getComposeButtonsContainer().css("width","".concat(this.$node.closest(".js-layout-aside-inner-box").width())):this._getComposeButtonsContainer().css("width","auto")},setOptimalIndentForControlResizeLeftColumn:function(){if(Daria.is2pane()){var e=this._getResizeLeftColumnToggler();this._isMainToolbarFixed()?e.css("left","".concat($(".js-toolbar-wrap").offset().left-18,"px")):e.css("left","")}},onComposeClick:function(e){if(this._composeMetrika(),!(e.ctrlKey||e.metaKey&&Modernizr.mac)){if(Daria.isAbookPage()){e.preventDefault(),e.stopPropagation();var o=this.getModel("abook-selected");return Daria.COPS["abook.compose-go"](o)}Daria.isComposePage()&&(e.preventDefault(),e.stopPropagation(),ns.events.trigger("daria:vLeftColToolbar:composeClick")),i.a.startScenario(n.a,r.b)}},onClickRefreshButton:function(){this._scrollToTopWhileRefresh(),this._refreshMetrika()},_scrollMessagesToTop:function(e){ns.Model.get("scroller-messages").setScrollTop(0,e)},_scrollToTopWhileRefresh:function(){Daria.is2pane()?this._isMainToolbarFixed()&&this._scrollMessagesToTop(!1):(this.isComposeButtonsScrolled()&&this._getScrollerModel().setScrollTop(0,!0),this.isMessagesListIn3paneScrolled()&&this._scrollMessagesToTop(!0))},_composeMetrika:function(){Jane.ToolbarMetric.messagesListToolbar(null,"compose")},_refreshMetrika:function(){Jane.ToolbarMetric.messagesListToolbar(null,"check mail")}}})},1610:function(e,o){ns.View.edefine("skin-saver",{events:{"ns-view-show":"onShow","ns-view-hide":"onHide","ns-page-before-load@show":"onPageBeforeLoad","click .js-preview-skin":"togglePreviewMode","daria:vSkinSaver:rotateSkin@show":"forceUpdate"},models:{settings:{"ns-model-changed":"onSettingsChanged","ns-model-changed.color_scheme":"forceUpdate"},"skin-saver-state":{"ns-model-changed":!1,"ns-model-changed.previewMode":"forceUpdate"}},yateModule:"left",methods:{onShow:function(){var e=this.getModel("skin-saver-state");this.togglePageScroll(!e.isPreviewMode()),this.nbCheckbox=nb.$block(".js-save-skin",this.$node),this.nbCheckbox&&this.nbCheckbox.on("nb-changed",this.onCheckboxChange.bind(this))},onHide:function(){this.togglePageScroll(!0),this.nbCheckbox&&this.nbCheckbox.off("nb-changed")},togglePageScroll:function(e){["DOMMouseScroll","mousewheel","scroll"].forEach((function(o){window.removeEventListener(o,this.preventScroll),e||window.addEventListener(o,this.preventScroll)}),this)},preventScroll:function(e){e.stopPropagation(),e.preventDefault();var o=ns.Model.get("skin-saver-state"),t=o.get(".scrollTop");$("body").scrollTop(t)},onCheckboxChange:function(){var e=ns.Model.get("themes").getCurrentTheme();this.isSaved()?e.removeSavedSkin():(e.saveCurrentSkin(),Jane.c(["Выпадушка тем","оставить этот фон"]))},isSaved:function(){return ns.Model.get("themes").getCurrentTheme().currentSkinIsSaved()},togglePreviewMode:function(){var e=this.getModel("skin-saver-state"),o=!e.isPreviewMode();this.togglePageScroll(!o),e.set(".scrollTop",$("body").scrollTop()),e.togglePreviewMode(o),o&&Jane.c(["Выпадушка тем","показать фон"])},onSettingsChanged:function(e,o){o=o||"",/-skin$/.test(o)&&this.forceUpdate()},hasPreview:function(){return ns.Model.get("themes").getCurrentTheme().hasPreview()},getSkinText:function(){var e=ns.Model.get("themes").getCurrentTheme();if("love_is"!==e.get(".data.name"))return e.getSkinText()},onPageBeforeLoad:function(e,o){if(!_.isEqual(o[0],o[1])){var t=this.getModel("skin-saver-state");t.isPreviewMode()&&(t.togglePreviewMode(!1),window.history.forward())}}}})},1611:function(e,o){var t={attaches:"Attachments",default:"Inbox",news:"Maillists",social:"Social networks"};ns.View.edefine("tabs-metrics-mixin",{events:{click:"open"},methods:{sendMetric:function(e){var o=t[e];o&&Jane.c("Left column",Daria.is2pane()?"2pane":"3pane","Tabs list",o,"click/open")}}})},1612:function(e,o){ns.View.edefine("tab",{models:{tab:!0,folders:!1},methods:{onFocusEvent:function(e){switch(e.type){case"focus":this.focusOn();break;case"blur":this.focusOff();break;case"enter":this.open()}},open:function(){ns.page.go(ns.router.generateUrl("messages",{tabId:this.params.id})),this.sendMetric(this.params.id)},focusOn:function(){this.$node.addClass("mail-FolderList-Item_focus")},focusOff:function(){this.$node.removeClass("mail-FolderList-Item_focus")},getTabCounter:function(){var e=this.getModel("tab").get(".counters"),o=e.new,t=e.limit;return o<=0?0:o>=t?"".concat(t-1,"+"):o}},yateModule:"left"},"tabs-metrics-mixin",ns.View)},1613:function(e,o){ns.View.edefine("attachments-tab",{models:{"messages-filters":!0},events:{"ns-view-show":"onShow","ns-view-hide":"onHide","ns-page-after-load@show":"onPageAfterLoad"},yateModule:"left",methods:{getFocusableChildren:function(){return[this]},onFocusEvent:function(e){switch(e.type){case"focus":this.focusOn();break;case"blur":this.focusOff();break;case"enter":this.open()}},focusOn:function(){this.$node.find(".mail-Tabs-Item").addClass("mail-FolderList-Item_focus")},focusOff:function(){this.$node.find(".mail-Tabs-Item").removeClass("mail-FolderList-Item_focus")},open:function(){ns.page.go(ns.router.generateUrl("messages",{attachments:"attachments"}))},onPageAfterLoad:function(){var e=Daria.isAttachmentsTab(),o=ns.page.currentUrl===Daria.Page.referrerUrl;e&&!o&&(Daria.monitoring.journal("open",{target:"tab",tabId:"attachments"}),this.sendMetric("attaches"))}}},"tabs-metrics-mixin","context-menu-mixin-attachments-tab")},1614:function(e,o){ns.ViewCollection.edefine("tabs",{split:{byModel:"tabs",intoViews:"tab"},models:{tabs:!0,folders:!1},events:{"ns-view-show":"onShow","ns-view-hide":"onHide","ns-view-touch":"onViewTouch","ns-view-htmldestroy":"onHtmlDestroy","ns-page-after-load@show":"onPageAfterLoad"},ctor:function(){this.selectedTabId=null},methods:{CLASS_CURRENT:"mail-NestedList-Item_current",CLASS_JS_ITEM:"js-tabs-item",onShow:function(){this._cmBaseBindMenuableElements({$node:this.$node,selector:"."+this.CLASS_JS_ITEM})},onHide:function(){this._cmBaseUnbindMenuableElements()},onViewTouch:function(){var e=ns.page.current.params.tabId;this.selectedTabId&&this.selectedTabId!==e&&this._getItemNodeByTabId(this.selectedTabId).removeClass(this.CLASS_CURRENT),e&&this._getItemNodeByTabId(e).addClass(this.CLASS_CURRENT),this.selectedTabId=e},onHtmlDestroy:function(){this.focus&&(this.focus.destroy(),this.focus=null)},getFocusableChildren:function(){return Daria.nsTreeWalker.getViewsChildren(this)},open:function(){ns.page.go(ns.router.generateUrl("messages",{tabId:this.params.id}))},onFocusEvent:function(e){switch(e.type){case"focus":this.focusOn();break;case"blur":this.focusOff();break;case"enter":this.open()}},focusOn:function(){this.$node.addClass("mail-FolderList-Item_focus")},focusOff:function(){this.$node.removeClass("mail-FolderList-Item_focus")},onPageAfterLoad:function(){var e=ns.page.current.params.tabId;!(ns.page.currentUrl===Daria.Page.referrerUrl)&&e&&ns.Model.get("tabs").getTab(e)&&Daria.monitoring.journal("open",{target:"tab",tabId:e})},_getItemNodeByTabId:function(e){return this.$node.find(".js-tab-"+e)}},yateModule:"left"},"context-menu-mixin-tabs",ns.ViewCollection)},1615:function(e,o){function t(e,o){return i(e)||r(e,o)||n()}function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function r(e,o){var t=[],n=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(t.push(a.value),!o||t.length!==o);n=!0);}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return t}function i(e){if(Array.isArray(e))return e}ns.View.define("aside-scroll-container",{models:{"scroller-left-block":!1,collectors:{"ns-model-changed":"keepValid","ns-model-changed.collectorWarningData":"onChangeCollectorWarningData"},settings:{"ns-model-changed":"keepValid","ns-model-changed.size-layout-left":"onChangeColumnWidth"}},events:{"daria:vScrollerLeftBlock:scroll@show":"onLeftColumnScroll","daria:vApp:changeLeftColumWidth@show":"onChangeColumnWidth","daria:vFolder:changed":"changeLeftColumnHeight","ns-view-show":"onShow","ns-page-before-load":"scrollToCurrentFolderIfFolderChanged"},ctor:function(){this.changeLeftColumnHeight=_.debounce(this.changeLeftColumnHeight.bind(this),60)},methods:{ASIDE_CONTAINER_BIG_CLASS:"is-big",getFocusableChildren:function(){return Daria.nsTreeWalker.getViewsChildren(this)},onShow:function(){this.getModel("scroller-left-block").init(),this.onLeftColumnScroll()},getNextRouteParams:function(e,o){if(!o||!e)return null;if(Daria.areFoldersTabsEnabled()){var t=o.params.tabId,n=e.params.tabId;if(t&&t!==n)return{tabId:t}}var r=o.params.current_folder,i=e.params.current_folder;if(r&&r!==i)return{fid:r};var a=o.params.current_label,s=e.params.current_label;return a&&a!==s?{lid:a}:null},scrollToCurrentFolderIfFolderChanged:function(e,o){var n=t(o,2),r=n[0],i=n[1],a=this.getModel("collectors").getData().collectorWarningData;if(a&&a.node&&a.action)return void this.onChangeCollectorWarningData(e,{update:!0});var s=this.getNextRouteParams(r,i);s&&this.scrollToActiveFolder(s)},scrollToActiveFolder:function(e){e=e||{};var o=this.getModel("scroller-left-block"),t=this.getModel("collectors").getData().collectorWarningData;if(!t&&void 0===t){var n=null;if(e.fid?n=this.$node.find(".js-fid-".concat(e.fid)):e.tabId?n=this.$node.find(".js-tab-".concat(e.tabId)):e.lid&&(n=this.$node.find(".lid-".concat(e.lid))),n&&n.length){var r=o.getVDimensions(),i=n.position().top+r.top;if(!o.isNodeVisibleInViewport(n)){var a=i-o.getScrollOffset();o.setScrollTop(a,{animate:!0})}}}},onChangeColumnWidth:function(){this.changeLeftColumnHeight(),this.onLeftColumnScroll()},onLeftColumnScroll:function(){var e=this.$node.find(".mail-ScrollContainer-shadow_top"),o=this.$node.find(".mail-ScrollContainer-shadow_bottom");if(Daria.hasAsideScrollContainer()){var t=this.getModel("scroller-left-block").getScroller(),n=t[0].scrollHeight-t[0].clientHeight,r=0===t.scrollTop(),i=n===t.scrollTop()&&!r;e.toggleClass("visible",!r),o.toggleClass("visible",!i)}else e.removeClass("visible"),o.removeClass("visible")},changeLeftColumnHeight:function(e){if(Daria.hasAsideScrollContainer()){var o=this.$node;o.removeClass(this.ASIDE_CONTAINER_BIG_CLASS);var t=this.$node.closest(".js-mail-Page-Body");if(!t)return;var n=t.height();100*o.height()/n>70&&(o.addClass(this.ASIDE_CONTAINER_BIG_CLASS),this.onChangeCollectorWarningData(e,{update:!0}))}else this.$node.removeClass(this.ASIDE_CONTAINER_BIG_CLASS)},onChangeCollectorWarningData:function(e,o){o=o||{};var t=this.getModel("collectors").getData().collectorWarningData;if(t&&t.node&&t.action){var n=this.getModel("scroller-left-block");if(!o.update)return n.setScrollTop(n.getNodeTop(t.node),{animate:!0}),void t.action();n.isNodeVisibleInViewport($(t.node))?t.action():t.action(o.update)}}},yateModule:"left"})},192:function(e,o,t){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var n=t(1553);t.n(n);Jane.module("left.js",(function(){t(1554),t(1557),t(1558),t(1585)}))},325:function(e,o,t){"use strict";function n(e,o,t){return o in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}t.d(o,"a",(function(){return i})),t.d(o,"e",(function(){return a})),t.d(o,"c",(function(){return s})),t.d(o,"d",(function(){return l})),t.d(o,"f",(function(){return d})),t.d(o,"b",(function(){return u}));var r,i="compose-scenario",a="message-view-scenario",s="mark-as-read",l="mark-as-unread",d="search-scenario",u=(r={},n(r,i,"web_quality_metrics_log"),n(r,s,"web_quality_metrics_for_mark_mops"),n(r,l,"web_quality_metrics_for_mark_mops"),n(r,a,"web_quality_message_reading"),n(r,d,"web_quality_search"),r)},337:function(e,o,t){"use strict";var n=t(359);o.a=new n.a},345:function(e,o,t){"use strict";function n(e){for(var o=1;o<arguments.length;o++){var t=null!=arguments[o]?arguments[o]:{},n=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(o){r(e,o,t[o])}))}return e}function r(e,o,t){return o in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}function i(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function a(e,o){for(var t=0;t<o.length;t++){var n=o[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,o,t){return o&&a(e.prototype,o),t&&a(e,t),e}t.d(o,"a",(function(){return d})),t.d(o,"b",(function(){return u}));var l=t(325),d="Quality metrics log: ",u=(function(){function e(){i(this,e)}return s(e,null,[{key:"logStep",value:function(e,o,t){this.log(e,n({step:o},t))}},{key:"log",value:function(e,o){this.isLogDisabled(e.type)||(o=this._addSessionLifetime(o),Daria.debug.log(d,e,o),Daria.monitoring.scenario({scenario:e,params:o}))}},{key:"isLogDisabled",value:function(e){var o=l.b[e];return Boolean(o&&!Daria.hasFeature(o))}},{key:"_addSessionLifetime",value:function(e){var o=window.performance&&window.performance.now&&window.performance.now();return n({sessionLifetime:o?Math.floor(o):void 0},e)}}]),e})()},346:function(e,o,t){"use strict";t.d(o,"c",(function(){return n})),t.d(o,"b",(function(){return r})),t.d(o,"a",(function(){return i}));var n="start",r="finish",i="error"},353:function(e,o,t){"use strict";t.d(o,"c",(function(){return n})),t.d(o,"d",(function(){return r})),t.d(o,"b",(function(){return i})),t.d(o,"n",(function(){return a})),t.d(o,"k",(function(){return s})),t.d(o,"e",(function(){return l})),t.d(o,"h",(function(){return d})),t.d(o,"m",(function(){return u})),t.d(o,"j",(function(){return c})),t.d(o,"f",(function(){return f})),t.d(o,"g",(function(){return m})),t.d(o,"l",(function(){return p})),t.d(o,"i",(function(){return h})),t.d(o,"a",(function(){return g}));var n="default",r="direct-url",i="button-from-left-column",a="shortcut",s="reply-button-from-context-menu",l="forward-from-context-menu",d="forward-button-from-message-toolbar",u="reply-button-from-message-toolbar",c="reply-all-button-from-message-toolbar",f="forward-button-from-messages-toolbar",m="forward-button-from-message-body-toolbar",p="reply-button-from-message-body-toolbar",h="reply-all-button-from-message-body-toolbar",g="button-from-abook-popup"},359:function(e,o,t){"use strict";function n(e){for(var o=1;o<arguments.length;o++){var t=null!=arguments[o]?arguments[o]:{},n=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(o){r(e,o,t[o])}))}return e}function r(e,o,t){return o in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}function i(e,o){if(null==e)return{};var t,n,r=a(e,o);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],o.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}function a(e,o){if(null==e)return{};var t,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],o.indexOf(t)>=0||(r[t]=e[t]);return r}function s(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function l(e,o){for(var t=0;t<o.length;t++){var n=o[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,o,t){return o&&l(e.prototype,o),t&&l(e,t),e}t.d(o,"a",(function(){return m}));var u=t(345),c=t(346),f=t(360),m=(function(){function e(){s(this,e),this._logger=u.b,this._activeScenarios={}}return d(e,[{key:"startScenario",value:function(e,o){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.hasActiveScenario(e)&&Daria.debug.warn(u.a,'Scenario "',this.getActiveScenario(e),'" already started. ',o,t);var n=new f.a(e);return this._activateScenarioAndLogStart(n,e,o,t)}},{key:"startParallelScenario",value:function(e,o){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=new f.a(e);return this._activateScenarioAndLogStart(n,n.id,o,t)}},{key:"_activateScenarioAndLogStart",value:function(e,o,t,r){var a,s=r;return a=s.startTime,r=i(s,["startTime"]),e.setStartTime(a),this._setActiveScenario(o,e),this._logger.logStep(e,c.c,n({initiator:t},r)),e}},{key:"finishScenarioIfActive",value:function(e,o,t){if(this.hasActiveScenario(e)){var r=this.getActiveScenario(e).setFinishTime();this._removeActiveScenario(e),this._logger.logStep(r,c.b,n({finalizer:o},t))}}},{key:"finishScenario",value:function(e,o,t){if(!this.hasActiveScenario(e))return void Daria.debug.warn(u.a,'There is no active "'.concat(e,'" scenario. '),o,t);this.finishScenarioIfActive(e,o,t)}},{key:"hasActiveScenario",value:function(e){return Boolean(this.getActiveScenario(e))}},{key:"getActiveScenario",value:function(e){return this._activeScenarios[e]}},{key:"_setActiveScenario",value:function(e,o){return this._activeScenarios[e]=o}},{key:"_removeActiveScenario",value:function(e){delete this._activeScenarios[e]}}]),e})()},360:function(e,o,t){"use strict";function n(e){for(var o=1;o<arguments.length;o++){var t=null!=arguments[o]?arguments[o]:{},n=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(o){r(e,o,t[o])}))}return e}function r(e,o,t){return o in e?Object.defineProperty(e,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[o]=t,e}function i(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function a(e,o){for(var t=0;t<o.length;t++){var n=o[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,o,t){return o&&a(e.prototype,o),t&&a(e,t),e}t.d(o,"a",(function(){return c}));var l=t(123),d=(t.n(l),t(345)),u=t(346),c=(function(){function e(o){i(this,e),this.id=Object(l.uniqueId)(Daria.Config.connection_id+"_"),this.type=o}return s(e,[{key:"setStartTime",value:function(e){return this.startTime=Math.floor(e||Daria.now()),this}},{key:"getTimeFromStart",value:function(){return Math.floor(Daria.now()-this.startTime)}},{key:"setFinishTime",value:function(){return this.finishTime=Math.floor(Daria.now()),this}},{key:"logStep",value:function(e,o){d.b.log(this,n({step:e},o))}},{key:"logError",value:function(e,o){var t=e.type,r=e.severity;d.b.log(this,n({step:u.a,type:t,severity:r},o))}}]),e})()},549:function(e,o,t){"use strict";function n(){for(var e=arguments.length,o=new Array(e),t=0;t<e;t++)o[t]=arguments[t];Jane.c.apply(Jane,["Left column",Daria.is2pane()?"2pane":"3pane","Folders list"].concat(o))}function r(e,o){var t=ns.Model.get("folder",{fid:e}),r="";switch(t.get(".symbol")){case"inbox":r="inbox";break;case"outbox":r="outbox";break;case"spam":r="spam";break;case"sent":r="sent";break;case"trash":r="trash";break;case"draft":r="drafts";break;case"archive":r="archive";break;case"template":r="templates";break;default:return}n("system",r,o)}o.b=n,o.a=r}});