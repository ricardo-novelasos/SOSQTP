webpackJsonp([81],Array(133).concat([function(e,t,n){"use strict";function i(e,t){return s(e)||o(e,t)||r()}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function o(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}function s(e){if(Array.isArray(e))return e}function a(e){var t=e.keys().reduce((function(t,n){var r=e(n),o=r.viewBox.split(" ").slice(2),s=i(o,2),a=s[0],c=s[1],l=r.id.slice(0,-"-usage".length);return"".concat(t," .").concat(l," { width: ").concat(a,"px; height: ").concat(c,"px; }\n")}),""),n=document.getElementById("icon-styles");n&&(n.innerHTML+=t)}t.a=a},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1617),r=(n.n(i),n(133)),o=n(1618),s=n(1619);Jane.module("mail.js",(function(){n(1620),n(1621),n(1622),n(1623),n(1627),n(1628),n(1632),n(1633),n(1634),n(1635),n(1636),n(1637),n(1638),n(1639),n(1640),n(1641),n(1642),n(1644),n(1645),n(1646),n(1647),n(1648),n(1649),n(1650),n(1656),n(1657),n(1658),n(1659),n(1660),n(1661),n(1662),n(1663),n(1664),n(1670),n(1671),n(1672),n(1673),n(1674),n(1675),n(1677),n(1678),n(1679),n(1696),n(2042),n(2146),n(2147),n(2149),n(2150),n(2151),n(2212),n(2215),n(2216),n(2217),n(2218),n(2219),n(2220),n(2222),Daria.Statusline=Daria.React.initStatusline(),Daria.CompactMode=new o.a,Daria.MessagesLogger=new s.a,Object(r.a)(n(2491))}))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return c})),n.d(t,"f",(function(){return l})),n.d(t,"b",(function(){return u}));var r,o="compose-scenario",s="message-view-scenario",a="mark-as-read",c="mark-as-unread",l="search-scenario",u=(r={},i(r,o,"web_quality_metrics_log"),i(r,a,"web_quality_metrics_for_mark_mops"),i(r,c,"web_quality_metrics_for_mark_mops"),i(r,s,"web_quality_message_reading"),i(r,l,"web_quality_search"),r)},,,,,,,function(e,t,n){"use strict";var i=n(704);n.d(t,"a",(function(){return i.a}))},,,,function(e,t,n){"use strict";function i(e){var t=e.split("/");if(1===t.length)throw new Error('Invalid key: "'.concat(e,'"'));return{keyset:t[0],loc:t.slice(1).join("/")}}function r(e,t){var n=t.lang,r=e.loc?i(e.loc):{};r.lang=n;var s=Object.keys(e).reduce((function(t,o){switch(o){case"loc":return t;case"params":return Object.assign(r,e[o]),t;case"tag":case"children":return r[o]=e[o],t}if(/^loc-/.test(o)){var s=i(e[o]),c=o.slice(4);t[c]=a(n,s.keyset,s.loc,e["params-"+c])}else/^params-/.test(o)||(t[o]=e[o]);return t}),{}),l=r.tag||"span";return r.loc?(Object.keys(s).length&&(r.tag=function(e){return o.createElement(l,s,e.children)}),c(r)):o.createElement(l,s,e.children)}var o=n(318),s=n(317),a=n(518).getKey,c=n(1458);r.contextTypes={lang:s.string.isRequired},r.propTypes={loc:s.string,params:s.object,children:s.node},e.exports=r},function(e,t,n){"use strict";var i=n(359);t.a=new i.a},,function(e,t,n){"use strict";function i(){return Daria.isDevEnv()}function r(){return Boolean(Daria.Config.pddDomain)}function o(){return Daria.IS_CORP}function s(e){return Daria.hasFeature(e)}function a(e){return Daria.Page.isParamsForSearch(e)}function c(){return Daria.Config.NO_SETTINGS}function l(){return Daria.Config.locale}function u(){return Daria.suid}function d(){return Daria.uid}function f(){return Daria.urlParams}function g(){return Daria.UISettings.shouldShowCheckboxInsideUserpic()}function p(e){return e?Jane.Common.keyCode[e]:Jane.Common.keyCode}function h(){return Daria.shouldShowContextToolbar()}function m(e){Daria.toggleSearchAppMode(e)}function v(e){Daria.toggleVerticalScrollBar(e)}function _(){ns.events.trigger("head-tabs-recalculate")}function b(){ns.events.trigger("daria:vToolbarButton:restruct")}function y(){return Daria.hasRocksSuggest()}t.k=i,t.l=r,t.j=o,t.g=s,t.m=a,t.a=c,t.c=l,t.d=u,t.e=d,t.f=f,t.n=g,t.b=p,t.o=h,t.p=m,t.q=v,t.i=_,t.r=b,t.h=y},,,,function(e,t,n){"use strict";var i=n(721);n.d(t,"a",(function(){return i.a}))},function(e,t,n){e.exports=n.p+"_/d6db9b2a3473c3a8123e980333e3230f-b-mail-icon_error.png"},function(e,t,n){"use strict";function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){r(e,t,n[t])}))}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return u}));var c=n(325),l="Quality metrics log: ",u=(function(){function e(){o(this,e)}return a(e,null,[{key:"logStep",value:function(e,t,n){this.log(e,i({step:t},n))}},{key:"log",value:function(e,t){this.isLogDisabled(e.type)||(t=this._addSessionLifetime(t),Daria.debug.log(l,e,t),Daria.monitoring.scenario({scenario:e,params:t}))}},{key:"isLogDisabled",value:function(e){var t=c.b[e];return Boolean(t&&!Daria.hasFeature(t))}},{key:"_addSessionLifetime",value:function(e){var t=window.performance&&window.performance.now&&window.performance.now();return i({sessionLifetime:t?Math.floor(t):void 0},e)}}]),e})()},function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}));var i="start",r="finish",o="error"},,,,,,function(e,t,n){"use strict";var i=n(529),r=n.n(i),o=n(531);n.n(o);t.a=r.a},function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"n",(function(){return s})),n.d(t,"k",(function(){return a})),n.d(t,"e",(function(){return c})),n.d(t,"h",(function(){return l})),n.d(t,"m",(function(){return u})),n.d(t,"j",(function(){return d})),n.d(t,"f",(function(){return f})),n.d(t,"g",(function(){return g})),n.d(t,"l",(function(){return p})),n.d(t,"i",(function(){return h})),n.d(t,"a",(function(){return m}));var i="default",r="direct-url",o="button-from-left-column",s="shortcut",a="reply-button-from-context-menu",c="forward-from-context-menu",l="forward-button-from-message-toolbar",u="reply-button-from-message-toolbar",d="reply-all-button-from-message-toolbar",f="forward-button-from-messages-toolbar",g="forward-button-from-message-body-toolbar",p="reply-button-from-message-body-toolbar",h="reply-all-button-from-message-body-toolbar",m="button-from-abook-popup"},,,function(e,t,n){"use strict";var i=n(2283);n.d(t,"a",(function(){return i.a}))},function(e,t,n){e.exports=n.p+"_/a72b5b8760c083918ecb30ebd0e9cba9-attach_icon_audio.svg"},function(e,t,n){e.exports=n.p+"_/d73628f6e4ee5d8a5d62248e11081f79-attach_icon_img.svg"},function(e,t,n){"use strict";function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){r(e,t,n[t])}))}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(null==e)return{};var n,i,r=s(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function s(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}n.d(t,"a",(function(){return g}));var u=n(345),d=n(346),f=n(360),g=(function(){function e(){a(this,e),this._logger=u.b,this._activeScenarios={}}return l(e,[{key:"startScenario",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.hasActiveScenario(e)&&Daria.debug.warn(u.a,'Scenario "',this.getActiveScenario(e),'" already started. ',t,n);var i=new f.a(e);return this._activateScenarioAndLogStart(i,e,t,n)}},{key:"startParallelScenario",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new f.a(e);return this._activateScenarioAndLogStart(i,i.id,t,n)}},{key:"_activateScenarioAndLogStart",value:function(e,t,n,r){var s,a=r;return s=a.startTime,r=o(a,["startTime"]),e.setStartTime(s),this._setActiveScenario(t,e),this._logger.logStep(e,d.c,i({initiator:n},r)),e}},{key:"finishScenarioIfActive",value:function(e,t,n){if(this.hasActiveScenario(e)){var r=this.getActiveScenario(e).setFinishTime();this._removeActiveScenario(e),this._logger.logStep(r,d.b,i({finalizer:t},n))}}},{key:"finishScenario",value:function(e,t,n){if(!this.hasActiveScenario(e))return void Daria.debug.warn(u.a,'There is no active "'.concat(e,'" scenario. '),t,n);this.finishScenarioIfActive(e,t,n)}},{key:"hasActiveScenario",value:function(e){return Boolean(this.getActiveScenario(e))}},{key:"getActiveScenario",value:function(e){return this._activeScenarios[e]}},{key:"_setActiveScenario",value:function(e,t){return this._activeScenarios[e]=t}},{key:"_removeActiveScenario",value:function(e){delete this._activeScenarios[e]}}]),e})()},function(e,t,n){"use strict";function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){r(e,t,n[t])}))}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}n.d(t,"a",(function(){return d}));var c=n(123),l=(n.n(c),n(345)),u=n(346),d=(function(){function e(t){o(this,e),this.id=Object(c.uniqueId)(Daria.Config.connection_id+"_"),this.type=t}return a(e,[{key:"setStartTime",value:function(e){return this.startTime=Math.floor(e||Daria.now()),this}},{key:"getTimeFromStart",value:function(){return Math.floor(Daria.now()-this.startTime)}},{key:"setFinishTime",value:function(){return this.finishTime=Math.floor(Daria.now()),this}},{key:"logStep",value:function(e,t){l.b.log(this,i({step:e},t))}},{key:"logError",value:function(e,t){var n=e.type,r=e.severity;l.b.log(this,i({step:u.a,type:n,severity:r},t))}}]),e})()},,,,,,,function(e,t,n){"use strict";var i=n(2257);n.d(t,"b",(function(){return i.a}));var r=n(544);n.d(t,"a",(function(){return r.a}))},function(e,t,n){"use strict";var i=n(671);n.d(t,"a",(function(){return i.a}))},,,,,,,function(e,t,n){e.exports=n.p+"_/b421d41a9b5d6be87299c25b2c8c567b-attach_icon_video.svg"},function(e,t){e.exports={CLICK:"click",HOTKEY:"hotkey"}},function(e,t,n){"use strict";var i=n(2459);n.d(t,"a",(function(){return i.a}))},,,,,,,,,,,,,function(e,t,n){"use strict";function i(e,t,n){if(Object(o.k)()&&!e.errorType)throw new Error("Необходимо указать errorType при логировании ошибки");if(Object(o.k)()&&e.failIfPossible)throw e;Jane.ErrorLog.send(e,t,n)}function r(e){Object(o.k)()&&console.warn(e)}t.b=i,t.a=r;var o=n(339)},function(e,t,n){"use strict";function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){r(e,t,n[t])}))}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}n.d(t,"a",(function(){return l}));var c=n(328),l=(function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};o(this,e),this._cancel=null,this._cancel=Object(c.reaction)(t,n,i({name:this.constructor.name},r))}return a(e,[{key:"destroy",value:function(){}}]),a(e,[{key:"cancel",value:function(){this._cancel&&(this._cancel(),this._cancel=null,this.destroy())}}]),e})()},,,function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"b",(function(){return a})),n.d(t,"f",(function(){return c})),n.d(t,"a",(function(){return l}));var i=n(432),r={type:"opening-error-message-body",severity:i.a},o={type:"opening-error-messages",severity:i.a},s={type:"opening-error-message-nearest",severity:i.b},a={type:"view-error-img-error",severity:i.b},c={type:"view-error-translate",severity:i.b},l=(i.b,{type:"view-error-email-info",severity:i.c})},,,,,function(e,t,n){"use strict";var i=(n(352),n(532),n(533),n(368),n(536));n.d(t,"a",(function(){return i.a}));var r=(n(497),n(420));n.d(t,"b",(function(){return r.a}));var o=n(431);n.d(t,"c",(function(){return o.a}));n(429),n(537),n(332)},,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i=n(678);n.d(t,"a",(function(){return i.a}))},,,,function(e,t,n){"use strict";function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){r(e,t,n[t])}))}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function l(e,t,n,i,r){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n.d(t,"a",(function(){return x}));var u,d,f,g,p,h,m,v=n(328),_=n(123),b=n.n(_),y=b.a.defaults,S=b.a.pick,w=Object.freeze({scope:"",fid:"",lid:"",unread:null,attaches:null,from:null,to:null}),k=Object.keys(w),x=(u=m=(function(){function e(t){o(this,e),c(this,"currentSearchText",d,this),c(this,"currentSuggestText",f,this),c(this,"_advanced",g,this),c(this,"shouldShowCurrentSearchText",p,this),c(this,"resetAdvanced",h,this),this._isRocksSuggest=t}return a(e,[{key:"getAdvanced",value:function(e){switch(e){case"lid":return"yes"===this._advanced.unread?"unread":this._advanced.lid;case"attaches":return"yes"===this._advanced.attaches;default:return this._advanced[e]}}},{key:"setAdvanced",value:function(e,t){switch(e){case"lid":"unread"===t?(this._advanced.lid="",this._advanced.unread="yes"):(this._advanced.lid=t,this._advanced.unread=null);break;case"attaches":this._advanced.attaches=t?"yes":null;break;default:this._advanced[e]=t}}},{key:"updateAdvancedParams",value:function(e,t){var n=y(e,S(t,k),w);"yes"===n.unread?delete n.lid:delete n.unread;for(var i in n)this.setAdvanced(i,n[i])}},{key:"reset",value:function(){this.currentSearchText="",this.currentSuggestText="",k.forEach(this.resetAdvanced)}},{key:"getAutosearchParams",value:function(){return i({},this._advanced)}},{key:"isAdvancedDirty",get:function(){var e=this;return k.some((function(t){return("scope"!==t||"rpopinfo"!==e._advanced[t])&&e._advanced[t]!==w[t]}))}},{key:"isDefaultSuggest",get:function(){return!this.currentSuggestText&&!this.isAdvancedDirty}},{key:"paramsForSearch",get:function(){return e._omitEmpty(i({request:this.currentSearchText},this._advanced))}},{key:"paramsForSuggest",get:function(){return e._omitEmpty(i({"rocks-suggest":this._isRocksSuggest?"yes":"no",request:this.currentSuggestText},this._advanced))}}],[{key:"_omitEmpty",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={};for(var i in t)(e=t[i])&&"all"!==e&&(n[i]=e);return n}}]),e})(),d=l(u.prototype,"currentSearchText",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=l(u.prototype,"currentSuggestText",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),g=l(u.prototype,"_advanced",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return i({},w)}}),p=l(u.prototype,"shouldShowCurrentSearchText",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),l(u.prototype,"isAdvancedDirty",[v.computed],Object.getOwnPropertyDescriptor(u.prototype,"isAdvancedDirty"),u.prototype),l(u.prototype,"isDefaultSuggest",[v.computed],Object.getOwnPropertyDescriptor(u.prototype,"isDefaultSuggest"),u.prototype),l(u.prototype,"paramsForSearch",[v.computed],Object.getOwnPropertyDescriptor(u.prototype,"paramsForSearch"),u.prototype),l(u.prototype,"paramsForSuggest",[v.computed],Object.getOwnPropertyDescriptor(u.prototype,"paramsForSuggest"),u.prototype),l(u.prototype,"setAdvanced",[v.action],Object.getOwnPropertyDescriptor(u.prototype,"setAdvanced"),u.prototype),l(u.prototype,"updateAdvancedParams",[v.action],Object.getOwnPropertyDescriptor(u.prototype,"updateAdvancedParams"),u.prototype),l(u.prototype,"reset",[v.action],Object.getOwnPropertyDescriptor(u.prototype,"reset"),u.prototype),h=l(u.prototype,"resetAdvanced",[v.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.setAdvanced(t,w[t])}}}),u)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function s(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function a(e,t,n,i,r){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n.d(t,"a",(function(){return _}));var c,l,u,d,f,g,p,h,m,v=n(328),_=(c=m=(function(){function e(){i(this,e),s(this,"_isFolded",l,this),s(this,"_showSuggest",u,this),s(this,"_showAdvanced",d,this),s(this,"isAnimated",f,this),s(this,"currentShowText",g,this),s(this,"_highlightedSuggestItemIndex",p,this),s(this,"_lastSelectedSuggestItem",h,this)}return o(e,[{key:"getHighlightedSuggestItemIndex",value:function(){return this._highlightedSuggestItemIndex}},{key:"setHighlightedSuggestItemIndex",value:function(e){this._highlightedSuggestItemIndex=e}},{key:"getLastSelectedSuggestItem",value:function(){return this._lastSelectedSuggestItem}},{key:"setLastSelectedSuggestItem",value:function(e){this._lastSelectedSuggestItem=e}},{key:"resetCurrentSuggestItem",value:function(){this._highlightedSuggestItemIndex=-1,this._lastSelectedSuggestItem=null}},{key:"isFolded",get:function(){return this._isFolded},set:function(e){this._isFolded=e,this._isFolded&&(this._showSuggest=!1,this._showAdvanced=!1,this.resetCurrentSuggestItem())}},{key:"showSuggest",get:function(){return this._showSuggest},set:function(e){this._showSuggest=e,this._showSuggest&&(this._showAdvanced=!1)}},{key:"showAdvanced",get:function(){return this._showAdvanced},set:function(e){this._showAdvanced=e,this._showAdvanced&&(this._showSuggest=!1)}}]),e})(),l=a(c.prototype,"_isFolded",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),u=a(c.prototype,"_showSuggest",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d=a(c.prototype,"_showAdvanced",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),f=a(c.prototype,"isAnimated",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g=a(c.prototype,"currentShowText",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=a(c.prototype,"_highlightedSuggestItemIndex",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),h=a(c.prototype,"_lastSelectedSuggestItem",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),a(c.prototype,"setHighlightedSuggestItemIndex",[v.action],Object.getOwnPropertyDescriptor(c.prototype,"setHighlightedSuggestItemIndex"),c.prototype),a(c.prototype,"setLastSelectedSuggestItem",[v.action],Object.getOwnPropertyDescriptor(c.prototype,"setLastSelectedSuggestItem"),c.prototype),a(c.prototype,"resetCurrentSuggestItem",[v.action],Object.getOwnPropertyDescriptor(c.prototype,"resetCurrentSuggestItem"),c.prototype),c)},function(e,t,n){"use strict";n.d(t,"g",(function(){return i})),n.d(t,"e",(function(){return r})),n.d(t,"f",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"h",(function(){return a})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return u}));var i="go-to-compose",r="go-to-another-messages-list",o="go-to-another-page",s="additional-search",a="open-message",c="cancel-search-click",l="cancel-search-hotkey",u="empty-search"},,,function(e,t,n){"use strict";var i=n(665);n.d(t,"a",(function(){return i.a}))},,function(e,t,n){"use strict";var i=n(685),r=n.n(i),o=n(693);n.n(o);t.a=r.a},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o}));var i="blocker",r="critical",o="minor"},,,function(e,t,n){e.exports=n.p+"_/3f9ad2bd5a78e43bf79c34aa945ce7b2-attach_icon_archive.svg"},function(e,t,n){e.exports=n.p+"_/9ad0316223d31d7e674d1d8af56efd90-attach_icon_excel.svg"},function(e,t,n){e.exports=n.p+"_/7c14b89d6caa7791fc107bbf33fefabf-attach_icon_text.svg"},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e){return a(e)||s(e)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function s(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function a(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function d(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?g(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function v(e,t,n,i,r){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n.d(t,"a",(function(){return T}));var _,b,y,S,w=n(328),k=n(339),x=n(523),M=n(424),C=n(919),T=(_=S=(function(e){function t(){var e;return c(this,t),e=d(this,f(t).call(this)),m(g(e),"simplifiedParams",b,g(e)),m(g(e),"_suggestItems",y,g(e)),e._searchSessionId="",e._searchId="",e._showSearchResultsTimestamp=null,e._isRocksSuggest=Object(k.h)(),e.searchQuery=new M.a(e._isRocksSuggest),e}return p(t,e),u(t,[{key:"setSuggestItems",value:function(e,t){this._suggestItems=t?[].concat(r(this._suggestItems),r(e)):r(e)}},{key:"removeSuggestItem",value:function(e){var t=this._suggestItems.indexOf(e);t>=0&&this._suggestItems.splice(t,1)}},{key:"saveShowSearchResultsTimestamp",value:function(){this._showSearchResultsTimestamp=Date.now()}},{key:"getSuggestItemRelative",value:function(e,t){var n=this.suggestItems,i=e+t,r=null;return i<-1?i=n.length-1:i>=n.length&&(i=-1),i>-1&&(r=n[i]),{newIndex:i,newItem:r}}},{key:"getItemPosition",value:function(e){return this.suggestItems?this.suggestItems.indexOf(e):-1}},{key:"getSearchSessionId",value:function(){return this._searchSessionId||(this._searchSessionId=[Date.now(),Object(k.e)()].join("")),this._searchSessionId}},{key:"dropSearchSession",value:function(){this._searchSessionId=""}},{key:"getSearchId",value:function(){return this._searchId||this.generateSearchId(),this._searchId}},{key:"generateSearchId",value:function(){this._searchId=Math.random().toString().substr(2)}},{key:"suggestItems",get:function(){var e=this.searchQuery,t=this._suggestItems,n=Array.from(t);return this._isRocksSuggest&&n.length&&e.currentSuggestText.trim()&&n.push(new C.a({target:"show-all-results",search_text:e.currentSuggestText.trim()})),n}},{key:"showSearchResultsTimestamp",get:function(){return this._showSearchResultsTimestamp}},{key:"wasSearchRequestSimplified",get:function(){return Boolean(this.simplifiedParams)}},{key:"hasSuggestItems",get:function(){return Boolean(this.suggestItems&&this.suggestItems.length)}}]),t})(x.a),b=v(_.prototype,"simplifiedParams",[w.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=v(_.prototype,"_suggestItems",[w.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v(_.prototype,"setSuggestItems",[w.action],Object.getOwnPropertyDescriptor(_.prototype,"setSuggestItems"),_.prototype),v(_.prototype,"removeSuggestItem",[w.action],Object.getOwnPropertyDescriptor(_.prototype,"removeSuggestItem"),_.prototype),v(_.prototype,"suggestItems",[w.computed],Object.getOwnPropertyDescriptor(_.prototype,"suggestItems"),_.prototype),v(_.prototype,"wasSearchRequestSimplified",[w.computed],Object.getOwnPropertyDescriptor(_.prototype,"wasSearchRequestSimplified"),_.prototype),v(_.prototype,"hasSuggestItems",[w.computed],Object.getOwnPropertyDescriptor(_.prototype,"hasSuggestItems"),_.prototype),_)},function(e,t,n){"use strict";n.d(t,"f",(function(){return i})),n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return c}));var i="suggest-click",r="search-button-click",o="search-field-hotkey",s="additional-parameters-click",a="direct-url",c="return-to-search"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i=n(677),r=n.n(i);t.a=r.a},,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return d}));var s=n(328),a=n(123),c=n.n(a),l=n(524),u=c.a.debounce,d=(function(){function e(){i(this,e),this._modelSubscriptions={}}return o(e,[{key:"_addModelSubscription",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=l.a.get(e,t),r=i.key;return r in this._modelSubscriptions?this._modelSubscriptions[r]:(this._modelSubscriptions[r]=this._createModelSubscription(i,n),this._modelSubscriptions[r])}},{key:"_requestModelData",value:function(e,t){return l.a.request(e,t).then((function(e){return e}),(function(){return{}}))}},{key:"_createModelSubscription",value:function(e,t){var n,i,r=this,o=e.key,a={};for(var c in t)switch(c){case"onChanged":n=function(){t.onChanged(e.getData()||void 0,e.getError()||void 0)},i=u(Object(s.action)(n),0),a["ns-model-changed"]=i,e.on("ns-model-changed",i),n();break;case"onDestroyed":n=Object(s.action)(t.onDestroyed),a["ns-model-destroyed"]=n,e.on("ns-model-destroyed",n);break;default:throw new Error('unknown handler "'.concat(c,'" for model subscription'))}return function(){for(var t in a)e.off(t,a[t]);delete r._modelSubscriptions[o]}}}]),e})()},function(e,t,n){"use strict";var i=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new vow.Promise(function(i,r){ns.request(e,t,n).then((function(e){if(!e||!e.length)return void r({error:"request-failed"});var t=e[0];if(!t.isValid())return void r(t.getError()||{error:"invalid-data"});i(e[0].getData())}),(function(e){r(Object.assign(e,{error:"model-request-failed"}))}))})};t.a={get:function(e,t){return ns.Model.get(e,t)},request:function(e,t){return i(e,t)},forcedRequest:function(e,t){return i(e,t,{forced:!0})}}},function(e,t){e.exports={bears:{name:"bears","loc-name":i18n("%Theme_name_bears"),aside_is_dark:!0,skins:{scopes:{grass:{count:6,page_is_dark:!0},sea:{count:4,page_is_dark:!0},room:{count:2,page_is_dark:!0,"skin-1":{},"skin-2":{}}}}},belarus:{name:"belarus","loc-name":i18n("%Theme_name_belarus"),skinSaver:!0,preview:!0,"can-be-selected":!1,page_is_dark:!0,aside_is_dark:!0,skins:{count:10,"skin-4":{disabled:!0},"skin-5":{},"skin-10":{page_is_dark:!0}}},besiktas:{name:"besiktas","loc-name":i18n("%Theme_name_besiktas"),page_is_dark:!0,aside_is_dark:!0,skins:{count:1}},colorful:{name:"colorful","loc-name":i18n("%Theme_name_color"),settings:"theme-colorful-selector",skins:{scopes:{blue:{},lightblue:{},green:{},grass_green:{},turquoise:{},"sea-wave":{page_is_dark:!0,aside_is_dark:!0},yellow:{},orange:{},red:{},pink:{},violet:{},white:{},gray:{},black:{page_is_dark:!0,aside_is_dark:!0},"pink-navy-sand":{},"plum-navy":{},"teal-orange":{},"terra-salad":{}}}},cosmos:{name:"cosmos","loc-name":i18n("%Theme_name_cosmos"),page_is_dark:!0,aside_is_dark:!0,content_is_dark:!0,skins:{count:24,"skin-7":{},"skin-22":{}}},dandelions:{name:"dandelions","loc-name":i18n("%Theme_name_dandelions"),page_is_dark:!0,aside_is_dark:!0,skins:{count:1}},fenerbahce:{name:"fenerbahce","loc-name":i18n("%Theme_name_fenerbahce"),page_is_dark:!0,aside_is_dark:!0,skins:{count:1}},foxes:{name:"foxes","loc-name":i18n("%Theme_name_foxes"),skins:{count:6,"skin-1":{},"skin-2":{},"skin-3":{},"skin-4":{},"skin-5":{},"skin-6":{}}},galatasaray:{name:"galatasaray","loc-name":i18n("%Theme_name_galatasaray"),page_is_dark:!0,aside_is_dark:!0,skins:{count:1}},"galatasaray-net":{name:"galatasaray-net","loc-name":i18n("%Theme_name_galatasaray_net"),page_is_dark:!0,aside_is_dark:!0,skins:{count:1}},khl:{name:"khl","loc-name":i18n("%Theme_name_khl"),"can-be-selected":!1,page_is_dark:!0,aside_is_dark:!0,skins:{count:1}},lamp:{name:"lamp","loc-name":i18n("%Theme_name_lamp"),page_is_dark:!0,aside_is_dark:!0,content_is_dark:!0,skins:{count:1}},love_is:{name:"love_is","loc-name":i18n("%Theme-love-is-title"),skinSaver:!0,skins:{scopes:{grass:{count:3},snow:{count:3},rain:{count:3}}}},nemo:{name:"nemo","loc-name":i18n("%Theme_nemo"),page_is_dark:!0,aside_is_dark:!0,skins:{scopes:{one:{count:39,"skin-1":{},"skin-2":{},"skin-3":{},"skin-4":{},"skin-5":{},"skin-6":{},"skin-7":{},"skin-8":{},"skin-9":{},"skin-10":{},"skin-11":{},"skin-12":{},"skin-13":{},"skin-14":{},"skin-15":{},"skin-16":{},"skin-17":{},"skin-18":{},"skin-19":{},"skin-20":{},"skin-21":{},"skin-22":{},"skin-23":{},"skin-24":{},"skin-25":{},"skin-26":{},"skin-27":{},"skin-28":{},"skin-29":{},"skin-30":{},"skin-31":{},"skin-32":{},"skin-33":{},"skin-34":{},"skin-35":{},"skin-36":{},"skin-37":{},"skin-38":{},"skin-39":{}},two:{count:39,"skin-1":{},"skin-2":{},"skin-3":{},"skin-4":{},"skin-5":{},"skin-6":{},"skin-7":{},"skin-8":{},"skin-9":{},"skin-10":{},"skin-11":{},"skin-12":{},"skin-13":{},"skin-14":{},"skin-15":{},"skin-16":{},"skin-17":{},"skin-18":{},"skin-19":{},"skin-20":{},"skin-21":{},"skin-22":{},"skin-23":{},"skin-24":{},"skin-25":{},"skin-26":{},"skin-27":{},"skin-28":{},"skin-29":{},"skin-30":{},"skin-31":{},"skin-32":{},"skin-33":{},"skin-34":{},"skin-35":{},"skin-36":{},"skin-37":{},"skin-38":{},"skin-39":{}},three:{count:39,"skin-1":{},"skin-2":{},"skin-3":{},"skin-4":{},"skin-5":{},"skin-6":{},"skin-7":{},"skin-8":{},"skin-9":{},"skin-10":{},"skin-11":{},"skin-12":{},"skin-13":{},"skin-14":{},"skin-15":{},"skin-16":{},"skin-17":{},"skin-18":{},"skin-19":{},"skin-20":{},"skin-21":{},"skin-22":{},"skin-23":{},"skin-24":{},"skin-25":{},"skin-26":{},"skin-27":{},"skin-28":{},"skin-29":{},"skin-30":{},"skin-31":{},"skin-32":{},"skin-33":{},"skin-34":{},"skin-35":{},"skin-36":{},"skin-37":{},"skin-38":{},"skin-39":{}}}}},newspaper:{name:"newspaper","loc-name":i18n("%Theme_name_newspaper"),skins:{count:1}},orangetree:{name:"orangetree","loc-name":i18n("%Theme_name_orangetree"),page_is_dark:!0,aside_is_dark:!0,skins:{count:1}},owls:{name:"owls","loc-name":i18n("%Theme_name_owls"),skinSaver:!0,skins:{count:9,"skin-2":{},"skin-3":{},"skin-4":{},"skin-5":{},"skin-6":{},"skin-7":{},"skin-8":{},"skin-9":{}}},pinkbear:{name:"pinkbear","loc-name":i18n("%Theme_name_pinkbear"),skins:{count:1}},plasticine:{name:"plasticine","loc-name":i18n("%Theme_name_plasticine"),skinSaver:!0,page_is_dark:!0,aside_is_dark:!0,skins:{count:8,"skin-1":{page_is_dark:!0,aside_is_dark:!0},"skin-2":{page_is_dark:!0,aside_is_dark:!0},"skin-3":{page_is_dark:!0,aside_is_dark:!0},"skin-4":{page_is_dark:!0,aside_is_dark:!0},"skin-5":{page_is_dark:!0,aside_is_dark:!0},"skin-6":{page_is_dark:!0,aside_is_dark:!0},"skin-7":{page_is_dark:!0,aside_is_dark:!0},"skin-8":{page_is_dark:!0,aside_is_dark:!0}}},relax:{name:"relax","loc-name":i18n("%Theme_name_relax"),skinSaver:!0,page_is_dark:!0,aside_is_dark:!0,skins:{scopes:{morning:{count:11,"skin-1":{disabled:!0},"skin-2":{page_is_dark:!0},"skin-3":{disabled:!0},"skin-4":{page_is_dark:!0},"skin-5":{page_is_dark:!0},"skin-6":{page_is_dark:!0},"skin-7":{page_is_dark:!0},"skin-8":{disabled:!0},"skin-9":{page_is_dark:!0},"skin-10":{page_is_dark:!0},"skin-11":{page_is_dark:!0}},day:{count:11,"skin-1":{page_is_dark:!0},"skin-2":{page_is_dark:!0},"skin-3":{page_is_dark:!0},"skin-4":{page_is_dark:!0},"skin-5":{disabled:!0},"skin-6":{page_is_dark:!0},"skin-7":{disabled:!0},"skin-8":{disabled:!0},"skin-9":{disabled:!0},"skin-10":{page_is_dark:!0},"skin-11":{page_is_dark:!0}},evening:{count:12,"skin-1":{page_is_dark:!0},"skin-2":{disabled:!0},"skin-3":{disabled:!0},"skin-4":{disabled:!0},"skin-5":{page_is_dark:!0},"skin-6":{page_is_dark:!0},"skin-7":{page_is_dark:!0},"skin-8":{page_is_dark:!0},"skin-9":{page_is_dark:!0},"skin-10":{page_is_dark:!0},"skin-11":{page_is_dark:!0},"skin-12":{page_is_dark:!0}},night:{count:16,"skin-1":{page_is_dark:!0},"skin-2":{disabled:!0},"skin-3":{disabled:!0},"skin-4":{page_is_dark:!0},"skin-5":{page_is_dark:!0},"skin-6":{page_is_dark:!0},"skin-7":{page_is_dark:!0},"skin-8":{page_is_dark:!0},"skin-9":{page_is_dark:!0},"skin-10":{page_is_dark:!0},"skin-11":{disabled:!0},"skin-12":{disabled:!0},"skin-13":{disabled:!0},"skin-14":{disabled:!0},"skin-15":{disabled:!0},"skin-16":{disabled:!0}}}}},sea:{name:"sea","loc-name":i18n("%Theme_name_sea"),aside_is_dark:!0,page_is_dark:!0,skins:{count:1}},seasons:{name:"seasons","loc-name":i18n("%Theme_name_seasons"),skinSaver:!0,settings:"theme-seasons-selector",page_is_dark:!0,aside_is_dark:!0,skins:{scopes:{winter:{"loc-name":i18n("%Theme_seasons_winter"),count:6,"skin-1":{},"skin-2":{},"skin-3":{},"skin-4":{},"skin-5":{page_is_dark:!0},"skin-6":{}},newyear:{count:7,"skin-1":{},"skin-2":{page_is_dark:!0},"skin-3":{},"skin-4":{},"skin-5":{},"skin-6":{},"skin-7":{}},spring:{"loc-name":i18n("%Theme_seasons_spring"),count:7,"skin-1":{},"skin-2":{},"skin-3":{},"skin-4":{},"skin-5":{},"skin-6":{},"skin-7":{}},summer:{"loc-name":i18n("%Theme_seasons_summer"),count:8,"skin-1":{},"skin-2":{},"skin-3":{},"skin-4":{},"skin-5":{},"skin-6":{},"skin-7":{page_is_dark:!0},"skin-8":{}},autumn:{"loc-name":i18n("%Theme_seasons_autumn"),count:7,"skin-1":{},"skin-2":{},"skin-3":{},"skin-4":{},"skin-5":{},"skin-6":{},"skin-7":{}}}}},soccer:{name:"soccer","loc-name":i18n("%Theme_name_soccer"),aside_is_dark:!0,page_is_dark:!0,skins:{count:12}},starwars:{name:"starwars","loc-name":i18n("%Theme_name_starwars"),skinSaver:!0,"can-be-selected":!1,page_is_dark:!0,aside_is_dark:!0,content_is_dark:!0,skins:{scopes:{lightside:{count:11,"skin-1":{},"skin-5":{},"skin-6":{},"skin-8":{},"skin-9":{},"skin-10":{},"skin-11":{}},darkside:{count:9,"skin-3":{},"skin-4":{},"skin-5":{},"skin-6":{}}}}},stitch:{name:"stitch","loc-name":i18n("%Theme_name_stitch"),skins:{count:3}},tanks:{name:"tanks","loc-name":"World of Tanks",skinSaver:!0,preview:!0,"can-be-selected":!1,page_is_dark:!0,aside_is_dark:!0,skins:{count:4}},u2709:{name:"u2709","loc-name":i18n("%Theme_name_grass"),page_is_dark:!0,aside_is_dark:!0,skins:{scopes:{regular:{count:1},ny2016:{count:1}}}},weather:{name:"weather","loc-name":i18n("%Theme_name_weather"),settings:"theme-weather-settings",page_is_dark:!0,aside_is_dark:!0,skins:{scopes:{boot:{},spring:{scopes:{clear:{scopes:{day:{},night:{}}},partly_cloudy:{scopes:{day:{},night:{}}},clouds:{scopes:{day:{},night:{}}},rain:{scopes:{day:{},night:{}}},storm:{scopes:{day:{},night:{}}},wind:{scopes:{day:{},night:{}}}}},summer:{scopes:{clear:{scopes:{day:{},night:{}}},clouds:{scopes:{day:{},night:{}}},partly_cloudy:{scopes:{day:{},night:{}}},rainy:{scopes:{day:{},night:{}}},rain:{scopes:{day:{},night:{}}},storm:{scopes:{day:{},night:{}}},wind:{scopes:{day:{},night:{}}},fog:{scopes:{day:{page_is_dark:!1,aside_is_dark:!1},night:{}}},hail:{scopes:{day:{},night:{}}}}},autumn:{scopes:{clear:{scopes:{day:{page_is_dark:!1,aside_is_dark:!1},night:{}}},clouds:{scopes:{day:{page_is_dark:!1,aside_is_dark:!1},night:{}}},partly_cloudy:{scopes:{day:{page_is_dark:!1,aside_is_dark:!1},night:{}}},rainy:{scopes:{day:{page_is_dark:!1,aside_is_dark:!1},night:{}}},rain:{scopes:{day:{page_is_dark:!1,aside_is_dark:!1},night:{}}},storm:{scopes:{day:{},night:{}}},wind:{scopes:{day:{page_is_dark:!1,aside_is_dark:!1},night:{}}},fog:{scopes:{day:{page_is_dark:!1,aside_is_dark:!1},night:{}}}}},winter:{scopes:{clear:{scopes:{day:{page_is_dark:!1,aside_is_dark:!1},night:{}}},clouds:{scopes:{day:{page_is_dark:!1,aside_is_dark:!1},night:{}}},heavy_snow:{scopes:{day:{page_is_dark:!1,aside_is_dark:!1},night:{}}},cloudy_rain:{scopes:{day:{},night:{}}},partly_cloudy_rain:{scopes:{day:{},night:{}}},weak_snow:{scopes:{day:{page_is_dark:!1,aside_is_dark:!1},night:{}}},fog:{scopes:{day:{page_is_dark:!1,aside_is_dark:!1},night:{}}},blizzard:{scopes:{day:{page_is_dark:!1,aside_is_dark:!1},night:{}}},thaw:{scopes:{day:{page_is_dark:!1,aside_is_dark:!1},night:{}}},cloudy_thaw:{scopes:{day:{page_is_dark:!1,aside_is_dark:!1},night:{}}}}}}}},zverushki:{name:"zverushki","loc-name":i18n("%Theme_name_zverushki"),skinSaver:!0,page_is_dark:!0,aside_is_dark:!0,content_is_dark:!0,skins:{count:17}},region_bashkir:{name:"region_bashkir","loc-name":i18n("%Theme_name_region_bashkir"),skinSaver:!0,preview:!0,"can-be-selected":!1,page_is_dark:!0,aside_is_dark:!0,skins:{count:10,"skin-1":{disabled:!0},"skin-4":{page_is_dark:!0},"skin-5":{},"skin-6":{page_is_dark:!0},"skin-9":{page_is_dark:!0},"skin-10":{page_is_dark:!0}}},region_chelly:{name:"region_chelly","loc-name":i18n("%Theme_name_region_chelly"),skinSaver:!0,preview:!0,"can-be-selected":!1,page_is_dark:!0,aside_is_dark:!0,skins:{count:9,"skin-1":{},"skin-2":{},"skin-3":{},"skin-7":{disabled:!0}}},region_ekb:{name:"region_ekb","loc-name":i18n("%Theme_name_region_ekb"),skinSaver:!0,preview:!0,"can-be-selected":!1,page_is_dark:!0,aside_is_dark:!0,skins:{count:8,"skin-2":{disabled:!0},"skin-3":{disabled:!0},"skin-7":{disabled:!0}}},region_krasnoyarsk:{name:"region_krasnoyarsk","loc-name":i18n("%Theme_name_region_krasnoyarsk"),skinSaver:!0,preview:!0,"can-be-selected":!1,aside_is_dark:!0,page_is_dark:!0,skins:{count:10,"skin-3":{disabled:!0},"skin-5":{},"skin-6":{},"skin-10":{disabled:!0}}},region_nn:{name:"region_nn","loc-name":i18n("%Theme_name_region_nn"),skinSaver:!0,preview:!0,"can-be-selected":!1,page_is_dark:!0,aside_is_dark:!0,skins:{count:7,"skin-2":{disabled:!0},"skin-4":{disabled:!0}}},region_novosibirsk:{name:"region_novosibirsk","loc-name":i18n("%Theme_name_region_novosibirsk"),skinSaver:!0,preview:!0,"can-be-selected":!1,page_is_dark:!0,aside_is_dark:!0,skins:{count:8,"skin-4":{disabled:!0}}},region_perm:{name:"region_perm","loc-name":i18n("%Theme_name_region_perm"),skinSaver:!0,preview:!0,"can-be-selected":!1,page_is_dark:!0,aside_is_dark:!0,skins:{count:11,"skin-2":{disabled:!0},"skin-6":{page_is_dark:!0},"skin-7":{page_is_dark:!0},"skin-9":{disabled:!0}}},region_primorie:{name:"region_primorie","loc-name":i18n("%Theme_name_region_primorie"),skinSaver:!0,preview:!0,"can-be-selected":!1,page_is_dark:!0,aside_is_dark:!0,skins:{count:7,"skin-1":{},"skin-2":{disabled:!0},"skin-3":{page_is_dark:!0},"skin-4":{}}},region_samara:{name:"region_samara","loc-name":i18n("%Theme_name_region_samara"),skinSaver:!0,preview:!0,"can-be-selected":!1,page_is_dark:!0,aside_is_dark:!0,skins:{count:8,"skin-3":{page_is_dark:!0},"skin-5":{},"skin-6":{page_is_dark:!0},"skin-8":{page_is_dark:!0}}},region_tatarstan:{name:"region_tatarstan","loc-name":i18n("%Theme_name_region_tatarstan"),skinSaver:!0,preview:!0,"can-be-selected":!1,aside_is_dark:!0,page_is_dark:!0,skins:{count:6,"skin-3":{disabled:!0},"skin-6":{}}},region_tomsk:{name:"region_tomsk","loc-name":i18n("%Theme_name_regions_tms"),skinSaver:!0,preview:!0,"can-be-selected":!1,page_is_dark:!0,aside_is_dark:!0,skins:{count:3}},region_volgograd:{name:"region_volgograd","loc-name":i18n("%Theme_name_region_volgograd"),skinSaver:!0,preview:!0,"can-be-selected":!1,page_is_dark:!0,aside_is_dark:!0,skins:{count:6,"skin-1":{page_is_dark:!0},"skin-5":{},"skin-4":{disabled:!0},"skin-6":{}}}}},,,,,,,function(e,t,n){"use strict";var i=n(586),r=n.n(i),o=n(664);n.n(o);t.a=r.a},function(e,t,n){"use strict";(function(e){function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},i.apply(this,arguments)}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n,i){p||(p="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:p,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"a",(function(){return b}));var p,h=n(429),m=n(668),v=function(){return n.e(80).then(n.bind(null,534)).catch((function(){return n.e(80).then(n.bind(null,534))}))},_=g("div",{},void 0,g(h.a,{size:"m"})),b=(function(t){function n(){return o(this,n),c(this,u(n).apply(this,arguments))}return d(n,t),a(n,[{key:"_renderPlaceholder",value:function(){return _}},{key:"render",value:function(){return e.createElement(m.a,i({},this.props,{loader:v,renderPlaceholder:this._renderPlaceholder}))}}]),n})(e.Component);b.displayName="DatePicker"}).call(t,n(318))},,,function(e,t,n){"use strict";var i=n(674),r=n.n(i),o=n(676);n.n(o);t.a=r.a},function(e,t,n){"use strict";var i=n(694),r=n.n(i),o=n(703);n.n(o);t.a=r.a},,,,,function(e,t,n){"use strict";t.a={isIE:function(){return"MSIE"===Daria.UA.BrowserName},isEdge:function(){return"Edge"===Daria.UA.BrowserName}}},,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function s(){return Object(l.l)()?"pdd":Object(l.j)()?"corp":"big"}function a(e){return["project=search_mail","product="+h,"reqid="+e.getSearchSessionId()]}function c(e){var t=[];return d.forEach((function(n){e.hasOwnProperty(n)&&t.push(n+":"+e[n])})),t.join(",")}n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return h}));var l=n(339),u=n(390),d=["scope","fid","lid","unread","attaches","from","to","type"],f=Object.freeze({history:'Выбор "прошлый запрос"',subject:'Выбор "тема"',important:'Выбор "важные"',unread:'Выбор "непрочитанное письмо"',folder:'Выбор "папки"',ql:'Выбор "язык запросов"',contact:'Выбор "контакты"',mail:'Выбор "письма"',label:'Выбор "метки"',"show-all-results":'Выбор "показать все результаты по запросу"'}),g=Object.freeze({button:"Клик по Найти",enter:"Нажатие Enter",advanced:"Расширенные настройки",suggest:"Саджест"}),p=(function(){function e(t,n){i(this,e),this._suggestWasLogged=!1,this._stores=t,this._services=n}return o(e,[{key:"logMessageClick",value:function(e,t,n,i,r){var o=this._stores,s=o.searchStore,u=o.routerStore,d=u.currentPage.params;if(Object(l.m)(d)){var f=s.showSearchResultsTimestamp,g=Date.now()-f,p=[].concat(a(s),["r="+encodeURIComponent(r.request),"pos="+n,"user="+Object(l.e)(),"mid="+t,"time="+g,"clicktype="+e]);i&&p.push("tophits=yes");var h=c(r);h&&p.push("filter="+h);var m=(Daria.Config["exp-test-ids"]||[]).join(",");m&&p.push("exp="+m),Daria.searchClickCounter(p)}}},{key:"logSearchSuggest",value:function(e){var t=this._stores.searchStore,n=t.suggestItems.length;if(!e.suggestWithEmptyRequest||0!==n){var i=[].concat(a(t),["action=suggest","uid="+Object(l.e)(),"user_text="+encodeURIComponent(e.text||""),"count="+n]);if(e.suggestUsed){var r=e.target||"";i.push("pos="+e.itemPos,"target="+r,"show_text="+encodeURIComponent(e.show_text||""),"search_text="+encodeURIComponent(e.search_text||""),"suggest_used=yes"),this._metrikaCountSuggestItemClick(r)}else e.suggestWithEmptyRequest||i.push("suggest_used=no");Daria.searchClickCounter(i)}}},{key:"_metrikaCountSuggestItemClick",value:function(e){var t=f[e];if(!t)return void Object(u.b)({errorType:"search-log-service:unknown-target",failIfPossible:!0});this.countSuggestAction(t)}},{key:"countSuggestAction",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Jane.c.apply(Jane,["Поиск","Cаджест"].concat(t))}},{key:"countSearchActivation",value:function(){Jane.c("Поиск","Активация поисковой строки")}},{key:"countLogoClick",value:function(e){Jane.c("Поиск","Клик в логотип",e?"Почта":"Яндекс/компания")}},{key:"countTextCleared",value:function(){Jane.c("Поиск","Клик в крест (очистка)")}},{key:"countSuggestClose",value:function(){Jane.c("Поиск","Клик в крест (закрытие)")}},{key:"countFolderBubble",value:function(e){Jane.c("Поиск","Баллун папки",e)}},{key:"logSearch",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0,o=this._stores.searchStore;if(n.from){var a=n.from.substr(0,6);t=a!==(n.to||"").substr(0,6)?a.substr(0,4):a}var c={type:"search.start-search",suid:Object(l.d)(),advanced:r,action:i.metrika,text:e||"",message_type:n.type||"",folder:n.fid||"",label:n.lid||"",date:t||"",mail_type:s(),searchid:o.getSearchId(),reqid:o.getSearchSessionId()};Jane.ErrorLog.send(c),Jane.c("Поиск","Переход к результатам поиска",g[i.metrika])}},{key:"countAdvancedSearch",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Jane.c.apply(Jane,["Поиск","Расширенный поиск"].concat(t))}},{key:"logToggleAdvanced",value:function(e,t){Jane.ErrorLog.send({type:"search.toggle-advanced",suid:Object(l.d)(),text:e,action:t?"open":"close",mail_type:s()}),t&&this.countAdvancedSearch("Клик в иконку/открытие дропдауна")}},{key:"suggestWasLogged",get:function(){return this._suggestWasLogged},set:function(e){this._suggestWasLogged=e}}]),e})(),h=(function(){return Object(l.l)()?"webpdd":Object(l.j)()?"YT":"web"})()},,function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function a(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=n(318),g=n(317),p=n(518).getKey,h=(function(e){function t(){return r(this,t),a(this,l(t).apply(this,arguments))}return u(t,e),s(t,[{key:"render",value:function(){return this.props.children}},{key:"getChildContext",value:function(){return{lang:this.props.lang,t:p.bind(null,this.props.lang)}}}]),t})(f.Component);h.childContextTypes={lang:g.string,t:g.func},h.propTypes={children:g.element.isRequired,lang:g.string},e.exports=h},,,function(e,t,n){"use strict";function i(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Jane.c.apply(Jane,["Left column",Daria.is2pane()?"2pane":"3pane","Folders list"].concat(t))}function r(e,t){var n=ns.Model.get("folder",{fid:e}),r="";switch(n.get(".symbol")){case"inbox":r="inbox";break;case"outbox":r="outbox";break;case"spam":r="spam";break;case"sent":r="sent";break;case"trash":r="trash";break;case"draft":r="drafts";break;case"archive":r="archive";break;case"template":r="templates";break;default:return}i("system",r,t)}t.b=i,t.a=r},function(e,t,n){e.exports=n.p+"_/b2b9d65a066152b21417dedc4506a404-attach_icon_word.svg"},,,,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return s}));var s=(function(){function e(){i(this,e),this._handlers={}}return o(e,[{key:"on",value:function(e,t){this._handlers[e]||(this._handlers[e]=[]),this._handlers[e].push(t)}},{key:"off",value:function(e,t){if(this._handlers[e]){var n=this._handlers[e].indexOf(t);n>-1&&this._handlers[e].splice(n,1)}}},{key:"emit",value:function(e,t){for(var n=0,i=this._handlers[e]||[],r=i.length;n<r&&!i[n](t);n++);}}]),e})()},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return o}));var i=function(e){return Daria.MessageTime.getFormattedTime(1e3*e).list},r=function(e){return Jane.Date.toHumanFormat(e)},o=function(e){return Jane.Date.format("%Date_HM__colon",e)}},,,,,,function(e,t,n){"use strict";var i=n(3563),r=n.n(i),o=n(3565);n.n(o);t.a=r.a},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},i.apply(this,arguments)}var r=n(318),o=n.n(r),s=n(666),a=n.n(s),c=n(667),l=(n.n(c),function(e){return o.a.createElement(a.a,i({},e,{progress:!0}))});t.a=l,l.displayName="Spin",l.defaultProps={theme:"normal"}},,,function(e,t,n){"use strict";var i=n(669);n.d(t,"a",(function(){return i.a}))},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function a(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",(function(){return m}));var f=n(318),g=n.n(f),p=n(317),h=n.n(p),m=(function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=a(this,(e=l(t)).call.apply(e,[this].concat(o))),n.state={component:null},n}return u(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this;this.props.loader().then((function(t){e.setState({component:t.default})}))}},{key:"render",value:function(){return this.state.component?g.a.createElement(this.state.component,this.props):this.props.renderPlaceholder()}}]),t})(g.a.Component);m.propTypes={loader:h.a.func.isRequired,renderPlaceholder:h.a.func},m.defaultProps={renderPlaceholder:function(){return null}}},,function(e,t,n){"use strict";(function(e){var i=n(430),r=n.n(i),o=n(535),s=(n.n(o),n(673));n.n(s);t.a=r.a,r.a.propTypes=Object.assign(r.a.propTypes,{theme:e.oneOf(["black","ghost","normal","outer","pseudo","strong","transparent-black","transparent-white","yellow"])})}).call(t,n(317))},,function(e,t){},,,,,function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",(function(){return m}));var u=n(317),d=n.n(u),f=n(679),g=n.n(f),p=n(683),h=(n.n(p),n(684)),m=(n.n(h),(function(e){function t(){return r(this,t),o(this,a(t).apply(this,arguments))}return c(t,e),t})(g.a));m.propTypes=Object.assign(g.a.propTypes,{theme:d.a.string})},,,,,,function(e,t){},,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i=n(538),r=n.n(i),o=n(540),s=(n.n(o),n(714)),a=(n.n(s),n(715)),c=n(718),l=n(719);r.a.DescriptionWithIcon=a.a,r.a.Buttons.Action=c.a,r.a.Buttons.Clear=l.a,t.a=r.a},,,,,,,,,,function(e,t){},function(e,t,n){"use strict";var i=n(716);n.d(t,"a",(function(){return i.a}))},function(e,t,n){"use strict";(function(e,i){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n,i){p||(p="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:p,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"a",(function(){return v}));var p,h=n(332),m=n(717),v=(n.n(m),(function(e){function t(){return o(this,t),c(this,u(t).apply(this,arguments))}return d(t,e),a(t,[{key:"render",value:function(){var e=this.props,t=e.icon,n=e.children;return g(h.a.Description,{},void 0,g("div",{className:"mail-DescriptionWithIcon"},void 0,g("div",{className:"mail-DescriptionWithIcon_Icon mail-DescriptionWithIcon_".concat(t)}),g("div",{className:"mail-DescriptionWithIcon_Text"},void 0,n)))}}]),t})(e.Component));v.propTypes={icon:i.string.isRequired}}).call(t,n(318),n(317))},function(e,t){},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",(function(){return d}));var u=n(352),d=(function(e){function t(){return r(this,t),o(this,a(t).apply(this,arguments))}return c(t,e),t})(u.a);d.defaultProps={view:"classic",tone:"default",size:"m",theme:"action"}},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",(function(){return d}));var u=n(352),d=(function(e){function t(){return r(this,t),o(this,a(t).apply(this,arguments))}return c(t,e),t})(u.a);d.defaultProps={view:"classic",tone:"default",size:"m",theme:"clear"}},,function(e,t,n){"use strict";(function(e,i){function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r.apply(this,arguments)}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t,n,i){m||(m="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:m,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"a",(function(){return k}));var m,v=n(342),_=n.n(v),b=n(542),y=n(390),S=n(722),w=n(723),k=(n.n(w),(function(t){function n(){return a(this,n),u(this,f(n).apply(this,arguments))}return g(n,t),l(n,[{key:"_maybeRenderTitle",value:function(){var e=this.props.title;return e?h("title",{},void 0,e):null}},{key:"render",value:function(){var t,i=this.props,o=i.cls,a=i.color,c=i.id,l=i.refId,u=i.onMouseDown,d=i.forceInline,f=i.data,g=void 0===f?{}:f,p={};return a&&(p.color=a),h("svg",{xmlns:"http://www.w3.org/2000/svg",className:_()((t={svgicon:!0},s(t,"svgicon-".concat(c),!0),s(t,o||"",!0),t)),style:p,onMouseDown:u},void 0,n.useOrInlineSvg(c,l,d),e.createElement("rect",r({height:"100%",width:"100%",style:{fill:"transparent"}},g),this._maybeRenderTitle()))}}],[{key:"useOrInlineSvg",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(b.a.isIE()||n){var i=t?Object(S.a)(e,t):Object(S.a)(e);return i?h("svg",{id:i.id,viewBox:i.viewBox,dangerouslySetInnerHTML:{__html:i.svgBody}}):(Object(y.a)("Не удалось найти SVG иконку #".concat(i.id)),null)}return h("use",{xmlnsXlink:"http://www.w3.org/1999/xlink",xlinkHref:t?"#".concat(t):"#svgicon-".concat(e)})}}]),n})(e.PureComponent));k.propTypes={id:i.string.isRequired,refId:i.string,color:i.string,cls:i.string,onMouseDown:i.func,title:i.string,data:i.object,forceInline:i.bool}}).call(t,n(318),n(317))},function(e,t,n){"use strict";t.a=(function(){var e={};return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"svgicon-".concat(t);if(e[t])return e[t];var i=document.getElementById(n);if(i){var r=Array.prototype.slice.call(i.childNodes),o=new XMLSerializer,s=r.reduce((function(e,t){return e+o.serializeToString(t)}),""),a=i.getAttribute("viewBox");return e[t]={id:n,viewBox:a,svgBody:s},e[t]}return null}})()},function(e,t){},,,,,,,function(e,t,n){"use strict";t.a={TAB:9,ENTER:13,ESC:27,UP:38,DOWN:40}},,,,,function(e,t,n){e.exports=n.p+"_/fda3883dbf1d3e3f77b7d2f558187bb7-attach_icon_powerpoint.svg"},function(e,t,n){"use strict";function i(e){return Boolean(e.ctrlKey||e.metaKey)}function r(e){return function(t){if(!i(t))return e.apply(this,arguments)}}t.a=r},function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return p})),n.d(t,"e",(function(){return h})),n.d(t,"f",(function(){return m})),n.d(t,"g",(function(){return v})),n.d(t,"a",(function(){return _}));var i=n(915),r=n.n(i),o=n(740),s=n(742),a=n(743),c=n(438),l=n(744),u=n(745),d=n(920),f=r()((function(){return new o.a})),g=r()((function(){return new s.a})),p=r()((function(){return new a.a})),h=r()((function(){return new c.a})),m=r()((function(){return new l.a})),v=r()((function(){return new u.a(m())})),_=r()((function(){return new d.a}))},,,function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function a(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?l(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function g(e,t,n,i,r){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n.d(t,"a",(function(){return x}));var p,h,m,v=n(123),_=n.n(v),b=n(2253),y=n(328),S=n(523),w=n(2254),k=_.a.memoize,x=(p=m=(function(e){function t(){var e;return r(this,t),e=a(this,c(t).call(this)),f(l(e),"folders",h,l(e)),e.getFolderBySymbol=k((function(t){for(var n=0,i=e.folders.length;n<i;n++){var r=e.folders[n];if(r.data.symbol===t)return r}return null})),e.getFolderByName=k((function(t){for(var n=0,i=e.folders.length;n<i;n++){var r=e.folders[n];if(r.data.name===t)return r}return null})),e._addModelSubscription("folders",{},{onChanged:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.folders=(t.folder||[]).map((function(e){return new w.a(e)})),Object(b.a)(e.getFolderBySymbol)},onDestroyed:function(){e.folders=[]}}),e}return u(t,e),s(t,[{key:"isFidSymbol",value:function(e,t){var n=this.getFolderBySymbol(t);return n&&n.data.fid===e}},{key:"getFolderByFid",value:function(e){return this.folders.find((function(t){return t.data.fid===e}))}},{key:"foldersForSearch",get:function(){return this.folders.filter((function(e){return"outbox"!==e.data.symbol&&"spam"!==e.data.symbol}))}}]),t})(S.a),h=g(p.prototype,"folders",[y.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g(p.prototype,"foldersForSearch",[y.computed],Object.getOwnPropertyDescriptor(p.prototype,"foldersForSearch"),p.prototype),p)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function o(e,t,n,i,r){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n.d(t,"a",(function(){return g}));var s,a,c,l,u,d,f=n(328),g=(s=d=function e(t,n){i(this,e),r(this,"data",a,this),r(this,"error",c,this),r(this,"setData",l,this),r(this,"setError",u,this),n?this.setError(n):t&&this.setData(t)},a=o(s.prototype,"data",[f.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),c=o(s.prototype,"error",[f.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),l=o(s.prototype,"setData",[f.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.data=t,e.error={}}}}),u=o(s.prototype,"setError",[f.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){"string"==typeof t&&(t={message:t}),e.data={},e.error=t}}}),s)},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function a(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?l(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function g(e,t,n,i,r){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n.d(t,"a",(function(){return y}));var p,h,m,v=n(328),_=n(523),b=n(2255),y=(p=m=(function(e){function t(){var e;return r(this,t),e=a(this,c(t).call(this)),f(l(e),"labels",h,l(e)),e._addModelSubscription("labels",{},{onChanged:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.labels=(t.label||[]).map((function(e){return new b.a(e)}))},onDestroyed:function(){e.labels=[]}}),e}return u(t,e),s(t,[{key:"getLabelBySymbolicName",value:function(e){var t=this.labels.findIndex((function(t){return t.data.symbolicName===e}));return t>-1?this.labels[t]:null}},{key:"getLabelById",value:function(e){var t=this.labels.findIndex((function(t){return t.data.lid===e}));return t>-1?this.labels[t]:null}},{key:"labelItemsForSearch",get:function(){var e=this.getLabelBySymbolicName("important_label"),t=[];return e&&t.push({value:e.data.lid,text:e.data.name,icon:"important"}),t.push({value:"unread",text:i18n("%Labels_Only_New"),icon:"unread"}),t.concat(this.labels.filter((function(e){return e.data.user})).sort((function(e,t){return e.data.name>t.data.name})).map((function(e){return{value:e.data.lid,text:e.data.name,color:"#".concat(e.data.color)}})))}}]),t})(_.a),h=g(p.prototype,"labels",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g(p.prototype,"labelItemsForSearch",[v.computed],Object.getOwnPropertyDescriptor(p.prototype,"labelItemsForSearch"),p.prototype),p)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function s(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function a(e,t,n,i,r){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n.d(t,"a",(function(){return v}));var c,l,u,d,f,g=n(123),p=n.n(g),h=n(328),m=p.a.isEqual,v=(c=f=(function(){function e(){var t=this;i(this,e),s(this,"currentPage",l,this),s(this,"_isCurrentPageEmptySearch",u,this),s(this,"_syncState",d,this),this._syncState(),ns.events.on("ns-page-before-load",(function(e,n){return t._syncState(n&&n[1])}))}return o(e,[{key:"isCollectorSearch",value:function(e){return e=e||this.currentPage.params,"rpopinfo"===e.scope}},{key:"isSearchResultsPage",get:function(){return"search"===this.currentPage.params.search||this._isCurrentPageEmptySearch}}]),e})(),l=a(c.prototype,"currentPage",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{page:null,params:null}}}),u=a(c.prototype,"_isCurrentPageEmptySearch",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),a(c.prototype,"isSearchResultsPage",[h.computed],Object.getOwnPropertyDescriptor(c.prototype,"isSearchResultsPage"),c.prototype),d=a(c.prototype,"_syncState",[h.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n=t||ns.page.current,i=e.currentPage.page!==n.page,r=!m(e.currentPage.params,n.params);(i||r)&&(e.currentPage.page=n.page,r&&(e.currentPage.params=n.params),e._isCurrentPageEmptySearch=Boolean(Jane.watcher.get("search.is-empty-search")))}}}),c)},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function a(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?l(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function g(e,t,n,i,r){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n.d(t,"a",(function(){return S}));var p,h,m,v=n(328),_=n(523),b=n(339),y={enable_hotkeys:!0,dnd_enabled:!0},S=(p=m=(function(e){function t(){var e;return r(this,t),e=a(this,c(t).call(this)),f(l(e),"settings",h,l(e)),e._addModelSubscription("settings",{},{onChanged:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.settings=t},onDestroyed:function(){e.settings={}}}),e}return u(t,e),s(t,[{key:"isSet",value:function(e){return Object(b.a)()?Boolean(y[e]):Boolean(this.settings[e])}},{key:"isThreadMode",get:function(){return this.isSet("folder_thread_view")}},{key:"isBiggerText",get:function(){return this.isSet("with_bigger_text")}}]),t})(_.a),h=g(p.prototype,"settings",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),g(p.prototype,"isThreadMode",[v.computed],Object.getOwnPropertyDescriptor(p.prototype,"isThreadMode"),p.prototype),g(p.prototype,"isBiggerText",[v.computed],Object.getOwnPropertyDescriptor(p.prototype,"isBiggerText"),p.prototype),p)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function s(e,t,n,i,r){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n.d(t,"a",(function(){return f}));var a,c,l=n(328),u=n(339),d=n(525),f=(a=c=(function(){function e(t){i(this,e),this.themesData=d,this.settingsStore=t}return o(e,[{key:"isThemeExist",value:function(e){return e in this.themesData}},{key:"getThemeImgId",value:function(e){var t=e||this.currentTheme;return"seasons"===t?"".concat(t,"-").concat(this._getSeasonThemeScope()):t}},{key:"_getSeasonThemeScope",value:function(){var e=(new Date).getDate(),t=(new Date).getMonth()+1,n="";return n=2===t&&e>24||t>2&&t<6?"spring":t>5&&t<9?"summer":t>8&&t<12?"autumn":"winter",(12===t&&e>16||1===t&&e<3)&&(n="newyear"),n}},{key:"currentTheme",get:function(){var e=Object(u.f)().theme;return this.isThemeExist(e)?e:this.settingsStore.settings.color_scheme}},{key:"isContentDark",get:function(){var e=this.currentTheme,t=this.themesData[e];return!!t&&Boolean(t.content_is_dark)}}]),e})(),s(a.prototype,"currentTheme",[l.computed],Object.getOwnPropertyDescriptor(a.prototype,"currentTheme"),a.prototype),s(a.prototype,"isContentDark",[l.computed],Object.getOwnPropertyDescriptor(a.prototype,"isContentDark"),a.prototype),a)},function(e,t,n){"use strict";function i(){return{foldersStore:Object(d.b)(),labelsStore:Object(d.c)(),routerStore:Object(d.d)(),searchStore:Object(d.e)(),settingsStore:Object(d.f)()}}n.d(t,"a",(function(){return g})),n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return h})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return v})),n.d(t,"f",(function(){return _}));var r=n(915),o=n.n(r),s=n(747),a=n(367),c=n(748),l=n(2260),u=n(2261),d=n(737),f={},g=o()((function(){var e=new s.a;return f.routerService=e,e})),p=o()((function(){var e=new a.b(i(),f);return f.searchService=e,e})),h=o()((function(){var e=new a.a(i(),f);return f.searchLogService=e,e})),m=o()((function(){var e=new c.a(i());return f.settingsService=e,e})),v=o()((function(){return new l.a({themesStore:Object(d.g)()})})),_=u.a},function(e,t,n){"use strict";var i=n(2256);n.d(t,"a",(function(){return i.a}))},function(e,t,n){"use strict";var i=n(749);n.d(t,"a",(function(){return i.a}))},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return l}));var s,a=n(328),c=["no-message","not-found"],l=(s=(function(){function e(t){i(this,e),this._stores=t}return o(e,[{key:"setSettings",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};ns.Model.get("settings").setSettings(e,t,n)}},{key:"switchOnThreadMode",value:function(){return ns.Model.get("settings").threadedOn()}},{key:"switchOffThreadMode",value:function(){return ns.Model.get("settings").threadedOff()}},{key:"setBiggerText",value:function(){return ns.Model.get("settings").setSettingOn("with_bigger_text")}},{key:"setNormalText",value:function(){return ns.Model.get("settings").setSettingOff("with_bigger_text")}},{key:"isCompactHeaderMode",get:function(){var e=this._stores,t=e.routerStore,n=e.settingsStore,i=t.currentPage.page;return n.isSet("liza_minified_header")&&-1===c.indexOf(i)}}]),e})(),(function(e,t,n,i,r){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o})(s.prototype,"isCompactHeaderMode",[a.computed],Object.getOwnPropertyDescriptor(s.prototype,"isCompactHeaderMode"),s.prototype),s)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));var i=400,r="#333"},function(e,t,n){"use strict";function i(e){s().on("resize",e)}function r(e){s().off("resize",e)}t.a=i,t.b=r;var o,s=function(){return o||(o=ns.Model.get("dimensions"))}},function(e,t,n){"use strict";var i=n(2291);n.d(t,"a",(function(){return i.a}))},,,,,,,function(e,t,n){"use strict";function i(e,t){var n=t?"ns-model-changed.".concat(t):"ns-model-changed";a().on(n,e)}function r(e,t){var n=t?"ns-model-changed.".concat(t):"ns-model-changed";a().off(n,e)}function o(){var e=ns.Model.get("themes").getSkinParams();return Boolean(e.content_is_dark)}t.b=i,t.c=r,t.a=o;var s,a=function(){return s||(s=ns.Model.get("settings"))}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";t.a=function(e){var t=ns.Model.get("folders").getFolderById(e);return t?t.symbol||"user":null}},function(e,t,n){e.exports=n.p+"_/cb8b9741d24077a129aaa910022a6cf9-attach_icon_mail.svg"},function(e,t,n){e.exports=n.p+"_/087993e09b5de5a63916e2283cdae636-attach_icon_exe.svg"},function(e,t,n){e.exports=n.p+"_/c13cdef7f16129d2f06fe53161e898d3-attach_icon_html.svg"},function(e,t,n){e.exports=n.p+"_/1461a37f3aeea10f2db8bf17717930db-attach_icon_flash.svg"},function(e,t,n){e.exports=n.p+"_/b09d4ef5dbb7774ffcc5879d17b020bd-attach_icon_zip.svg"},function(e,t){Object.assign(t,{request:function(){var e=this,t=this.params;t.model=this.id,ns.request.addRequestParams(t);var n="".concat(Daria.api.journal,"?_m=").concat(this.id);return ns.http(n,t).then((function(t){e.setData(t)}))}})},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}));var i=n(432),r={type:"search-error-messages",severity:i.a},o={type:"search-error-message-body",severity:i.b}},function(e,t,n){"use strict";function i(e){if(!Daria.Config.NO_SETTINGS){var t=s.a.SETTINGS_FALLBACK.map((function(t){return t.name in e?e[t.name]:""})),n=[s.a.COOKIE_SIGN].concat(t).join(":"),i=new Date;i.setFullYear(i.getFullYear()+10),Daria.setCookie(s.a.COOKIE_NAME,n,{expires:i,path:"/",secure:!0})}}function r(e){return s.a.SETTINGS_FALLBACK.some((function(t){return t.name===e}))}t.b=i,t.a=r;var o=n(2111),s=n.n(o)},,,,,function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",(function(){return d}));var u=n(741),d=(function(e){function t(){return r(this,t),o(this,a(t).apply(this,arguments))}return c(t,e),t})(u.a)},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?a(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}n.d(t,"a",(function(){return m}));var d,f,g,p=n(328),h=n(523),m=(d=g=(function(e){function t(){var e;return r(this,t),e=o(this,s(t).call(this)),u(a(e),"data",f,a(e)),e._addModelSubscription("account-information",{},{onChanged:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.data=t},onDestroyed:function(){e.data={}}}),e}return c(t,e),t})(h.a),f=(function(e,t,n,i,r){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o})(d.prototype,"data",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),d)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return s}));var s=(function(){function e(t){var n=t.themesStore;i(this,e),this.themesStore=n}return o(e,[{key:"setTheme",value:function(e){return!!this.themesStore.isThemeExist(e)&&ns.action.run("change-theme",{themeId:e})}}]),e})()},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",(function(){return d}));var u=n(391),d=(function(e){function t(e,n,i){return r(this,t),o(this,a(t).call(this,(function(){return e.searchQuery.paramsForSuggest}),(function(){i()&&n.startSuggest()})))}return c(t,e),t})(u.a)},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",(function(){return p}));var u=n(391),d=n(325),f=n(426),g=n(439),p=(function(e){function t(e,n,i,s,c){return r(this,t),o(this,a(t).call(this,(function(){return e.searchQuery.getAutosearchParams()}),(function(){c()||n.isSearchLocked||(n.startSearch(i.currentShowText,{force:!0,metrika:"advanced"},i),s.finishScenarioIfActive(d.f,f.a),s.startScenario(d.f,g.a))})))}return c(t,e),t})(u.a)},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",(function(){return d}));var u=n(391),d=(function(e){function t(e,n,i,s,c,l,u){return r(this,t),o(this,a(t).call(this,(function(){return{page:e.currentPage.page,params:e.currentPage.params}}),(function(){if(!n.wasSearchRequestSimplified){if(e.isCollectorSearch())return l(),void n.searchQuery.reset();var t=e.isSearchResultsPage;i.syncSearchQuery(),s.currentShowText=n.searchQuery.currentSuggestText;var r=n.searchQuery.isAdvancedDirty||Boolean(n.searchQuery.currentSearchText);c()&&t&&r?u():c()||t||l()}}),{fireImmediately:!0}))}return c(t,e),t})(u.a)},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",(function(){return d}));var u=n(391),d=(function(e){function t(e,n){return r(this,t),o(this,a(t).call(this,(function(){return n.showAdvanced}),(function(){e.logToggleAdvanced(n.currentShowText,n.showAdvanced)})))}return c(t,e),t})(u.a)},function(e,t,n){"use strict";(function(e){function i(e,t,n,i){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),t&&o)for(var a in o)void 0===t[a]&&(t[a]=o[a]);else t||(t=o||{});if(1===s)t.children=i;else if(s>1){for(var c=new Array(s),l=0;l<s;l++)c[l]=arguments[l+3];t.children=c}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var r,o=n(356),s=n(343),a=i(s.a,{id:"mail--SearchSuggest-Ql",cls:"mail-IconContainer"}),c=function(e){var t=e.itemData;return i("div",{className:"mail-SuggestItem"},void 0,a,i(o.a,{text:t.show_text_highlighted||t.show_text}))};c.propTypes={itemData:e.object.isRequired},t.a=c}).call(t,n(317))},function(e,t){},function(e,t,n){"use strict";var i=n(2295);n.d(t,"a",(function(){return i.a}))},,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i=n(2391),r=n.n(i),o=n(2394);n.n(o);t.a=r.a},,,,,,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function s(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function a(e,t,n,i,r){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n.d(t,"a",(function(){return _}));var c,l,u,d,f,g,p=n(328),h=n(123),m=(n.n(h),n(2453)),v=!0,_=(c=g=(function(){function e(){var t=this;i(this,e),s(this,"status",l,this),s(this,"isVisible",u,this),this._autoCloseTimeoutId=null,this._deferredShowTimeout=150,this._deferredShowTimeoutId=null,this._showCallbacks=[],this._onPageChange=function(){!1===t.status.hideOnTimeout&&t.hide()},this.sendMetric=function(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];(e=Jane).c.apply(e,["Нотификации","Функциональные нотификации",t.status.name].concat(i))},this.onClick=function(){t.status.hideOnClick&&t.hide(t.status.name)},this.onClose=function(){t.hide(t.status.name,v),t.sendMetric("Клик","Закрыть")},this.startDeferredShow=function(e){t._deferredShowTimeoutId=setTimeout((function(){t._show(e)}),t._deferredShowTimeout)},this.stopDeferredShow=function(){clearTimeout(t._deferredShowTimeoutId)},this.startAutoClose=function(){var e=t.status,n=e.hideOnTimeout,i=e.name,r=e.timeout;n&&(t._autoCloseTimeoutId=setTimeout((function(){t.hide(i)}),r))},this.stopAutoClose=function(){clearTimeout(t._autoCloseTimeoutId)},this.show=function(e){e.shouldSkipAnimation?t._show(e):(t.hide(t.status.name),t.stopDeferredShow(),t.startDeferredShow(e))},s(this,"_show",d,this),s(this,"hide",f,this),ns.events.on("ns-page-before-changed",this._onPageChange)}return o(e,[{key:"addShowCallback",value:function(e){this._showCallbacks.push(e)}},{key:"removeShowCallback",value:function(e){var t=this._showCallbacks.indexOf(e);t>=0&&this._showCallbacks.splice(t,1)}},{key:"_invokeCallback",value:function(e){e()}}]),e})(),l=a(c.prototype,"status",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return m.a.defaults}}),u=a(c.prototype,"isVisible",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d=a(c.prototype,"_show",[p.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.status=new m.a(t),e.isVisible=!0,e.stopAutoClose(),e.startAutoClose(),e.sendMetric("Показ"),e._showCallbacks.forEach(e._invokeCallback)}}}),f=a(c.prototype,"hide",[p.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&e.status.name!==t||(e.stopAutoClose(),n&&Object(h.isFunction)(e.status.onClose)&&e.status.onClose(),e.isVisible=!1)}}}),c)},function(e,t,n){"use strict";(function(e,i,r){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(null==e)return{};var n,i,r=a(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function a(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function d(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,n,i){b||(b="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:b,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function v(e){var t=(function(t){function n(e){var t;return c(this,n),t=d(this,g(n).call(this,e)),t._resetCancelButtonAutohide=function(){var e=t._shouldShowCancel(t.props);t._stopCancelButtonAutohide(),t.setState({showCancel:e}),e&&t._startCancelButtonAutohide()},t.onCancel=function(){var e=t.props,n=e.onCancel,i=e.sendMetric;n(),i("Клик","Отменить")},t.state={showCancel:t._shouldShowCancel(e)},t}return p(n,t),u(n,[{key:"_shouldShowCancel",value:function(e){var t=e.onCancel,n=e.hideCancelAfter;return Boolean(t&&n)}},{key:"_startCancelButtonAutohide",value:function(){var e=this,t=this.props.hideCancelAfter;this._hideCancelTimerID=setTimeout((function(){e.setState({showCancel:!1})}),t)}},{key:"_stopCancelButtonAutohide",value:function(){this._hideCancelTimerID&&(clearTimeout(this._hideCancelTimerID),this._hideCancelTimerID=null)}},{key:"componentDidMount",value:function(){var e=this.props.subscribeShowCallback;this._resetCancelButtonAutohide(),e(this._resetCancelButtonAutohide)}},{key:"componentWillUnmount",value:function(){(0,this.props.unsubscribeShowCallback)(this._resetCancelButtonAutohide),this._stopCancelButtonAutohide()}},{key:"render",value:function(){var t,n=this.props,r=n.linkTheme,o=(n.sendMetric,n.onCancel),a=(n.hideCancelAfter,n.subscribeShowCallback,n.unsubscribeShowCallback,s(n,["linkTheme","sendMetric","onCancel","hideCancelAfter","subscribeShowCallback","unsubscribeShowCallback"])),c=this.state.showCancel;return o&&c&&(t=m(y.a.Action,{theme:r,onClick:this.onCancel},void 0,S)),i.createElement(e,a,t)}}]),n})(i.Component);return t.propTypes={linkTheme:r.string.isRequired,sendMetric:r.func.isRequired,onCancel:r.func,hideCancelAfter:r.number,subscribeShowCallback:r.func,unsubscribeShowCallback:r.func},t.displayName="".concat(_(e),"WithUndo"),t}function _(e){return e.displayName||e.name}t.a=v;var b,y=n(377),S=m(e,{loc:"statusline/action_cancel"})}).call(t,n(336),n(318),n(317))},function(e,t,n){"use strict";(function(e,i){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n,i){p||(p="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:p,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"a",(function(){return b}));var p,h=n(332),m=n(759),v=n(751),_=n(2489),b=(n.n(_),(function(t){function n(){var e,t;o(this,n);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t=c(this,(e=u(n)).call.apply(e,[this].concat(r))),t.state={tooltipVisible:!0},t.onCrossClose=function(){var e=t.props.onClose;t.setState({tooltipVisible:!1}),e()},t._alignPopup=function(){t._popup&&t._popup.forceUpdate()},t}return d(n,t),a(n,[{key:"componentDidMount",value:function(){Object(m.b)(this._alignPopup,"liza_minified_header"),Object(v.a)(this._alignPopup),ns.events.on("daria:vThemesSelector:new-schema",this.props.onClose,!0)}},{key:"componentWillUnmount",value:function(){Object(m.c)(this._alignPopup,"liza_minified_header"),Object(v.b)(this._alignPopup),ns.events.off("daria:vThemesSelector:new-schema",this.props.onClose,!0)}},{key:"render",value:function(){var t=this,n={autoclosable:!1,cls:"mail-PromoCloseOldThemes",theme:"promo",anchor:this.props.anchorNode,to:"bottom",size:"m",visible:this.state.tooltipVisible,tone:"default",ref:function(e){return t._popup=e}},i=this.props.promo,r={mods:{star:"yes",side:"bottom-left"}};return e.createElement(h.a,n,g(h.a.Close,{onClick:this.onCrossClose}),g(h.a.Description,{},void 0,i.getPromoText()),e.createElement(h.a.Corner,r))}}]),n})(e.PureComponent));b.propTypes={anchorNode:i.object.isRequired,onClose:i.func.isRequired,promo:i.shape({getPromoText:i.func.isRequired}).isRequired}}).call(t,n(318),n(317))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}n.d(t,"a",(function(){return a}));var a=(function(){function e(){r(this,e)}return s(e,[{key:"_getSettings",value:function(){return ns.Model.get("settings")}},{key:"isCompactMessagesList",value:function(){return this.getCompactMessagesListValue()&&!Daria.isAttachmentsLineDesign()}},{key:"getCompactMessagesListValue",value:function(){return this._getSettings().isSet("liza_minified")}},{key:"isCompactHeader",value:function(){return this.getCompactHeaderValue()}},{key:"getCompactHeaderValue",value:function(){return this._getSettings().isSet("liza_minified_header")}},{key:"toggleCompact",value:function(){var e=!this.getCompactMessagesListValue(),t=i({},"liza_minified",e);e||(t["size-view-app2"]="0"),this._getSettings().setSettings(t)}},{key:"toggleCompactHeader",value:function(){var e=!this.getCompactHeaderValue(),t=i({},"liza_minified_header",e);e||(t["size-view-app2"]="0"),this._getSettings().setSettings(t)}}]),e})()},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return s}));var s=(function(){function e(){i(this,e),this._renderedMids={}}return o(e,[{key:"log",value:function(e){if(!this._isLogDisabled()){var t=this._extractMids(e);this._areAllMidsAlreadyRendered(t)||(this._markMidsAsRendered(t),Daria.monitoring.mailListRender(this._getLogParams(t)))}}},{key:"_extractMids",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).slice(0,Daria.DEFAULT_MESSAGES_PER_PAGE).map((function(e){return e.isThread()?e.get(".last_mid"):e.get(".mid")}))}},{key:"_markMidsAsRendered",value:function(){var e=this;(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(t){return e._renderedMids[t]=!0}))}},{key:"_areAllMidsAlreadyRendered",value:function(){var e=this;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).every((function(t){return e._renderedMids[t]}))}},{key:"_getLogParams",value:function(e){var t={mids:e},n=ns.page.current.params,i=n.current_folder,r=n.category,o=n.tabId;return o?t.tabId=o:r?t.category=r:i&&(t.fid=i),t}},{key:"_isLogDisabled",value:function(){return!Daria.hasFeature("web_log-mail-list-render")||!Jane.watcher.get("pageVisible")}}]),e})()},function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r={};e.exports=Daria.getDirectBlockLayoutInfo=function(e){if(!r[e]){var t=Daria.getRandomName();ns.View.define(t,{models:{"app-state":{"ns-model-changed":!1,"ns-model-changed.module-direct-loaded":"forceUpdate"}},yateModule:"mail"});var n=Daria.getRandomName()+"@",o=i({},t,i({},n,(function(){return ns.Model.get("app-state").get(".module-direct-loaded")?Daria.getDirectViewLayout(e):"messages-direct"===e?{"messages-direct-line-placeholder":{}}:{}})));if("messages-direct"===e){var s=Daria.getRandomName(),a=s+"@";r[e]={id:s,name:a,layout:i({},a,(function(){return Daria.is3pane()?{}:o}))}}else r[e]={name:t,layout:o}}return r[e]}},function(e,t){Daria.Abook={},Daria.Abook.formatContactInfo=function(e,t,n){if(n=n||{},!e)return{};var i=e.cid,r=e.name,o=$.map(e.email,(function(e){return e.value}));if(t.joinName&&(r=r.full||""),t.onlyFirstEmail){var s=n.email?$.inArray(n.email,o):0;o=o[s>-1?s:0]}1===o.length&&(o=o[0]);var a={cid:i,name:r,email:o};return t.shared&&(a.ya_directory=e.ya_directory),a}},function(e,t){Daria.formatContacts=function(e,t){var n,i=Daria.Constants.CONTACTS.DELIMITER;t&&(n=ns.Model.get("account-information").getEmails());var r=[];$.isArray(e)||(e=[e]);for(var o=0,s=e.length;o<s;o++){var a=e[o],c=a.email,l=a.name;!c||t&&$.inArray(c,n)>-1||"no_address"!==l&&"(адрес не указан)"!==l&&r.push(Jane.FormValidation.obj2contact(a))}return r.join(i)},Daria.createAutocompleteFormatter=function(e){var t=Daria.Constants.CONTACTS.DELIMITER;return function(n){return n.contacts?n.contacts.map(e).join(t):e(n)}},Daria.formatAutocompleteResult=Daria.createAutocompleteFormatter((function(e){return e.email})),Daria.showDoubleSizedContacts=function(){return Daria.Config.pddDomain||Daria.Config.workspace},Daria.getAccountAgeInDays=function(){var e=ns.Model.get("account-information");return(Daria.now()-e.getData().reg_date)/864e5},Daria.isNewAccount=function(){return Daria.getAccountAgeInDays()<=3},Daria.uidEnds=function(e){if($.isArray(e)&&e.length){var t=String(e[0]).length,n=parseInt(Daria.uid.slice(-t),10);return $.inArray(n,e)>-1}return!1},Daria.areTabsVisible=function(){var e=["label","attachments","unread","important"],t=["search","setup","compose","contacts","message","thread"].concat(e),n=!t.some((function(e){return-1!==ns.page.currentUrl.indexOf("#"+e)})),i=ns.Model.get("settings"),r=i.getSign("show_tabs"),o=!Daria.CompactMode.isCompactHeader(),s=Daria.hasFeature("new-typefilter-tabs"),a=Daria.is2pane();return!Daria.hasFoldersTabs()&&s&&r&&o&&a&&n},Daria.canShowYandexPlusButton=function(){var e=Daria.CompactMode.isCompactHeader(),t=ns.Model.get("settings").getSetting("disable_promo");return!e&&!t&&Daria.hasFeature("yandex-plus")},Daria.hasFoldersTabs=function(){return Daria.hasFeature("web_folders-tabs")},Daria.areFoldersTabsEnabled=function(){var e=Daria.hasFoldersTabs(),t=ns.Model.get("settings").getSign("show_folders_tabs");return e&&t},Daria.isAttachmentsTabEnabled=function(){return Daria.hasFeature("web-attachments-tab")&&Daria.areFoldersTabsEnabled()&&Daria.is2pane()},Daria.isAttachmentsTab=function(){var e=Daria.isAttachmentsTabEnabled(),t=ns.page.current.params||{},n=Boolean(t.attachments);return e&&n},Daria.isSearchWithAttachesTab=function(){var e=Daria.isAttachmentsTabEnabled(),t=ns.page.current.params||{},n=Boolean(t.search&&t.attaches);return e&&Daria.hasFeature("web-attachments-search")&&n},Daria.isAttachmentsLineDesign=function(){return Daria.isAttachmentsTab()||Daria.isSearchWithAttachesTab()},Daria.hasAsideScrollContainer=function(){var e=Daria.hasFeature("web_aside-scroll-container"),t=!Daria.resize.isWithCompactLeftColumn,n=Jane.HAS_AD&&t&&Daria.is2pane()&&"MSIE"!==Daria.UA.BrowserName;return e&&n&&Daria.AdvPresenter.shouldShowBanner()},Daria.shouldShowContextToolbar=function(){return Daria.is2pane()&&Daria.hasFeature("context-toolbar")},Daria.hasRocksSuggest=function(){return Daria.hasFeature("web_rocks-suggest")}},function(e,t,n){var i={"message.ogg":n(1624),"message.mp3":n(1625),"message.wav":n(1626)};Daria.Sound={preload:function(e){this._getPlayer(e)},play:function(e){this._getPlayer(e)()},_cache:{},_getPlayer:function(e){if(!this._cache[e])if("src"in document.createElement("audio")){var t=this._createAudioEl(e);this._cache[e]=function(){t.play()}}else if("src"in document.createElement("bgsound")){var n=document.createElement("bgsound");document.getElementsByTagName("head")[0].appendChild(n),this._cache[e]=function(){n.src=i[e+".mp3"]}}else this._cache[e]=function(){};return this._cache[e]},_createAudioEl:function(e){var t=document.createElement("div");t.innerHTML='<audio preload="auto"><source src="'+i[e+".ogg"]+'" type="audio/ogg"></source><source src="'+i[e+".mp3"]+'" type="audio/mpeg"></source><source src="'+i[e+".wav"]+'" type="audio/wav"></source></audio>';var n=t.firstChild;return document.body.appendChild(n),n}}},function(e,t,n){e.exports=n.p+"_/dc22b778f507cf99af5f1fbaa09283ad-message.ogg"},function(e,t,n){e.exports=n.p+"_/c8904f7129944be785562682585d90dd-message.mp3"},function(e,t,n){e.exports=n.p+"_/a58459d090abe810c59cc0c21af602b9-message.wav"},function(e,t){!(function(e){var t=Daria.Constants.CONTACTS.DELIMITER;e.emailAutocompleterOpts={tpl:'<div class="b-mail-suggest b-mail-suggest_contacts"><div class="b-grid js-sections"></div></div>',activeClass:"b-grid-item_selected",width:"20em",multiple:!0,minChars:0,minClickCount:0,excludeSelected:!0,filterItem:function(e){var t,n=this.currentValue||this.prevVal;return e.data.title?(t=[].concat(e.data.contacts),t=$.grep(t,(function(e){return-1===n.indexOf(e.email)})),t.length):e.data.email?-1===n.indexOf(e.data.email):void 0},scroll:!0,scrollElem:".b-grid",item:".b-grid-item",sections:[{url:Daria.api.models+"?_model.0=abook-suggest",fakeRequestParams:!0,dataType:"json",param:"q",withCkey:!0,extraParams:{glimit:5,climit:35,useAbook:"on"},contextExtraParams:function(){var e,t=Daria.vCompose,n={};return t&&"compose"===ns.page.current.page?(e=$.map(["To","Cc","Bcc"],(function(e){var n=t["get"+e]();if(n)return n.replace(/\s*/g,"").split(",")})),e=e.join(","),e=$.map(Jane.FormValidation.splitContacts(e),(function(e){return e.email})),e=e.join(","),e&&(n.to=e),n):n},beforeRequest:function(e){return e.length>=1},parse:function(e,t){function n(e,n,i,o){for(var s=0,a=e.length;s<a&&s!==o;s+=1){var c=e[s];c&&(i[i.length]={data:c,$item:$(n.call(r,c,t))})}}e=jpath(e,".models[0].data")[0]||{};var i=[],r=this;return e.contacts&&e.contacts.length&&n(e.contacts,r.formatContact,i,r.extraParams.climit),e.groups&&e.groups.length&&n(e.groups,r.formatGroup,i,r.extraParams.glimit),i},groupTpl:'<div class="b-grid-item"><span class="b-grid-item__content"><span class="b-grid-item__content__i"><span class="b-grid-item__content__group">'+i18n("%Search_Suggest_group")+'</span>&#160;{title}</span></span><span class="b-grid-item__content"><span class="b-grid-item__content__i"><span class="b-grid-item__misc">{emails}</span></span></span></div>',formatContact:function(e,t){var n='<div class="b-grid-item"><span class="b-grid-item__content"><span class="b-grid-item__content__i">'+_.escape(e.name||e.email)+'</span></span><span class="b-grid-item__content"><span class="b-grid-item__content__i"><span class="b-grid-item__misc">'+(e.name&&e.email?_.escape(e.email):" ")+'</span></span></span><span class="b-grid-item__right"><span class="b-userpic b-userpic_small'+(e.cid?" cid-"+e.cid:"")+'">'+(e.ref&&e.email&&e.id>-1&&!e.popdom?Daria.Recipients.add({name:e.name,email:e.email,href:!1,size:28}):"")+"</span></span>";return n+="</div>",Daria.Autocompleter.utils.highlight(n,t)},formatGroup:function(e,n){for(var i=[],r=0,o=e.contacts.length;r<o;r++)i.push(e.contacts[r].email);return Daria.Autocompleter.utils.highlight(Daria.supplant(this.groupTpl,{title:e.title,emails:i.join(t)}),n)},formatResult:Daria.createAutocompleteFormatter((function(e){return e.name?'"'.concat(e.name,'" <').concat(e.email,">"):e.email}))}]};var n=e.emailAutocompleterOpts.sections[0];e.emailAutocompleterOpts.sections.push($.extend({},n,{url:Daria.api.models+"?_model.0=abook-suggest",fakeRequestParams:!0,extraParams:{popular:!0,climit:10,useAbook:"on"},parse:function(e,t){var i=jpath(e,".models[0].data")[0]||{};return i.contact&&!i.contacts&&(i.contacts=i.contact),n.parse.call(this,e,t)},formatContact:function(e,t){return e.name=e.name&&e.name.full,n.formatContact.call(this,e,t)},beforeRequest:function(e,t){if(e)return!1;if("compose"!==ns.page.current.page)return!1;if(t&&t.keyPressed)return!1;var n=ns.page.current.params,i=ns.Model.get("folders").getFolderBySymbol("template"),r=i&&i.fid;return!(Daria.composeParams&&"template"===Daria.composeParams.save_symbol||"template"===n.save_symbol||n.ids&&ns.Model.get("message",{ids:n.ids}).inFolder(r))},onshow:function(){Jane.c(["popular_suggest","Показы саджеста популярных контактов"])},onresult:function(e){Daria.composeParams=Daria.composeParams||{},Daria.composeParams["popular-suggest-general"]||(Daria.composeParams["popular-suggest-general"]=[]),Daria.composeParams["popular-suggest-general"].push(e.email),Jane.c(["popular_suggest","Клики в саджест популярных контактов"]);var t=Jane.watcher.get("autocompleter.popularContacts")||[],n=this,i=function e(){ns.events.off("ns-page-before-load",e),n.binded=!1,Jane.watcher.set("autocompleter.popularContacts",[])};t.push(e.email),Jane.watcher.set("autocompleter.popularContacts",t,{silent:!0}),this.binded||(this.binded=!0,ns.events.on("ns-page-before-load",i))}})),e.getEmailAutocompleter=function(){var t=new e(e.emailAutocompleterOpts),n=t.onChange;return t.onChange=function(){var e=this.$input.val();return this.keyPressed&&!e?void this.hide():n.apply(this,arguments)},t},e.getContact=function(){return e.__contactInstance||(e.__contactInstance=e.getEmailAutocompleter()),e.__contactInstance},e.getContactEmail=function(){return e.__contactEmailInstance||(e.__contactEmailInstance=(function(){var t=$.extend(!0,{},e.emailAutocompleterOpts,{multiple:!1,filterItem:null});t.sections=$.each(t.sections,(function(e,t){$.extend(t,{formatResult:function(e){return e.email||""},parse:function(e,t){e=jpath(e,".models[0].data")[0]||{};var n=[],i=this;return e.contacts&&e.contacts.length&&(function(e,n,r,o){for(var s=0,a=e.length;s<a&&s!==o;s+=1){var c=e[s];c&&(r[r.length]={data:c,$item:$(n.call(i,c,t))})}})(e.contacts,i.formatContact,n,i.extraParams.climit),n}})}));var n=new e(t),i=n.onChange;return n.onChange=function(){var e=this.$input.val();return this.keyPressed&&!e?void this.hide():i.apply(this,arguments)},n})()),e.__contactEmailInstance}})(Daria.Autocompleter)},function(e,t,n){var i=n(1629),r=n(1630),o=n(1631),s=null;Daria.Autocompleter.logSuggestInfo=function(e){e.uid=Daria.uid,e.searchid=Daria.React.getSearchId(),Jane.ErrorLog.send(e)},Daria.Autocompleter.enumerate=function(e,t,n){return e.map((function(e,i){return e[n]=i+t,e}))},Daria.Autocompleter.getSearch=function(){if(!s){var e=$(Jane.tt("mail:search-autocomplete"));if(!Daria.IS_CORP){var t=new Daria.SearchFilters({onSelect:function(e){Daria.Autocompleter.logSuggestInfo({event:"suggest_type_selection",source:"suggest",filter_type:e||0}),ns.events.trigger("search.start-search",{force:!0,metrika:"suggest"})}});e.find(".js-filters").removeClass("g-hidden").find(".js-filters-placeholder").replaceWith(t.getNode())}s=new Daria.Autocompleter({tpl:e,activeClass:"b-grid-item_selected",item:".b-grid-item",blockSubmit:!1,selectFirst:!1,minChars:0,saveSelectionOnBlur:!1,position:{right:10},lastWord:!0,onrender:function(){},sections:[i(),r(),o()]})}return s}},function(e,t){e.exports=function(){return{url:Daria.api.models+"?_model.0=history-suggest",dataType:"json",param:"text",getParamFromTerm:function(e){return e},withCkey:!0,max:5,dontShow:ns.Model.get("settings").isSet("dont_save_history"),tpl:yr.run("mail",null,"search-autocomplete-suggest"),onshow:function(){Jane.c({"Поиск":'Показы "прошлые запросы"'})},onselect:function(e,t){Daria.Autocompleter.logSuggestInfo({event:"suggest_used",suggest_group:"history",user_input:this.prevVal,user_select_idx:t+1,idx:e.idx||1,suggest_text:e.text})},onfetch:function(e,t){Daria.Autocompleter.logSuggestInfo({event:"suggest_all",suggest_group:"history",user_input:this.prevVal,empty_suggest:t})},parse:function(e,t,n){e=jpath(e,".models[0].data")[0],e=Daria.Autocompleter.enumerate(e,1,"idx");var i=this.max;""===t&&(this.max=10);var r=n.parse(e,this,t);return this.max=i,r},formatItem:function(e){return yr.run("mail",e,"search-autocomplete-suggest-item")},formatResult:function(e){return e.text}}}},function(e,t){e.exports=function(){var e={},t="";return Daria.IS_CORP||(Daria.Config.pddDomain||(e.mix_groups=Daria.uidEnds([4]),e.emails=ns.Model.get("account-information").getAllUserEmails().join(",")),t="&"+$.param(e)),{url:Daria.api.models+"?_model.0=abook-suggest"+t,dataType:"json",param:"q",withCkey:!0,max:10,tpl:yr.run("mail",null,"search-autocomplete-contacts"),parse:function(e,t){e=jpath(e,".models[0].data.contacts")[0];var n=[];if(e&&e.length){e=Daria.Autocompleter.enumerate(e,1,"idx");for(var i=0,r=e.length;i<r&&i<this.max;i++){var o=e[i];o&&n.push({data:o,$item:$(this.formatItem(o,t))})}}return n},formatItem:function(e){return yr.run("mail",e,"search-autocomplete-contacts-item")},formatResult:function(e){return e.email},onshow:function(){Jane.c("Поиск",'Показы "переписка с адресами"')},onselect:function(t,n){Daria.Autocompleter.logSuggestInfo({event:"suggest_used",suggest_group:"address",user_input:this.prevVal,user_select_idx:n+1,idx:t.idx||1,suggest_text:t.email,mix_groups:e.mix_groups||!0})},onfetch:function(t,n){Daria.Autocompleter.logSuggestInfo({event:"suggest_all",suggest_group:"address",user_input:this.prevVal,empty_suggest:n,mix_groups:e.mix_groups||!0})}}}},function(e,t){var n="//clck.yandex.ru/redir/dtype=stred/pid=2/cid=71675/*"+Daria.Config["www-url"]+"/yandsearch?text=";e.exports=function(){return{isStatic:!0,tpl:yr.run("mail",null,"search-autocomplete-internet"),onfetch:function(e,t){Daria.Autocompleter.logSuggestInfo({event:"suggest_all",suggest_group:"internet",user_input:this.prevVal,empty_suggest:t})},formatItem:function(e){var t=Daria.Autocompleter.getSearch().$input.val();return t?(e.term=t,e.url=n+encodeURIComponent(t),yr.run("mail",e,"search-autocomplete-internet-item")):null},onresult:function(e){return Daria.Autocompleter.logSuggestInfo({event:"suggest_used",suggest_group:"internet",user_input:this.prevVal,idx:0,user_select_idx:1,suggest_text:e.term}),window.open(e.url,"_blank"),Jane.c("Поиск","Клик по найти в интернете"),!0}}}},function(e,t){!(function(){function e(e){var i=e.data.obj;return Daria.MessagesPager.active=i,i.isDragging=!0,i.slider.addClass("b-mail-paginator_scrolling"),$(document).on("mousemove",{obj:i},n),$(document).on("mouseup",{obj:i},t),e.preventDefault(),!1}function t(e){var i=e.data.obj;delete Daria.MessagesPager.active,i.isDragging=!1,i.slider.removeClass("b-mail-paginator_scrolling"),$(document).off("mousemove",{obj:i},n),$(document).off("mouseup",t)}function n(e){var t=e.data.obj;if(t.isDragging){t.dragged||(t.dragged=!0);var n=Math.floor(e.pageX-t.sliderWidth/2-t.$container.offset().left);return t._setSliderPosition(n),e.preventDefault(),!1}}function i(e){var t=e.data.obj;t.scrolling||t._setSliderPositionByScroll(t.$container.scrollLeft(),!1)}function r(e){var t=$(e.currentTarget),n=ns.action.getParams(t[0]);return e.data.obj.updateScroll(n,!0),!0}ns.events.on("pageVisible.change",(function(){Daria.MessagesPager.active&&t({data:{obj:Daria.MessagesPager.active}})})),Daria.MessagesPager=function(e,t,n){this._params=n||{},this.$node=$(e),this.isFloat=t,this.setPagerToDate=_.debounce(this.setPagerToDate,0),this.init()},Daria.MessagesPager.incDate=function(e,t){var n=Jane.Common.n;return e=Number(e),t=Number(t),12===t?(e++,t=1):t++,[String(e),String(n(t))]},Daria.MessagesPager.decDate=function(e,t){var n=Jane.Common.n;return e=Number(e),t=Number(t),1===t?(e--,t=12):t--,[String(e),String(n(t))]},Daria.MessagesPager.prototype={init:function(){return this.slider=this.$node.find(".js-messages-pager-slider"),this.$scrollLeft=this.$node.find(".b-link_scroll-left"),this.$scrollRight=this.$node.find(".b-link_scroll-right"),0===this.slider.size()?(this.$scrollRight.add(this.$scrollLeft).addClass("b-link_disabled"),void this._showPager()):(this.$container=this.$node.find(".js-messages-pager-container"),this.scrollContainer=this.$node.find(".js-messages-pager-scroll"),this.tooltip=this.$node.find(".js-tooltip"),this.dragged=!1,this.$containerWidth=this.$container.width(),this.scrollWidth=this.scrollContainer.width(),this.sliderWidth=this.$containerWidth/this.scrollWidth*this.$containerWidth,this.dragged=!1,this.years=this.$node.find(".js-year").get().map((function(e){return{left:e.offsetLeft,year:ns.action.getParams(e).year}})),this.$containerWidth>=this.scrollWidth?(this.slider.remove(),this.$scrollLeft.remove(),this.$scrollRight.remove(),void this._showPager()):(this.minSliderX=0,this.maxSliderX=Math.floor(this.$containerWidth-this.sliderWidth),this.minScroll=0,this.maxScroll=this.scrollWidth-this.$containerWidth,this.slider.css("width",Math.ceil(this.sliderWidth)),this.isDragging=!1,this.bindEvents(),void(this.isFloat||this.updateScroll())))},_showPager:function(){this._visible||(this.$node.css("visibility","visible"),this._visible=!0)},_getItems:function(){if(!this._months){var e=this.$container.scrollLeft(),t=this._months=[];this.$node.find(".b-mail-paginator__item").each((function(){t.push($(this).position().left+e)}))}return this._months},updateScroll:function(e,t){e||(e=this._params.dontUsePageParams?{}:ns.page.current.params);var n;e.datePager&&(n=e.datePager,n=n.replace(/\./g,"")),n&&this.setCurrentItem(n),this.$container&&(n?this.setPagerToDate(n,t):this._setSliderPosition(this.maxSliderX))},updateTooltip:function(e,t){if(this.years.length){for(var n=0;n<this.years.length&&this.years[n].left-t<e;)n++;n--,n<0&&(n=0),this.tooltipYear!==this.years[n].year&&(this.tooltipYear=this.years[n].year,this.tooltip.html(this.tooltipYear))}},resetCurrentItem:function(e){this.$node.find(".b-mail-paginator__item_current, .b-mail-paginator__link_current").removeClass("b-mail-paginator__item_current b-mail-paginator__link_current");var t=this.scrollWidth-this.$containerWidth;this._setSliderPositionByScroll(t,e)},setCurrentItem:function(e){var t=this.$node.find(".item-"+e);0!==t.size()&&(t.closest(".js-messages-pager-container").find(".b-mail-paginator__item_current").removeClass("b-mail-paginator__item_current").find(".b-mail-paginator__link_current").removeClass("b-mail-paginator__link_current"),t.closest(".b-mail-paginator__item").addClass("b-mail-paginator__item_current").find(".b-mail-paginator__link").addClass("b-mail-paginator__link_current"))},setPagerToDate:function(e,t){var n=this.$node.find(".item-"+e);if(0!==n.size()){var i=n.position().left+this.$container.scrollLeft(),r=i-this.$containerWidth/2+25;this._setSliderPositionByScroll(r,t)}},_setSliderPosition:function(e,t,n){var i=this;e=Math.floor(e),e>this.maxSliderX&&(e=this.maxSliderX),e<this.minSliderX&&(e=this.minSliderX),t=t||Math.floor(e/this.maxSliderX*(this.scrollWidth-this.$containerWidth));var r=e+this.sliderWidth/2;n&&document.documentMode&&document.documentMode<9&&(n=!1);var o=e>this.minSliderX,s=e<this.maxSliderX,a=s&&r+54<this.$containerWidth,c=o&&r-54>0;n?this.slider.stop().animate({left:e},"fast"):this.slider.stop().css({left:e}),a!==this.showRightArrow&&(this.showRightArrow=a,this.slider.toggleClass("b-mail-paginator__slider_arrow_right",a)),c!==this.showLeftArrow&&(this.showLeftArrow=c,this.slider.toggleClass("b-mail-paginator__slider_arrow_left",c)),n?(this.scrolling=!0,this.$container.stop().animate({scrollLeft:t},"fast",(function(){i.scrolling=!1}))):this.$container.stop().scrollLeft(t),s!==this.allowRightArrow&&(this.$scrollRight.toggleClass("b-link_disabled",!s),this.allowRightArrow=s),o!==this.allowLeftArrow&&(this.$scrollLeft.toggleClass("b-link_disabled",!o),this.allowLeftArrow=o),this.updateTooltip(e+this.sliderWidth/2,t),this._showPager()},_setSliderPositionByScroll:function(e,t){e<this.minScroll?e=this.minScroll:e>this.maxScroll&&(e=this.maxScroll);var n=e/(this.scrollWidth-this.$containerWidth)*(this.$containerWidth-this.sliderWidth);this._setSliderPosition(n,e,t)},_adjustSliderPosition:function(e){var t=this.$container.scrollLeft();e>0&&(t+=this.$containerWidth);for(var n,i=this._getItems(),r=0,o=i.length;r<o;r++)if(i[r]>=t){n=e>0?i[r-1]:i[r]-this.$containerWidth;break}n||(n=this.maxScroll),this._setSliderPositionByScroll(n,!0)},_moveScroll:function(e){var t=e.currentTarget.className;return!(t.indexOf("b-link_disabled")>-1)&&(this._adjustSliderPosition(t.indexOf("left")>-1?-1:1),!1)},bindEvents:function(){this.slider.on("mousedown",{obj:this},e),this.$container.on("scroll",{obj:this},i),this.isFloat&&this.$container.find(".b-mail-paginator__link").on("click",{obj:this},r),this.$scrollLeft.add(this.$scrollRight).on("click",this._moveScroll.bind(this))},unbindEvents:function(){this.slider.off("mousedown",e),this.isFloat&&this.$container&&this.$container.find(".b-mail-paginator__link").off("click",r),this.$container&&this.$container.off("scroll"),this.$scrollLeft&&this.$scrollLeft.add(this.$scrollRight).off("click")}}})()},function(e,t){!(function(e,t){function n(e,t,n){if(t){var i=ns.Model.get("labels").getLabelByName(n).lid;ns.Model.get("message",{ids:t}).hasLabel(i)&&(e=i18n("%Drag_Снять_метку",n))}return e}var i=t.DragNDrop,r=function(){};r.prototype=new i.EmptyDrag,r.prototype.init=function(t,n){return this.is_active=!1,this.is_draggable=!0,this.area=i.getDragMessageArea(),this.draggable=n,this.label=this.getLabelText(n),this.evt=t,this.message_row=this.getMessageRow(t.target),this._messagesNode=e(".js-messages-list").get(0),this},r.prototype.onDragStart=function(t){this.is_active=!0,this.area.show(),this.area.alignByEvent(t);var n=e(this.evt.target),i="is-draggable-labels";return n.parents(".js-labels").length&&(i+=" is-draggable-labels-from-labels"),this.standardMessage(),e("html").addClass(i),this},r.prototype.standardMessage=function(){this.area.setText(i18n("%Drag_Укажите_письмо_для_пометки",this.label))},r.prototype.onDrag=function(e){this.area.alignByEvent(e)},r.prototype.getTargetData=function(t){var n=e(t),i=this,r=[{name:"message_many",test:function(){return"messages"===ns.page.current.page&&(!!e.contains(i._messagesNode,t)&&e(i.getMessageRow(t)))}},{name:"message_one",test:function(){return!!n.is(".js-message-subject-drop")&&n}},{name:"unlabel",test:function(){return!(!(n.is(".js-toolbar-item-delete")||n.is(".js-labels")||n.is(".js-labels *"))||0!==e(i.evt.target).parents(".js-labels").length)&&n}}];return this.testTarget(r,n)},r.prototype.onDragEnter=function(t,i){var r;if("unlabel"===i.name)r=i18n("%Drag_Снять_метку",this.label);else{var o=e(i.target).closest(".js-message").data("id");r=n(i18n("%Drag_Пометить_письмо",this.label),o,this.label)}this.area.setText(r),this.hilite(i.target),this.area.evaluateDimensions()},r.prototype.onDragLeave=function(e,t){this.standardMessage(),this.nohilite(t.target)},r.prototype.onDragEnd=function(){this.area.alignByEvent(this.evt,{animate:!0}),e("html").removeClass("is-draggable-labels is-draggable-labels-from-labels")},r.prototype.getMessageRow=function(t){return e(t).parents(".js-message:eq(0)").addBack().filter(".js-message:eq(0)")[0]},r.prototype.onDrop=function(t,n){this.area.hide();var i="label";"unlabel"===n.name&&(i="unlabel");var r;switch(i){case"label":r=n.target;break;case"unlabel":r=e(this.message_row?this.message_row:this.draggable)}if(r&&n.target[0]!==this.message_row){var o=r.closest(".js-message").data("id"),s={};if(o){var a=ns.Model.get("message",{ids:o}),c=ns.Model.get("messages-checked",{mid:o});c.check(a,!0),s={mMessagesChecked:c}}var l={operation:i,params:_.extend(s,ns.action.getParams(this.draggable))};r.trigger("dragndrop.drop",l)}this.nohilite(n.target),e("html").removeClass("is-draggable-labels is-draggable-labels-from-labels")},Daria.DragLabel=r;var o=function(){};o.prototype=new i.EmptyDrag,o.prototype.init=function(t,n){this.is_active=!1,this.is_draggable=!0,this.area=i.getDragMessageArea(),this.draggable=n;var r=n.find(".b-messages__message__checkbox__input");return this.checked=r.prop("checked"),this.evt=t,n.is(".js-message-subject-drop")&&(this.type="subject"),this.TARGET_BLOCK_LABELS=e(".ns-view-labels")[0],this},o.prototype.getTargetData=function(t){var n=e(t),i=this,r=function(e,t){if(t&&this.mMessagesChecked.isFolderSelected())return!1;var i=n.closest(e);return!!i.length&&i},o=function(e,t){return r.bind(i,e,t)},s=[{name:"mark",test:o(".js-toolbar-item-mark-as-read")},{name:"mark",test:o(".js-drop-area-read")},{name:"unmark",test:o(".js-toolbar-item-mark-as-unread")},{name:"unmark",test:o(".js-drop-area-unread")},{name:"remove",test:o(".js-toolbar-item-delete")},{name:"remove",test:o(".js-drop-area-delete")},{name:"reply-all",test:o(".js-toolbar-item-reply-all",!0)},{name:"reply",test:o(".js-toolbar-item-reply",!0)},{name:"reply",test:o(".js-reply",!0)},{name:"forward",test:o(".js-toolbar-item-forward")},{name:"tospam",test:o(".js-toolbar-item-spam")},{name:"tospam",test:o(".js-drop-area-spam")},{name:"notspam",test:o(".js-toolbar-item-not-spam")},{name:"messages.deselect",test:o(".js-deselect")},{name:"move",test:function(){var e=n.parents(".js-valid-drag-target:eq(0)");if(e.length)return e}},{name:"label",test:function(){if(ns.Model.get("folders").isFolder(ns.page.current.params.current_folder,["trash","spam"]))return!1;if(!n.hasClass("js-label-no-dnd")&&r(".js-labels-item")&&e.contains(i.TARGET_BLOCK_LABELS,t)){if(!n.attr("data-title")){var o=n.closest("[data-title]");n=!!o.length&&o}return n}return!1}}],a=this.testTarget(s,n);return a.original_target=n,a},o.prototype.hiliteAll=function(){var t="mail-Page_draggingMessage";ns.Model.get("folders").isFolder(ns.page.current.params.current_folder,["trash","spam"])&&(t=t.concat(" mail-Page_draggingSpamMessage")),this.mMessagesChecked.isFolderSelected()&&(t+=" mail-Page_draggingMessageAll"),e("html").addClass(t)},o.prototype.nohiliteAll=function(){e("html").removeClass("mail-Page_draggingMessage mail-Page_draggingSpamMessage mail-Page_DraggingMessageAll")},o.prototype.check=function(t,n){if("messages"===ns.page.current.page){var i=e(n.target).closest(".js-cbt-item");if(i.length||t){if(i.length){var r=i.attr("data-id"),o=ns.Model.get("message",{ids:r});this.mMessagesChecked.check(o,t)}}else this.mMessagesChecked.resetChecked()}},o.prototype.showHiddenFolders=function(){var e=ns.Model.get("settings");e.isSet("hide_empty_folders")&&!this._showingHiddenFolders&&(this._showingHiddenFolders=!0,e.setIfChanged(".hide_empty_folders",!1))},o.prototype.hideHiddenFolders=function(){if(this._showingHiddenFolders){var e=ns.Model.get("settings");this._showingHiddenFolders=!1,e.setIfChanged(".hide_empty_folders",!0)}},o.prototype.onDragStart=function(e){if(1===e.which&&2!==e.buttons){this.showHiddenFolders(),this.mMessagesChecked=ns.Model.get("messages-checked",ns.page.current.params),this.check(!0,this.evt);var t=1;this.mMessagesChecked.touch({silent:!0}),"messages"===ns.page.current.page&&0===(t=this.mMessagesChecked.getCount())&&(t=1),this.count=t,this.is_active=!0,this.area.show(),this.area.alignByEvent(e),this.hiliteAll(),t<5?this.area.$control.addClass("b-drag-helper_few"):1!==t&&this.area.$control.addClass("b-drag-helper_many"),this.standardMessage(),ns.events.trigger("daria:dragndrop:message:start",this.mMessagesChecked)}},o.prototype.standardMessage=function(){this.area.setText(i18n("%Drag_Куда_перенести_письма",this.count)),this.area.evaluateDimensions()},o.prototype.onDrag=function(e){ns.events.trigger("daria:dragndrop:message:update",e),this.area.alignByEvent(e)},o.prototype.onDragEnd=function(e){this.hideHiddenFolders(),this.area.alignByEvent(this.evt,{animate:!0}),this.mMessagesChecked.isOnlyMessageChecked()&&this.check(this.checked,e),this.nohiliteAll(),ns.events.trigger("daria:dragndrop:message:dragend")},o.prototype.onDragEnter=function(t,i){var r=this.count,o={remove:i18n("%Drag_Удалить",r),mark:i18n("%Drag_Пометить_прочитанным",r),unmark:i18n("%Drag_Пометить_непрочитанным",r),tospam:i18n("%Drag_Пометить_как_спам",r),notspam:i18n("%Drag_Пометить_как_неспам",r),"reply-all":i18n("%Drag_Ответить",r),reply:i18n("%Drag_Ответить",r),forward:i18n("%Drag_Переслать",r),"messages.deselect":i18n("%Drag_Снять_выделение",r)},s="",a="";switch(this.hilite(i.target),i.name){case"move":var c=i.original_target;a=c.data("foldername")||c.text();var l=e(c).closest(".js-valid-drag-target").attr("data-params"),u=ns.parseQuery(l),d=u.fid;u.tabId?s=i18n("%Folder_tabs_move_to_tab",a):(s=i18n("%Drag_Перенести_в_папку",r,a),this.lazyAction((function(){ns.Model.get("folder",{fid:d}).switchFolded(!1)}),300));break;case"label":a=this.getLabelText(i.target[0]);var f=this.draggable,g=f.data("id");s=n(i18n("%Drag_Пометить_меткой",r,a),g,a);break;default:i.name in o&&(s=o[i.name])}this.area.setText(s),this.area.evaluateDimensions()},o.prototype.lazyAction=function(e,t){this.lazyActionTimeout&&(clearTimeout(this.lazyActionTimeout),this.lazyActionTimeout=null),e&&(this.lazyActionTimeout=setTimeout(e,t))},o.prototype.onDragLeave=function(e,t){this.lazyAction(!1),this.standardMessage(),this.nohilite(t.target)},o.prototype.onDrop=function(e,t){this.lazyAction(!1),this.hideHiddenFolders();var n={operation:t.name,params:ns.action.getParams(t.target[0])},i=this.draggable;Daria.is3pane()&&"subject"===this.type&&t.target.closest(".js-inplace-message-toolbar").length&&(i=t.target),i.trigger("dragndrop.drop",n),this.area.hide(),this.nohilite(t.target),this.nohiliteAll(),ns.events.trigger("daria:dragndrop:message:dragend")},i.add([{test:function(t,n){var i=ns.page.current;if(ns.Model.get("folders").isFolder(i.params.current_folder,["trash","spam"]))return!1;var r=n.closest(".js-labels-item");if(!r.length||r.hasClass("js-label-no-dnd"))return!1;var o=r[0];if("messages"===i.page)return o;if("message"===i.page){var s=ns.Model.get("message",i.params);if(!s.inFolderBySymbol("spam")&&!s.inFolderBySymbol("trash")&&e(".ns-view-labels").find(o).length)return o}return!1},result:function(e,t){return(new r).init(e,t)}},{test:function(e,t){if(t.is(".js-invalid-drag-target"))return!1;var n=t.closest(".js-message-subject-drop");if(n.length)return n;var i=t.closest(".js-message");return 0!==i.length&&0===t.closest(".js-cbt-item-target").length&&i},result:function(e,t){return(new o).init(e,t)}}]),Daria.DragMessage=o})(jQuery,Jane)},function(e,t){!(function(){var e=function(e){this.$el=$(".b-drag-helper_folder"),this.$source=$(e);var n=t.getFidByElement(e),i=ns.Model.get("folders").getFolderById(n);return this.folderName=i&&i.name||"",this.$el&&0!==this.$el.length||(this.$el=$('<div class="b-drag-helper_folder"><div class="b-drag-helper_folder__content"></div></div>').appendTo($("body"))),this.$el.css({opacity:1}),this};e.prototype.ret=function(){var e=this.$source.offset();this.$el.animate({left:e.left,top:e.top,opacity:0},$.proxy((function(){this.hide()}),this))},e.prototype.move=function(e){var t=document.documentElement,n=document.body,i=e.clientX+(t&&t.scrollLeft||n&&n.scrollLeft||0)-(t.clientLeft||0),r=e.clientY+(t&&t.scrollTop||n&&n.scrollTop||0)-(t.clientTop||0);return this.$el.offset({top:r+5,left:i+5}),this},e.prototype.show=function(){return this.$el.show(),this},e.prototype.hide=function(){return this.$el.hide(),this},e.prototype.setDefaultText=function(){return this.$el.find(".b-drag-helper_folder__content").text(i18n("%Drag_Перенести_папку",this.folderName)),this},e.prototype.setText=function(e){return this.$el.find(".b-drag-helper_folder__content").text(e),this};var t=function(){};t.getFidByElement=function(e){var t=$(e);if(!t.length)return!1;var n=Daria.parseQuery(t.data("params"));switch(ns.page.current.page){case"setup":return n.id;default:return n.fid}},t.getOffsetY=function(e){var t=document.documentElement,n=document.body;return e.clientY+(t&&t.scrollTop||n&&n.scrollTop||0)-(t.clientTop||0)},t.isOffsetTop=function(e,n){var i=t.getOffsetY(e),r=i-n.offset().top;return r>=-1&&r<=5},t.isOffsetBottom=function(e,n){var i=t.getOffsetY(e),r=n.height()+n.offset().top-i;return r>=0&&r<=5},t.isOffsetIn=function(e,n){var i=t.getOffsetY(e),r=n.offset().top,o=i-r,s=n.height()+r-i;return o>5&&s>5},t.prototype=new Jane.DragNDrop.EmptyDrag,t.prototype.CLASS_MOVEIN="mail-FolderList-Item_movein",t.prototype.CLASS_MOVEBT="mail-FolderList-Item_movebt",t.prototype.CLASS_MOVETOP="mail-FolderList-Item_movetop",t.prototype.CLASS_DROPHOVER="mail-FolderList-Item_drophover",t.prototype.init=function(e,t){this.is_active=!1,this.is_draggable=!0,this.evt=e,this.draggable=t;var n,i=ns.Model.get("folders").getMoveFoldersFid(this.getDragFid());switch(ns.page.current.page){case"setup":n=".js-setup-folders-list";break;default:n=".js-folders"}return n&&(this.$targets=$(".js-folders-item",n).filter(".fid-"+i.join(",.fid-"))),this._onPageAfterLoad=function(){this.$targets=$(".js-folders-item",n).filter(".fid-"+i.join(",.fid-"))}.bind(this),ns.events.on("ns-page-after-load",this._onPageAfterLoad),this},t.prototype.lazyAction=function(e,t){this.lazyActionTimeout&&(clearTimeout(this.lazyActionTimeout),this.lazyActionTimeout=null),e&&(this.lazyActionTimeout=setTimeout(e,t))},t.prototype.getTargetData=function(e){var t=this,n=$(e),i=[{name:"folder",test:function(e){var n=e.closest(".js-folders-item");return!(!n.length||!t.$targets.filter(n[0]).length)&&n}}];return this.testTarget(i,n)},t.prototype.onDragStart=function(t){return this.is_active=!0,ns.events.trigger("dragndrop.dragstart"),this.hiliteAll(),this.area=new e(this.draggable).setDefaultText().show().move(t),Jane.c("Drag-n-drop","Драгндроп папок","Перенос папки"),this},t.prototype.onDrag=function(e,n){this.area.move(e);var i=n&&n.target;if(i){var r=t.getFidByElement(i),o=ns.Model.get("folders").getFolderById(r),s=o&&o.name;t.isOffsetTop(e,i)?"inbox"!==o.symbol&&(this.area.setText(i18n("%Drag_Move_Folder_Before",s)),i.removeClass(this.CLASS_MOVEIN+" "+this.CLASS_MOVEBT).addClass(this.CLASS_MOVETOP)):t.isOffsetBottom(e,i)?(this.area.setText(i18n("%Drag_Move_Folder_Prev",s)),i.removeClass(this.CLASS_MOVEIN+" "+this.CLASS_MOVETOP).addClass(this.CLASS_MOVEBT)):t.isOffsetIn(e,i)?(this.area.setText(i18n("%Drag_Перенести_папку_в_папку",s)),i.removeClass(this.CLASS_MOVEBT+" "+this.CLASS_MOVETOP).addClass(this.CLASS_MOVEIN)):(this.area.setDefaultText(),i.removeClass(this.CLASS_MOVEBT+" "+this.CLASS_MOVETOP+" "+this.CLASS_MOVEIN))}},t.prototype.onDragEnd=function(e){this.nohiliteAll(),this.area.ret(e),ns.events.off("ns-page-after-load",this._onPageAfterLoad)},t.prototype.onDragEnter=function(e,n){var i=n.target,r=ns.Model.get("folders"),o=t.getFidByElement(i),s=r.getFolderById(o);this.area.setText(i18n("%Drag_Перенести_папку_в_папку",s&&s.name)),ns.events.trigger("dragndrop.dragenter",_.extend(e,{currentTarget:i[0],fid:o}))},t.prototype.onDragLeave=function(e,t){var n=t.target;this.area.setDefaultText(),this.lazyAction(!1),this.nohilite(n),n.removeClass(this.CLASS_MOVEIN+" "+this.CLASS_MOVETOP+" "+this.CLASS_MOVEBT)},t.prototype.onDrop=function(e,n){ns.events.off("ns-page-after-load",this._onPageAfterLoad),ns.events.trigger("dragndrop.drop"),this.lazyAction(!1),this.area.hide(),this.nohilite(n.target),this.nohiliteAll();var i,r=this.getDragFid(),o=n.target,s=t.getFidByElement(o),a=ns.Model.get("folders").getFolderById(s);t.isOffsetTop(e,o)?i="inbox"===a.symbol?"putin":"putbefore":t.isOffsetBottom(e,o)?i="putnext":t.isOffsetIn(e,o)&&(i="putin"),o.removeClass(this.CLASS_MOVEBT+" "+this.CLASS_MOVETOP+" "+this.CLASS_MOVEIN),i&&ns.events.trigger("daria:folders.move",{fid:r,overFid:s,action:i})},t.prototype.hiliteAll=function(){this.$targets.addClass(this.CLASS_DROPHOVER)},t.prototype.nohiliteAll=function(){this.$targets.removeClass(this.CLASS_DROPHOVER)},t.prototype.getDragFid=function(){return t.getFidByElement(this.draggable)},Jane.DragNDrop.add({test:function(e,n){var i=n.closest(".js-folders-item");if(!i.length)return!1;var r=t.getFidByElement(i);return!!r&&(!!ns.Model.get("folders").isDraggable(r)&&i[0])},result:function(e,n){return(new t).init(e,n)}})})()},function(e,t){ns.events.on("daria:folders.move",(function(e,t){function n(e){switch(e){case"nameduplicate":return void Daria.Statusline.show({name:"folders_move_error",speed:"fast",text:i18n("%Folder_Move_Error_Nameduplicate")});case"actionerror":return void Jane.ErrorLog.send({event:"folders.move.action",status:e,action:s})}ns.events.trigger("daria:folders.move:done")}var i=ns.Model.get("folders"),r=t.fid,o=t.overFid,s=t.action,a=$.Deferred();switch(s){case"putin":i.moveIn(r,o).always(a.resolve);break;case"putnext":i.moveAfter(r,o).always(a.resolve);break;case"putbefore":i.moveBefore(r,o).always(a.resolve)}a.always(n)}))},function(e,t){!(function(e){var t=null,n=!1,i=[4,18,5,14,35],r=$(),o=function e(t){this._$node=$(Jane.tt("mail:search-filters-types",{"filter-id":i},["messages-types"])),this._onSelect=t.onSelect,this._$node.on("mousedown.searchfilter",".js-search-apply-filter",this._onMouseDown.bind(this)),r=r.add(this._$node),e._updateFilterTypeState()};o.prototype.getNode=function(){return this._$node},o.prototype.destroy=function(){r=r.not(this._$node),this._$node.off(".searchfilter"),this._$node.remove()},o.prototype._onMouseDown=function(e){e.preventDefault(),e.stopPropagation();var i=$(e.currentTarget),r=String(i.data("filter-id"));t=o.getFilterId()===r?null:r,n=!0,o._updateFilterTypeState(),this._onSelect(t)},o._updateFilterTypeState=function(){var e=r.find(".js-search-apply-filter");e.removeClass("g-active");var t=o.getFilterId();t&&e.filter('[data-filter-id="'+t+'"]').addClass("g-active")},o.getFilterId=function(){return t||(n||-1===i.indexOf(Number(ns.page.current.params.type))?void 0:ns.page.current.params.type)},o.setCurrentFilterIdAsUser=function(){t=o.getFilterId(),n=!0},o.resetUserSelect=function(){t=null,n=!1,o._updateFilterTypeState()},e.SearchFilters=o})(Daria)},function(e,t){Daria.composeGo=function(e,t){t=t||{},e=e||{};var n=Vow.promise(),i=ns.router.generateUrl("compose2",e);if(ns.page.block.clearByCondition((function(e){return Boolean(e.compose)})),!t.force&&Daria.vCompose&&"compose"===ns.page.current.page){var r=Daria.vCompose.checkChanges.bind(Daria.vCompose,n);r.compose=!0,ns.page.block.add(r)}return ns.page.go(i).then(n.fulfill,(function(e){"block"!==e&&n.reject(e)}),n),n}},function(e,t){!(function(e,t){t.Geolocation={getData:function(){var e=$.Deferred();return navigator.geolocation.getCurrentPosition((function(t){e.resolve(t)}),(function(t){e.reject(t)})),e.promise()},checkUserRelevance:function(){return!!Modernizr.geolocation&&(!!Modernizr.mozilla&&t.uidEnds([39,94,92,44,55]))},monitoring:function(){this.checkUserRelevance()&&this.getData().done((function(t){var n=$.extend({event:"geolocation",result:"success"},t.coords);e.ErrorLog.send(n)})).fail((function(t){var n=$.extend({event:"geolocation",result:"failure"},t);e.ErrorLog.send(n)}))}}})(Jane,Daria)},function(e,t){Daria.AttachDiskPopupMixin={_openDiskOnClick:function(e){e&&e.inQuickReply&&Jane.c("Quick Reply","Кнопка Прикрепить",this._getMetrikaPart()),this._popup=ns.View.create("browse-disk",this.params),this._popup.on("close",this._openDiskOnClosePopup.bind(this)),this._popup.open(this._getPath()).then(this._openDiskOnRenderPopup,this)},_openDiskOnRenderPopup:function(){$("body").append(this._popup.node)},_openDiskOnClosePopup:function(){this._popup&&(this._popup.destroy(),this._popup=null)},_getMetrikaPart:function(){return this.METRIKA_PARTS[this.MODE]},_getPath:function(){return this.PATHS[this.MODE]},METRIKA_PARTS:{mail:"Клик по Прикрепить из почты",disk:"Клик по Прикрепить с диска"},PATHS:{mail:"/mail/",disk:"/disk/"}}},function(e,t){!(function(e,t){var n=function(e,n){var i=ns.Model.get("messages",n);if(e.filter.type="search",e.filter.param={},$.each(["request","fid","scope","from","to","unread","lid"],(function(t,i){n[i]&&(e.filter.param[i]=n[i])})),e.filter.param.reqid=t.React.getSearchSessionId(),e.message&&e.message.mid){i.isSearchTopResult(e.message.mid)&&(e.filter.param.tophits="yes");var r=i.getMessageByMid(e.message.mid),o=(i.models||[]).indexOf(r);o>-1&&(e.message.index=o+1)}e.filter.param=$.param(e.filter.param)},i=function(t,n,i,r){if(1===n.ids.length^1===n.tids.length){var o=n.ids.shift(),s=n.tids.shift(),a=o||s,c=ns.Model.get("message",{ids:a}),l=c.getData()||i.messageInfo;if(l&&l.date){if(t.message={thread:s?l.count:0,timestamp:l.date.timestamp,type:l.type,from:jpath(l,'.field[.type=="from"].email')[0],index:l.idx,subject:l.subject},c.isNew()&&(t.message.isnew=1),_.forEach(["widget","widget-type","widget-controls"],(function(e){i[e]&&(t.message[e]=i[e])})),l.fid){var u=ns.Model.get("folders").getFolderById(l.fid);u&&(t.message.folder={fid:u.fid},u.symbol&&(t.message.folder.symbol=u.symbol))}o?t.message.mid=o:s&&(t.message.tid=s),"show"===r&&e.watcher.get("message.may-unsubscribe")&&(t.message.actions=["unsubscribe"])}else t.message=null}else t.messages={count:n.ids.length,threads:n.tids.length}};t.actionLog=function(e,r){var o=$.extend({},ns.page.current.params),s=r.originalAction||r.action,a=ns.page.current.page,c=r.mMessagesChecked?r.mMessagesChecked.getIds():{},l=$.extend(!0,{},{ids:[],tids:[]},r.ids||{},c),u=t.getPrevPageSearchContext();if(!1!==r.islog){l.tids.length||l.ids.length||!o.ids||l.ids.push(o.ids);var d=new Date,f={timestamp:d.getTime()+60*d.getTimezoneOffset()*1e3,action:s,platform:navigator.platform,filter:{page:a,type:null,param:null}};i(f,l,r,s),"search"===o.search?n(f,o):"message"===a&&u?n(f,u.page.params):o.thread_id?(f.filter.type="thread",f.filter.param=o.thread_id):o.current_label?(f.filter.type="label",f.filter.param=o.current_label):o.current_folder?(f.filter.type="folder",f.filter.param=o.current_folder):o.extra_cond&&(f.filter.type=o.extra_cond),r.btn&&(f.btn=r.btn);var g={data:JSON.stringify(f)};"search"===f.filter.type&&(g.isSearch=!0),ns.request.addRequestParams(g),t.actionLog.send(g)}},t.actionLog.send=function(e){e.model="do-action-log",$.post("".concat(t.api.journal,"?_m=").concat(e.model),e)};var r;ns.events.on("user.action.log",t.actionLog),ns.events.on("message.action.complete",t.actionLog),ns.events.on("ns-page-after-load",(function(){var e=ns.page.current,n=ns.page.current;if(r&&"message"===r.page&&"messages"===n){var i=e.current_folder;if(i){var o=ns.Model.get("folders").getFolderBySymbol("inbox");o&&o.fid===i&&t.actionLog("pageload",{action:"gotoinbox",eventObject:{params:$.extend({islog:!0},e)}})}}r=$.extend(!0,{},ns.page.current)}))})(Jane,Daria)},function(e,t){!(function(){var e=/^([^@]+)@(ya(?:ndex\-team|money)\.(?:ru|com(\.(tr|ua))?))$/;Daria.email={},Daria.email.isCA=function(e,t){var n=e.match(/^(\+?\d+)@ya(?:ndex)?\./);return!!n&&(t&&(t.phone=n[1]),!0)},Daria.email.isCorp=function(t){return Daria.IS_CORP&&e.test(t)},Daria.email.isSupport=function(e){return new RegExp("^(?:[^@]+)@(?:support\\.yandex\\.(?:"+Daria.Config.domainZonesForReg+"|com\\.ua))$").test(e)},Daria.email.getDomain=function(e){return Daria.email.split(e).pop()},Daria.email.getLogin=function(e){var t=Daria.email.split(e);return t.pop(),t.join("@")},Daria.email.split=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("@")},Daria.email.normalize=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"".concat(Daria.email.getLogin(e).replace(/-/g,"."),"@").concat(Daria.email.getDomain(e))}})()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1643);!(function(e){var t={doc:"doc",docx:"doc",htm:"doc/text",html:"doc/text",mht:"doc",odt:"doc",rtf:"doc",txt:"doc/txt",pdf:"pdf",odp:"ppt",ppt:"ppt",pptx:"ppt",csv:"xls/xls",ods:"xls",ots:"xls",xls:"xls",xlsx:"xls",eml:"mail/eml",vcf:"mail/eml",exe:"application/exe",aac:"audio/audio",mka:"audio",mp3:"audio/mp3",ogg:"audio/audio",wav:"audio",wma:"audio/wma",ai:"image/ai",bmp:"image/bmp",cdr:"image/cdr",djvu:"image",eps:"image",gif:"image/gif",ico:"image",jpe:"image",jpeg:"image/jpg",jpg:"image/jpg",pcx:"image/pcx",pjpeg:"image",png:"image/png",ps:"image",psd:"image/psd",tga:"image",tif:"image/tiff",tiff:"image/tiff","3gp":"video",avi:"video/avi",flv:"video/video",m2v:"video",mkv:"video",mov:"video/mov",mp4:"video/mp4",mpe:"video",mpeg:"video",mpg:"video",qt:"video",vob:"video",wmv:"video/wmv","7z":"zip/zip",arj:"zip/zip",bz2:"zip",lzh:"zip/zip",uc2:"zip/zip",zip:"zip",rar:"rar"},n=["bmp","gif","jpg","jpeg","pjpeg","pcx","png","tif","tiff"],r=["apk","cab","dmg","docb","docm","gz","js","msi","phps","pptb","pptm","sea","sit","tar","torrent","xlsb","xlsm","xpi"];$.each(r,(function(e,n){t[n]="general/general"})),e.getExtensionInfo=function(e){var r=Object(i.a)(e),o=(t[r]||"").split("/"),s={class:o[0]||"general",preview:$.inArray(r,n)>-1};return o.length>1&&(s.icon=o[1]),s},e.getExtension=i.a,e.splitName=i.c,e.splitAttachmentName=i.b})(Daria)},function(e,t,n){"use strict";function i(e){var t=e||"",n=t.split(".");if(1===n.length)return[t,""];var i=n.pop();return[n.join("."),i]}function r(e){return i(e)[1].toLowerCase()}function o(e){for(var t=i(e)[0],n=t.length,r=Math.min(6,n);" "===t[n-r];)r--;return{prefix:t.slice(0,n-r),suffix:t.slice(-r)}}t.c=i,t.a=r,t.b=o},function(e,t){Daria.MessageTime={getFormattedTime:function(e){var t={attach:void 0,title:void 0,message:void 0,list:void 0,full:void 0,isRelative:!1},n=this._getUserTZ(),i=new Date(Daria.now()-n),r=new Date(e-n);return i.getUTCDate()===r.getUTCDate()&&i.getUTCMonth()===r.getUTCMonth()&&i.getUTCFullYear()===r.getUTCFullYear()?(t.message=Jane.Date.format("%Date_today_at_HM",r,!0),t.list=Jane.Date.format("%Date_HM__colon",r,!0),t.attach=t.list,t.full=Jane.Date.format("%Date_dB_in_HM",r,!0),t.isRelative=!0):i.getUTCFullYear()!==r.getUTCFullYear()?(t.message=Jane.Date.format("%Date_dmy_at_HM",r,!0),t.list=Jane.Date.format("%Date_dmy__dot",r,!0),t.attach=Jane.Date.format("%Date_db",r,!0),t.title=Jane.Date.format("%Date_dBY_year_in_HM",r,!0),t.full=t.title):(t.message=Jane.Date.format("%Date_db_in_HM",r,!0),t.list=Jane.Date.format("%Date_db",r,!0),t.attach=t.list,t.title=t.message,t.full=Jane.Date.format("%Date_dB_in_HM",r,!0)),t},_getUserTZ:function(){return ns.Model.get("account-information").get(".tz_offset")*Jane.Date.MINUTE}}},function(e,t){Daria.getPageTitle=function(e,t){var n,i,r="",o=t.ids;switch(e){case"message":n=ns.Model.get("message",{ids:o}),i=n.getSubject();var s=n.getFromName();i&&s&&(r+=i18n("%Title_message",i)+" — "+s);break;case"messages":var a,c=t.current_folder,l=0;if(Daria.isFoldersTabPage(t)){var u=ns.Model.get("tabs").getTab(t.tabId);u&&(l=u.getUnreadCount(),a=u.get(".title"))}else if(c){var d=ns.Model.get("folders").getFolderById(c);d&&(a=d.name,l=d.new)}a&&(r+=l>0?l+" · "+a:a);break;case"compose":if(n=ns.Model.get("message",{ids:o}),!(o&&/^\d+$/.test(o)&&n.isValid())){r+=i18n("%Title_compose");break}i=n.getSubject();switch(t.oper){case"reply":case"reply-all":r+=i18n("%Title_reply",i);break;case"forward":r+=i18n("%Title_forward",i);break;default:r+=i18n("%Title_draft",i)}}return r&&(r+=" — "),r+=i18n("%Title_mail")},Daria.updateTitle=function(){var e=ns.page.current.params,t=ns.page.current.page,n=Daria.getPageTitle(t,e),i=Jane.watcher.get("pageVisible"),r=i?0:Math.min(Daria.gotNewMail,10);"compose"===t&&(r=t),jQuery("#favicon, #png16favicon, #png32favicon").remove();var o=Daria.IS_CORP?"ya-team-favicon":"main-favicon",s="/u2709/favicon/png/".concat(o,"/16/").concat(r,".png"),a="/u2709/favicon/png/".concat(o,"/32/").concat(r,".png");Modernizr.mozilla>=58&&(s+="?nocacheIcon=".concat(Math.floor(1e13*Math.random())),a+="?nocacheIcon=".concat(Math.floor(1e13*Math.random())));var c='<link id="png16favicon" rel="icon" type="image/png" href="'.concat(s,'" sizes="16x16" />')+'<link id="png32favicon" rel="icon" type="image/png" href="'.concat(a,'" sizes="32x32" />');jQuery("head").append(c),Daria.gotNewMail&&!i&&(n="* "+n),document.title=n},ns.events.on("pageVisible.change",(function(){Daria.gotNewMail=0,Daria.updateTitle()})),ns.events.on("ns-page-after-load",(function(){Daria.updateTitle()}))},function(e,t){!(function(){function e(e){return!(!s(e.text)&&!i(e.text))}function t(e){e.convert=i(e.text),e.convert=e.convert.replace("--\n","-- \n"),e.preview=e.convert.trim();var t=e.preview.split("\n");return t.length>3&&(e.spreview=t.slice(0,3).join("\n")),e}function n(e){e.convert=r(e.text),e.convert=Daria.Html2Text.flatDOMHtml(e.convert),e.convert=e.convert.replace("-- ","--&nbsp;").replace(">--<",">--&nbsp;<"),e.preview=Daria.Html2Text.html2text(e.convert).trim(),!e.preview&&s(e.text)&&(e.preview="< "+i18n("%Signature_picture")+" >");var t=e.preview.split("\n");return t.length>3&&(e.spreview=t.slice(0,3).join("\n")),e}function i(e){return e=Daria.Html2Text.text2html(e),e=_.unescape(e),Daria.Html2Text.html2text(e)}function r(e){return e=Daria.Html2Text.text2html(e),"<div>"+(e=_.unescape(e))+"</div>"}function o(e){return/<[^>]+>/.test(e)}function s(e){return/<img[^>]*>/i.test(e)}Daria.signs={mSettings:function(){return this._mSettings||(this._mSettings=ns.Model.get("settings")),this._mSettings},getFilteredSigns:function(e,t){return _.filter(e,(function(e){var n=_.map(e.emails,(function(e){return e.toLowerCase()}));return 0===e.emails.length||-1!==n.indexOf(t.toLowerCase())}))},sort:function(e,t){return function(n,i){var r=_.map(arguments,(function(n){var i=0;return n.isDefault&&(i+=1),t&&n.lang===t&&(i+=2),e&&-1!==n.emails.indexOf(e)&&(i+=4),i}));return r[0]<r[1]?1:r[0]>r[1]?-1:n._idx<i._idx?1:n._idx>i._idx?-1:0}},getHtml:function(){var t=$.makeArray(this.mSettings().getSetting("signs"));return $.map($.grep(t,e),n)},getPlain:function(){var n=$.makeArray(this.mSettings().getSetting("signs"));return $.map($.grep(n,e),t)},addSignature:function(t,n){var i=$.makeArray(this.mSettings().getSetting("signs"));i=$.grep(i,e),i.push(t),this.mSettings().setSettings({signs:i},(function(e,t){n(e,t)}))},appendSeparator:function(e){function t(e){return e.replace(/[\u0020\u00a0]+/g,"").replace(/&nbsp;/g,"")}var n=!1;if(o(e)){var i=$(r(e));i.find("table").parent().css("overflow","auto");var s=i.find("*").filter((function(){if(n)return!1;var e=$(this);if("TABLE"===this.tagName)return n=!0,!0;if(e.children().length)return!1;var i=t(e.text());return"--"===i?(n=!0,!1):!(!i&&"IMG"!==this.tagName)&&(n=!0,!0)}));return s.length&&$("<div>--&nbsp;</div>").insertBefore(s),Daria.Html2Text.flatDOMHtml(i.html())}return e.replace(/.*/gm,(function(e){if(n)return e;var i=t(e);return"--"===i?(n=!0,e):i?(n=!0,"-- \n"+e):e}))},getSignatureMatch:function(e){var t;return e&&(e=i(e),(t=e.replace(/^\s*$/gm,"").replace(/^[\n\r]+/g,"").match(/^.+$/m))&&(this.__firstLineMatch=Daria.regexpEscape(t[0]).replace(/\s/g,"\\s"))),this.__firstLineMatch||""},appendToBody:function(e,t,n,i,r){var o,s,a=[],c="html"===t&&!Modernizr.ios;if(c?(a=this.getHtml(),o="<div><br/></div><div><br/></div>",s="<div><br/></div>"):(a=this.getPlain(),o="\n\n",s="\n"),!a.length)return e;i=i||this.mSettings().getSetting("default_email"),r=r||Daria.Config.locale;var l=this.getFilteredSigns(a,i);l.sort(this.sort(i,r));var u=_.first(l);return u?(c&&(u.convert=Daria.Html2Text.flatDOMHtml(u.convert)),this.getSignatureMatch(u.convert)):u=this.setEmptySign(c),!n&&this.mSettings().isSet("signature_top")?o+u.convert+s+e:e+o+u.convert+s},setEmptySign:function(e){return{text:"<div>-- </div>",convert:(function(){return e?"<div>--&nbsp;</div>":"-- "})()}},isEmpty:function(e){return!s(e)&&!i(e)},isExistSignature:function(e){for(var t=this.getHtml(),n=t.length;n--;)if(this.compare(t[n].convert,e))return!0;return!1},count:function(){var t=$.makeArray(this.mSettings().getSetting("signs"));return $.grep(t,e).length},sample:function(){var e=this.mSettings().getSetting("from_name");if(!e)return!1;var t=(ns.Model.get("userphones").getActivePhone()||{}).number;if(!t)for(var n=this.mSettings().getSetting("emails"),i={},r=0;r<n.length;r++){var o=n[r];if(o.native&&o.validated&&Daria.email.isCA(o.address,i)){t=i.phone;break}}if(!t)return!1;var s=this.mSettings().getSetting("default_email"),a={name:e,phone:t,email:s};return a.content=Daria.supplant("<div>--&nbsp;</div><div>{prefix}</div>{phone}",{prefix:i18n("%Signature_sample",_.escape(e)),phone:t?"<div>"+_.escape(t)+"</div>":""},!0),!$.grep(this.getHtml(),function(e){return this.compare(e.convert,a.content)}.bind(this)).length&&a},compare:function(e,t){return e=e.replace(/<\/?[^>]+>/gi,"").replace(/[\s\n]/g,"").replace(/&nbsp;/g,""),t=t.replace(/<\/?[^>]+>/gi,"").replace(/[\s\n]/g,"").replace(/&nbsp;/g,""),e===t},reset:function(){delete this._mSettings}}})()},function(e,t){!(function(e){"use strict";e.UISettings={},e.UISettings.shouldShowCheckboxInsideUserpic=function(){var t=ns.Model.get("settings"),n=t.getSetting("show_checkbox_inside_userpic"),i=t.getSetting("messages_avatars");return e.is3pane()||n&&i}})(Daria)},function(e,t){Daria.url={_checkAttachmentHasHid:function(e){if(!this._notEmptyString(e.hid))throw new Error("Attachment should have a hid")},_checkMid:function(e){if(!this._notEmptyString(e))throw new Error("Invalid message id passed")},_getAttachmentName:function(e){return e["name-uri-encoded"]||e.name||e.filename||""},_notEmptyString:function(e){return e&&"string"==typeof e},docviewer:function(e,t){return this._checkMid(t),this._checkAttachmentHasHid(e),"t"===t[0]&&(t=t.slice(1)),Daria.Config["docviewer-frontend-host"]+"/?url="+encodeURIComponent("ya-mail://"+t+"/"+e.hid)+"&name="+this._getAttachmentName(e)+"&uid="+Daria.uid},isEMLSuffixMissing:function(e,t,n){if(!n)return!1;var i=decodeURIComponent(n),r=i.split("."),o="message/rfc822"===[e,t].join("/");return _.all([r.length>1&&"eml"!==_.last(r)||1===r.length,o])},attachment:function(e,t,n){var i;if(e.url)return i=$.url(e.url),i.replaceParams({uid:Daria.uid}),i.toString();if(!e.uploading&&"string"==typeof t){this._checkMid(t),this._checkAttachmentHasHid(e);var r=this._getAttachmentName(e);this.isEMLSuffixMissing(e.type,e.subtype,r)&&(r=encodeURIComponent(decodeURIComponent(r)+".eml")),i="../message_part/"+r+"?_uid="+Daria.uid+"&name="+r+"&hid="+e.hid+"&ids="+t;var o=["no_disposition","exif_rotate","thumb","preview"],s=["thumb_size","fallback_url"];n=n||{};for(var a in n)n.hasOwnProperty(a)&&(o.indexOf(a)>-1&&Boolean(n[a])?i+="&"+a+"=y":s.indexOf(a)>-1&&(i+="&"+a+"="+n[a]));return i}},archive:function(e,t){var n=_.flatten(jpath(e,".attachment")),i=_.filter(n,(function(e){return!e.inline&&(e.name||e.message)&&!e.narod})).map((function(e){return e.hid}));if(0===i.length)return!1;var r=1===i.length;i=i.join(",");var o=jpath(e,'.info.field[.type == "from"].email')[0],s=new Date(Number(e.info.date.timestamp)),a=Jane.Common.n,c=s.getFullYear()+"-"+a(s.getMonth()+1)+"-"+a(s.getDate())+"_"+a(s.getHours())+"-"+a(s.getMinutes())+"-"+a(s.getSeconds()),l=r?jpath(e,".attachment.name")[0]:"Attachments_"+o+"_"+c+".zip",u=encodeURIComponent(l),d={_uid:Daria.uid,hid:i,ids:t,name:l};return r||(d.archive="zip"),"../message_part/"+u+"?"+ns.params2query(d)},getAttachmentsArchiveLink:function(e){var t={ids:e},n=$.Deferred();return ns.request("message-body",t).then((function(e){var t=e[0].getData();n.resolve(this.archive(t))})),n.promise()},upload:function(e,t){var n=$.url("signature"===t?Daria.api["upload-signature-images"]:Daria.api["upload-attachment"]),i=Daria.parseQuery(n.query());return _.isPlainObject(e)&&_.assign(i,e),ns.request.addRequestParams(i),n.query(i),n.toString()}}},function(e,t){!(function(){Daria.COPS={},Daria.COPS["abook.select-all"]=function(e){e.selectAll()},Daria.COPS["abook.deselect-all"]=function(e){e.unselectAll()},Daria.COPS["mail-common.person-popup"]=function(){return ns.events.trigger("daria:vAbookContacts.showPersonPopup",{}),Vow.fulfill()},Daria.COPS["abook.open-backups-dialog"]=function(){return ns.View.create("abook-restore-dialog").show()},Daria.COPS["abook.remove-contacts"]=function(e){var t=e.getCids();return ns.Model.get("abook-contacts").removeContacts(t).then((function(){ns.Model.invalidateAll(["abook-contacts","abook-selected"]),ns.page.go()}))},Daria.COPS["abook.toolbar-more-actions"]=function(e,t){var n=Daria.COPS["abook.toolbar-more-actions"];return n._openView?(n._openView.destroy(),delete n._openView):n._openView=ns.View.create("abook-extra-actions").open({where:t.buttonView.node}),Vow.fulfill()},Daria.COPS["abook.groups-dropdown"]=function(e,t){var n=Daria.COPS["abook.groups-dropdown"];return n._openView?(n._openView.destroy(),delete n._openView):n._openView=ns.View.create("abook-groups-dropdown",e.params).open({where:t.buttonView.node}),Vow.fulfill()},Daria.COPS["abook.remove-contacts-from-group"]=function(e){var t=Number(ns.page.current.params.tid||0);if(t<=0)return Vow.fulfill();Daria.Dialog.close();var n=e.getCids();return ns.Model.get("abook-groups").removeFromGroup({tids:[t],mcids:n}).then((function(){e.clear(),ns.page.go()}))},Daria.COPS["abook.compose-go"]=function(e){ns.Model.get("compose-predefined-data").set(".to",e.emailsToString()),ns.page.go(ns.router.generateUrl("compose2"))},Daria.COPS["abook.assign-contacts-from-group"]=function(e,t){var n=Number(t.tid),i=$(t.target),r=no.jpath(".current.params.tid",ns.page),o=e.getCids(),s=e.getContactsMcids(r),a=!0,c=[];if(_.each(s,(function(e){e.length>1&&(a=!1),c.push(e)})),0===o.length)return Vow.reject();if(a)return new vow.Promise(function(e,t){ns.Model.get("abook-groups").addToGroup({tid:n,mcids:c}).then(e,t)});if(i.length&&1===o.length){var l=o[0];ns.events.trigger("daria:vAbook:showChooseEmailPopup",{cid:l,tid:n,target:t.target})}else ns.events.trigger("daria:vAbook.showGroupPopup",{type:"add-to-group",targetTid:n});return Vow.reject()},Daria.COPS["abook.assign-contacts-from-phone-group"]=function(e){var t=e.getCids();return new vow.Promise(function(e,n){ns.Model.get("abook-groups").addToGroup({tid:-10,mcids:t}).then(e,n)})}})()},function(e,t,n){"use strict";function i(e){return s(e)||o(e)||r()}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function o(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function s(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0});var c=n(1651),l=n.n(c),u=n(906),d=n(337),f=n(325),g=n(1653),p=n(1654),h=n(1655);!(function(){function e(e){ns.events.trigger("daria:MOPS:action-complete",{action:e}),ns.events.trigger("daria:MOPS:"+e,{})}function t(e,t,n,i){Daria.messages.clearCacheByLID(n),Jane.watcher.set("actions-message-label",e,{force:!0}),ns.events.trigger("message.action.complete",{action:e,eventObject:{ids:t,params:i},skipFocus:!0})}function n(e){return!(!e||"object"!==a(e))&&(e.ids.length>0||e.tids.length>0)}function r(e){var t=e.ids.concat(e.tids),n=t.filter((function(e){return!ns.Model.get("state-message-thread-item",{ids:e}).isOpen()}));if(Daria.Page.isParamsForMessage(ns.page.current.params)){var i=Daria.Page.getMessageId(ns.page.current.params);n=_.without(n,i)}if(n.length){var r={type:"mark_read_from_list",mids:n};Jane.ErrorLog.send(r)}}function o(e,t,r,o){var a,c=Object.assign({},r);if(r=w(e,r),a=r.current_folder,e=Daria.MOPS.fixMoveAction(e,a),!o&&Daria.MOPS.shouldShowConfirmation(e,t.getCount())){var l=new Vow.Promise;return ns.Model.get("mops-confirmation").setMops({action:e,count:t.getCount(),callback:function(){var n="delete"===e?"remove":e;return Daria.MOPS[n](t,c,!0).always((function(){return l.fulfill()}))},onCancel:function(){l.fulfill()}}),l}var u=[],d=r["message-id"],f=t.isFolderSelected(),g=f?t.getSelectedFolder():null,p=ns.page.current.params,h=t.getCount(),m=t.getIds(e,r),v=r.tabId;Daria.MOPS._logMops("move",e,"start",m,r),d&&(m.ids=$.grep(m.ids,(function(e){return e===d})));var b=[].concat(i(m.ids),i(m.tids)).map((function(e){return ns.Model.get("message",{ids:e})})),S=b.some((function(e){return e.isValid()&&e.isInTab()})),k=b.every((function(e){return e.isValid()&&e.getFolderId()===a})),x=_.extend({},r,{ids:m,count:h,action:e});if(x.whereToGo=Daria.messages.whereToGoAfterMove(e,t,x),ns.events.trigger("daria:MOPS:action-start",x),!n(m))return Vow.reject();var M=ns.Model.get("folders").isCurrentFolder("sent"),C={id:"do-messages",params:{movefile:a,action:e,with_sent:-1!==["move","tospam","delete"].indexOf(e)&&M?1:0}};if(Daria.areFoldersTabsEnabled()&&v&&(C.params.tabId=v,k&&delete C.params.movefile),g?C.params.fid=g:C.params=_.extend({},C.params,m),!Daria.MOPS._checkDoMessagesParams(C.params))return Vow.reject();u.push(C,{id:"folders"},{id:"labels"}),Daria.areFoldersTabsEnabled()&&(v||S)&&u.push({id:"tabs"}),Daria.isAttachmentsTab()&&u.push({id:"messages",params:{goto:"all",extra_cond:"only_atta",sort_type:"date"}});var T=Daria.is3pane(),D=!1;if(T)if(p.thread_id&&p.current_folder){var O=ns.Model.get("messages",{thread_id:p.thread_id}),I=O.getCountThreadMessageInFolder();!1===I?(Daria.lom.deleteFid(p.current_folder),D=!0):(m.ids.forEach((function(e){ns.Model.get("message",{ids:e}).getFolderId()===p.current_folder&&I--})),I<1&&(Daria.lom.deleteFid(p.current_folder),D=!0))}else Daria.lom.deleteFid(p.current_folder);if(D){var P=ns.router(x.whereToGo.where);"messages"===P.page&&P.params.thread_id&&(delete P.params.thread_id,x.whereToGo.where=ns.router.generateUrl(P.page,P.params),x.whereToGo.updateRequired=!0)}Daria.MOPS.invalidateModelsOnMove(e,r,p);var E=t.getOnlyCheckedMidOrTid(m),A=ns.Model.get("message",{ids:E}),j=A.isSpam(),F=Boolean(ns.page.current.params.ids||ns.page.current.params.thread_id),R=Boolean("messages"===ns.page.current.page&&F),B=Boolean(R&&Daria.is2pane()&&(ns.page.current.params.ids||ns.page.current.params.thread_id&&_.lte(A.getThreadMessage().getThreadCount()||0,1)||A.isThreadModel())&&"delete"===e),L=!1;if(R&&Daria.is3pane())if(ns.page.current.params.thread_id&&-1!==["move","tospam","delete"].indexOf(e))L=-1!==m.tids.indexOf(ns.page.current.params.thread_id)||m.ids.some((function(e){var t=ns.Model.get("message",{ids:e}),n=t&&t.getThreadMessage();return n&&n.get(".mid")===ns.page.current.params.thread_id&&(n.getThreadCount()||0)<=1}));else if(ns.page.current.params.ids&&"delete"===e)if(-1!==m.ids.indexOf(ns.page.current.params.ids))L=!0;else{var N=ns.Model.get("message",{ids:ns.page.current.params.ids}),H=N&&N.getThreadMessage();L=H&&-1!==m.tids.indexOf(H.get(".mid"))}if("delete"===e||e.indexOf("spam")>=0||"move"===e&&j){var z=Daria.array2obj(m.ids);1===m.ids.length^1===m.tids.length&&(x.messageInfo=_.cloneDeep(ns.Model.get("message",{ids:E})),r.messageInfo=x.messageInfo);var q=Daria.array2obj(m.tids);ns.Model.traverse("message-body",(function(e){(z[e.params.ids]||q["t"+e.params.ids])&&(e.invalidate(),e.trigger("daria:mMessageBody:moved"))})),[].concat(i(m.ids),i(m.tids)).forEach((function(e){ns.Model.get("message-widget-state",{ids:e}).resetViewUserClose("message-widget-spam",{silent:!0})}))}Array.isArray(r.requestModels)&&(u=u.concat(r.requestModels.map((function(e){return{id:e,params:r.requestParams}})))),Daria.MOPS.doActionInModelsByIds(m,"move",{fid:a,tabId:v}),Daria.MOPS.invalidateMessagesCheckedModels(m,e),r.ignoreUnsavedDraft&&ns.page.block.clear(),L&&(ns.page.go(Daria.Page.generateUrl.closeMessage()),ns.Model.get("focus").setPreventOpenOnFocus()),Daria.MOPS._logMops("move",e,"startRequest",m,r);var V=ns.forcedRequest(u);return y(e,t),V.then((function(){h>(parseInt(ns.Model.get("settings").getSetting("messages_per_page"),10)||30)&&s(e,m,h,r),B&&ns.page.go(Daria.Page.generateUrl.closeMessage()),ns.events.trigger("daria:MOPS:action-complete",x),ns.events.trigger("daria:MOPS:"+e,x),ns.events.trigger("message.action.complete",x)}),(function(t){var n=x.ids,i=x.count,r=x.fid;return Daria.MOPS.registerOperationFail(e,{ids:n,count:i,fid:r},t,"do-messages"),Vow.reject(t)}))}function s(e,t,n,i){var r=i18n("%Message_Delete_Msg",n);if("notspam"===e)return void Daria.Statusline.show({name:"message_not_spam",speed:"fast",params:{count:n}});if("tospam"===e)r=i18n("%Message_To_Spam_Msg",n);else if("move"===e){var o=_.escape(ns.Model.get("message",{ids:t.ids.length?t.ids[0]:t.tids[0]}).getSubject());r="archive"===i.originalAction?1===n?i18n("%Message_MoveArchive_Msg_One",o):i18n("%Message_MoveArchive_Msg",n):1===n?i18n("%Message_Move_Msg_One",o):i18n("%Message_Move_Msg",n)}Daria.Statusline.show({name:"move"===e?"message_moved":"message_removed",speed:"fast",text:r})}function c(t,i,o){var s={mark:f.c,unmark:f.d}[t],a=Daria.MOPS._scenarioManager.startParallelScenario(s,g.a);o=o||{};var c,l,u,d,m=i.isFolderSelected(),v=i.getSelectedFolder();if(m){if(!v)return Daria.DEBUG&&console.error("Promise rejected because of no fid"),Daria.MOPS._scenarioManager.finishScenario(a.id,h.c),Vow.reject("no-selection");c=Daria.MOPS.markByFid(t,v),c.hasAdjust()&&(l=c.getIds())}else{var b=i.getIds();if(u=i.getCount(),c=Daria.MOPS.doActionInModelsByIds(b,t,{fid:v,tabId:null}),l=c.getIds(),!n(l)&&n(b))return Daria.MOPS._scenarioManager.finishScenario(a.id,h.b),Vow.reject("no-item-to-operation")}var S=c.hasAdjust(),w=[],k={id:"do-messages",params:{action:t}};if(v?k.params.fid=v:(k.params=_.extend({},k.params,l),"mark"===t&&r(l)),!Daria.MOPS._checkDoMessagesParams(k.params))return setTimeout((function(){return Daria.MOPS._undoFailedAction(t,c)}),1),Daria.MOPS._scenarioManager.finishScenario(a.id,h.e),Vow.reject();w.push(k),!Daria.IS_CORP&&S||w.push({id:"folders"});var x=function(e){var n=k.params.fid;Daria.MOPS.registerOperationFail(t,{ids:l,count:u,fid:n},e,"do-messages"),Daria.MOPS._hasModelRequestFailed(e,"do-messages")?(Daria.MOPS._undoFailedAction(t,c),Daria.MOPS._logFailedMark(a,e,h.d)):Daria.MOPS._logFailedMark(a,e,h.a)};if(a.logStep(p.a,{models:w}),S)e(t),ns.forcedRequest(w).then((function(e){return Daria.MOPS._logSuccessfulMark(a,e)}),x),d=Vow.resolve();else{var M=ns.forcedRequest(w);M.then((function(n){e(t),Daria.MOPS._logSuccessfulMark(a,n)}),x),d=M}return o.noResetChecked||y(t,i),d}function m(e,r,o){var s,c=r.isFolderSelected();if("object"===a(o)?(o.actionParams&&(o=o.actionParams),s=o.lid||o.label||o.current_label):s=o,!s)return Vow.reject(new Error("No lid passed"));var l=o["message-id"];o={lid:s};var u;if(u=l?{ids:[l],tids:[]}:r.getIds(),"toggleLabel"===e){var d=[].concat(i(u.ids),i(u.tids)).some((function(e){return!ns.Model.get("message",{ids:e}).hasLabel(s)}));e=d?"label":"unlabel"}var f=Daria.MOPS.doActionInModelsByIds(u,e,o);if(u=f.getIds(),!n(u))return Daria.DEBUG&&console.error("Promise rejected because of no selection"),Vow.reject("no-selection");ns.events.trigger("label.update-message-labels");var g=[],p={id:"do-"+e,params:{lid:s}};c?p.params.fid=r.getSelectedFolder():p.params=_.extend({},p.params,u),g.push(p);var h;return f.hasAdjust()?(ns.Model.get("labels").adjustCounters(f.getAdjust()),h=ns.forcedRequest(g),h.then((function(){t(e,u,s,o),ns.page.go()}))):(g.push({id:"labels"}),h=ns.forcedRequest(g),h.then((function(n){n[0].getAffectedTids().forEach((function(t){ns.Model.get("message",{ids:t})[e](o)})),t(e,u,s,o)}))),h}function v(e,t){var n=ns.Model.get("labels"),i=t.tids;Array.isArray(i)||(i=[i]);var r,o,s,a,c=n.getMuteThreadLabel(),l=[];_.contains(["ignore","disableIgnore"],e)?(o="label","ignore"===e?(s="Игнорировать",r=c&&c.lid):(s="Не предлагать",a=n.getLIDByName(x),r=a&&a.lid)):(o="unlabel",r=c&&c.lid,s="Отменить");var u=Vow.promise();return r?u.fulfill(r):(l=[{id:"do-labels-add-by-symbol",params:{symbol:"mute_label"}},{id:"labels"}],"disableIgnore"===e&&(l=[{id:"do-labels-add",params:{label_name:x,label_type:"threadWide"}},{id:"labels"}]),u=ns.forcedRequest(l).then((function(t){if(t[0].get(".body.updated")){var n;return n=_.contains(["ignore","unignore"],e)?t[1].getMuteThreadLabel():t[1].getLabelByName(x),Vow.fulfill(n&&n.lid)}return Vow.reject()}))),Jane.c(k,s),u.then((function(e){return _.each(i,(function(t){ns.Model.get("message",{ids:t})[o]({lid:e})})),l=[{id:"do-"+o,params:{lid:e,tids:i}}],ns.forcedRequest(l)}))}function b(e,t){Daria.MOPS._logMops("archive","archive","start",e.getIds("archive",t),t);var n=ns.Model.get("folders");return n.createArchiveFolder().then((function(){var i=n.getFidBySymbol("archive");return i?(t=_.extend({originalAction:"archive",fid:i,noResetChecked:!0},t),c("mark",e,t).fail((function(e){if("no-item-to-operation"!==e)throw e})).then((function(){return o("move",e,t)}))):Vow.reject("No folder with archive symbol found!")}))}function y(e,t){"message"!==ns.page.current.page&&(t.isFolderSelected()||_.contains(["mark","unmark","move","notspam","tospam","pin","unpin","delete"],e))&&t.resetChecked()}var S=function(e,t){var n={delete:"trash",tospam:"spam",notspam:"inbox"};return _.has(n,e)&&(t=ns.Model.get("folders").getFidBySymbol(n[e])),t},w=function(e,t){return t=t||{},t.folder&&(t.fid=t.folder,delete t.folder),t.current_folder=S(e,t.fid||ns.page.current.params.current_folder),t},k="Статуслайн игнорирования треда",x="ignore_thisthread:disable",M=function(e){if(e=e.split("mailto:")[1]){e=e.split("?")||[e];var t=e[0],n=e[1];if(n=n?Daria.parseQuery(n):{},!t&&n.to)t=n.to;else if(!t)return;var i={params:{to:t,ttype:"plain",nosave:"yes",list_unsubscribe:"yes",feed_address_db:"no"}};n.body&&(i.params.send=n.body),n.subject&&(i.params.subj=n.subject),Daria.SendMail.send(i)}};Daria.MOPS={OperationFailNotificationManager:l.a,_failNotificationManager:new l.a,MOVE_ACTIONS:["archive","move","notspam","remove","tospam","infolder"],mark:function(e,t){return c("mark",e,t)},unmark:function(e){return c("unmark",e)},remove:function(e,t,n){return o("delete",e,t,n)},"remove.draft":function(e,t){return o("delete",e,_.extend({},t,{originalAction:"remove.draft"}))},move:function(e,t){return ns.Model.get("folders").isArchive(t.fid)?b(e,t):o("move",e,t)},infolder:function(e,t){return o("move",e,_.extend({originalAction:"infolder"},t))},archive:function(e,t){return b(e,t)},tospam:function(e,t,n){return o("tospam",e,t,n)},notspam:function(e,t){return o("notspam",e,t)},label:function(e,t){return m("label",e,t)},toggleLabel:function(e,t){return m("toggleLabel",e,t)},unlabel:function(e,t){return m("unlabel",e,t)},ignore:function(e){return v("ignore",e)},disableIgnore:function(e){return v("disableIgnore",e)},unignore:function(e){return v("unignore",e)},unsubscribe:function(e){var t=e.getOnlyMessageCheckedMid();if(!t)return Vow.reject();for(var n,i,r=ns.Model.get("message-body",{ids:t}),o=r.getUnsubscribeOptions(),s=["mailto-header","https-header","http-header","https-body","http-body"],a=0;a<s.length;a++)if(n=o[s[a]]){i=s[a];break}if(n){var c=["Отписаться от рассылки"];if(i.indexOf("mailto")>-1)M(n),c.push("mailto","заголовок письма");else{window.open(n,"_blank");var l=i.split("-");switch(c.push(l[0]),l[1]){case"header":c.push("заголовок письма");break;case"body":c.push("тело письма")}}Jane.c(c)}return ns.forcedRequest(["do-unsubscribe"],{ids:t}).then((function(){var n=Daria.is3pane()?{"message-id":t}:{};return n.action="delete",n.originalAction="unsubscribe",Daria.MOPS.remove(e,n)})).then((function(){Daria.Statusline.show({name:"unsubscribed",text:i18n("%Toolbar_Unsubscribe_Done")})}))},pin:function(e,t,n){return Daria.MOPS._pinHelper(e,!0,n)},unpin:function(e){return Daria.MOPS._pinHelper(e,!1)},"compose-edit":function(){ns.page.go(ns.router.generateUrl("compose2",{ids:ns.page.current.params.ids}))}},Daria.MOPS.markByFid=function(e,t){var n=ns.Model.get("folders"),i=n.getUnreadCount(t);ns.Model.traverse("message",(function(n){n.getFolderId()===t&&n[e]()}));var r={};return r[t]=-i,n.adjustUnreadCounters(r),new Daria.MOPS.Opinfo},Daria.MOPS.doActionInModelsByIds=function(e,t,n){var i=[].concat(e.ids,e.tids);return Daria.MOPS.doActionInMessages(i,t,n)},Daria.MOPS.doActionInMessages=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new Daria.MOPS.Opinfo;return e.forEach((function(e){var r=ns.Model.get("message",{ids:e});if(r.getData()){var o=r[t](n);i.merge(o)}})),i.hasAdjust()&&"fid"in n&&ns.Model.get("folders").adjustUnreadCounters(i.getAdjust()),Daria.areFoldersTabsEnabled()&&i.hasTabsAdjust()&&"tabId"in n&&ns.Model.get("tabs").adjustUnreadCounters(i.getTabsAdjust()),i},Daria.MOPS.fixMoveAction=function(e,t){var n=ns.Model.get("folders");return"move"===e&&(n.isFolder(t,["trash"])?e="delete":n.isFolder(t,["spam"])&&(e="tospam")),e},Daria.MOPS.invalidateModelsOnMove=function(e,t,n){if(ns.Model.destroyAll(["message-nearest"]),["delete","tospam","notspam"].indexOf(e)>-1&&ns.Model.destroyAll(["message-thread-nearest"]),ns.Model.isDefined("messages-pager")){ns.Model.get("messages-pager",n).destroy();var i=t.current_folder;i&&ns.Model.get("messages-pager",{current_folder:i}).destroy()}},Daria.MOPS.invalidateMessagesCheckedModels=function(e,t){"delete"===t&&(e=[].concat(e.ids,e.tids),ns.Model.traverse("messages-checked",(function(t){var n=t.getIds(),i=_(n).chain().values().flattenDeep().compact().map((function(e){return"t"===e.charAt(0)?e.substr(1):e})).value();i.length&&i.some((function(t){return _.include(e,t)}))&&t.resetChecked()})))},Daria.MOPS.updateHelper=function(e,t,n,i){var r=function(){ns.events.trigger("daria:vToolbarButton:loader:end")},o=Daria.MOPS[e](t,n);if(o){if(o.then(r,r),i){var s=function(){return o};return i.update(ns.page.current.params).then(s,s)}return o}},Daria.MOPS.getFakeMessagesChecked=function(e){var t=ns.Model.get("messages-checked",{mid:"mops-fake-checked"});return e=Array.isArray(e)?e:[e],e.forEach((function(e){var n=ns.Model.get("message",{ids:e});t.check(n,!0)})),t},Daria.MOPS.doActionWithMessages=function(e,t,n){var i=Daria.MOPS.getFakeMessagesChecked(e);Daria.MOPS[t](i,n).always((function(){i.destroy()}))},Daria.MOPS._pinHelper=function(e,t,n){var i=t?"pin":"unpin",r=ns.Model.get("labels").getPinnedLabel().lid,o="pin"===i?"label":"unlabel";return t&&!n&&Daria.MOPS.shouldShowConfirmation(i,e.getCount())?void ns.Model.get("mops-confirmation").setMops({action:i,count:e.getCount(),callback:function(){return Daria.MOPS.pin(e,t,!0)}}):(t?Daria.Statusline.show({name:"message_pinned",text:i18n("%Pinned_Письмо_будет_запинено",e.getCount())}):Daria.Statusline.show({name:"message_unpinned",text:i18n("%Pinned_Письмо_будет_распинено",e.getCount())}),m(o,e,{lid:r}),Daria.MOPS._updateModelsAfterPin(e,t))},Daria.MOPS._getReplacementTreeAfterPin=function(e,t){var n=ns.Model.get("settings"),i=n.isThreaded(),r=e.getData(),o={};return r.forEach((function(e){var n=ns.Model.get("message",{ids:e});if(n.isIntoThread()&&!n.isThread()&&i){var r=ns.Model.get("message",{ids:n.getThreadId()}),s=ns.Model.get("messages",{thread_id:n.getThreadId()}),a=s.getPinned();t||0===a.length?(o[r.get(".mid")]=r,delete o[n.get(".mid")]):!t&&a>0&&delete o[n.get(".mid")]}else o[n.get(".mid")]=n})),o},Daria.MOPS._undoFailedAction=function(e,t){_.includes(["mark","unmark"],e)&&(t.getSavedMids().map((function(e){return ns.Model.get("message",{ids:e})})).forEach((function(t){"mark"===e&&t.unmark(),"unmark"===e&&t.mark()})),t.getSavedTids().forEach((function(e){ns.Model.get("message",{ids:e}).set(".new",t.getSavedUnreadCounter(e))})))},Daria.MOPS._hasModelRequestFailed=function(e,t){return Boolean(_.find(e.invalid,(function(e){return e.id===t})))},Daria.MOPS._updateModelsAfterPin=function(e,t){var n=Daria.MOPS._getReplacementTreeAfterPin(e,t),i=Object.keys(n).map((function(e){return ns.Model.get("message",{ids:e})}));return ns.Model.traverse("messages",(function(e){"yes"===e.params.with_pins&&e.recalculateIndexesAfterPin(i,t)})),y(t?"pin":"unpin",e),Vow.fulfill()},Daria.MOPS.shouldShowConfirmation=function(e,t){var n=ns.page.current.params;return!(["trash","spam"].indexOf(n.current_folder?ns.Model.get("folder",{fid:n.current_folder}).get(".symbol"):"")>=0)&&("pin"===e&&t>=Daria.Constants.MAX_MESSAGES_TO_PIN||["tospam","delete"].indexOf(e)>=0&&t>=Daria.Constants.MAX_MESSAGES_TO_REMOVE_OR_SPAM)},Daria.MOPS._getSourceFoldersLogParams=function(e){var t=e.ids,n=e.tids,r={},o={};[].concat(i(t),i(n)).forEach((function(e){var t=ns.Model.get("message",{ids:e});t.isInTab()?o[t.getTabId()]=!0:r[t.getFolderId()]=!0}));var s=Object.keys(r).map((function(e){return{kind:"folder",source_id:e,source_type:Object(u.a)(e)}})),a=Object.keys(o).map((function(e){return{kind:"tab",source_id:e,source_type:e}}));return[].concat(i(s),i(a))},Daria.MOPS._logMops=function(e,t,n,i){var r=i.ids,o=void 0===r?[]:r,s=i.tids,a=void 0===s?[]:s,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(o.length||a.length){var l=c.tab||c.tabId,d=Object.assign({helper:e,action:t,actionStage:n,ids:o.join(","),tids:a.join(","),time:Date.now(),kind:"folder",target_type:Object(u.a)(c.current_folder),target_id:c.current_folder,page:Daria.MOPS._getPageParam()},_.pick(c,"originalAction","fid","folder","toolbar","noResetChecked"));Daria.areFoldersTabsEnabled()&&l?(d.kind="tab",d.target_type=l,d.target_id=l):(d.kind="folder",d.target_type=Object(u.a)(c.current_folder),d.target_id=c.current_folder),"start"===n&&(d.sources=Daria.MOPS._getSourceFoldersLogParams({ids:o,tids:a})),Daria.monitoring.journal("MOPS",d),Daria.DEBUG&&console.log("[MOPS]",d)}},Daria.MOPS._scenarioManager=d.a,Daria.MOPS._logSuccessfulMark=function(e,t){var n=_.map(t,(function(e){return _.pick(e,["id","params"])})),i=_.get(t,"[0].xRequestId");Daria.MOPS._scenarioManager.finishScenario(e.id,h.f,{response:n,xRequestId:i})},Daria.MOPS._logFailedMark=function(e,t,n){var i=_.map(_.get(t,"invalid"),(function(e){return _.pick(e,["id","params","error"])})),r=_.get(t,"invalid[0].xRequestId");Daria.MOPS._scenarioManager.finishScenario(e.id,n,{response:i,xRequestId:r})},Daria.MOPS._getPageParam=function(){return Daria.isAttachmentsTab()?"attachments_tab":Daria.isSearchPage()?"search":Daria.isMessagePage()?"message":Daria.isThreadPage()?"thread":Daria.isFoldersTabPage()?"tab":Daria.isMessagesListPage()?"folder":"unknown"},Daria.MOPS.registerOperationFail=function(e,t,n,i){!_.find(n.invalid,(function(e){return e.id===i}))||Daria.MOPS._failNotificationManager.registerOperationFail(e,t)},Daria.MOPS._checkDoMessagesParams=function(e){return!(_.isEmpty(e.ids)&&_.isEmpty(e.tids)&&!Boolean(e.fid)&&(Jane.ErrorLog.send({errorType:"do_messages_not_enough_params_for_request",requestParams:JSON.stringify(e)}),1))}})()},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}var s=n(1652),a=(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.fails,r=t.messages,o=t.notifications,a=t.time;i(this,e),this._threshold={fails:n||5,messages:r||5,notifications:o||1,time:a||6e4},this._failOperationsQueue=new s(this._threshold.fails,this._threshold.time),this._resetNotificationShow()}return o(e,[{key:"_resetNotificationShow",value:function(){this._notificationShowCount=0,clearTimeout(this._resetNotificationTimer),this._resetNotificationTimer=null}},{key:"_registerOperationFail",value:function(){this._failOperationsQueue.registerEvent()}},{key:"_shouldShowNotification",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.count,n=void 0===t?0:t,i=e.fid,r=this._failOperationsQueue.hasMaxEventsForTimeInterval(),o=this._notificationShowCount,s=this._threshold,a=s.notifications,c=s.messages,l=!n&&void 0!==i;return(r||n>=c||l)&&o<a}},{key:"_setNotificationShow",value:function(){var e=this;this._notificationShowCount+=1,this._resetNotificationTimer||(this._resetNotificationTimer=setTimeout((function(){return e._resetNotificationShow()}),this._threshold.time))}},{key:"_logNotificationShow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"unknown",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.count,i=void 0===n?"unknown":n,r=t.fid,o={type:"mops_fail_notification_show",action:e};void 0===r?o.msgsCount=i:o.fid=r,Jane.ErrorLog.send(o)}},{key:"registerOperationFail",value:function(e,t){this._registerOperationFail(),this._shouldShowNotification(t)&&this.showNotification(e,t)}},{key:"showNotification",value:function(e,t){Daria.Statusline.show({name:"mops_failed",text:i18n("%mops_fail_notification"),speed:"fast",hideOnTimeout:!0,timeout:2e4}),this._setNotificationShow(),this._logNotificationShow(e,t)}}]),e})();a.EventsTimeQueue=s,e.exports=a},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}var s=(function(){function e(t,n){i(this,e),this._events=[],this._time=n,this._capacity=t}return o(e,[{key:"hasMaxEventsForTimeInterval",value:function(){if(this._events.length<this._capacity)return!1;var e=Date.now(),t=this._events.length-this._capacity;return Math.abs(e-this._events[t])<=this._time}},{key:"registerEvent",value:function(){this._events.push(Date.now());var e=this._events.length;e>2*this._capacity&&(this._events=this._events.slice(e-this._capacity))}}]),e})();e.exports=s},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i="default"},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i="sending-request"},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return a})),n.d(t,"f",(function(){return c}));var i="auxiliary-model-failed",r="empty-selection",o="folder-action-without-fid",s="main-model-failed",a="missing-params",c="successful-request"},function(e,t){Daria.MOPS.Opinfo=function(){this._adjust={},this._tabsAdjust={},this._mid=[],this._tid=[],this._modelsCount=0,this._savedMids=[],this._savedNewCounters={}},Daria.MOPS.Opinfo.prototype.addAdjust=function(e,t){this.hasAdjust()&&(this._adjust[e]=t)},Daria.MOPS.Opinfo.prototype.addTabsAdjust=function(e,t){this.hasTabsAdjust()&&(this._tabsAdjust[e]=t)},Daria.MOPS.Opinfo.prototype.addMid=function(e){this._mid.push(e)},Daria.MOPS.Opinfo.prototype.saveMid=function(e){this._savedMids.push(e)},Daria.MOPS.Opinfo.prototype.getSavedMids=function(){return this._savedMids},Daria.MOPS.Opinfo.prototype.addTid=function(e){this._tid.push(e)},Daria.MOPS.Opinfo.prototype.checkFidAdjust=function(e,t){return!!this.hasAdjust()&&(this._adjust[t]===e||(this.resetAdjust(),!1))},Daria.MOPS.Opinfo.prototype.saveUnreadCounter=function(e,t){this._savedNewCounters[e]=t},Daria.MOPS.Opinfo.prototype.saveAffectedMids=function(){this._savedMids.concat(this._mid)},Daria.MOPS.Opinfo.prototype.getSavedUnreadCounter=function(e){return this._savedNewCounters[e]},Daria.MOPS.Opinfo.prototype.getSavedTids=function(){return Object.keys(this._savedNewCounters)},Daria.MOPS.Opinfo.prototype.checkTidAdjust=function(e,t){var n=Daria.areFoldersTabsEnabled()&&this.hasTabsAdjust(),i=this.hasAdjust();if(!i&&!n)return this._tid.push(t),!1;var r=0;if(i)for(var o in this._adjust)r+=this._adjust[o];if(n){var s=this.getTabsAdjust();r=Object.keys(s).reduce((function(e,t){return e+s[t]}),r)}return r===e||(this.resetAdjust(),n&&this.resetTabsAdjust(),this._tid.push(t),this._mid=[],!1)},Daria.MOPS.Opinfo.prototype.getAdjust=function(){return this._adjust},Daria.MOPS.Opinfo.prototype.getTabsAdjust=function(){return this._tabsAdjust},Daria.MOPS.Opinfo.prototype.getIds=function(){return{ids:this._mid,tids:this._tid}},Daria.MOPS.Opinfo.prototype.getModelsCount=function(){return this._modelsCount},Daria.MOPS.Opinfo.prototype.hasAdjust=function(){return Boolean(this._adjust)},Daria.MOPS.Opinfo.prototype.hasTabsAdjust=function(){return Boolean(this._tabsAdjust)},Daria.MOPS.Opinfo.prototype.merge=function(e){if(this.hasAdjust())if(e.hasAdjust()){var t=e.getAdjust(),n=this.getAdjust();for(var i in t)i in n?n[i]+=t[i]:n[i]=t[i]}else this.resetAdjust();if(this.hasTabsAdjust())if(e.hasTabsAdjust()){var r=e.getTabsAdjust(),o=this.getTabsAdjust();for(var s in r)s in o?o[s]+=r[s]:o[s]=r[s]}else e.resetTabsAdjust();this._mid=this._mid.concat(e._mid),this._tid=this._tid.concat(e._tid),this._savedMids=this._savedMids.concat(e._savedMids),this._savedNewCounters=_.assign(this._savedNewCounters,e._savedNewCounters)},Daria.MOPS.Opinfo.prototype.resetAdjust=function(){this._adjust=null},Daria.MOPS.Opinfo.prototype.resetTabsAdjust=function(){this._tabsAdjust=null},Daria.MOPS.Opinfo.prototype.setModelsCount=function(e){this._modelsCount=e}},function(e,t){Daria.MOPS.onMove=function(e,t){var n=t.current_folder,i=ns.Model.get("folders"),r=ns.Model.get("filters");1!==t.count||i.isFolder(n,"trash")||0!==r.getForFolder(n).length||_.contains(["archive","infolder"],t.originalAction)||ns.action.run("message.filter-move.show",{mid:t.ids.ids[0]||t.ids.tids[0],fid:n})},ns.events.on("daria:MOPS:move",Daria.MOPS.onMove)},function(e,t){Daria.hkMOPS={},Daria.hkMOPS.doAction=function(e,t,n){return Daria.MOPS.updateHelper(e,t,n)},Daria.hkMOPS.doUserDefinedAction=function(e,t){var n=ns.Model.get("messages-checked");if(n.getCount()>0)return void Daria.hkMOPS.doAction(e,n,t);var i,r=ns.Model.get("focus");if(r.isCurrentFocusOnMessage()){i=r.getFocus().params.ids}else"message"===ns.page.current.page&&(i=ns.page.current.params.ids);i&&Daria.MOPS.doActionWithMessages([i],e,t)},Daria.hkMOPS.runReplyAction=function(e,t){t=_.extend({toolbar:!0},t);var n=ns.Model.get("messages-checked");if(n.getCount()>0)return t.mMessagesChecked=n,void ns.action.run(e,t);var i;if("message"===ns.page.current.page&&(i=ns.page.current.params.ids))return t["message-id"]=i,void ns.action.run(e,t);var r=ns.Model.get("focus");if(r.isCurrentFocusOnMessage())if(i=r.getFocus().params.ids,"t"===i[0]){var o=Daria.MOPS.getFakeMessagesChecked([i]);t.mMessagesChecked=o,ns.action.run(e,t),o.destroy()}else t["message-id"]=i,ns.action.run(e,t)},Daria.hkMOPS.toggleImportance=function(){var e=ns.Model.get("messages-checked"),t=ns.Model.get("labels").getImportantLID();e.getCount()>0?Daria.MOPS.updateHelper("toggleLabel",e,{lid:t}):ns.page.go(ns.router.generateUrl("messages",{current_label:t}))},Daria.hkMOPS.mark=function(){var e=ns.Model.get("messages-checked");if(e.getCount()>0)return void Daria.hkMOPS.doAction("mark",e);var t=ns.Model.get("focus");if(t.isCurrentFocusOnMessage()){var n=t.getFocus();Daria.MOPS.doActionWithMessages([n.params.ids],"mark")}},Daria.hkMOPS.unmark=function(){var e=ns.Model.get("messages-checked");e.getCount()>0?Daria.hkMOPS.doAction("unmark",e):"only_new"===ns.page.current.params.extra_cond?ns.events.trigger("daria:vMessages:recalculate"):ns.page.go("#unread")},Daria.hkMOPS.remove=function(){var e=ns.Model.get("messages-checked");if(e.getCount()>0)return void Daria.hkMOPS.doAction("remove",e);var t=ns.Model.get("focus");t.isCurrentFocusOnMessage()&&Daria.MOPS.doActionWithMessages([t.getFocus().params.ids],"remove")},Daria.hkMOPS.triggerToolbarEvent=function(e,t){var n=0,i=ns.Model.get("messages-checked");if(0===i.getCount()&&t){n=200;var r=ns.Model.get("focus");if(r.isCurrentFocusOnMessage()){var o=r.getFocus().getModel("message");i.check(o,!0)}}setTimeout((function(){ns.events.trigger(e)}),n)}},function(e,t){Daria.Printer={PRINT_URL:Daria.api.print},Daria.Printer.printMessage=function(e){var t=Daria.uid,n="".concat(window.location.origin).concat(Daria.Printer.PRINT_URL,"?mid=").concat(e,"&_uid=").concat(t);window.open(n,"_blank")},Daria.Printer.printThread=function(e){var t=Daria.uid,n="".concat(window.location.origin).concat(Daria.Printer.PRINT_URL,"?tid=").concat(e,"&_uid=").concat(t);window.open(n,"_blank")}},function(e,t){Daria.bubblingQuote=function(e){e=e.replace(/^<meta[^>]*>/,"");var t=e.match(/<!--StartFragment-->(.*?)<!--EndFragment-->/);t&&(e=t[1]);var n=document.createElement("div");n.innerHTML=e;for(var i,r=n;r;){if(1!==r.childNodes.length||!Jane.DOM.isBlockquote(r.firstChild)){if(r===n)break;if(r.getElementsByTagName("blockquote").length)break;for(i=n.firstChild.cloneNode(!1),i.removeAttribute("style");r.firstChild;)i.appendChild(r.firstChild);break}r=r.firstChild}return n=null,!!i&&i.outerHTML}},function(e,t){!(function(){function e(e){return"yes"===e.params.search}Daria.messages={},Daria.messages.toCreateThread=function(e){return!e.isThread()&&(!e.isDraftLike()&&!Daria.Widgets.getWidgetName(e))},Daria.messages.clearCacheByFID=function(e){ns.Model.invalidate("messages",(function(t){return t.params.current_folder===e}))},Daria.messages.clearCacheBodyByThread=function(e){$.makeArray(e).forEach((function(e){var t=ns.Model.get("messages",{thread_id:e});t&&t.models.length&&t.models.forEach((function(e){ns.Model.get("message-body",{ids:e.get(".mid")}).invalidate()}))}))},Daria.messages.clearCacheByLID=function(e){ns.Model.invalidate("messages",(function(t){return t.params.current_label===e}))},Daria.messages.clearSearchCache=function(){ns.Model.invalidate("messages",e)},Daria.messages.preload=function(e){return},Daria.messages.everHadMessages=function(){var e=ns.Model.get("settings");if(e.getSetting("has_inbox_message"))return!0;var t=ns.Model.get("messages",ns.page.current.params);return!!t.isValid()&&(t.select('/.message[.type != "12" && .dlid != "yadisk"]').length?(e.setSettingOn("has_inbox_message"),!0):(Jane.c("Не показываем рекламу так как в инбоксе нет писем кроме приветственных"),!1))},Daria.messages.whereToGoAfterMove=function(e,t,n){n=n||{};var i,r,o=n.ids&&n.ids.length?n.ids:t.getIds(),s=o.ids.length?o.ids[0]:o.tids[0],a=ns.Model.get("message",{ids:s}),c=ns.Model.get("settings"),l=ns.Model.get("folders");switch(e){case"move":case"infolder":i=n.fid||n.folder;break;case"archive":r="archive";break;case"delete":case"remove":r="trash";break;case"tospam":r="spam";break;case"notspam":r="inbox"}var u="move";_.includes(["remove","delete","tospam","notspam"],e)&&(u="delete"),!i&&r&&(i=l.getFidBySymbol(r));var d,f=[],g={},p=c.getSetting("page_after_"+u),h="";"compose"===ns.page.current.page&&"next_message"===p&&(p="source_folder"),Daria.is2pane()&&Daria.isMessagePage()&&(_.contains(["unmark"],e)?(p="dest_folder",i=a.getFolderId()||l.getFidBySymbol("inbox")):_.contains(["move"],e)&&n.fid&&"trash"===l.getFolderById(n.fid).symbol&&(u="delete")),Daria.is3pane()&&(p="current_list");var m;switch(p){case"current_list":if(Daria.is3pane()){var v=$.extend({},ns.page.current.params);n.ids&&(_.contains(n.ids.tids,v.thread_id)&&delete v.thread_id,_.contains(n.ids.ids,v.ids)&&delete v.ids),"delete"===u&&delete v.ids,v.search||v.current_folder||(v.current_folder=l.getFidBySymbol("inbox")),h=ns.router.generateUrl("messages",v)}else if("move"===u)h=ns.page.currentUrl,f.push("message"),g.ids=s;else{var b=ns.page.history.getPrevious(),y=b&&ns.router(b);if(y&&"messages"===y.page){h=b;var S=ns.Model.info("messages").pNames,w=_.pick(y.params,(function(e,t){return S.indexOf(t)>-1}));_.extend(g,w),f.push("messages")}else m=a.getFolderId(),m||(m=l.getFidBySymbol("inbox")),h=ns.router.generateUrl("messages",{current_folder:m})}break;case"next_message":var k=ns.Model.get("message-nearest",{ids:s}).getNearestMessages(),x=k.prev&&k.prev.mid?k.prev:k.next;x&&x.mid&&(h=ns.Model.get("message",{ids:x.mid}).getUrl()),h||(m=a.getFolderId(),m||(m=l.getFidBySymbol("inbox")),h=ns.router.generateUrl("messages",{current_folder:m}));break;case"inbox":d=l.getFidBySymbol("inbox");break;case"deleted_list":d="tospam"===e||"notspam"===e?l.getFidBySymbol("spam"):l.getFidBySymbol("trash");break;case"source_folder":d=a.getFolderId(),d||(d=l.getFidBySymbol("inbox"));break;case"dest_folder":d=i}return!h&&d&&(g.current_folder=d,f.push("messages"),h=ns.router.generateUrl("messages",{current_folder:d})),{where:h,requestParams:g,requestModels:f}},Daria.messages.doActionInThreads=function(e,t,n){for(var i=0,r=t.length;i<r;i++)for(var o=t[i],s=ns.Model.get("messages",{thread_id:o}),a=0,c=s.models.length;a<c;a++)s.models[a][e](n)},Daria.messages._pinsBadFolders=["trash","draft","spam","template"],Daria.messages.checkUsePinsByParams=function(e){if(e.tabId)return!1;if(e.category)return!1;if("search"===e.search)return!1;if(e.current_label)return!1;if(e.extra_cond)return!1;if("rpopinfo"===e.scope)return!1;if(e.thread_id&&!e.current_folder)return!1;if(e.current_folder){if(ns.Model.get("folders").isFolder(e.current_folder,Daria.messages._pinsBadFolders))return!1}return!0},Daria.messages.canShowPinControlsByParams=function(e){if(e=e||ns.page.current.params,e.current_folder){if(ns.Model.get("folders").isFolder(e.current_folder,Daria.messages._pinsBadFolders))return!1}return!0},Daria.messages.createMessagesItemLayout=function(e){e=e||{};var t="layout-messages-item";return e.threadFull?t+="-thread-full":e.threadInner&&(t+="-thread-inner"),e.widget&&(t+="-"+e.widget),t}})()},function(e,t){function n(e){return o(e)||r(e)||i()}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function r(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function o(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}Daria.nsTreeWalker={},Daria.nsTreeWalker.findView=function(e,t){var n=e.info.isBox,i=null;i=n?e.active:e.views;var r=t[0];for(var o in i)if(_.isString(r)&&o===r||_.isRegExp(r)&&r.test(o)){var s;if(n){var a=i[o];s=e.views[a]}else s=i[o];var c=t.slice(1);return c.length?Daria.nsTreeWalker.findView(s,c):s}return null},Daria.nsTreeWalker.getViewsChildren=function(e){var t=[];return e.forEachValidItem((function(e){t.push(e)})),t},Daria.nsTreeWalker.getTreeForFocus=function(){var e=["left-box"];return Daria.hasAsideScrollContainer()&&e.push("aside-scroll-container"),[Daria.nsTreeWalker._buildColumnTree([["folders-box","tabs"],["folders-box","attachments-tab"],["folders-box","folders"],["folders-box","user-folders-switcher"],["folders-box","user-folders"],["folders-box","folders-setup"],["folders-box","system-folders"],["messages-filters","messages-filters-box","messages-filters-wait"],["messages-filters","messages-filters-box","messages-filters-important"],["messages-filters","messages-filters-box","messages-filters-unread"],["messages-filters","messages-filters-box","messages-filters-attachments"],["labels"],["labels-setup"],["collectors"],["collectors-setup"]].map((function(t){return[].concat(e,n(t))}))),Daria.nsTreeWalker._buildColumnTree([["messages-list","messages-list-box","messages-wrap","messages"],["message"]].map((function(e){return["right-box"].concat(n(e))}))),Daria.nsTreeWalker._buildColumnTree([["messages-box","message-thread","message-thread-pager"],["messages-box","message-thread","message-thread-list"],["messages-box","message"]].map((function(e){return["right-box"].concat(n(e))})))]},Daria.nsTreeWalker._buildColumnTree=function(e){var t=e.map(Daria.nsTreeWalker._findViewByPath).map(Daria.nsTreeWalker._getViewFocusableChildren);return _.flatten(t)},Daria.nsTreeWalker._findViewByPath=function(e){return Daria.nsTreeWalker.findView(ns.MAIN_VIEW,e)},Daria.nsTreeWalker._getViewFocusableChildren=function(e){return e?(ns.assert(e.getFocusableChildren,"View: "+e.id,"Не реализован метод #getFocusableChildren()"),e.getFocusableChildren()):[]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(337),r=n(325),o=n(394);!(function(){var e=/^[a-z]{2}$/,t={};Daria.Translate={MAX_BLOCK_LEN:1e3,getCache:function(e){return t[e]},setCache:function(e,n){t[e]=n},clearCache:function(e){delete t[e]},langs:{ru:{s:["en","uk","tr","pl","de","fr","es","it"],name:i18n("%русский")},uk:{s:["ru"],name:i18n("%украинский")},en:{s:"RUS"===Daria.Config.product?["ru","tr"]:["tr","ru"],name:i18n("%английский")},tr:{s:"RUS"===Daria.Config.product?["ru","en"]:["en","ru"],name:i18n("%турецкий")},pl:{s:["ru"],name:i18n("%польский")},de:{s:["ru"],name:i18n("%немецкий")},fr:{s:["ru"],name:i18n("%французский")},es:{s:["ru"],name:i18n("%испанский")},it:{s:["ru"],name:i18n("%итальянский")},all:{s:["ru","uk","en","tr","pl","de","fr","es","it"],name:""}},id2lang:{1:"ru",2:"en",3:"pl",5:"uk",6:"de",7:"fr",12:"es",13:"it",39:"fi",40:"et",44:"tr"},getDefaultLangTo:function(e){return Daria.Config.locale&&e!==Daria.Config.locale?Daria.Config.locale:_.get(this.langs,e+".s.0",Daria.Config.locale)},getLangByMid:function(t){var n=ns.Model.get("message-body",{ids:t}),i=_.get(n.getData(),"body.0.lang");if(i)return this.id2lang[i]?this.id2lang[i]:e.test(i)?i:void 0},defineLanguage:function(e){var t={uk:/[ґїі]/gi,ru:/[а-яё]/gi,pl:/[ąęł]/gi,tr:/[çğş]/gi,de:/[äüß]/gi,es:/[ňñ]/gi,fr:/[âàéêîôùûÿ]/gi};if(/^(\d|\s)*$/.test(e))return Daria.Config.locale;for(var n in t)if(t[n].test(e))return n;return"en"},translateElement:function(e,t,n){var s=n.cloneNode(!0);return new vow.Promise(function(n,a){Daria.Libs("PageTranslator",(function(){var c=Object.assign(Daria.Config["page-translator"],{element:s}),l=new window.yt.PageTranslator(c);l.translate(e,t),l.on("error",(function(){l.halt(),a(),i.a.hasActiveScenario(r.e)&&i.a.getActiveScenario(r.e).logError(o.f)})),l.on("complete",(function(){l.halt(),n(s)}))}))})},translateText:function(e,t,n){var i=document.createElement("div");return i.innerText=n,this.translateElement(e,t,i).then((function(e){return e.innerText}))},translateHtml:function(e,t,n){var i=document.createElement("div");return i.innerHTML=n,this.translateElement(e,t,i).then((function(e){return e.innerHTML}))},translate:function(e,t,n){return n=Array.isArray(n)?n:[n],vow.all(n.map(function(n){switch(n.format){case"text":return this.translateText(e,t,n.value);case"element":return this.translateElement(e,t,n.value);case"html":return this.translateHtml(e,t,n.value);default:return vow.reject()}}.bind(this)))}}})()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1665);Daria.Shortcuts=(function(e,t){var r={eventsBound:!1,altOS:0===navigator.platform.toLowerCase().indexOf("mac"),pageType:"",hotkeysEnabled:!1};return r.shortcuts=Object(i.a)(r),r.help=n(1668)(r),n(1669),ns.events.on("toggleShortcuts",(function(e,t){r.toggleHotkeys(t)})),ns.events.on("pageinit",(function(){r.toggleHotkeys(ns.Model.get("settings").getSetting("enable_hotkeys")),ns.events.trigger("daria:hotkeys:inited")})),ns.events.on("ns-page-after-load",(function(){if(r.pageType!==ns.page.current.page){if(r.pageType=ns.page.current.page,!r.eventsBound)return!1;r.hotkeysEnabled&&(t.Shortcuts.switchList(r.pageType),t.Shortcuts.refresh(r.pageType))}})),r.toggleHotkeys=function(n){e.Shortcuts.hotkeysEnabled=r.hotkeysEnabled={on:!0,off:!1,true:!0,false:!1}[n],r.hotkeysEnabled?(r.eventsBound||r.bindLists(r.pageType),t.Shortcuts.start()):t.Shortcuts.stop()},r.bindLists=function(e){for(var n=r.shortcuts.length-1;n>=0;n--)t.Shortcuts.loadList(r.shortcuts[n],r.altOS);t.Shortcuts.enableList(e),r.eventsBound=!0},r._getShortcutMask=function(e,t){for(var n=r.shortcuts.length-1;n>=0;n--)if(r.shortcuts[n].name===t){var i=r.shortcuts[n];if(i.shortcuts.hasOwnProperty(e))return r.altOS&&i.shortcuts[e].altMask?i.shortcuts[e].altMask:i.shortcuts[e].mask}return""},r.showShortcutsHelp=function(){for(var n=r.help.length-1;n>=0;n--)for(var i=r.help[n],o=i.hotkeys.length-1;o>=0;o--)if(void 0!==i.hotkeys[o].id){var s=r._getShortcutMask(i.hotkeys[o].id,i.id);s&&(i.hotkeys[o].key=s.replace(/Meta/g,"Cmd").replace(/\+/g," + "))}e.Dialog.open({title:i18n("%Shortcuts_help_screen_title"),additionalClass:"b-shortcuts-list__popup",width:900,body:Jane.tt("mail:shortcuts-list",{columns:r.help}),onopen:function(){t(document).on("keydown.shortcutsPopup",(function(e){if(9===e.which){void 0===r.popupActiveTab&&(r.popupActiveTab=0);var n=t(".b-shortcuts-list__item"),i=r.popupActiveTab+1;return i>=n.length&&(i=0),t(".b-shortcuts__list-id-"+r.popupActiveTab).addClass("g-hidden"),t(".b-shortcuts__list-id-"+i).removeClass("g-hidden"),t(n[r.popupActiveTab]).removeClass("b-shortcuts-list__item_current"),t(n[i]).addClass("b-shortcuts-list__item_current"),r.popupActiveTab=i,!1}}))},onclose:function(){t(document).off("keydown.shortcutsPopup"),r.popupActiveTab=0}})},r.switchTab=function(e){void 0===r.popupActiveTab&&(r.popupActiveTab=0),t(".b-shortcuts__list-id-"+r.popupActiveTab).addClass("g-hidden"),t(".b-shortcuts__list-id-"+e.params.tab).removeClass("g-hidden"),t(".b-shortcuts-list__item").removeClass("b-shortcuts-list__item_current"),t(e.event.currentTarget).addClass("b-shortcuts-list__item_current"),r.popupActiveTab=parseInt(e.params.tab,10)},r.getShortcutLabelFor=function(e,t,n){var i=r._getShortcutMask(e,t).replace(/Meta/g,"Cmd").replace(/\+/g," + ");return n?" ("+i+")":i},r.verticalAlignOpenMessage=function(t){var n=ns.page.current.params.thread_id||ns.page.current.params.ids,i="message"===ns.page.current.page;if(!n||i)return!1;var r,o=e.is2pane();r=o?ns.Model.get("scroller-messages"):ns.Model.get("scroller-message");var s={alignToTop:t.alignToTop,relative:r.isRelativeOffset()};return t.alignToTop?s.viewTopOffset=o?-r.FIXED_TOOLBAR_HEIGHT:-r.getScrollOffset():s.viewBottomOffset=o?-ns.Model.get("app-state").get(".timelineHeight"):0,ns.events.trigger("hotkeys.alignOpenMessage",{scroller:r,alignOptions:s}),!0},{showShortcutsHelp:r.showShortcutsHelp,switchTab:r.switchTab,hotkeysEnabled:r.hotkeysEnabled,getShortcutLabelFor:r.getShortcutLabelFor,verticalAlignOpenMessage:r.verticalAlignOpenMessage,freeze:function(){return t.Shortcuts.freeze()},unfreeze:function(){return t.Shortcuts.unfreeze()}}})(Daria,jQuery)},function(e,t,n){"use strict";var i=n(325),r=n(353),o=n(337),s=n(1666),a=n.n(s);t.a=function(e){for(var t,n=[{global:!0,name:"global",shortcuts:{Check_new_mail:{mask:"F9",altMask:"Shift+o",enableInInput:!e.altOS,action:"mailbox.check"},New_mail:{mask:"w, c",disableAt:["compose2"],handler:function(){o.a.startScenario(i.a,r.n),ns.page.go(ns.router.generateUrl("compose2"))}},Goto_inbox:{mask:"Ctrl+i",altMask:"Meta+i",type:"hold",enableInInput:!0,handler:function(){ns.Model.get("focus").goInbox()}},Find:{mask:"/,?",type:"hold",handler:function(){Daria.React.activateSearch()}},Hotkeys_help:{mask:"Shift+?,Shift+comma,Shift+7,7",type:"hold",handler:function(){e.showShortcutsHelp()}},Column_left:{mask:"Left",type:"hold",disableAt:["compose2"],handler:function(){ns.Model.get("focus").changeColumn(!1)}},Column_right:{mask:"Right",type:"hold",disableAt:["compose2"],handler:function(){ns.Model.get("focus").changeColumn(!0)}},Goto_previous:{mask:"Up",type:"hold",handler:function(){Daria.Focus.moveItem(!1)},enableInInput:!0,namedInput:"js-allow-shortcuts"},Goto_next:{mask:"Down",type:"hold",handler:function(){Daria.Focus.moveItem(!0)},enableInInput:!0,namedInput:"js-allow-shortcuts"},Print:{mask:"Shift+p",type:"hold",handler:function(){"message"===ns.page.current.page?ns.events.trigger("hotkeys.print"):ns.Model.get("focus").pubEvent("print")}},Set_mark:{mask:"Space",type:"down",handler:function(){var e=ns.Model.get("focus"),t=!e.hasFocus()||"message"===e.getFocus().id;return!(!Daria.isMessagePage()||!t)||e.pubEvent("space")}},Collapse_folder:{type:"up",mask:"Enter",handler:function(){ns.Model.get("focus").pubEvent("enter")},enableInInput:!0,namedInput:"js-allow-shortcuts"},AlignBottom_Open_Message:{mask:"Ctrl+down",altMask:"Meta+down",type:"hold",handler:function(){return!Daria.Shortcuts.verticalAlignOpenMessage({alignToTop:!1})}},AlignTop_Open_Message:{mask:"Ctrl+up",altMask:"Meta+up",type:"hold",handler:function(){return!Daria.Shortcuts.verticalAlignOpenMessage({alignToTop:!0})}}}},{name:"messages",shortcuts:{Labels_dialog:{mask:"l",handler:function(){Daria.hkMOPS.triggerToolbarEvent("daria:vLabelsActions:open",!0)}},Folders_dialog:{mask:"m",handler:function(){Daria.hkMOPS.triggerToolbarEvent("daria:vFoldersActions:open",!0)}},Label_important:{mask:"i",handler:function(){Daria.hkMOPS.toggleImportance()}},Label_read:{mask:"q",handler:function(){Daria.hkMOPS.mark()}},Label_unread:{mask:"u",handler:function(){Daria.hkMOPS.unmark()}},Reply_all:{mask:"Shift+r",type:"hold",handler:function(){ns.page.current.params.thread_id?ns.events.trigger("daria:vMessageThreadReplyAll:replyAll"):ns.events.trigger("daria:vMessageToolbar:reply",{replyAll:!0,compose:"qr"})}},Select_all:{mask:"Ctrl+a",altMask:"Meta+a",type:"hold",handler:function(){ns.Model.get("messages-checked",ns.page.current.params).toggleSelectAll()}},Select_modifier:{mask:"Shift",handler:function(){ns.Model.get("focus").startKeyboardSelect()}},Select_previous:{mask:"Shift+Up",type:"hold",handler:function(){ns.Model.get("focus").changeItem(!1,!0)}},Select_next:{mask:"Shift+Down",type:"hold",handler:function(){ns.Model.get("focus").changeItem(!0,!0)}},Goto_first:{mask:"Home",handler:function(){ns.Model.get("focus").focusToFirstMessage()}},Select_till_first:{mask:"Shift+Home",handler:function(){ns.Model.get("focus").focusToFirstMessage(!0)}},Goto_end:{mask:"End",handler:function(){ns.Model.get("focus").focusToLastMessage()}},Select_till_last:{mask:"Shift+End",handler:function(){ns.Model.get("focus").focusToLastMessage(!0)}},Forward:{mask:"f",handler:function(){ns.Model.get("messages-checked").getCount()<=Daria.Constants.MAX_MESSAGES_TO_FORWARD&&Daria.hkMOPS.runReplyAction("forward")}},Delete_selected:{mask:"Delete",altMask:"Meta+Backspace",type:"hold",handler:function(){Daria.hkMOPS.remove()}},Deselect:{mask:"Esc",enableInInput:!0,handler:function(e){var t="true"===e.target.getAttribute("contenteditable"),n="TEXTAREA"===e.target.nodeName,i=e.target===document.activeElement;if((t||n)&&i)return void document.activeElement.blur();ns.Model.get("messages-checked").getCount()>0?ns.events.trigger("daria:vMessages:deselect"):Daria.is2pane()&&ns.events.trigger("daria:vMessages:closeWithShortcut")}},Reply_open_message:a.a.reply,Label_unread_open_message:a.a.unread,Label_spam_open_message:a.a.toSpam}},{name:"message",shortcuts:{Goto_next:{mask:"n,k",handler:function(){ns.events.trigger("daria:vMessagePrevNextInMessage:changeMessage",{direction:"next"})}},Goto_previous:{mask:"p,j",handler:function(){ns.events.trigger("daria:vMessagePrevNextInMessage:changeMessage",{direction:"prev"})}},Delete:{mask:"Delete",altMask:"Meta+Backspace",handler:function(){var e=ns.page.current.params.ids;e&&Daria.MOPS.doActionWithMessages([e],"remove")}},Deselect:{mask:"Esc",enableInInput:!0,handler:function(e){var t="true"===e.target.getAttribute("contenteditable"),n="TEXTAREA"===e.target.nodeName,i=e.target===document.activeElement;if((t||n)&&i)return void document.activeElement.blur()}},Reply_all_quick:{mask:"r",handler:function(){ns.events.trigger("daria:vMessageToolbar:reply",{compose:"qr",replyAll:!0})}},Reply_all:{mask:"Shift+r",type:"hold",handler:function(){ns.events.trigger("daria:vMessageToolbar:reply",{compose:"full",replyAll:!0}),ns.events.trigger("daria:shortcuts:replyall")}},Reply_quick:{mask:"e",handler:function(){ns.events.trigger("daria:vMessageToolbar:reply",{compose:"qr"})}},Reply:a.a.reply,Forward:{mask:"Shift+f",handler:function(){Daria.hkMOPS.runReplyAction("forward")}},Labels_dialog:{mask:"Shift+l",handler:function(){Daria.hkMOPS.triggerToolbarEvent("daria:vLabelsActions:open")}},Folders_dialog:{mask:"Shift+m",handler:function(){Daria.hkMOPS.triggerToolbarEvent("daria:vFoldersActions:open")}},Label_unread:a.a.unread,Label_spam:a.a.toSpam,Label_important:{mask:"Shift+i",handler:function(){var e=ns.page.current.params.ids;if(e){var t=ns.Model.get("labels").getImportantLID();Daria.MOPS.doActionWithMessages([e],"toggleLabel",{lid:t})}}},Attachments_save:{mask:"Ctrl+s",altMask:"Meta+s",type:"hold",handler:function(){ns.events.trigger("daria:vAttachmentsWidgetBody:downloadAttachments")}}}},{name:"compose2",shortcuts:{Save_draft:{mask:"Ctrl+s",altMask:"Meta+s",type:"hold",enableInInput:!0,handler:function(){ns.events.trigger("daria:vCompose2:save")}},Send:{mask:"Ctrl+Enter",altMask:"Meta+Enter",type:"hold",enableInInput:!0,handler:function(){ns.events.trigger("daria:vCompose2:send")}}}},{name:"context-menu",shortcuts:{Context_menu_cancel:{mask:"Esc",enableInInput:!0,handler:function(){Daria.ContextMenu.close()}}}},{name:"dialog",shortcuts:{Dialog_cancel:{mask:"Esc",enableInInput:!0,handler:function(){Daria.Dialog.cancel()}}}},{name:"finder",shortcuts:{Finder_close:{mask:"Esc",handler:function(){ns.events.trigger("daria:vBrowseDisk:close")}}}},{name:"video-player",shortcuts:{Videoplayer_cancel:{mask:"Esc",handler:function(){Daria.VideoPlayer.close()}}}},{name:"image-viewer",shortcuts:{Image_viewer_close:{mask:"Esc",enableInInput:!0,handler:function(){Daria.Layer.close()}},Image_viewer_next:{mask:"Right",handler:function(){var e=Daria.ImageViewer;e.isGalleryOpen()?e.scrollGallery(1):e.next()}},Image_viewer_prev:{mask:"Left",handler:function(){var e=Daria.ImageViewer;e.isGalleryOpen()?e.scrollGallery(-1):e.prev()}}}},{name:"attach-viewer",shortcuts:{Attach_viewer_close:{mask:"Esc",enableInInput:!0,handler:function(){Daria.Layer.close()}},Attach_viewer_next:{mask:"Right",handler:function(){var e=Daria.AttachViewer;e.isGalleryOpen()?e.scrollGallery(1):e.next()}},Attach_viewer_prev:{mask:"Left",handler:function(){var e=Daria.AttachViewer;e.isGalleryOpen()?e.scrollGallery(-1):e.prev()}}}},{name:"subscriptions-popup",shortcuts:{Subscription_popup_close:{mask:"Esc",enableInInput:!0,handler:function(){ns.events.trigger("daria:unsubscribe-popup:hide")}}}},{name:"themes-selector",shortcuts:{Themes_selector_close:{mask:"Esc",enableInInput:!0,handler:function(e){"INPUT"===e.target.nodeName.toUpperCase()||ns.events.trigger("Daria:vThemesSelector:close")}}}},{name:"abook",shortcuts:{Abook_select_all:{mask:"Ctrl+a",altMask:"Meta+a",type:"hold",handler:function(){ns.events.trigger("daria:vAbookHead.selectAll")}},Abook_deselect_all:{mask:"Esc",enableInInput:!0,handler:function(){ns.events.trigger("daria:vAbookHead.deselectAll")}}}}],s={Archive:{mask:"a",handler:function(){Daria.userToolbar.isButtonActivated(Daria.Constants.TOOLBAR_BUTTONS.ARCHIVE)&&Daria.hkMOPS.doUserDefinedAction("archive")}},Sendon:{mask:"Alt+f",handler:function(){var e=Daria.Constants.TOOLBAR_BUTTONS.SENDON;if(Daria.userToolbar.isButtonActivated(e)){var t=Daria.userToolbar.get(e).settings;Daria.hkMOPS.runReplyAction("sendon",t)}}},Infolder:{mask:"Alt+m",handler:function(){var e=Daria.Constants.TOOLBAR_BUTTONS.INFOLDER;if(Daria.userToolbar.isButtonActivated(e)){var t=Daria.userToolbar.get(e).settings;Daria.hkMOPS.doUserDefinedAction("infolder",t)}}},Defined_label:{mask:"Alt+l",handler:function(){var e=Daria.Constants.TOOLBAR_BUTTONS.LABEL;if(Daria.userToolbar.isButtonActivated(e)){var t=Daria.userToolbar.get(e).settings;Daria.hkMOPS.doUserDefinedAction("toggleLabel",t)}}},Defined_reply:{mask:"Alt+r",handler:function(){var e=ns.Model.get("folders").isIncoming(ns.page.current.params.current_folder),t=Daria.Constants.TOOLBAR_BUTTONS.TEMPLATE;if(e&&Daria.userToolbar.isButtonActivated(t)){var n=Daria.userToolbar.get(t).settings;Daria.hkMOPS.runReplyAction("reply-tmpl",n)}}}},c=n.length-1;c>=0;c--)t=n[c],"messages"!==t.name&&"message"!==t.name||$.extend(t.shortcuts,s);return n}},function(e,t,n){"use strict";var i=n(1667);e.exports={toSpam:{mask:"Shift+s",handler:function(){var e=i(ns.page.current.params);if(e.length){var t=e.filter((function(e){return!e.isSpam()}));t.length?Daria.MOPS.doActionWithMessages(t.map((function(e){return e.get(".mid")})),"tospam"):Daria.MOPS.doActionWithMessages(e.map((function(e){return e.get(".mid")})),"notspam")}}},unread:{mask:"Shift+u",handler:function(){var e=i(ns.page.current.params);e.length&&Daria.MOPS.doActionWithMessages(e.map((function(e){return e.get(".mid")})),"unmark")}},reply:{mask:"Shift+e",handler:function(){ns.events.trigger("daria:vMessageToolbar:reply",{compose:"full"})}}}},function(e,t,n){"use strict";e.exports=function(e){var t=e.ids;if(t)return[ns.Model.get("message",{ids:t})];var n=e.thread_id;if(n){var i=ns.Model.get("messages",{thread_id:n}).models.filter((function(e){return ns.Model.get("state-message-thread-item",{ids:e.get(".mid")}).isOpen()})),r=ns.Model.get("message",{ids:n});return r.hasRealData()&&r.getThreadCount()===i.length?[r]:i.filter((function(e){return!e.isDraftLike()}))}return[]}},function(e,t){e.exports=function(){return[{title:i18n("%Shortcuts_groups_global"),id:"global",hotkeys:[{title:i18n("%Shortcuts_key_Check_new_mail"),id:"Check_new_mail"},{title:i18n("%Shortcuts_key_New_mail"),id:"New_mail"},{title:i18n("%Shortcuts_key_Goto_inbox"),id:"Goto_inbox"},{title:i18n("%Shortcuts_key_Print"),id:"Print"},{title:i18n("%Shortcuts_key_Find"),key:"/"},{title:i18n("%Shortcuts_key_Hotkeys_help"),key:"?"},{title:i18n("%Shortcuts_key_Columns_change"),key:"←|→"},{title:i18n("%Shortcuts_key_Next_prev"),key:"↑|↓"},{title:i18n("%Shortcuts_key_Collapse_folder"),key:"Space"}]},{title:i18n("%Shortcuts_groups_messages"),id:"messages",hotkeys:[{title:i18n("%Shortcuts_key_Next_prev_mail"),key:"↑|↓"},{title:i18n("%Shortcuts_key_open_close_message"),key:"Enter"},{title:i18n("%Shortcuts_key_message_selection"),key:"Space"},{title:i18n("%Shortcuts_key_List_selection"),key:"Shift + ↑|↓"},{title:i18n("%Shortcuts_key_Select_all"),id:"Select_all"},{title:i18n("%Shortcuts_key_Labels_dialog"),id:"Labels_dialog"},{title:i18n("%Shortcuts_key_Folders_dialog"),id:"Folders_dialog"},{title:i18n("%Shortcuts_key_Label_read"),id:"Label_read"},{title:i18n("%Shortcuts_key_Set_unmark"),id:"Label_unread"},{title:i18n("%Shortcuts_key_Forward"),id:"Forward"},{title:i18n("%Shortcuts_key_Label_important"),id:"Label_important"},{title:i18n("%Shortcuts_key_Delete_selected"),id:"Delete_selected"},{title:i18n("%Shortcuts_key_Open_important"),id:"Label_important"},{title:i18n("%Shortcuts_key_Open_unread"),id:"Label_unread"}]},{title:i18n("%Shortcuts_groups_message"),id:"message",hotkeys:[{title:i18n("%Shortcuts_help_label_unread"),id:"Label_unread"},{title:i18n("%Shortcuts_help_toggle_spam"),id:"Label_spam"},{title:i18n("%Shortcuts_help_trigger_important"),id:"Label_important"},{title:i18n("%Shortcuts_help_set_label"),id:"Labels_dialog"},{title:i18n("%Shortcuts_help_move_to_folder"),id:"Folders_dialog"},{title:i18n("%Shortcuts_help_forward"),id:"Forward"},{title:i18n("%Shortcuts_key_Reply"),id:"Reply"},{title:i18n("%Shortcuts_key_Reply_all"),id:"Reply_all"},{title:i18n("%Shortcuts_key_Delete"),id:"Delete"},{title:i18n("%Shortcuts_key_Attachments_save"),id:"Attachments_save"},{title:i18n("%Shortcuts_key_Next_prev_mail"),key:"p/n | j/k"}]},{title:i18n("%Shortcuts_groups_compose"),id:"compose2",hotkeys:[{title:i18n("%Shortcuts_key_Send"),id:"Send"},{title:i18n("%Shortcuts_key_Save_draft"),id:"Save_draft"}]},{title:i18n("%Shortcuts_groups_personal"),id:"personal",hotkeys:[{title:i18n("%Shortcuts_key_Archive"),key:"a"},{title:i18n("%Shortcuts_key_Sendon"),key:"Alt + f"},{title:i18n("%Shortcuts_key_Infolder"),key:"Alt + m"},{title:i18n("%Shortcuts_key_User_Label"),key:"Alt + l"},{title:i18n("%Shortcuts_key_Reply_Template"),key:"Alt + r"}]}]}},function(e,t){Daria.Focus={},Daria.Focus.VALUE_LAZY_SCROLL=100,Daria.Focus.getScroller=function(e){var t;switch(e="number"==typeof e?e:ns.Model.get("focus").getIndexCurrentColumn()){case 0:t=ns.Model.get(Daria.hasAsideScrollContainer()?"scroller-left-block":"scroller-left");break;case 1:t=ns.Model.get("scroller-messages");break;case 2:t=ns.Model.get("scroller-message")}return t},Daria.Focus.scrollIntoView=function(e,t){if(!ns.Model.get("skin-saver-state").isPreviewMode()){var n=Daria.Focus.getScroller(t),i=n.getScrollOffset()+2,r=n.getScrollTop(),o=n.getNodeTop(e[0]),s=o-i,a=r-s;if(a>0)return Daria.DEBUG&&console.log("[Focus.scrollIntoView]","nodeTop behind scrollnodeTop"),Daria.Focus.scrollToTopMessages(t),void n.setScrollTop(r-a);var c=n.getHeight(),l=r+c,u=o+e.height(),d=u+i,f=d-l;if(f>0){Daria.DEBUG&&console.log("[Focus.scrollIntoView]","nodeBottom behind scrollBottom");var g=r+f;Daria.Focus.scrollToTopMessages(t),g>=o?(Daria.DEBUG&&console.log("[Focus.scrollIntoView]","collision, nodeTop behind scrollTop, scroll to nodeTop"),n.setScrollTop(o-i)):n.setScrollTop(r+f)}}},Daria.Focus.scrollToTopMessages=function(e){Daria.hasAsideScrollContainer()&&0===e&&ns.Model.get(Daria.is3pane()?"scroller-message":"scroller-messages").setScrollTop(0)},Daria.Focus.needLazyScroll=function(e,t){switch(e.id){case"message-thread-item-wrap":if(!e.getModel("state-message-thread-item").isOpen())return!1;break;case"message-thread":if(e.getModel("messages").getCount()>1)return!1;break;case"message":break;default:return!1}var n=Daria.Focus.getScroller(),i=n.getNodeTop(e.node),r=i+e.$node.height(),o=n.getScrollTop(),s=o+n.getHeight();return t?r>s:i<o},Daria.Focus.lazyScroll=function(e){var t=Daria.Focus.getScroller(),n=t.getScrollTop();e?n+=Daria.Focus.VALUE_LAZY_SCROLL:n-=Daria.Focus.VALUE_LAZY_SCROLL,t.setScrollTop(n)},Daria.Focus.moveItem=function(e){var t=ns.Model.get("focus"),n=t.getIndexCurrentColumn();"message"===ns.page.current.page&&n!==t.indexColumns.LEFT?Daria.Focus.lazyScroll(e):t.changeItem(e)}},function(e,t){Daria.Widgets={},Daria.Widgets.getWidgetName=function(e){return Daria.Widgets._commonChecks(e)?Daria.Widgets.shouldShowTicketWidget(e)?"ticket":Daria.Widgets.shouldShowTaksaWidgets(e)?"widget":Daria.Widgets.shouldShowEvents(e)?"events":"":""},Daria.Widgets._commonChecks=function(e){return!ns.Model.get("folders").spamOrTrash(e.getFolderId())},Daria.Widgets.shouldShowTicketWidget=function(e){if(!Daria.Widgets._shouldShowTaksaWidgets(e))return!1;var t=e.get(".widget.info.type");return Daria.Widgets.isTicketWidget(t)},Daria.Widgets.isTicketWidget=function(e){return["avia","hotels","pkpass"].some((function(t){return t===e}))},Daria.Widgets._shouldShowTaksaWidgets=function(e){if(!e.get(".widget"))return!1;var t=!Daria.is3pane(),n=Boolean(ns.Model.get("settings").getSign("show_widgets_decor")),i=Boolean(ns.Model.get("settings").getSign("show_widgets_buttons")),r=n||i;if(!(t=t&&r))return!1;switch(e.get(".widget.info.type")){case"onelink":return t&&!Daria.CompactMode.isCompactMessagesList();case"tracker":return t;default:return t&&!Daria.CompactMode.isCompactMessagesList()&&"ru"===Daria.Config.locale}},Daria.Widgets.shouldShowTaksaWidgets=function(e){var t=e.get(".widget.info.type");return Daria.Widgets._shouldShowTaksaWidgets(e)&&"calendar"!==t},Daria.Widgets.shouldShowTaksaCalendarWidget=function(e){var t=e.get(".widget.info.type");return Daria.Widgets._shouldShowTaksaWidgets(e)&&"calendar"===t},Daria.Widgets.shouldShowEvents=function(e){return Daria.IS_CORP&&!Daria.is3pane()&&!Daria.CompactMode.isCompactMessagesList()&&!ns.Model.get("settings").isSet("disable_events")&&e.hasType(42)},Daria.Widgets.shouldShowAttachments=function(e,t){if(t=t||{},Daria.is2pane()&&e.hasAttachment()){var n="only_atta"===t.extra_cond||t.search&&"yes"===t.attaches,i=ns.Model.get("settings");if(Daria.CompactMode.isCompactMessagesList()&&!n)return!1;if(!i.isSet("disable_inboxattachs")||n){var r;if(r=Daria.isAttachmentsLineDesign()?["spam","trash"]:n||e.isIntoThread()?["spam","template","trash"]:["draft","sent","spam","template","trash"],e.inFolderBySymbol(r))return!1;if(n)return!0;if("yacal"===e.getSocialLabel())return!1;if(Daria.IS_CORP)return!0;var o=e.getSOLabels();return!_.contains(o,13)}}return!1}},function(e,t){Daria.queueCommon={},Daria.queueCommon.CONNECTIONS_MAX=2,Daria.queueCommon.MODELS_MAX=5,Daria.queueCommon.TIMEOUT_BETWEEN_REQUESTS=0,Daria.queueCommon._queue=null,Daria.queueCommon._poolCnt=0,Daria.queueCommon.reset=function(){this._poolCnt=0,this._queue=[]},Daria.queueCommon.add=function(e){this._queue=this._queue.concat(e),this.run()},Daria.queueCommon.run=function(){if(!(this._poolCnt>=this.CONNECTIONS_MAX)){var e=this._queue.splice(0,this.MODELS_MAX);e.length&&(this.request(e).always(function(){this._poolCnt--,setTimeout(this.run.bind(this),this.TIMEOUT_BETWEEN_REQUESTS)}.bind(this)),this._poolCnt++,this.run())}},Daria.queueCommon.request=function(e){return ns.request(e)}},function(e,t){Daria.preloadQueue={},no.extend(Daria.preloadQueue,Daria.queueCommon),Daria.preloadQueue.CONNECTIONS_MAX=1,Daria.preloadQueue.MODELS_MAX=5,Daria.preloadQueue.TIMEOUT_BETWEEN_REQUESTS=500,Daria.preloadQueue.reset()},function(e,t){function n(){var e={container_kind:"unknown",container_type:"",container_id:""},t=ns.page.current.params||{};if(Daria.isSearchPage())e.container_kind="search";else if(Daria.isAttachmentsTab())e.container_kind="tab",e.container_type=e.container_id="attachments";else if(Daria.isFoldersTabPage())e.container_kind="tab",e.container_type=e.container_id=t.tabId;else if("messages"===ns.page.current.page){var n=t.current_folder;e.container_kind="folder",e.container_id=n,e.container_type=ns.Model.get("folder",{fid:t.current_folder}).get(".symbol")||"user"}Daria.monitoring.journal("search",e)}Daria.MessagesSearch={},Daria.MessagesSearch.searchParamsStore=[],Daria.MessagesSearch.invalidateMessagesModel=function(e){for(var t=-1,n=0;n<Daria.MessagesSearch.searchParamsStore.length;n++)if(_.isEqual(Daria.MessagesSearch.searchParamsStore[n],e)){t=n;break}if(-1!==t)return ns.Model.invalidate("messages",(function(t){for(var n=!0,i=Object.keys(e),r=0;r<i.length;r++)if(e[i[r]]!==t.params[i[r]]){n=!1;break}return t.isValid()&&n}));Daria.MessagesSearch.searchParamsStore.unshift(e)},Daria.MessagesSearch.search=function(e,t){Daria.React.generateSearchId();var i,r=ns.Model.get("settings");t=t||{},e=_.clone(e),n(),Daria.MessagesSearch._resetSimplifiedParams(),ns.events.off("ns-page-before-load",Daria.MessagesSearch._resetSimplifiedParams),""===e.request&&delete e.request,_.isEmpty(e)?(i=ns.page.HOME_HASH,Jane.watcher.set("search.is-empty-search",!0)):(e.search="search",i=ns.router.generateUrl("messages",e)),Daria.MessagesSearch.invalidateMessagesModel(e);var o,s=e&&e.request&&("from"in e||"to"in e||"fid"in e||"lid"in e||"scope"in e||"unread"in e||"attaches"in e||"type"in e);if(s){var a=ns.Model.get("messages",e);o=ns.request([a]).then((function(){return 0===a.get(".message").length&&(i=ns.router.generateUrl("messages",{search:"search",request:e.request}),Daria.React.setSimplifiedParams(e)),ns.page.go(i).then((function(){Daria.React.wasSearchRequestSimplified()&&ns.events.once("ns-page-before-load",Daria.MessagesSearch._resetSimplifiedParams)}))}))}else o=ns.page.go(i);o.then(this._onSuccess.bind(this,t,e),this._onError.bind(this,t)).always((function(){r.isSet("dont_save_history")||Daria.Autocompleter.getSearch().flushCache(),Jane.watcher.set("search.is-empty-search",!1)}))},Daria.MessagesSearch._resetSimplifiedParams=function(){Daria.React.setSimplifiedParams(null)},Daria.MessagesSearch._onSuccess=function(e,t){if(e.onCorrecting){var n=ns.Model.get("messages",ns.page.current.params).getData(),i=jpath(n,".details.search-options.request")[0];i&&i.trim()!==(t.request||"").trim()&&e.onCorrecting(i)}e.onSuccess&&e.onSuccess()},Daria.MessagesSearch._onError=function(e){e.onError&&e.onError()}},function(e,t){function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Daria.Xiva={};var i=Daria.Xiva.MAX_MESSAGES_IN_MODEL=100;Daria.Xiva.createThreadFromMessage=function(e,t,n,i){var r=_.cloneDeep(e.getData());r.count=n,r.mid=e.getThreadId(),r.last_mid=e.get(".mid"),r.new=i;var o=ns.Model.get("messages",{thread_id:r.mid});return o.isValid()&&(r.lid=_(o.models).map((function(e){return e.get(".lid")})).concat(r.lid).flatten().uniq().value()),t.setData(r)},Daria.Xiva.messageLabel=function(e){var t="mark mails"===e.operation?"label":"unlabel",n=ns.Model.get("labels"),i=!1,r=[];e.tids&&(r=_.uniq(JSON.parse(e.tids)).map((function(e){return"t"+e})));var o=[];if(e.mids&&(o=JSON.parse(e.mids)),"all_labels"in e){var s=JSON.parse(e.all_labels),a=new Daria.MOPS.Opinfo;return o.forEach((function(e,t){var n=ns.Model.get("message",{ids:e});if(n.isValid()){var i=s[t],r=n.get(".lid"),o=[];r.forEach((function(e){var t=i.indexOf(e);-1===t?o.push(e):i.splice(t,1)}));i.forEach((function(e){var t=n.label({lid:e});a.merge(t)})),o.forEach((function(e){var t=n.unlabel({lid:e});a.merge(t)}))}})),a.hasAdjust()?(ns.Model.get("labels").adjustCounters(a.getAdjust()),vow.resolve()):ns.forcedRequest(["labels"])}var c,l;e.t_lids&&(c=JSON.parse(e.t_lids)[0])&&!n.getLabelById(c)&&(i=!0),e.m_lids&&(l=JSON.parse(e.m_lids)[0])&&!n.getLabelById(l)&&(i=!0);var u;return u=i?ns.forcedRequest(["labels"]):vow.resolve(),u.then((function(){if(c&&r.length&&Daria.MOPS.doActionInMessages(r,t,{lid:c,onlyAdd:!0}),l&&o.length){var e=Daria.MOPS.doActionInMessages(o,t,{lid:l});if(!i){if(!e.hasAdjust())return ns.forcedRequest(["labels"]);ns.Model.get("labels").adjustCounters(e.getAdjust())}}return vow.resolve()}))},Daria.Xiva.moveMessageToFolder=function(e,t){return Daria.Xiva.messageMove({mids:JSON.stringify([e]),fid:t})},Daria.Xiva.messageMove=function(e){var t=e.fid,n=JSON.parse(e.mids);if("-1"===t)return n.forEach((function(e){ns.Model.get("message",{ids:e}).remove()})),ns.forcedRequest(["folders","labels"]);for(var r=n.filter((function(e){return!ns.Model.get("message",{ids:e}).isValid()})),o=[ns.Model.get("folders"),ns.Model.get("labels")];r.length>0;)o.unshift(ns.Model.get("messages",{filter_ids:r.splice(-i)}));return ns.forcedRequest(o).then((function(){Daria.MOPS.doActionInMessages(n,"doMove",{current_folder:t})}))},Daria.Xiva.messageStatusChange=function(e){var t=e.status,n="";switch(t){case"New":n="unmark";break;case"PL":n="markForwarded";break;case"OQ":n="markAnswered";break;case"RO":n="mark";break;default:return""===t&&"0"===e.is_mixed_add&&"32"===e.is_mixed_del?vow.resolve():vow.reject()}var r=JSON.parse(e.mids);if("markForwarded"===n||"markAnswered"===n)return Daria.MOPS.doActionInMessages(r,n),vow.resolve();var o=r.filter((function(e){return!ns.Model.get("message",{ids:e}).isValid()}));Daria.MOPS.doActionInMessages(r,n);for(var s=[];o.length>0;)s.unshift(ns.Model.get("messages",{filter_ids:o.splice(-i)}));return ns.request(s).then((function(){var e="mark"===n?-1:1,t={},i={};r.map((function(e){return ns.Model.get("message",{ids:e})})).forEach((function(n){var r=n.getFolderId(),o=t;Daria.areFoldersTabsEnabled()&&n.isInTab()&&(r=n.getTabId(),o=i),r in o?o[r]+=e:o[r]=e})),_.isEmpty(t)||ns.Model.get("folders").adjustUnreadCounters(t),_.isEmpty(i)||ns.Model.get("tabs").adjustUnreadCounters(i)}))},Daria.Xiva.processUnsupported=function(e){switch(e.operation){case"delayed_message":case"reset fresh":return vow.resolve();case"mark mails":case"unmark mails":return Daria.Xiva.messageLabel(e);case"move mails":return Daria.Xiva.messageMove(e);case"status change":return Daria.Xiva.messageStatusChange(e);case"transfer":return Daria.Xiva.handlers.transfer();case"update labels":return Daria.hasFeature("web_update_thread_counters")?Daria.Xiva.handlers.updateThreadCounters(e):vow.reject()}return vow.reject()},Daria.Xiva._getFoldersCounters=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.counters,n=void 0===t?[]:t,i=e.countersNew,r=void 0===i?[]:i,o={},s={},a=0;a<n.length;a+=2)o[n[a]]=n[a+1];for(var c=0;c<r.length;c+=2)s[r[c]]=r[c+1];return{countersHash:o,countersNewHash:s}},Daria.Xiva.updateFolderCounters=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Daria.Xiva._getFoldersCounters(t),i=n.countersHash,r=n.countersNewHash,o=ns.page.current.params.current_folder,s=e.getFolderId(),a=ns.Model.get("folder",{fid:s}),c=a.updateCounts({count:i[s]||0,new:r[s]||0});c&&c.new>0&&s!==o&&a.setRecent()},Daria.Xiva.updateLabelsCounters=function(e){var t=ns.Model.get("labels"),n={},i=e.get(".lid");Array.isArray(i)&&i.forEach((function(e){n[e]=1})),t.adjustCounters(n)},Daria.Xiva.updateTabsCounters=function(e){var t=ns.Model.get("tabs"),i=n({},e.getTabId(),1);t.adjustUnreadCounters(i)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1676);Daria.Xiva.handlers={updateThreadCounters:i.a},Daria.Xiva.handlers.commonChecker=function(e){var t=parseInt(e.lcn,10);return!!Daria.Xiva.handlers.processNewLcn(t)&&("insert"===e.operation||Daria.Config.connection_id!==e.session_key)},Daria.Xiva.wentOfflineTime=null,window.addEventListener("offline",(function(){return Daria.Xiva.wentOfflineTime=Date.now()})),Daria.Xiva.handlers.processNewLcn=function(e){var t,n=Daria.lcn,i=Boolean(Daria.Xiva.wentOfflineTime);return Daria.Xiva.wentOfflineTime=null,i&&e!==n?t="xiva.lcn_changed_after_offline":n&&e-n>10&&(t="xiva.invalid_lcn"),t?(Jane.ErrorLog.send({event:t,diff:e-n,newLcn:e,oldLcn:n}),Daria.lcn=e,Daria.invalidateMailHandlers(!1,t),!1):((!n||e>n)&&(Daria.lcn=e),!0)},Daria.Xiva.handlers.insert=function(e){return Daria.Xiva.handlers.commonChecker(e)?(ns.events.trigger("xiva.mail.insert",e),Daria.Xiva.NewMsgQueue.process(e)):vow.reject()},Daria.Xiva.handlers.transfer=function(){return Daria.goHomePage(),vow.resolve()},Daria.Xiva.handlers.unsupported=function(e){if(!Daria.Xiva.handlers.commonChecker(e))return vow.reject();Daria.gotNewMail=0,Daria.updateTitle();var t;t=e.raw_data&&_.contains(["transfer","update labels"],e.raw_data.operation)?e.raw_data:e.message;var n=Daria.Xiva.processUnsupported(t);return n.then(null,(function(){Jane.ErrorLog.send({event:"xiva.mail.unsupported.unhandled",data:JSON.stringify(e)})})),n}},function(e,t,n){"use strict";function i(e,t){return s(e)||o(e,t)||r()}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function o(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}function s(e){if(Array.isArray(e))return e}function a(){var e=[];return ns.Model.traverse("message",(function(t){return e.push(t.getThreadId())})),e}function c(e){return e.map((function(e){return"t"+e}))}function l(e,t){ns.Model.traverse("message",(function(n){if(n.isThread()){var i=n.getThreadId();if(_.contains(e,i)){var r=_.find(t,{tid:i});r&&n.setIfChanged(".new",r.new)}}}))}t.a=function(e){var t=e.tids;if(t=(t||[]).filter((function(e){return e&&"null"!==e})),!t.length)return vow.resolve();var n=_.intersection(a(),c(t));return n.length?ns.forcedRequest("threads-info",{thread_ids:n.map(Daria.tid2mid).join(",")}).then((function(e){var t=i(e,1),r=t[0].data;l(n,r)}),_.noop):vow.resolve()}},function(e,t){!(function(e,t){t.Xiva.NewMsgQueue={},t.Xiva.NewMsgQueue.process=function(e){return t.Xiva.NewMsgQueue.processData(e).then(t.Xiva.NewMsgQueue.insertMessage)},t.Xiva.NewMsgQueue.processData=function(t){return new vow.Promise(function(n,i){var r=t.message,o=t.raw_data,s=r.mid,a="t"+r.thread_id,c=ns.Model.get("message",{ids:s});if(c.isValid())return void i("KNOWN_MESSAGE");var l=c;if(ns.Model.get("settings").isThreaded()){ns.Model.get("message",{ids:a}).hasRealData()||(l=ns.Model.get("messages",{thread_id:a}))}ns.forcedRequest([l]).then((function(){c.getData()?n({mMessage:c,rawData:o}):(e.ErrorLog.send({mid:s,tid:a},"empty_msg_data_after_request_thread"),i("REQUEST_DATA_ERROR"))}),(function(){i("REQUEST_ERROR")}))})},t.Xiva.NewMsgQueue.insertMessage=function(e){var n=e.mMessage,i=e.rawData;t.areFoldersTabsEnabled()&&n.isInTab()&&t.Xiva.updateTabsCounters(n),t.Xiva.updateFolderCounters(n,i),t.Xiva.updateLabelsCounters(n);var r=t.Xiva.NewMsgQueue.updateLists(n);return t.Xiva.NewMsgQueue.notify(n,r),t.Xiva.NewMsgQueue.clearMessagesCache(),t.updateTitle(),vow.resolve()},t.Xiva.NewMsgQueue.clearMessagesCache=function(){t.messages.clearSearchCache(),ns.Model.invalidateAll(["message-nearest","message-thread-nearest"])},t.Xiva.NewMsgQueue.updateLists=function(e){var n=[],i=e.getFolderId();if(e.inFolderBySymbol(["archive","draft","spam","template","trash"]))return n.push(t.Xiva.NewMsgQueue._updateList({current_folder:i},e)),n;var r={current_folder:i};t.areFoldersTabsEnabled()&&e.isInTab()&&(r.tabId=e.getTabId());var o=t.Xiva.NewMsgQueue.updateThreadModels(e);return n.push(t.Xiva.NewMsgQueue._updateList(Object.assign({threaded:"yes"},r),o.insert,o.replace)),n.push(t.Xiva.NewMsgQueue._updateList(r,e)),e.get(".lid").forEach((function(i){n.push(t.Xiva.NewMsgQueue._updateList({current_label:i},e))})),e.hasAttachment()&&n.push(t.Xiva.NewMsgQueue._updateList({goto:"all",extra_cond:"only_atta"},e)),e.isNew()&&n.push(t.Xiva.NewMsgQueue._updateList(Object.assign({extra_cond:"only_new"},r),e),t.Xiva.NewMsgQueue._updateList({goto:"all",extra_cond:"only_new",unread:"unread"},e)),n},t.Xiva.NewMsgQueue.updateThreadModels=function(n){var i=n.getThreadId(),r=ns.Model.get("message",{ids:i}),o=ns.Model.get("messages",{thread_id:i});if(r.hasRealData())return r.updateThreadInfo(n),o.insertMessage(n),{insert:r,replace:r};if(ns.Model.get("settings").isThreaded()){o.insertMessage(n);if(t.messages.toCreateThread(n)){var s=o.getCount(),a=o.models.indexOf(n),c=o.models[a+1]||n,l=o.models[a+1];c.getData()||!l||l.getData()||e.ErrorLog.send({tid:i,mid:n.get(".mid")},"empty_msg_data_in_messages_thread_model");var u=o.getUnreadCount();return n.isNew()&&(u-=1),t.Xiva.createThreadFromMessage(c,r,s-1,u),r.updateThreadInfo(n),{insert:r,replace:r}}}return{insert:n,replace:n}},t.Xiva.NewMsgQueue._updateList=function(e,t,n){var i=ns.Model.get("messages",e);return i.insertMessage(t,n),i},t.Xiva.NewMsgQueue.notify=function(e,n){t.Xiva.NewMsgQueue.shouldPreventAnyNotifications(e)||(t.Xiva.NewMsgQueue.updateFaviconCounter(e.getFolderId()),t.Xiva.NewMsgQueue.shouldPreventPopupNotifications()||(t.Xiva.NewMsgQueue.playSound(),t.Xiva.NewMsgQueue.preloadMessage(e.get(".mid")),t.Xiva.NewMsgQueue.toShowNotification(n)&&t.Xiva.NewMsgQueue.showNotification(e)))},t.Xiva.NewMsgQueue.shouldPreventPopupNotifications=function(){return t.isComposePage()||ns.Model.get("quick-reply-state").existOpenQR()},t.Xiva.NewMsgQueue.shouldPreventAnyNotifications=function(e){var t=["draft","outbox","sent","spam","template","trash"],n=e.inFolderBySymbol(t),i=!e.isNew();return n||i},t.Xiva.NewMsgQueue.updateFaviconCounter=function(e){var n=ns.page.current.params,i=ns.page.current.page,r=ns.Model.get("folders");if(t.IS_CORP&&"messages"===i){var o=e===n.current_folder,s=r.isFolder(e,"inbox");t.gotNewMail+=o||s?1:0}else if(t.IS_CORP&&"message"===i){var a=ns.Model.get("message",{ids:n.ids}).getData().fid,c=e===a,l=r.isFolder(e,"inbox");t.gotNewMail+=c||l?1:0}else t.gotNewMail+=1;t.gotNewMail+=ns.Model.get("user-dropdown-data").getFreshForDefault()},t.Xiva.NewMsgQueue.playSound=function(){ns.Model.get("settings").getSetting("sound_message")&&"1"!==t.getCookie("sound_message_playing")&&(t.setCookie("sound_message_playing","1"),ns.action.run("sound.message"),setTimeout((function(){t.delCookie("sound_message_playing")}),1e3))},t.Xiva.NewMsgQueue.preloadMessage=function(e){t.messages.preload([{mid:e}])},t.Xiva.NewMsgQueue.toShowNotification=function(e){if(!ns.Model.get("settings").getSign("notify_message"))return!1;if("messages"!==ns.page.current.page)return!0;var n=t.Xiva.NewMsgQueue._getCurrentMessages();return!_.includes(e,n)},t.Xiva.NewMsgQueue._getCurrentMessages=function(){var e,t=ns.page.current.params;return t.current_folder&&t.thread_id&&(e=_.clone(t),delete t.thread_id),ns.Model.get("messages",e||t)},t.Xiva.NewMsgQueue.showNotification=function(e){t.Xiva.NewMsgQueue.showNotificationMessage(e)},t.Xiva.NewMsgQueue.showNotificationCalendarEvent=function(e){var n=e.get(".mid");return ns.request("message-widget-events",{ids:n}).then((function(e){var t=e[0],n=t.get(".eventInfo"),i={type:"calendar",name:n.name,location:n.location,start:n.start,end:n.end};"event_update"===n.calendarMailType?i.label="updated":n.isCancelled&&(i.label="canceled"),ns.Model.get("notifications").addNotification(i)}),(function(){t.Xiva.NewMsgQueue.showNotificationMessage(e)}))},t.Xiva.NewMsgQueue.showNotificationMessage=function(e){var t=e.get(".mid"),n=e.getFolderId(),i=e.getFromEmail(),r=ns.router.generateUrl("message",{current_folder:n,ids:t,fromNotification:1});ns.Model.get("notifications").addNotification({type:"message",subject:e.getSubject(),email:i,firstline:e.getFirstline(),name:e.getFromName(),ref:e.getEmailRef(i),url:r})}})(Jane,Daria)},function(e,t){!(function(e,t){function n(e,n){if(_.has(e,"message.fresh_count")){var i=Number(e.message.fresh_count||0);n?i&&ns.Model.get("head-user-state").setNewLettersInMA(!0):i&&ns.Model.get("head-user-state").setNewLettersInMA(!1);var r=ns.Model.get("user-dropdown-data");r.setNewCountById(e.uid,i),t.gotNewMail+=r.getFreshForDefault(),t.updateTitle()}}ns.events.on("xiva.mail.multi.insert",(function(e,t){n(t,!0)})),ns.events.on("xiva.mail.multi.update",(function(e,t){n(t)})),t.IS_CORP&&ns.events.on("xiva.calendar.meeting-reminder",(function(e,t){ns.Model.get("settings").isSet("i_can_care_of_myself")||ns.Model.get("notifications").addNotification({type:"calendar",label:"reminder",name:t.message.subject,location:t.message.location,vip:!0})}))})(Jane,Daria)},function(e,t,n){n(1680),n(1681),n(1682),n(1683),n(1684),n(1685),n(1686),n(1687),n(1688),n(1689),n(1690),n(1691),n(1692),n(1693),n(1694),n(1695)},function(e,t){ns.action.define("attachments.image-preview",(function(e,t,n,i){i.preventDefault(),i.stopPropagation(),Jane.c("Images viewer","Opening"),ns.request(["module-message"]).then((function(){Daria.ImageViewer.open(t.mode,t.mid,t.hid,t["message-hid"]),ns.events.trigger("daria:vAttachmentsViewer:open")}))}))},function(e,t){!(function(){var e="Статуслайн для фильтров";ns.action.define("message.filter-move.show",(function(t,n){var i=n.mid,r=n.fid,o=ns.Model.get("folders"),s=ns.Model.get("settings"),a=ns.Model.get("message",{ids:i});if(!(s.isSet("disable_move_filter")||Daria.areFoldersTabsEnabled()&&o.getFidBySymbol("inbox")===r)){var c=o.getFolderById(r).name,l=a.getFromEmail();Daria.Statusline.hide(),Daria.Statusline.show({name:"create_filter",size:"m",onClose:function(){Jane.c(e,"Шаг 1","Крестик")},params:{mid:i,fid:r,message:i18n("%Statusline_create_filter_on_message_move",l,c),moveButtonText:i18n("%Statusline_create_filter_on_message_move_button"),cancelButtonText:i18n("%Statusline_create_filter_on_message_move_cancel")}}),Jane.c(e,"Шаг 1","Показ")}})),ns.action.define("message.filter-move.create",(function(t,n){Jane.Services.runModules(["setup.js"],(function(){var t=ns.Model.get("message",{ids:n.mid}),i=t.getFromEmail();Daria.FilterSimpleCreate({validate:no.True,params:{letter:"all",name:i18n("%Setup_Filters_default_rule_name"),logic:1,field1:"from",field2:1,field3:i,clicker:"move",move_folder:n.fid},success:function(t){Daria.Statusline.show({name:"apply_filter",size:"m",params:{filid:t,message:i18n("%Statusline_create_filter_on_message_move_done",i),editButtonText:i18n("%Statusline_create_filter_on_message_move_done_change"),moveButtonText:i18n("%Statusline_create_filter_on_message_move_done_button")},onClose:function(){Jane.c(e,"Шаг 2","Крестик")}}),Jane.c(e,"Шаг 2","Показ")}}).create(),Jane.c(e,"Шаг 1","Перекладывать")})),Jane.c("Нотификации","Функциональные нотификации","create_filter","Клик",'Клик в "Перекладывать"')})),ns.action.define("message.filter-move.apply",(function(t,n){Jane.Services.runModules(["setup.js"],(function(){ns.forcedRequest(["filters-apply"],{id:n.filid}).then((function(t){t[0].error||(Daria.Statusline.show({name:"filter_applied",text:i18n("%Statusline_create_filter_on_message_move_done_applied"),onClose:function(){Jane.c(e,"Шаг 3","Крестик")}}),Jane.c(e,"Шаг 3","Показ"))})),Jane.c(e,"Шаг 2","Переложить")})),Jane.c("Нотификации","Функциональные нотификации","apply_filter","Клик",'Клик в "Переложить"')})),ns.action.define("message.filter-move.edit",(function(t,n){ns.page.go("#setup/filters-create?id="+n.filid),Jane.c(e,"Шаг 2","Изменить правило"),Jane.c("Нотификации","Функциональные нотификации","apply_filter","Клик",'Клик в "Изменить правило"')})),ns.action.define("message.filter-move.disable",(function(){ns.Model.get("settings").setSettingOn("disable_move_filter"),Daria.Statusline.hide("create_filter"),Jane.c(e,"Шаг 1","Не предлагать"),Jane.c("Нотификации","Функциональные нотификации","create_filter","Клик",'Клик в "Больше не предлагать"')}))})()},function(e,t){ns.action.define("folder.remove",(function(e,t){Jane.Services.run("#setup",(function(){Daria.Folder.remove(t.id)}))}))},function(e,t){ns.action.define("folder.edit",(function(e,t){Jane.Services.run("#setup",(function(){var e=Daria.FolderEditPopup({id:t.id});$.extend(e,{success:function(){t["only-edit"]&&ns.page.go()}}),e.init()}))}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(549);ns.action.define("folder.clear",(function(e,t,n,r){var o=t.fid;t.onTarget&&r.currentTarget&&(t.targetOffset=$(r.currentTarget).offset().top+$(r.currentTarget).height()/2-$(window).scrollTop()),t.symbol&&Object(i.a)(o,"метёлка"),"extended"!==t.type||ns.Model.get("folders").isFolder(o,["trash"])?t.template="<p>"+i18n("%Folders_Clear_Text")+"</p>":t.template=$(Jane.tt("setup:js-setup-folders-dialog-folder-exclear")),Jane.Services.runModules(["setup.js"],(function(){var e=Daria.FolderClearPopup(t);_.extend(e,{onsuccess:function(){var e=ns.page.refresh();Daria.is3pane()&&t.fid===ns.page.current.params.current_folder&&(e=e.then((function(){var e=0===ns.Model.get("messages",ns.page.current.params).getCount();ns.events.trigger("mail:splitter:toggleOnePaneMode",e)}))),e.then((function(){ns.events.trigger("folder.cleared",t.fid)}))}}),e.init()}))}))},function(e,t){ns.action.define("folders.add",(function(e,t,n,i){Jane.Services.run("#setup",(function(){var e=Daria.FolderCreatePopup(t);$.extend(e,{success:function(e){if(t["only-create"])return void ns.page.go();t.mMessagesChecked?(t.fid=e,t.mMessagesChecked.runAction("move",t)):ns.action.run("move",{fid:e,toolbar:t.toolbar},null,i)}}),e.init()}))}))},function(e,t){ns.action.define("generate-oauth-token",(function(e,t){var n={"google-oauth2":"https://mail.google.com/","mailru-o2-mail":"mail.imap",microsoft:"wl.imap wl.offline_access"}[t.application],i=$.param({application:t.application,consumer:"mail",display:"popup",force_prompt:1,place:"query",retpath:location.origin+Daria.api["oauth-token"]+"?"+$.param(t),return_brief_profile:1,scope:n}),r=["directories=0","height=420","left=100","location=0","menubar=0","resizable=1","scrollbars=yes","status=0","toolbar=0","top=100","width=440"].join(", ");window.open(Daria.Config["social-host"]+"/broker2/start?"+i,"",r)}))},function(e,t){ns.action.define("label.remove",(function(e,t){Jane.Services.run("#setup",(function(){Daria.Label.remove(t.id)}))}))},function(e,t){ns.action.define("label.edit",(function(e,t){Jane.Services.run("#setup",(function(){var e=Daria.LabelEditPopup({id:t.id});$.extend(e,{success:function(){t["only-edit"]&&ns.page.go()}}),e.init()}))}))},function(e,t){function n(e,t){Jane.Services.run("#setup",(function(){var e=Daria.LabelCreatePopup(t);$.extend(e,{success:function(e){var n=ns.page.current.page;"setup"!==n&&"done"!==n&&("only-create"in t?ns.events.trigger("daria:vLabels:update"):_.isFunction(t.onLabelCreated)?t.onLabelCreated(e):ns.action.run("label",{current_label:e,"message-id":t["message-id"],contextMenu:t.contextMenu,isNeedDeselect:t.isNeedDeselect}))}}),"promo"in t&&ns.Model.get("settings").setSettingOn("no-labels-promo"),e.init()}))}ns.action.define("labels.add",n)},function(e,t){ns.action.define("label",(function(e,t,n){t.current_label=t.current_label||t.lid,t._viewKey=$(n).closest(".ns-view-message").attr("data-key"),ns.events.trigger("daria:vToolbarButton:"+e,t)})),ns.action.copy("label","unlabel")},function(e,t){ns.action.define("move",(function(e,t){t.refreshImmediately=!0,ns.events.trigger("daria:vToolbarButton:move",t)}))},function(e,t){!(function(){function e(){return parseInt(ns.Model.get("settings").getSetting("reply-promo-cnt"),10)||0}function t(){["messages","message-nearest","message-thread-nearest","abook-contacts","abook-contact","folders"].forEach((function(e){ns.Model.invalidate(e)}));var e=ns.page.current.params,t=ns.Model.get("folders");ns.Model.isDefined("messages-pager")&&(ns.Model.get("messages-pager",e).invalidate(),ns.Model.get("messages-pager",{current_folder:t.getFidBySymbol("sent")}).invalidate())}function n(e){if(e.error)return void this.reject(e.error);switch(e.status){case"ok":t(),this.resolve(no.jpath(".storedmid",e));break;case"attachment_too_big":this.reject(31);break;case"cannot_save":this.reject("cannot_save");break;default:this.reject()}}function i(e){var t=Daria.SendMail.getUndoSendTime();t>0&&(e.send_time=t,e.relative=!0)}function r(e){var t={};if(e.undoAvailable){var n=Daria.SendMail.getUndoSendLogger();n.setStartTime(),n.logShow(),t.onClose=function(){n.logClose()},t.onCancel=function(){n.logCancel(),e.cancelled=!0,Daria.SendMail.showMessageSentCancelling()}}Daria.SendMail.showSendingMessage(t)}function o(e,t,r){var o=$.Deferred(),s=[{id:"folders"},{id:"message",params:{ids:e}},{id:"message",params:{ids:t}},{id:"message-body",params:{ids:e}},{id:"message-body",params:{ids:t}}];return ns.request(s).then((function(s){var a=s[0],c=s[1],l=s[2],u=s[3],d=s[4];if(!c.getData()||!u.getData())return void o.reject(-1);if(!l||!d)return void o.reject();var f=a.getFidBySymbol("template"),g=c.getFolderId();if(!f||!g||g!==f)return void o.reject(-1);var p=l.getFolderId(),h=p?a.getFolderById(p):null;if(!p||!h||!a.isFolder(p,"inbox")&&!h.user)return void o.reject();var m=ns.Model.get("settings"),v=u.getComposeHTML(),b=d.getSubtype(),y=d.getReplyBody(b),S=d.getRecipients(!0),w=d.getMessageId(),k=d.getInReplyTo(),x=d.getReferences();"plain"===b&&(v=Daria.Html2Text.html2text(v)),y=v+y;var M={mark_ids:t,overwrite:t,ign_overwrite:"yes",mark_as:"replied",references:$.trim((x||k)+" "+w),inreplyto:w,ttype:b,from_mailbox:l.getToEmail()||m.getSetting("default_email"),from_name:m.getSetting("from_name"),to:S.to,cc:S.cc,bcc:"",subj:"Re: "+l.getSubject(!0),send:y};r.undoAvailable&&i(M);var C=u.getAttachments();if(C&&C.length>0){var T=[],D=[];_.filter(C).forEach((function(t){t.narod?D.push(Daria.utils.getNarodHTML({narodUrl:t.unsafeUrl,previewSrc:t["preview-src"],name:t.name,size:t.size,folder:t.folder})):T.push({mid:e,hid:t.hid})})),M.parts_json=T.length?JSON.stringify(T):"",M.narod_att=D.length?D.join(""):""}Daria.SendMail.send({params:M,success:function(e){n.call(o,e),o.then((function(){ns.page.go()}))},error:function(){o.reject()}})})).fail((function(){var t=ns.Model.get("message",{ids:e}),n=ns.Model.get("message-body",{ids:e});if(!t.getData()||!n.getData())return void o.reject(-1);o.reject()})),o.promise()}function s(e,t,r){var o=$.Deferred();return ns.request(["message","message-body"],{ids:t}).then((function(s){if(2!==s.length)return void o.reject();var a=s[0],c=s[1],l=ns.Model.get("settings"),u=c.getComposeHTML(),d=c.getSubtype();"plain"===d&&(u=Daria.Html2Text.html2text(u));var f=$.map(c.getAttachments(t),(function(e){return"message"===e.type?e.hid:null})),g={ids:t,ttype:d,overwrite:t,ign_overwrite:"yes",from_mailbox:a.getToEmail(t)||l.getSetting("default_email"),from_name:l.getSetting("from_name"),to:e,cc:"",bcc:"",subj:"Fwd: "+a.getSubject(!0),send:u,inreplyto:c.getMessageId(t),references:"",mark_as:"forwarded",mark_ids:t,parts:f};r.undoAvailable&&i(g),Daria.SendMail.send({params:g,success:function(e){n.call(o,e),o.then((function(){ns.page.go().then((function(){ns.events.trigger("daria:Message:check",t)}))}))},error:function(){o.reject()}})})),o.promise()}function a(e,t){if(e.cancelled&&t)return void Daria.SendMail.cancelSendMessage(t,"sending_message",!1);var n={};if(e.undoAvailable){var i=Daria.SendMail.getUndoSendLogger();n.onClose=function(){i.logClose()},n.onCancel=function(){i.logCancel()}}Daria.SendMail.showMessageSent(t,n)}function c(e,t,n){switch(n){case-1:Daria.Statusline.show({name:"template_not_found",params:{template:e}});break;case 31:Daria.Statusline.show({name:"too_big_attachment",params:{maxCount:Daria.Constants.MAX_MESSAGES_TO_FORWARD,maxSize:Daria.Constants.MAX_TOTAL_SIZE_OF_ATTACHMENTS}});break;case"cannot_save":Daria.SendMail.showTryAgainPopup({title:i18n("%Произошла_ошибка"),message:i18n("%Compose_cannot_save_error"),onRetry:t});break;default:Daria.Statusline.show({name:"message_sending_failed",text:i18n("%Feedback_Error_Msg")})}}function l(e,t){Daria.Statusline.hide("sending_message"),ns.events.trigger("daria:MOPS:action-complete",t),ns.events.trigger("daria:MOPS:"+e,t),ns.events.trigger("message.action.complete",t),ns.events.trigger("daria:vToolbarButton:loader:end")}var u=function(e){Jane.c(["Ответить всем","Паранжа"].concat(e))};ns.action.define("reply",(function(t,n,i,u){var d={undoAvailable:Daria.SendMail.shouldShowUndoSend(),cancelled:!1},f=null;n.sendNoUndo?(delete n.sendNoUndo,d.undoAvailable=!1):f=(function(){var e=Object.assign({sendNoUndo:!0},n);return function(){return ns.action.run(t,e,i,u)}})(),n.action=t;var g,p=ns.Model.get("settings");if(n["message-id"])g={ids:[n["message-id"]],tids:[]};else{var h=n.mMessagesChecked;ns.assert(h,"params.mMessagesChecked","%s not passed to ns.action reply");if(!h.getCount())return;g=h.getIds()}if(0===g.ids.length&&1===g.tids.length){var m=g.tids[0],v=ns.Model.get("message",{ids:m});if(v.isMessageThread())g.tids=[],g.ids=[v.getMessageThreadMid()];else if("forward"!==t){var _=v.getThreadMessages().getLastReplyMessage();_&&(g.tids=[],g.ids=[_.get(".mid")])}}var b=1===g.ids.length&&0===g.tids.length?g.ids[0]:null;if(b){var y=ns.Model.get("message-body",{ids:b});if(y.isCollectorMessage())return;if("reply"===t&&n.toolbar&&y.allowedReplyAll()&&!$("html").hasClass("b-page_reply-promo")&&Daria.is2pane()&&!p.getSetting("force-reply"))return void ns.action.run("reply.confirm",n,i,u)}var S=e();"reply"===t&&!n.toolbar&&S<2&&(S+=1,p.setSettings({"reply-promo-cnt":S})),"reply-all"===t&&!n.toolbar&&S<2&&p.setSettings({"reply-promo-cnt":0});var w;if("sendon"===t&&n.toolbar){if(!(w=n.email))return void Daria.Statusline.show({name:"message_sendon",speed:"fast",text:i18n("%Message_Sendon_Msg_Error")});if(r(d),b)return void s(w,b,d).done(a.bind(null,d)).fail(c.bind(null,null,f)).always(l.bind(null,t,n));t="forward"}if("reply-tmpl"===t&&n.toolbar){var k=n.tmpl;return k?b?(r(d),void o(k,b,d).done(a.bind(null,d)).fail(c.bind(null,k,f)).always(l.bind(null,t,n))):void Daria.Statusline.show({name:"only_reply_to_one_email",speed:"fast",text:i18n("%Message_ReplyTmpl_Msg_Error2")}):void Daria.Statusline.show({name:"missing_template",speed:"fast",text:i18n("%Message_ReplyTmpl_Msg_Error")})}var x={oper:t};g.ids.length&&(x.ids=g.ids),g.tids.length&&(x.tids=g.tids),n.translate&&(x.translate=n.translate),w&&ns.Model.get("compose-predefined-data").set(".to",w),Daria.composeGo(x).then((function(){w&&ns.Model.get("compose-state",ns.View.info("compose2").params()).setFocusField("subj")})),l(t,n)})),ns.action.copy("reply","forward"),ns.action.copy("reply","reply-all"),ns.action.copy("reply","sendon"),ns.action.copy("reply","reply-tmpl"),ns.action.define("reply.confirm",(function(t,n){var i=ns.Model.get("settings"),r=e(),o=n.mMessagesChecked.getIds(),s=n.mMessagesChecked.isOnlyMessageChecked()?o.ids[0]:null;if(s){var a,c,l=function(){this.close()},d={body:Jane.tt("message:reply-confirm-dialog",{mid:s,participants:ns.Model.get("message-body",{ids:s}).participantsCount()+1,prevent:r>=2}),additionalClass:"b-toolbar__popup",onopen:function(e){l=l.bind(e),ns.events.on("ns-page-before-changed",l)},oncancel:function(){i.setSettings({"reply-promo-cnt":r+1})},onclose:function(){ns.events.off("ns-page-before-changed",l),f.$paranja.addClass("g-hidden").removeClass("b-paranja_fadeout"),c&&$("HTML").removeClass("b-page_reply-promo")},width:400,hideOnScroll:!0};n.buttonView&&(c=n.buttonView.$node,a=c.offset(),a.top+=c.height()-$(window).scrollTop(),a.left+=c.outerWidth()+1,$.extend(d,{onTarget:{x:a.left,y:a.top,side:"top",pos:"bottom"}}));var f=Daria.Dialog.open(d);i.setSettings({"hk-reply-promo":"on"}),u("Показы"),c&&$("HTML").addClass("b-page_reply-promo"),f.$paranja.removeClass("g-hidden b-paranja_transparent").addClass("b-paranja_fadeout")}})),ns.action.define("reply.not-ask",(function(e,t,n,i){var r={event:i,params:t},o=nb.block(r.event.currentTarget);return window.setTimeout((function(){ns.Model.get("settings").setSettings({"force-reply":o.isChecked()}),u("Проставлено галочек")}),1),!0}))})()},function(e,t){function n(){var e=ns.View.create("user-feedback");return Promise.resolve().then((function(){return e.update()})).then((function(){return e}))}function i(e){Daria.Dialog.open({body:e.node,title:i18n("%Feedback_form_title"),additionalClass:"feedback-form feedback-form_report",width:620,onopen:function(){return Jane.c("Новый ФОС","Показ попапа")},oncancel:function(){return Jane.c("Новый ФОС","Клик на крестик")},onclose:function(){return e.destroy()}})}ns.action.define("user-feedback.show",(function(){Promise.resolve().then(n).then(i)}))},function(e,t){ns.action.define("fix-empty-image",(function(e,t,n){Daria.Page.fixEmptyImage(n,t.type)}))},function(e,t,n){"use strict";function i(e){return ns.Model.get("settings").setSettings({color_scheme:e})}function r(e){return new vow.Promise(function(t){Jane.Services.runModules(["theme-"+e+".css"],t)})}ns.action.define("change-theme",(function(e,t){var n=t.themeId;return vow.Promise.all([i(n),r(n),vow.Promise.resolve().then((function(){Daria.themeId=n}))]).then((function(){return ns.events.trigger("daria:vThemesSelector:new-schema"),ns.page.go().then((function(){$(window).trigger("resize")}))}))}))},function(e,t,n){var i=n(520),r=n(344);i.scope("file-icon-svg",n(1697)),i.scope("attach-icons-svg",n(1796)),i.scope("file-icon-png",Object.assign({},n(1826),n(1837),n(1887))),i.scope("collector-icon",n(1937)),i.scope("lang-icon",n(1951)),i.scope("social-icon",n(1963)),i.scope("promo-mobile",n(1968)),i.scope("theme-thumb",n(1993)),i.default((function(e,t){return Jane.ErrorLog.send({errorType:"missed-image-link",scope:e,link:t}),r}))},function(e,t,n){e.exports={ai:n(1698),ai_small:n(1699),application:n(1700),application_small:n(1701),archive:n(1702),archive_small:n(1703),audio:n(1704),audio_small:n(1705),avi:n(1706),avi_small:n(1707),bmp:n(1708),bmp_small:n(1709),book:n(1710),book_small:n(1711),cdr:n(1712),cdr_small:n(1713),csv:n(1714),csv_small:n(1715),development:n(1716),development_small:n(1717),djvu:n(1718),djvu_small:n(1719),doc:n(1720),doc_small:n(1721),eml:n(1722),eml_small:n(1723),exe:n(1724),exe_small:n(1725),executable:n(1726),executable_small:n(1727),flash:n(1728),flash_small:n(1729),font:n(1730),font_small:n(1731),general:n(1732),general_small:n(1733),gif:n(1734),gif_small:n(1735),image:n(1736),image_small:n(1737),jpg:n(1738),jpg_small:n(1739),mail:n(1740),mail_small:n(1741),mov:n(1742),mov_small:n(1743),mp3:n(1744),mp3_small:n(1745),mp4:n(1746),mp4_small:n(1747),none:n(1748),none_small:n(1749),odp:n(1750),odp_small:n(1751),ods:n(1752),ods_small:n(1753),odt:n(1754),odt_small:n(1755),pcx:n(1756),pcx_small:n(1757),pdf:n(1758),pdf_small:n(1759),pls:n(1760),pls_small:n(1761),png:n(1762),png_small:n(1763),ppt:n(1764),ppt_small:n(1765),psd:n(1766),psd_small:n(1767),rar:n(1768),rar_small:n(1769),rtf:n(1770),rtf_small:n(1771),script:n(1772),script_small:n(1773),srt:n(1774),srt_small:n(1775),text:n(1776),text_small:n(1777),tiff:n(1778),tiff_small:n(1779),txt:n(1780),txt_small:n(1781),video:n(1782),video_small:n(1783),virus:n(1784),virus_small:n(1785),wav:n(1786),wav_small:n(1787),wma:n(1788),wma_small:n(1789),wmv:n(1790),wmv_small:n(1791),xls:n(1792),xls_small:n(1793),zip:n(1794),zip_small:n(1795)}},function(e,t,n){e.exports=n.p+"_/fd4c49b3061a59c52d4b418ed3d4ca8d-icon_file_ai.svg"},function(e,t,n){e.exports=n.p+"_/f48c196b35090778fcd477e08e7ee7e0-icon_file_ai_small.svg"},function(e,t,n){e.exports=n.p+"_/5691a76b925a9f4f24fdcefa0f40bc5a-icon_file_application.svg"},function(e,t,n){e.exports=n.p+"_/9dd6814e9b50df81cb5158e17ab3069a-icon_file_application_small.svg"},function(e,t,n){e.exports=n.p+"_/e1b9a3f82960aa508919fe237a05e938-icon_file_archive.svg"},function(e,t,n){e.exports=n.p+"_/e001ba25ace471c5669771848343c445-icon_file_archive_small.svg"},function(e,t,n){e.exports=n.p+"_/6042f4553f8d189c0d546f9ed73b1a4d-icon_file_audio.svg"},function(e,t,n){e.exports=n.p+"_/7346301b6c0640b47dfc5f35b2bca74c-icon_file_audio_small.svg"},function(e,t,n){e.exports=n.p+"_/8e514b0d28a91fd04eff9577404451a0-icon_file_avi.svg"},function(e,t,n){e.exports=n.p+"_/ba574cf82ae4b22942f26ccd41982aef-icon_file_avi_small.svg"},function(e,t,n){e.exports=n.p+"_/456a8e721cd77154a6699e7ab5655af5-icon_file_bmp.svg"},function(e,t,n){e.exports=n.p+"_/d1273893cb331f824d6914a9e03646a7-icon_file_bmp_small.svg"},function(e,t,n){e.exports=n.p+"_/5d935a130b81cdfcabe3dbadfa48170a-icon_file_book.svg"},function(e,t,n){e.exports=n.p+"_/cb326122365bf8cd78a88e25e48caefb-icon_file_book_small.svg"},function(e,t,n){e.exports=n.p+"_/0291b4bf4b4bed1b3d56ecca41398618-icon_file_cdr.svg"},function(e,t,n){e.exports=n.p+"_/2c6f6f95cdccd161f2723b29acb732f4-icon_file_cdr_small.svg"},function(e,t,n){e.exports=n.p+"_/0d159a3403cd2f0efe68f73cc07289bf-icon_file_csv.svg"},function(e,t,n){e.exports=n.p+"_/457edf14c8a4f290b46eaf2b8ea632a1-icon_file_csv_small.svg"},function(e,t,n){e.exports=n.p+"_/3cc84b7817c7a861f187149ea20fe77a-icon_file_development.svg"},function(e,t,n){e.exports=n.p+"_/597c75ee183bf580072881f520bb45ff-icon_file_development_small.svg"},function(e,t,n){e.exports=n.p+"_/09363f31f78d4c871df33d35bb5b0c85-icon_file_djvu.svg"},function(e,t,n){e.exports=n.p+"_/ea531aff61a9f1a23c543b839bac6f6d-icon_file_djvu_small.svg"},function(e,t,n){e.exports=n.p+"_/84cda9a1db63ba0c0fb6e86fb244497b-icon_file_doc.svg"},function(e,t,n){e.exports=n.p+"_/8cbf23c524fd0c5f45d57c960c3b6070-icon_file_doc_small.svg"},function(e,t,n){e.exports=n.p+"_/26f49241e89761a2c82315832e31b9cb-icon_file_eml.svg"},function(e,t,n){e.exports=n.p+"_/5e420784f4ff111174c71fbee9f78d22-icon_file_eml_small.svg"},function(e,t,n){e.exports=n.p+"_/68fed1bb809c6626534a2a878afea58e-icon_file_exe.svg"},function(e,t,n){e.exports=n.p+"_/9dd6814e9b50df81cb5158e17ab3069a-icon_file_exe_small.svg"},function(e,t,n){e.exports=n.p+"_/5691a76b925a9f4f24fdcefa0f40bc5a-icon_file_executable.svg"},function(e,t,n){e.exports=n.p+"_/9dd6814e9b50df81cb5158e17ab3069a-icon_file_executable_small.svg"},function(e,t,n){e.exports=n.p+"_/e84256a31ce119f5270cc29d00ce112f-icon_file_flash.svg"},function(e,t,n){e.exports=n.p+"_/f718f32f7d223a305da6b06c4443f16a-icon_file_flash_small.svg"},function(e,t,n){e.exports=n.p+"_/71c442515253e2426d87d2b36987e58f-icon_file_font.svg"},function(e,t,n){e.exports=n.p+"_/acc2b80fc69c92a265e289e70c180b03-icon_file_font_small.svg"},function(e,t,n){e.exports=n.p+"_/6fa94aa8ec8a4b95e4c704142d48ea06-icon_file_general.svg"},function(e,t,n){e.exports=n.p+"_/1a28827c5c9284f36ffe64786a98958d-icon_file_general_small.svg"},function(e,t,n){e.exports=n.p+"_/4c62fa51e072aa2b518fe2a6d9bb7db8-icon_file_gif.svg"},function(e,t,n){e.exports=n.p+"_/d1273893cb331f824d6914a9e03646a7-icon_file_gif_small.svg"},function(e,t,n){e.exports=n.p+"_/ae33662f545add06634646f8bfb3e589-icon_file_image.svg"},function(e,t,n){e.exports=n.p+"_/d1273893cb331f824d6914a9e03646a7-icon_file_image_small.svg"},function(e,t,n){e.exports=n.p+"_/32ce8c6772ddda003a3a0852e3c94740-icon_file_jpg.svg"},function(e,t,n){e.exports=n.p+"_/d1273893cb331f824d6914a9e03646a7-icon_file_jpg_small.svg"},function(e,t,n){e.exports=n.p+"_/8ebffe08a8974608d246d95b593c524a-icon_file_mail.svg"},function(e,t,n){e.exports=n.p+"_/5e420784f4ff111174c71fbee9f78d22-icon_file_mail_small.svg"},function(e,t,n){e.exports=n.p+"_/44dce83a726aaad585036067220e3914-icon_file_mov.svg"},function(e,t,n){e.exports=n.p+"_/617f846a624c99a7a16ef0569887e5d1-icon_file_mov_small.svg"},function(e,t,n){e.exports=n.p+"_/cb5e6bca945895b3afb0c80f434ff287-icon_file_mp3.svg"},function(e,t,n){e.exports=n.p+"_/7346301b6c0640b47dfc5f35b2bca74c-icon_file_mp3_small.svg"},function(e,t,n){e.exports=n.p+"_/651a574e29a9bd70e69a08aa35d465a4-icon_file_mp4.svg"},function(e,t,n){e.exports=n.p+"_/ba574cf82ae4b22942f26ccd41982aef-icon_file_mp4_small.svg"},function(e,t,n){e.exports=n.p+"_/73b9c0cf2d6199220f4bc2f6cf6e0310-icon_file_none.svg"},function(e,t,n){e.exports=n.p+"_/7a3ef1ba2a6c113d7179d418ddf6c734-icon_file_none_small.svg"},function(e,t,n){e.exports=n.p+"_/492af986844dd66c7c9c08faeaa261be-icon_file_odp.svg"},function(e,t,n){e.exports=n.p+"_/18e71b34cd05b4e251112c73bf72feee-icon_file_odp_small.svg"},function(e,t,n){e.exports=n.p+"_/a01de41907a6b40d2d5e833cff78bb95-icon_file_ods.svg"},function(e,t,n){e.exports=n.p+"_/6b6cb9ca67b2292a46b4887dc271df03-icon_file_ods_small.svg"},function(e,t,n){e.exports=n.p+"_/fe5ea288f8a12b89077a166baa72be67-icon_file_odt.svg"},function(e,t,n){e.exports=n.p+"_/7ce2f9213a303b0377153cff401c0866-icon_file_odt_small.svg"},function(e,t,n){e.exports=n.p+"_/3a56b52fcac35e27a41edc34c5bdf140-icon_file_pcx.svg"},function(e,t,n){e.exports=n.p+"_/d1273893cb331f824d6914a9e03646a7-icon_file_pcx_small.svg"},function(e,t,n){e.exports=n.p+"_/63407042e1ac46ce84554920cb97a928-icon_file_pdf.svg"},function(e,t,n){e.exports=n.p+"_/6ace91f4a13ebbf531a5e5069350d460-icon_file_pdf_small.svg"},function(e,t,n){e.exports=n.p+"_/6042f4553f8d189c0d546f9ed73b1a4d-icon_file_pls.svg"},function(e,t,n){e.exports=n.p+"_/7346301b6c0640b47dfc5f35b2bca74c-icon_file_pls_small.svg"},function(e,t,n){e.exports=n.p+"_/dbe8f2ed099d49557498dc3aeb694704-icon_file_png.svg"},function(e,t,n){e.exports=n.p+"_/d1273893cb331f824d6914a9e03646a7-icon_file_png_small.svg"},function(e,t,n){e.exports=n.p+"_/9d3097d2a75defd68f2224b4a76fd06e-icon_file_ppt.svg"},function(e,t,n){e.exports=n.p+"_/11df7044fad68811099fab9c78f8bc2b-icon_file_ppt_small.svg"},function(e,t,n){e.exports=n.p+"_/1f8f597c9f16a782c31b466838ed961a-icon_file_psd.svg"},function(e,t,n){e.exports=n.p+"_/a5b48c4594d78e5b8bd5120fb65205e6-icon_file_psd_small.svg"},function(e,t,n){e.exports=n.p+"_/545a441216bf5ee80228510904eb116e-icon_file_rar.svg"},function(e,t,n){e.exports=n.p+"_/e001ba25ace471c5669771848343c445-icon_file_rar_small.svg"},function(e,t,n){e.exports=n.p+"_/e63b78a5db4059aaee2b0a26c1e3391d-icon_file_rtf.svg"},function(e,t,n){e.exports=n.p+"_/7ce2f9213a303b0377153cff401c0866-icon_file_rtf_small.svg"},function(e,t,n){e.exports=n.p+"_/3cc84b7817c7a861f187149ea20fe77a-icon_file_script.svg"},function(e,t,n){e.exports=n.p+"_/597c75ee183bf580072881f520bb45ff-icon_file_script_small.svg"},function(e,t,n){e.exports=n.p+"_/18c4518b36edd61c4117de5697e34d9a-icon_file_srt.svg"},function(e,t,n){e.exports=n.p+"_/ba574cf82ae4b22942f26ccd41982aef-icon_file_srt_small.svg"},function(e,t,n){e.exports=n.p+"_/87f98559ca8423415305508060e154df-icon_file_text.svg"},function(e,t,n){e.exports=n.p+"_/7ce2f9213a303b0377153cff401c0866-icon_file_text_small.svg"},function(e,t,n){e.exports=n.p+"_/76f469d93774a8ee072e54a77d1316fb-icon_file_tiff.svg"},function(e,t,n){e.exports=n.p+"_/d1273893cb331f824d6914a9e03646a7-icon_file_tiff_small.svg"},function(e,t,n){e.exports=n.p+"_/770496b1f8ba497f7932345b0fa99c51-icon_file_txt.svg"},function(e,t,n){e.exports=n.p+"_/7ce2f9213a303b0377153cff401c0866-icon_file_txt_small.svg"},function(e,t,n){e.exports=n.p+"_/625b0925dfad9ad67792f8713df2c64d-icon_file_video.svg"},function(e,t,n){e.exports=n.p+"_/ba574cf82ae4b22942f26ccd41982aef-icon_file_video_small.svg"},function(e,t,n){e.exports=n.p+"_/6ef89e854963e20536e4f8aa660df196-icon_file_virus.svg"},function(e,t,n){e.exports=n.p+"_/fd66b38f0fc39f598ef72d85a581214e-icon_file_virus_small.svg"},function(e,t,n){e.exports=n.p+"_/41c6f9b710d3e517f46aa0c35fee6730-icon_file_wav.svg"},function(e,t,n){e.exports=n.p+"_/7346301b6c0640b47dfc5f35b2bca74c-icon_file_wav_small.svg"},function(e,t,n){e.exports=n.p+"_/fd0cb8565e854638747298d38e12d7b4-icon_file_wma.svg"},function(e,t,n){e.exports=n.p+"_/7346301b6c0640b47dfc5f35b2bca74c-icon_file_wma_small.svg"},function(e,t,n){e.exports=n.p+"_/7ff1c6877301e0d2ee8cbb522fbfabad-icon_file_wmv.svg"},function(e,t,n){e.exports=n.p+"_/ba574cf82ae4b22942f26ccd41982aef-icon_file_wmv_small.svg"},function(e,t,n){e.exports=n.p+"_/16d7f1b1ec42dd5f43236136c52d40f4-icon_file_xls.svg"},function(e,t,n){e.exports=n.p+"_/beeb326ca3093a4cdf78631cf84d9777-icon_file_xls_small.svg"},function(e,t,n){e.exports=n.p+"_/7f653b60b459526c425e4e0a9d8ab1f4-icon_file_zip.svg"},function(e,t,n){e.exports=n.p+"_/e001ba25ace471c5669771848343c445-icon_file_zip_small.svg"},function(e,t,n){e.exports={priorityTypes:{virus:n(1797)},comboKeys:{"general+none":n(1798)},extensions:{"7z":n(1799),ai:n(1800),aud:n(357),asf:n(375),avi:n(375),bmp:n(358),cab:n(435),cdr:n(1801),css:n(1802),csv:n(436),cur:n(358),djvu:n(1803),dll:n(1804),dng:n(358),doc:n(550),docx:n(550),dot:n(550),dotx:n(550),eml:n(907),epub:n(1805),exe:n(908),fb2:n(1806),flac:n(357),flv:n(375),gif:n(358),gz:n(435),gzip:n(435),htm:n(909),html:n(909),ico:n(358),iff:n(357),indd:n(1807),ini:n(1808),jpg:n(358),jpeg:n(358),js:n(1809),key:n(437),m3u:n(357),m3u8:n(357),m4a:n(357),m4r:n(357),m4b:n(357),mkv:n(375),mng:n(358),mov:n(375),mp3:n(357),mp4:n(375),mpg:n(375),mpeg:n(375),odp:n(1810),ods:n(1811),odt:n(1812),ogg:n(357),pcx:n(358),pdf:n(1813),pls:n(357),png:n(358),pps:n(437),ppsm:n(735),ppsx:n(437),ppt:n(735),pptx:n(735),psd:n(1814),rar:n(1815),rtf:n(1816),sketch:n(1817),srt:n(437),svg:n(1818),swf:n(910),tar:n(435),tif:n(358),tiff:n(358),txt:n(1819),vcf:n(1820),vob:n(375),wav:n(357),wma:n(357),wmv:n(375),xcf:n(358),xhtml:n(1821),xls:n(436),xlsb:n(436),xltm:n(436),xlsx:n(436),xltx:n(436),xml:n(1822),xps:n(437),zip:n(911),zipx:n(911)},types:{archive:n(435),audio:n(357),book:n(1823),compressed:n(435),executable:n(908),flash:n(910),font:n(1824),image:n(358),mail:n(907),text:n(437),video:n(375)},default:n(1825)}},function(e,t,n){e.exports=n.p+"_/9ea7321615ba6d6ed154cea463f0c085-attach_icon_virus.svg"},function(e,t,n){e.exports=n.p+"_/2fd58e123a7954c32a21b89ad9ed0834-attach_icon_folder.svg"},function(e,t,n){e.exports=n.p+"_/49863cae38d85f3a1508bc8e9239016d-attach_icon_7z.svg"},function(e,t,n){e.exports=n.p+"_/8ca841a78c428fbbea24fcf397d7f409-attach_icon_ai.svg"},function(e,t,n){e.exports=n.p+"_/3aa640e55b9248192d7848c1882b5894-attach_icon_corel.svg"},function(e,t,n){e.exports=n.p+"_/fc2974a160e16c4ff86f471c92ff95da-attach_icon_css.svg"},function(e,t,n){e.exports=n.p+"_/5f4004a9b13be32d95478d99fdf56b2e-attach_icon_djvu.svg"},function(e,t,n){e.exports=n.p+"_/30857bb22990ae1857de3cb4ebb988bd-attach_icon_dll.svg"},function(e,t,n){e.exports=n.p+"_/6cf1df2ebec1ec63458035c0e746a984-attach_icon_epub.svg"},function(e,t,n){e.exports=n.p+"_/5cb42f7229532496bbbff3ac11cb89e8-attach_icon_fb2.svg"},function(e,t,n){e.exports=n.p+"_/fb10e51a6166cac06e84bc0932ec8da0-attach_icon_indd.svg"},function(e,t,n){e.exports=n.p+"_/3fc78698324a5850135951a7c41bea1e-attach_icon_ini.svg"},function(e,t,n){e.exports=n.p+"_/aaeba2895844ba4555a1227197f75d3c-attach_icon_js.svg"},function(e,t,n){e.exports=n.p+"_/0ddaafd5dd1ddb94f0e1f00ad30d07fb-attach_icon_odp.svg"},function(e,t,n){e.exports=n.p+"_/e2b49319c1bd0d5084707a70996ad741-attach_icon_ods.svg"},function(e,t,n){e.exports=n.p+"_/eda7f5aab4853cc8b5fa56b15dbab05e-attach_icon_odt.svg"},function(e,t,n){e.exports=n.p+"_/fd444885da038179b072ed4675098a6f-attach_icon_pdf.svg"},function(e,t,n){e.exports=n.p+"_/40240448c21b7afc12f44fec94d25f1e-attach_icon_psd.svg"},function(e,t,n){e.exports=n.p+"_/46943c4ac36b66f2efbb012899d150bd-attach_icon_rar.svg"},function(e,t,n){e.exports=n.p+"_/263bf4bdd537e5f6b4b53e6fd18688a9-attach_icon_rtf.svg"},function(e,t,n){e.exports=n.p+"_/669e80a6900a81942b6ef152cebc6bae-attach_icon_sketch.svg"},function(e,t,n){e.exports=n.p+"_/791e8c63b1f6f4aa4669c519e5a59d3b-attach_icon_svg.svg"},function(e,t,n){e.exports=n.p+"_/54ef3b8767740a54291f546c6baded90-attach_icon_txt.svg"},function(e,t,n){e.exports=n.p+"_/e6b731e02aa805e1598436298776a705-attach_icon_vcf.svg"},function(e,t,n){e.exports=n.p+"_/ca814b1e16c5fc1c90dc3955707df406-attach_icon_xhtml.svg"},function(e,t,n){e.exports=n.p+"_/2a31adba227f40c2fd2e04988ee374e0-attach_icon_xml.svg"},function(e,t,n){e.exports=n.p+"_/0bc2ad4d36f0dfefd86de9d8ecc5288e-attach_icon_books.svg"},function(e,t,n){e.exports=n.p+"_/a81937d5fcb7ba94f736c422014d1c95-attach_icon_font.svg"},function(e,t,n){e.exports=n.p+"_/f69b0bee9e32636ed623bb752a31d591-attach_icon_other.svg"},function(e,t,n){e.exports={"bigmail-48":n(1827),"blue-48":n(1828),"blue-al-48":n(1829),"blue-ar-48":n(1830),"camera-48":n(1831),"grey-48":n(1832),"narod-48":n(1833),"shared-foreign-48":n(1834),"shared-own-48":n(1835),"trash-48":n(1836)}},function(e,t,n){e.exports=n.p+"_/f091745b85a1b5a234262d98639f7977-b-mail-icon_bigmail-48.png"},function(e,t,n){e.exports=n.p+"_/fc6dedd3b3a5a8293ed040b648e45336-b-mail-icon_blue-48.png"},function(e,t,n){e.exports=n.p+"_/6d7e2b20aade0b9c2125ffdaba2f3879-b-mail-icon_blue-al-48.png"},function(e,t,n){e.exports=n.p+"_/85778cc2db9a7ac21ec2088b0e7576b3-b-mail-icon_blue-ar-48.png"},function(e,t,n){e.exports=n.p+"_/e3f41f309ccedf920fcf875c6859dc3f-b-mail-icon_camera-48.png"},function(e,t,n){e.exports=n.p+"_/9187087411a527777d76816620717fd3-b-mail-icon_grey-48.png"},function(e,t,n){e.exports=n.p+"_/0d93c6d7721c7992e63eb3d752498f8d-b-mail-icon_narod-48.png"},function(e,t,n){e.exports=n.p+"_/fa673c965dd4d8ea80f45948995212e5-b-mail-icon_shared-foreign-48.png"},function(e,t,n){e.exports=n.p+"_/dcdad2da9e9da84ebd34d544dd9713e8-b-mail-icon_shared-own-48.png"},function(e,t,n){e.exports=n.p+"_/f14d7be3bf0618dc524c5130570edfba-b-mail-icon_trash-48.png"},function(e,t,n){e.exports={"ai-48":n(1838),"application-48":n(1839),"archive-48":n(1840),"audio-48":n(1841),"avi-48":n(1842),"bmp-48":n(1843),"book-48":n(1844),"cdr-48":n(1845),"csv-48":n(1846),"development-48":n(1847),"djvu-48":n(1848),"doc-48":n(1849),"eml-48":n(1850),"exe-48":n(1851),"executable-48":n(1852),"flash-48":n(1853),"font-48":n(1854),"general-48":n(1855),"gif-48":n(1856),"image-48":n(1857),"jpg-48":n(1858),"mail-48":n(1859),"mov-48":n(1860),"mp3-48":n(1861),"mp4-48":n(1862),"none-48":n(1863),"odp-48":n(1864),"ods-48":n(1865),"odt-48":n(1866),"pcx-48":n(1867),"pdf-48":n(1868),"pls-48":n(1869),"png-48":n(1870),"ppt-48":n(1871),"psd-48":n(1872),"rar-48":n(1873),"rtf-48":n(1874),"script-48":n(1875),"srt-48":n(1876),"text-48":n(1877),"tiff-48":n(1878),"txt-48":n(1879),"video-48":n(1880),"virus-48":n(1881),"wav-48":n(1882),"wma-48":n(1883),"wmv-48":n(1884),"xls-48":n(1885),"zip-48":n(1886)}},function(e,t,n){e.exports=n.p+"_/4e385ef712d228d9bd5fbe4e830f697a-b-mail-icon_ai-48.png"},function(e,t,n){e.exports=n.p+"_/6bb25ffd9b943edee508ad9fbf206dde-b-mail-icon_application-48.png"},function(e,t,n){e.exports=n.p+"_/44c2a8cbb02c8be528236ad80e1c3749-b-mail-icon_archive-48.png"},function(e,t,n){e.exports=n.p+"_/5546dd99a85e195918ed35d203f00bd1-b-mail-icon_audio-48.png"},function(e,t,n){e.exports=n.p+"_/531db7f7386660dc96ed2480eea5e98d-b-mail-icon_avi-48.png"},function(e,t,n){e.exports=n.p+"_/e7828e1b92baaa31c9905542822c79d6-b-mail-icon_bmp-48.png"},function(e,t,n){e.exports=n.p+"_/8ed95b3dece205227bb9354a232d4e4e-b-mail-icon_book-48.png"},function(e,t,n){e.exports=n.p+"_/a125276886063d2dd348dbfa5d4ef608-b-mail-icon_cdr-48.png"},function(e,t,n){e.exports=n.p+"_/8a101e1a660d145ef0542dfeac76da22-b-mail-icon_csv-48.png"},function(e,t,n){e.exports=n.p+"_/5893a07f075b0984d0c5a8287265054e-b-mail-icon_development-48.png"},function(e,t,n){e.exports=n.p+"_/f1610434d25a0845ef89e10af2ca09e9-b-mail-icon_djvu-48.png"},function(e,t,n){e.exports=n.p+"_/50b19213ee10e722bd0f0dfe6b45abfb-b-mail-icon_doc-48.png"},function(e,t,n){e.exports=n.p+"_/f3093a6d0374ed1eb1aac797961641b0-b-mail-icon_eml-48.png"},function(e,t,n){e.exports=n.p+"_/deda913cb7b171cd185ee662287e3a99-b-mail-icon_exe-48.png"},function(e,t,n){e.exports=n.p+"_/6bb25ffd9b943edee508ad9fbf206dde-b-mail-icon_executable-48.png"},function(e,t,n){e.exports=n.p+"_/f56d2249fc66d6e045d9e47209b0d74c-b-mail-icon_flash-48.png"},function(e,t,n){e.exports=n.p+"_/75702f8ffcf90cb4a8c265f912bb2fb3-b-mail-icon_font-48.png"},function(e,t,n){e.exports=n.p+"_/83abfae7075037224e16a9856f1515d4-b-mail-icon_general-48.png"},function(e,t,n){e.exports=n.p+"_/7d3a81c7159dc88073d2c8b68869454c-b-mail-icon_gif-48.png"},function(e,t,n){e.exports=n.p+"_/b30d721e5ec76d5df6e9f5a15f2a8b84-b-mail-icon_image-48.png"},function(e,t,n){e.exports=n.p+"_/70c29e00d2a9726e144663682092d3f2-b-mail-icon_jpg-48.png"},function(e,t,n){e.exports=n.p+"_/f3093a6d0374ed1eb1aac797961641b0-b-mail-icon_mail-48.png"},function(e,t,n){e.exports=n.p+"_/fa85671858f6608a793c6b096013063d-b-mail-icon_mov-48.png"},function(e,t,n){e.exports=n.p+"_/eea5f29ba3d27dcc00790eea34ccbc4a-b-mail-icon_mp3-48.png"},function(e,t,n){e.exports=n.p+"_/7863254ebbc5c8c78d6684036dd56e54-b-mail-icon_mp4-48.png"},function(e,t,n){e.exports=n.p+"_/865da2b10d5c239280d12a6a2d1cfc56-b-mail-icon_none-48.png"},function(e,t,n){e.exports=n.p+"_/bb78c17d4956f3c27fb093d4cc9f2165-b-mail-icon_odp-48.png"},function(e,t,n){e.exports=n.p+"_/d2be1f2f1b208b727ab25d975a6aa242-b-mail-icon_ods-48.png"},function(e,t,n){e.exports=n.p+"_/3a6fa3be2bc661254803e1cec44d6a74-b-mail-icon_odt-48.png"},function(e,t,n){e.exports=n.p+"_/6f15de29744870eea9bbc45b4d169b8e-b-mail-icon_pcx-48.png"},function(e,t,n){e.exports=n.p+"_/fdec035fb674765bb14a832dfa0b7d71-b-mail-icon_pdf-48.png"},function(e,t,n){e.exports=n.p+"_/71e12247108f4576db7fe671dc7d6fa8-b-mail-icon_pls-48.png"},function(e,t,n){e.exports=n.p+"_/7bb7cd24c9c082144c869461098b942d-b-mail-icon_png-48.png"},function(e,t,n){e.exports=n.p+"_/90b3b830b932584838d1ac60e17410dc-b-mail-icon_ppt-48.png"},function(e,t,n){e.exports=n.p+"_/4f46be9bd8f9a9514aa95e1067d45bc3-b-mail-icon_psd-48.png"},function(e,t,n){e.exports=n.p+"_/f3fb7200d501406775330789bd1c5572-b-mail-icon_rar-48.png"},function(e,t,n){e.exports=n.p+"_/d1d14ac25b7f79969dcb8a6d144746bc-b-mail-icon_rtf-48.png"},function(e,t,n){e.exports=n.p+"_/5893a07f075b0984d0c5a8287265054e-b-mail-icon_script-48.png"},function(e,t,n){e.exports=n.p+"_/9df67b0fb763e21eeb5c41fd90030d9a-b-mail-icon_srt-48.png"},function(e,t,n){e.exports=n.p+"_/66b914b832fe6c8fa067a5b0089b757d-b-mail-icon_text-48.png"},function(e,t,n){e.exports=n.p+"_/d89d636f51a2933563e5da67186214e3-b-mail-icon_tiff-48.png"},function(e,t,n){e.exports=n.p+"_/7220ce68b5ee138e632cafa81f524cf3-b-mail-icon_txt-48.png"},function(e,t,n){e.exports=n.p+"_/a613c67aa33b5fd98cbd92b34e68cd49-b-mail-icon_video-48.png"},function(e,t,n){e.exports=n.p+"_/64196e074946510cd6a0a972ca941cc9-b-mail-icon_virus-48.png"},function(e,t,n){e.exports=n.p+"_/2384c49baee44858d49e5ba8d3ae7deb-b-mail-icon_wav-48.png"},function(e,t,n){e.exports=n.p+"_/aadc497975dd4d130a89b5a2d7ec65db-b-mail-icon_wma-48.png"},function(e,t,n){e.exports=n.p+"_/82f77cdc49c93261ae20418b44bb07cd-b-mail-icon_wmv-48.png"},function(e,t,n){e.exports=n.p+"_/675e5e02afcbe8d1b60862d4bffbb326-b-mail-icon_xls-48.png"},function(e,t,n){e.exports=n.p+"_/ee0403d4a88e96ecc0c3d604bcbfa2c6-b-mail-icon_zip-48.png"},function(e,t,n){e.exports={"ai-96":n(1888),"application-96":n(1889),"archive-96":n(1890),"audio-96":n(1891),"avi-96":n(1892),"bmp-96":n(1893),"book-96":n(1894),"cdr-96":n(1895),"csv-96":n(1896),"development-96":n(1897),"djvu-96":n(1898),"doc-96":n(1899),"eml-96":n(1900),"exe-96":n(1901),"executable-96":n(1902),"flash-96":n(1903),"font-96":n(1904),"general-96":n(1905),"gif-96":n(1906),"image-96":n(1907),"jpg-96":n(1908),"mail-96":n(1909),"mov-96":n(1910),"mp3-96":n(1911),"mp4-96":n(1912),"none-96":n(1913),"odp-96":n(1914),"ods-96":n(1915),"odt-96":n(1916),"pcx-96":n(1917),"pdf-96":n(1918),"pls-96":n(1919),"png-96":n(1920),"ppt-96":n(1921),"psd-96":n(1922),"rar-96":n(1923),"rtf-96":n(1924),"script-96":n(1925),"srt-96":n(1926),"text-96":n(1927),"tiff-96":n(1928),"txt-96":n(1929),"video-96":n(1930),"virus-96":n(1931),"wav-96":n(1932),"wma-96":n(1933),"wmv-96":n(1934),"xls-96":n(1935),"zip-96":n(1936)}},function(e,t,n){e.exports=n.p+"_/48bfa0dee7eef7cf87c66a11b7d73eff-b-mail-icon_ai-96.png"},function(e,t,n){e.exports=n.p+"_/25ebb597705718a91f075aa39b566355-b-mail-icon_application-96.png"},function(e,t,n){e.exports=n.p+"_/ca4a0528e4aa9ebae001edc512a3a670-b-mail-icon_archive-96.png"},function(e,t,n){e.exports=n.p+"_/bcac10759c4be79410c3d4de3d100268-b-mail-icon_audio-96.png"},function(e,t,n){e.exports=n.p+"_/2cd7518aee9e4446bc106dac12f65a99-b-mail-icon_avi-96.png"},function(e,t,n){e.exports=n.p+"_/cf2a0fd2dc42a46e0fef99c417039e59-b-mail-icon_bmp-96.png"},function(e,t,n){e.exports=n.p+"_/c399ce3cb6e0b3c01605692ba4440f8c-b-mail-icon_book-96.png"},function(e,t,n){e.exports=n.p+"_/a82045b44b9e51d865a8fa19ee80dab3-b-mail-icon_cdr-96.png"},function(e,t,n){e.exports=n.p+"_/ef1baf8e2912e51ae577820c5d29a6b8-b-mail-icon_csv-96.png"},function(e,t,n){e.exports=n.p+"_/8a7a31c57dc9e61f6904f7302ffea897-b-mail-icon_development-96.png"},function(e,t,n){e.exports=n.p+"_/7680f293494ce5833276c8dbd507ac57-b-mail-icon_djvu-96.png"},function(e,t,n){e.exports=n.p+"_/1426d27c6297d6b9ce5e84118c105a49-b-mail-icon_doc-96.png"},function(e,t,n){e.exports=n.p+"_/f70acfbda902eaf4c559becc47d13e2b-b-mail-icon_eml-96.png"},function(e,t,n){e.exports=n.p+"_/1cbd4434134e53cb0f16e46d31584d9f-b-mail-icon_exe-96.png"},function(e,t,n){e.exports=n.p+"_/25ebb597705718a91f075aa39b566355-b-mail-icon_executable-96.png"},function(e,t,n){e.exports=n.p+"_/33acc5a1a4f3812a0bc917ece06d94a0-b-mail-icon_flash-96.png"},function(e,t,n){e.exports=n.p+"_/659737cfafab5eff1b0a025a5343daa9-b-mail-icon_font-96.png"},function(e,t,n){e.exports=n.p+"_/ef432d2df3fd2d4818d65b3bd9de5047-b-mail-icon_general-96.png"},function(e,t,n){e.exports=n.p+"_/c0784b06bc7bc8a0f8d8eeb4e8f17329-b-mail-icon_gif-96.png"},function(e,t,n){e.exports=n.p+"_/51504742ad5fb671fc3083e3cac264ab-b-mail-icon_image-96.png"},function(e,t,n){e.exports=n.p+"_/8c3fb57b09910dcc21bf0f4a014e5676-b-mail-icon_jpg-96.png"},function(e,t,n){e.exports=n.p+"_/f70acfbda902eaf4c559becc47d13e2b-b-mail-icon_mail-96.png"},function(e,t,n){e.exports=n.p+"_/4c831411ff9fa41d5e9ba39931488ba8-b-mail-icon_mov-96.png"},function(e,t,n){e.exports=n.p+"_/62a2a35587d6b61dcc18d0733083ef1f-b-mail-icon_mp3-96.png"},function(e,t,n){e.exports=n.p+"_/7a9838ac557c84c1e0c8097c3f286315-b-mail-icon_mp4-96.png"},function(e,t,n){e.exports=n.p+"_/f88a6bf72ea39effa43046d3aec327e4-b-mail-icon_none-96.png"},function(e,t,n){e.exports=n.p+"_/2b450534ed8d41646bf981ca1615e5af-b-mail-icon_odp-96.png"},function(e,t,n){e.exports=n.p+"_/f36f9954b74e58239dbc52ab944e533f-b-mail-icon_ods-96.png"},function(e,t,n){e.exports=n.p+"_/f513a1349b439dc39c88fcdf5e6aaa1c-b-mail-icon_odt-96.png"},function(e,t,n){e.exports=n.p+"_/320170650145c57245743df641921ede-b-mail-icon_pcx-96.png"},function(e,t,n){e.exports=n.p+"_/aad3d55899b7c5f38bfce9cfea1b3f5e-b-mail-icon_pdf-96.png"},function(e,t,n){e.exports=n.p+"_/0ee560e23f001c260f3414d8a190290e-b-mail-icon_pls-96.png"},function(e,t,n){e.exports=n.p+"_/83fe16725c9809514f618229a825f4f5-b-mail-icon_png-96.png"},function(e,t,n){e.exports=n.p+"_/9f0d56fad062a48591970a2f8e73f714-b-mail-icon_ppt-96.png"},function(e,t,n){e.exports=n.p+"_/9868804d06ad80df80953fb72c1e8f47-b-mail-icon_psd-96.png"},function(e,t,n){e.exports=n.p+"_/d0acba6652cc3e79c621ad290db87cde-b-mail-icon_rar-96.png"},function(e,t,n){e.exports=n.p+"_/e9084c3b7a3c76fcf1604bb6b0bd9d17-b-mail-icon_rtf-96.png"},function(e,t,n){e.exports=n.p+"_/8a7a31c57dc9e61f6904f7302ffea897-b-mail-icon_script-96.png"},function(e,t,n){e.exports=n.p+"_/76d3d42609d0e658bf4978f389fca70d-b-mail-icon_srt-96.png"},function(e,t,n){e.exports=n.p+"_/9c91697c9290a77141a8d69bac54912e-b-mail-icon_text-96.png"},function(e,t,n){e.exports=n.p+"_/7c389b93c4b813e2cfc931d5864c4215-b-mail-icon_tiff-96.png"},function(e,t,n){e.exports=n.p+"_/260dbdda0f9ca156edd19432b504d472-b-mail-icon_txt-96.png"},function(e,t,n){e.exports=n.p+"_/6c0386fa3508c7814aa5bcb902c753f0-b-mail-icon_video-96.png"},function(e,t,n){e.exports=n.p+"_/cb70ba9f5428704c6cf851b642c01b3e-b-mail-icon_virus-96.png"},function(e,t,n){e.exports=n.p+"_/31d309bd02cb7decb1149e63c5214d31-b-mail-icon_wav-96.png"},function(e,t,n){e.exports=n.p+"_/b142e97afd9db49149a06b14eac16267-b-mail-icon_wma-96.png"},function(e,t,n){e.exports=n.p+"_/0e622d34993b49b3222195f53cf1741a-b-mail-icon_wmv-96.png"},function(e,t,n){e.exports=n.p+"_/5049f31b6ad918d5977d03879f664ad7-b-mail-icon_xls-96.png"},function(e,t,n){e.exports=n.p+"_/1057b6af9481d314a64e8756ee872f46-b-mail-icon_zip-96.png"},function(e,t,n){e.exports={aol:n(1938),gmail:n(1939),hotmail:n(1940),mail:n(1941),mynet:n(1942),"narod-disk":n(1943),outlook:n(1944),qip:n(1945),rambler:n(1946),tutby:n(1947),yahoo:n(1948),yandex:n(1949),yandex_en:n(1950)}},function(e,t,n){e.exports=n.p+"_/a05626800a96abe8faaac1392a2ad337-aol.png"},function(e,t,n){e.exports=n.p+"_/9b1f923e766689d2be2243dbb486e189-gmail.png"},function(e,t,n){e.exports=n.p+"_/cbaa76e2094ee925756334cac36448cf-hotmail.png"},function(e,t,n){e.exports=n.p+"_/75c6df658cb90713f21ba17d08dddda9-mail.png"},function(e,t,n){e.exports=n.p+"_/3df72c8dfea553b3ce4fca279fd40c26-mynet.png"},function(e,t,n){e.exports=n.p+"_/bea3e69fc0e43f47278237c797c347d0-narod-disk.png"},function(e,t,n){e.exports=n.p+"_/e32fdbcbfcd12488359854854b05bd2a-outlook.png"},function(e,t,n){e.exports=n.p+"_/3ae9fc94cfc81852fbc0632d62db118e-qip.png"},function(e,t,n){e.exports=n.p+"_/1e98a3ac9550b9a9be26d946474907f4-rambler.png"},function(e,t,n){e.exports=n.p+"_/d9acaaef2a8b6ebe2de55e0958e26cd7-tutby.png"},function(e,t,n){e.exports=n.p+"_/16798af393b000d6660dcf9d40471f14-yahoo.png"},function(e,t,n){e.exports=n.p+"_/a59909a455d3f5fc2b7248f2a5efc17f-yandex.png"},function(e,t,n){e.exports=n.p+"_/4c43487a92bc3ccee98543a4c819701c-yandex_en.png"},function(e,t,n){e.exports={az:n(1952),be:n(1953),en:n(1954),hy:n(1955),ka:n(1956),kk:n(1957),ro:n(1958),ru:n(1959),tr:n(1960),tt:n(1961),uk:n(1962)}},function(e,t,n){e.exports=n.p+"_/6dd6e15c8551deb21373d19aea1d067c-b-mail-icon_lang-az.gif"},function(e,t,n){e.exports=n.p+"_/8677dfed64c931dd3b426727b005ce4e-b-mail-icon_lang-be.gif"},function(e,t,n){e.exports=n.p+"_/9287de8c1f93ef82114c0d52a5ecdd2c-b-mail-icon_lang-en.gif"},function(e,t,n){e.exports=n.p+"_/763ede66e8fd2ad17951261cfc18a737-b-mail-icon_lang-hy.gif"},function(e,t,n){e.exports=n.p+"_/541d340c43dffd331ea19453c505c151-b-mail-icon_lang-ka.gif"},function(e,t,n){e.exports=n.p+"_/48848f048d84b60111b5fe6e5f3ad29f-b-mail-icon_lang-kk.gif"},function(e,t,n){e.exports=n.p+"_/ffba23df3618cdb57029a2fdf372c043-b-mail-icon_lang-ro.gif"},function(e,t,n){e.exports=n.p+"_/1624dbd739e623729b99da358ec8d9de-b-mail-icon_lang-ru.gif"},function(e,t,n){e.exports=n.p+"_/9d864c518442b77e5f7460f1124fc91a-b-mail-icon_lang-tr.gif"},function(e,t,n){e.exports=n.p+"_/13ea19e44b02151cd968a9329361e33d-b-mail-icon_lang-tt.gif"},function(e,t,n){e.exports=n.p+"_/d022e48f407b2410e7fe528f79a8f2ff-b-mail-icon_lang-uk.gif"},function(e,t,n){e.exports={"facebook.com":n(1964),"moikrug.ru":n(1965),"my.mail.ru":n(1966),"odnoklassniki.ru":n(1967)}},function(e,t,n){e.exports=n.p+"_/967824736368482c7687caab03715e9d-b-site-icon_facebook.com-14.png"},function(e,t,n){e.exports=n.p+"_/82bf97fe3902f37dae35866fb89b4b84-b-site-icon_moikrug.ru-14.png"},function(e,t,n){e.exports=n.p+"_/482f2cfb194e122f2ea9ba9cbd892630-b-site-icon_my.mail.ru-14.png"},function(e,t,n){e.exports=n.p+"_/ba34f63cb7305df1f6c9969065eeb7f2-b-site-icon_odnoklassniki.ru-14.png"},function(e,t,n){e.exports={"MailAppLink-ru.png":n(1969),"MailAppLink-ru@2x.png":n(1970),"MailAppLink-en.png":n(1971),"MailAppLink-en@2x.png":n(1972),"MailAppLink-uk.png":n(1973),"MailAppLink-uk@2x.png":n(1974),"MailAppLink-tr.png":n(1975),"MailAppLink-tr@2x.png":n(1976),"MailAppLink2-ru.png":n(1977),"MailAppLink2-ru@2x.png":n(1978),"MailAppLink2-en.png":n(1979),"MailAppLink2-en@2x.png":n(1980),"MailAppLink2-uk.png":n(1981),"MailAppLink2-uk@2x.png":n(1982),"MailAppLink2-tr.png":n(1983),"MailAppLink2-tr@2x.png":n(1984),"MailAppLink3-ru.png":n(1985),"MailAppLink3-ru@2x.png":n(1986),"MailAppLink3-en.png":n(1987),"MailAppLink3-en@2x.png":n(1988),"MailAppLink3-uk.png":n(1989),"MailAppLink3-uk@2x.png":n(1990),"MailAppLink3-tr.png":n(1991),"MailAppLink3-tr@2x.png":n(1992)}},function(e,t,n){e.exports=n.p+"_/80e0e2a71f3c5a3e71578ec4b68d1de9-Devices_ru.png"},function(e,t,n){e.exports=n.p+"_/efb907fc047ee920cd91223b1c6fef0e-Devices_ru@2x.png"},function(e,t,n){e.exports=n.p+"_/580cf7493354657f2d5517397977b9fd-Devices_en.png"},function(e,t,n){e.exports=n.p+"_/becf8b3cc644139ac1ec219d95f68288-Devices_en@2x.png"},function(e,t,n){e.exports=n.p+"_/5d097f13a1a63c488cddb98cda8d71db-Devices_uk.png"},function(e,t,n){e.exports=n.p+"_/faeed2756a72fc30cb2296205fe190cd-Devices_uk@2x.png"},function(e,t,n){e.exports=n.p+"_/13cb0f59af2b71261987ca4db82c334d-Devices_tr.png"},function(e,t,n){e.exports=n.p+"_/d6e8f0b205c356e49fc9e592c98f5138-Devices_tr@2x.png"},function(e,t,n){e.exports=n.p+"_/8d25ff7a47c72371aa448c1f644831e0-Devices2_ru.png"},function(e,t,n){e.exports=n.p+"_/8e0959c71d69f85e356b138d9576a5db-Devices2_ru@2x.png"},function(e,t,n){e.exports=n.p+"_/8d25ff7a47c72371aa448c1f644831e0-Devices2_en.png"},function(e,t,n){e.exports=n.p+"_/8e0959c71d69f85e356b138d9576a5db-Devices2_en@2x.png"},function(e,t,n){e.exports=n.p+"_/8d25ff7a47c72371aa448c1f644831e0-Devices2_uk.png"},function(e,t,n){e.exports=n.p+"_/8e0959c71d69f85e356b138d9576a5db-Devices2_uk@2x.png"},function(e,t,n){e.exports=n.p+"_/8d25ff7a47c72371aa448c1f644831e0-Devices2_tr.png"},function(e,t,n){e.exports=n.p+"_/8e0959c71d69f85e356b138d9576a5db-Devices2_tr@2x.png"},function(e,t,n){e.exports=n.p+"_/cfe9edc363b9c3bae5b459e8fc86d561-Devices3_ru.png"},function(e,t,n){e.exports=n.p+"_/59280953766869356019e8a69c5218c5-Devices3_ru@2x.png"},function(e,t,n){e.exports=n.p+"_/cfe9edc363b9c3bae5b459e8fc86d561-Devices3_en.png"},function(e,t,n){e.exports=n.p+"_/59280953766869356019e8a69c5218c5-Devices3_en@2x.png"},function(e,t,n){e.exports=n.p+"_/cfe9edc363b9c3bae5b459e8fc86d561-Devices3_uk.png"},function(e,t,n){e.exports=n.p+"_/59280953766869356019e8a69c5218c5-Devices3_uk@2x.png"},function(e,t,n){e.exports=n.p+"_/cfe9edc363b9c3bae5b459e8fc86d561-Devices3_tr.png"},function(e,t,n){e.exports=n.p+"_/59280953766869356019e8a69c5218c5-Devices3_tr@2x.png"},function(e,t,n){e.exports={bears:n(1994),"bears-alt":n(1995),belarus:n(1996),besiktas:n(1997),colorful:n(1998),"colorful-alt":n(1999),cosmos:n(2e3),dandelions:n(2001),fenerbahce:n(2002),foxes:n(2003),galatasaray:n(2004),"galatasaray-net":n(2005),khl:n(2006),lamp:n(2007),love_is:n(2008),nemo:n(2009),newspaper:n(2010),orangetree:n(2011),owls:n(2012),pinkbear:n(2013),plasticine:n(2014),region_bashkir:n(2015),region_chelly:n(2016),region_ekb:n(2017),region_krasnoyarsk:n(2018),region_nn:n(2019),region_novosibirsk:n(2020),region_perm:n(2021),region_primorie:n(2022),region_samara:n(2023),region_tatarstan:n(2024),region_tomsk:n(2025),region_volgograd:n(2026),relax:n(2027),sea:n(2028),"sea-alt":n(2029),"seasons-winter":n(2030),"seasons-spring":n(2031),"seasons-summer":n(2032),"seasons-autumn":n(2033),"seasons-newyear":n(2034),soccer:n(2035),starwars:n(2036),stitch:n(2037),tanks:n(2038),u2709:n(2039),weather:n(2040),zverushki:n(2041)}},function(e,t,n){e.exports=n.p+"_/61bf6f493a21aee5da4c3ae71bd31fef-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/a80a0642c93a46c18af20df3d4f31af9-thumbnail-alt.large.png"},function(e,t,n){e.exports=n.p+"_/51227400bf5dd62b7c9ad06b62c9fc2a-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/27bbeb47efaf3031226d77cf8d67a992-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/57d91005815b78bd3fd179d0697903de-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/35e0a77f112cf7740849f15035594c99-thumbnail-alt.large.png"},function(e,t,n){e.exports=n.p+"_/51a7beff8146357e882df76bd5fcdb16-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/f5ee01b1ab666927884b364d15ac52cb-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/bde70ccec3de606d58f22640aa072121-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/9e79ba44fb438a9ffd223b6ce4fb2fa6-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/62a68e4b42467360ab580b2749d23bf6-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/430c6b999668f49ff175bdd9b7134a8b-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/52b2595723cfbacb98b3220e1abe3c49-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/16e9ca4e45d61db23d2296826f3885f0-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/c23fc538042988613f090c9c81938cb7-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/f6842a51c1eafc4170eee1bd82259530-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/b04e018da78ddd01081ca9a969b08142-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/645387b75319c830faa9a1b5b123cb51-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/ce7364300db361f6edfadc6fa7ba2905-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/196f977919a5a1d610c4b53c1f113ca0-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/53f011ac9d9501b01316854e42b7f34b-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/203e0fcf5f9e1637191dd57b55585242-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/1025db8c9e77616f91269292ceb4e32d-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/847af709a6dd8f76387fd6d950c1dd7f-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/f8f4aaa6c003129d64c62f05d90bdd71-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/35c3434da167982e659c6dd4ba04d151-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/4588e9b32979ddc31921a11714c12c7e-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/85c0fdb440aead2e4abb9b41d1d83787-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/455fbbbf220fd3244e35dd41099c90cf-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/80867b4b2aa770116ebfb4c8b45152f5-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/a7c42098c0787a112dd1c1cc0b583326-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/32f6bfc98e666585ba3165e17b59ac15-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/1d803e2a5c54adaf35b36ed733a10d74-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/92b653fcf9b62d5581763c895bdd3642-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/f17737796d9be327fe3d9e83fb8b1b03-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/0236da1d5127c3ff1fff198e7811c4eb-thumbnail-alt.large.png"},function(e,t,n){e.exports=n.p+"_/c1f2cacb6b7e6f02324c34ecab4b0d13-thumbnail_winter.large.jpg"},function(e,t,n){e.exports=n.p+"_/4965edaad1152724889af29ab96bf98d-thumbnail_spring.large.jpg"},function(e,t,n){e.exports=n.p+"_/dc7b88d84499635175879dea10fdc710-thumbnail_summer.large.jpg"},function(e,t,n){e.exports=n.p+"_/cb838ea3c8e6356796a1c4208f33b18d-thumbnail_autumn.large.jpg"},function(e,t,n){e.exports=n.p+"_/970e7063436cad0f1ef1a99760429add-thumbnail_newyear.large.jpg"},function(e,t,n){e.exports=n.p+"_/721fdcfa92f8fec18bd162ac5c917967-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/521a414a8854e12d8702950300671c65-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/b8d6f7447d8e9fdcf8b751a85b2e3408-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/37bc62b6c25970acff316fc0db0ddbe4-thumbnail.large.png"},function(e,t,n){e.exports=n.p+"_/c6c92056e952c162d6ee1287c9a5cc90-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/5d42c26bbb230f699626f40da25d4580-thumbnail.large.jpg"},function(e,t,n){e.exports=n.p+"_/8864a4aa9d2ac194d2b8e2f80cad617a-thumbnail.large.jpg"},function(e,t,n){n(2043),n(2044),n(2045),n(2046),n(2047),n(2048),n(2049),n(2050),n(2051),n(2052),n(2053),n(2054),n(2055),n(2056),n(2057),n(2058),n(2059),n(2060),n(2061),n(2062),n(2063),n(2064),n(2065),n(2066),n(2067),n(2068),n(2069),n(2070),n(2071),n(2072),n(2073),n(2074),n(2075),n(2076),n(2077),n(2078),n(2080),n(2081),n(2082),n(2083),n(2084),n(2085),n(2086),n(2087),n(2088),n(2089),n(2090),n(2091),n(2092),n(2093),n(2094),n(2095),n(2096),n(2097),n(2098),n(2099),n(2100),n(2101),n(2102),n(2103),n(2104),n(2105),n(2106),n(2107),n(2108),n(2109),n(2110),n(2112),n(2113),n(2114),n(2115),n(2116),n(2117),n(2118),n(2119),n(2120),n(2121),n(2122),n(2123),n(2124),n(2125),n(2126),n(2127),n(2128),n(2129),n(2130),n(2131),n(2132),n(2133),n(2134),n(2135),n(2136),n(2137),n(2138),n(2139),n(2140),n(2141),n(2142),n(2143),n(2144),n(2145)},function(e,t){ns.Model.define("captcha",{params:{type:null},methods:{preprocessData:function(e){return e.url&&(e.url=e.url.replace(/^https?:/,"")),e}}})},function(e,t){ns.Model.define("captcha-check",{params:{type:null,captcha_key:null,captcha_entered:null}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(337);ns.Model.define("model-with-scenario-manager-mixin",{methods:{scenarioManager:i.a}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(337);ns.Model.define("model-collection-with-scenario-manager-mixin",{methods:{scenarioManager:i.a}},ns.ModelCollection)},function(e,t){ns.Model.define("app-state",{events:{"ns-model-init":"_onInit"},methods:{_onInit:function(){this.setData({asideSizeKind:"",pageClasses:{},timelineHeight:0,mailLayoutClientRect:null,shouldAnimate:!0})},updatePageClasses:function(e){var t=this.get(".pageClasses"),n=Object.keys(e).filter((function(n){return t[n]!==e[n]}));n.length&&this.set(".pageClasses",Object.assign({},t,_.pick(e,n)))}}},ns.ModelStatic)},function(e,t){!(function(){function e(e){var t=[{id:"calendar",content:i18n("%Tab_calendar"),href:Daria.Config["calendar-url"]},{id:"invite",content:i18n("%Tab_invite"),href:Daria.Config["calendar-url"]+"/invite/"}];return"abook"===e?t.push({id:"mail",content:i18n("%Tab_mail"),href:"#inbox"}):t.push({id:"contacts",content:i18n("%Tab_contacts"),href:"#contacts"}),t}var t={inbox:"Messages",mail:"Mail",search:"Search",contacts:"Contacts",disk:"Disc",money:"Money",portal:"Connect",q:"Q",calendar:"Calendar",wiki:"Wiki",staff:"Staff",invite:"Invite"};ns.Model.define("user-dropdown-data",{methods:{getData:function(){var n=this.data||{};if(n.services=[],!Daria.CompactMode.isCompactHeader())return n;var i=Daria.IS_CORP?e(ns.page.current.page):ns.Model.get("index-data").get(".tabs.head");return n.services=i.map((function(e){return{url:e.href,title:e.content,metrikaTitle:t[e.id]}})),n},getFreshCountByUid:function(e){var t=this.get(".accounts"),n=0;return t&&t.some((function(t){return Number(t.uid)===Number(e)&&(n=Number(t["fresh-count"]||0),!0)})),n},setNewCountById:function(e,t){var n=this.getData();n&&Array.isArray(n.accounts)&&n.accounts.length&&(n.accounts.forEach((function(i,r){Number(i.uid)===Number(e)&&(n.accounts[r]["fresh-count"]=t)})),this.data=n)},getSumOfFresh:function(){var e=this.getData(),t=0;return e&&Array.isArray(e.accounts)&&e.accounts.length&&e.accounts.forEach((function(e){t+=Number(e["fresh-count"]||0)})),t},getFreshForDefault:function(){return this.getFreshCountByUid(Daria.uid)}}})})()},function(e,t){ns.Model.define("abook-groups",{events:{"ns-model-changed":function(){var e=this.getData(),t=jpath(e,'.tag[.tid == "-10"]')[0];t&&(t.title=i18n("%AK_Phone_Contacts")),this.data=e}},methods:{RETRY_LIMIT:1,getGroupByTitle:function(e){return jpath(this.data,'.tag[.title == "'+e+'"]')[0]},getGroupByTid:function(e){return jpath(this.data,'.tag[.tid == "'+e+'"]')[0]},getContactsCount:function(e){var t=e.mcids.map(this._getCid);return _.uniq(t).length},addToGroup:function(e){var t=this,n={tids:[e.tid],mcids:e.mcids,action:"add"};return-10===n.tid&&(n.mcids=_.uniq(n.mcids.map(this._getCid))),this._doGroupAction(n).then((function(){var i=t.getGroupByTid(e.tid).title;Daria.Statusline.show({name:"abook_contacts_added_to_group",text:i18n("%AK_contacts_added_to_group",t.getContactsCount(n),i)})}))},removeFromGroup:function(e){return this._doGroupAction({tids:e.tids,mcids:e.mcids,action:"rm"})},_getCid:function(e){return String(e).split(".")[0]},_doGroupAction:function(e){var t=$.Deferred(),n=e.tids,i=e.mcids;if(n.length&&i.length){var r={tid:n,mcid:i,action:e.action};return ns.forcedRequest("do-abook-group-edit-contacts",r).then((function(){Daria.Autocompleter.getContact().flushCache(),Daria.Dropdown.closeAll(),["abook-groups","abook-contact","abook-contacts"].forEach((function(e){ns.Model.invalidate(e)})),t.resolve()})),t.promise()}}}})},function(e,t){ns.Model.define("do-abook-group-add",{params:{title:null,mcid:null}})},function(e,t){ns.Model.define("abook-contact",{params:{email:null,cid:null},paramsRewrite:function(e){return null!=e.cid?{cid:e.cid}:e},methods:{RETRY_LIMIT:1,getContactInfo:function(e,t){e=e||{};var n=this.getData();return n?Daria.Abook.formatContactInfo(n,e,t):{}},getPhone:function(){return this.select(".phone.value")[0]||null},getMcids:function(e){var t=this.getData(),n=[];return this.eachEmailsByTid(e,(function(e){n.push(t.cid+"."+e.id)})),n.length||(n=[String(t.cid)]),n},eachEmailsByTid:function(e,t){var n=this.get(".email");_.isFunction(e)&&(t=e),e=Number(e),_.isFunction(t)&&_.each(n,(function(n){var i=-10===e;if(!e||i||_(n.tags).contains(e))return t(n)}))},filterEmailsByTid:function(e){var t=this.get(".email");return e=Number(e),e&&-10!==e?_(t).filter((function(t){if(_(t.tags).contains(e))return t})).value():t},yateFilterEmailsByTid:function(e){return e=yr.nodeset2scalar(e),this.filterEmailsByTid(e)},yateGetMcidContacts:function(e){var t=this.yateFilterEmailsByTid(e),n=this.getData();return _.map(t,(function(e){var t=_.clone(n);return t.email=[e],t}))},getRefByEmail:function(e){var t=_.find(this.get(".email"),{value:e});return t?t.ref:void 0},getEmailByMcid:function(e){e=String(e);var t=Number(e.split(".")[1]),n=_.find(this.getData().email,{id:t});return n?n.value:null},getHeadEmail:function(){return this.select(".email.value")[0]||null},getName:function(){return this.get(".name.full")||(this.getHeadEmail()||"").split("@")[0]},isShared:function(){return this.get(".isShared")},isSharedLocal:function(){return this.get(".isSharedLocal")},isLocal:function(){return this.get(".isLocal")},findContactByPhone:function(e){var t=null;return ns.Model.traverse(this.id,(function(n){t||n.getPhone()!==e||(t=n)})),t}}})},function(e,t){ns.Model.define("abook-contacts",{params:{q:null,extended:null,tid:null,emails:null,skip:null,pagesize:30,shared:null,type:null,mode:null},paramsRewrite:function(e){var t=_.extend({},e);return"shared"in t&&(t.shared=Daria.toIntFlag(e.shared)),t},split:{items:".contact",params:{cid:".cid"},model_id:"abook-contact"},methods:{RETRY_LIMIT:1,_findContactData:function(e){var t=null;return ns.Model.traverse(this.id,(function(n){t||n.models.some((function(n){return t=e(n)&&n.getData()}))})),t},getContactDataByEmail:function(e){return this._findContactData((function(t){return _.some(t.get(".email"),{value:e})}))},getContactDataByPhone:function(e){return this._findContactData((function(t){return _.some(t.get(".phone"),{value:e})}))},getContactsInfoByEmails:function(e,t){var n=[],i=this;return t=t||{},_.each(e,(function(e){var r=_.find(i.models,(function(t){return _.find(t.get(".email"),{value:e})}));r&&n.push(r.getContactInfo(t,{email:e}))})),n},getContactsEmails:function(e,t){function n(e){var n=e.get(".cid"),o=!1,s=e.get(".email");s instanceof Array?s.forEach((function(e){if(!t||!o){var s=e.value;s&&(r&&-10!==r&&-1===e.tags.indexOf(r)||(i[n]=i[n]||{},i[n][s]=e.ref,o=!0))}})):i[n]={email:s}}var i={},r=Number(e.tid)||0;return _.each(this.models,n),i},removeContacts:function(e){var t=Vow.promise();return e.forEach((function(e){var t=ns.Model.get("abook-contact",{cid:e});t.get(".email").forEach((function(e){ns.Model.get("abook-contact",{email:e.value}).invalidate()})),t.invalidate()})),ns.forcedRequest(["do-abook-person-delete","abook-groups"],{cid:e}).then((function(e){var n=e[0],i=n.getError(),r=n.get(".deleted-items").length;i?(Daria.Statusline.show({name:"abook_failed",text:i18n("%АК_фэйл")}),t.reject(i)):(Daria.Statusline.show({name:"abook_contact_removed",text:i18n("%АК_Контактов_Удалено",r)}),t.fulfill(e))})),t},loadMore:function(e){var t=this.models.length,n=_.extend({},this.params,{skip:t});if(e){var i=this.get(".pager.items-count");n.pagesize=i-t}return ns.request("abook-contacts",n).then(this._addModels,this)},_addModels:function(e){var t=e[0];this.data&&this.isValid()||(this.data={},this.status=this.STATUS.OK);var n=t.get(".pager"),i=this.get(".pager");this.set(".pager",_.extend({},i,n),{silent:!0});var r=t.models;return this.insert(r),ns.Model.destroy(t),r},getCount:function(){return this.models.length},isEmptyList:function(){return this.isValid()&&0===this.getCount()}}})},function(e,t){ns.Model.define("abook-suggest",{params:{to:null,popup:null,domain:null,all:null,q:null,mcid:null,climit:null,glimit:null,useAbook:null,phone:null,popular:null},type:"js",ckey:!0,methods:{RETRY_LIMIT:1,getRequestParams:function(){var e=this.super_.getRequestParams.apply(this,arguments);return e.reqid=Daria.React.getSearchSessionId(),e}}})},function(e,t){ns.Model.define("abook-suggest-report",{params:{uid:null,q:null,section:null,title:null,id:null},methods:{RETRY_LIMIT:1}})},function(e,t){ns.Model.define("abook-selected",{isCollection:!0,params:function(e){if("normal"!==e.type)return{};var t=ns.Model.getKeyAndParams("abook-contacts",e).params;return delete t.pagesize,t},events:{"ns-model-init":"_onInit"},methods:{_onInit:function(){this.setData({})},isFolderSelected:no.False,runOps:function(e,t){return Daria.COPS[e](this,t)},getCids:function(){return _.map(this.models,(function(e){return Number(e.get(".cid"))}))},containsEmail:function(){return _.some(this.models,(function(e){var t=e.get(".email");return Array.isArray(t)&&t.length}))},containsShared:function(){return _.some(this.models,(function(e){return e.isShared()}))},getContactsMcids:function(e){var t={};return _.each(this.models,(function(n){t[n.get(".cid")]=n.getMcids(e)})),t},emailsToString:function(e){e=Number(e||0);var t=Daria.Constants.CONTACTS.DELIMITER;return _(this.models).filter((function(e){return Array.isArray(e.get(".email"))})).map((function(t){var n={},i=function(e){return n=e,!1};return e?t.eachEmailsByTid(e,i):t.eachEmailsByTid(i),Jane.FormValidation.obj2contact({email:n.value,name:t.get(".name.full")})})).join(t)},abookContactsToAbookMcidContacts:function(e,t,n,i){return _(e).map((function(e){var r=e.getMcids(t);return"number"==typeof n&&(r=[r[n]]),i?[this.abookContactToAbookMcidContact(e,r[0])]:_.map(r,(function(t){return this.abookContactToAbookMcidContact(e,t)}),this)}),this).flatten().value()},abookContactToAbookMcidContact:function(e,t){var n=ns.Model.get("abook-mcid-contact",{mcid:t});return n.getData()||n.setData({cid:e.get(".cid"),mcid:t,name:e.getName(),email:e.getEmailByMcid(t)}),n},isEmptyContactsList:function(){return ns.Model.get("abook-contacts",ns.page.current.params).isEmptyList()},isMcidSelected:function(e){return _.some(this.models,(function(t){return t.get(".cid")===e}))},isSelected:function(e){return _.some(this.models,(function(t){return t===e}))},selectAll:function(){this.clear();var e=ns.Model.get("abook-contacts",this.params);this.insert(e.models)},unselectAll:function(){this.clear()},getSelectedMcids:function(){return _.map(this.models,(function(e){return e.get(".mcid")}))}}},ns.ModelCollectionStatic)},function(e,t){ns.Model.define("history-suggest",{params:{text:null},ckey:!0})},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!(function(){ns.Model.define("account-information",{methods:{MAXAGE:72e5,preprocessData:function(e){return delete this._emails,Daria.ckey=e.ckey,this.refreshData(.8*this.MAXAGE),e},setError:function(){this.refreshData(30*Jane.Date.SECOND)},refreshData:function(e){window.clearTimeout(this._timer),this._timer=setTimeout((function(){ns.forcedRequest(["account-information"])}),e)},getDataKey:function(e){return this.get("."+e)},getSids:function(){return this.get(".sids")},addSid:function(e){this.getSids().push(String(e))},hasSid:function(e){return $.inArray(String(e),this.getSids())>-1},getFromEmails:function(){var e=this.getAllUserEmails();return $.grep(e,(function(e){return"narod.ru"!==e.split("@")[1]}))},getFromDefaultEmail:function(){var e=this.getFromEmails(),t=this.get(".yandex_account")+"@"+Daria.Config["yandex-domain"];return t&&_.contains(e,t)||(t=e[0]||""),t},getAllUserEmails:function(){var e;try{e=this.getEmails().concat(ns.Model.get("settings").getValidatedEmails())}catch(e){Jane.ErrorLog.sendException("User doesn't have email",e,{modelData:n(this.data),modelEmail:this.getDataKey("email"),modelKey:this.key,modelStatus:this.status})}return e=this.sortEmails(_.uniq(e))},sortEmails:function(e){var t=/@/,n=new RegExp("(yandex|ya)\\.("+Daria.Config.domainZonesForReg+"|com\\.ua|рф|xn--p1ai)"),i={RUS:{1:/^ya\.ru$/,2:/^yandex\.ru$/},INT:{1:/^yandex\.com$/},TUR:{1:/^yandex\.com\.tr$/}},r=function(e){var t=i[Daria.Config.product];for(var r in t)if(t.hasOwnProperty(r)&&t[r].test(e))return Number(r);return n.test(e)?10:5},o=ns.Model.get("settings").getSetting("default_email"),s=function(e,n){if(e===o)return-1;if(n===o)return 1;var i=e.split(t).pop(),s=n.split(t).pop(),a=r(i),c=r(s);return a!==c?a-c:e<n?-1:1};return e.sort(s),e},getEmails:function(){if(!this._emails){for(var e=this.getDataKey("email"),t=[],n=0,i=e.length;n<i;n++){var r=e[n],o=r.login,s=null;t.push(o+"@"+r.domain),Daria.Config.pddDomain||(o.indexOf(".")>-1&&-1===o.indexOf("-")?s=o.replace(/\./g,"-"):o.indexOf("-")>-1&&-1===o.indexOf(".")?s=o.replace(/-/g,"."):o.indexOf("-")>-1&&o.indexOf(".")>-1&&(o=o.replace(/\./g,"-"),s=o.replace(/-/g,"."),t.push(o+"@"+r.domain))),s&&t.push(s+"@"+r.domain)}this._emails=t}return this._emails},isMyEmail:function(e){return this.getAllUserEmails().indexOf(e.toLowerCase())>-1},getDigitalAlias:function(){return this.getDataKey("digital_login")},getTimezoneInHours:function(){return-this.getDataKey("tz_offset")*Jane.Date.MINUTE/Jane.Date.HOUR},getMA:function(){return this.get(".users")||[]},hasMA:function(){return this.getMA().length>0},isPG:function(){return"pg"===this.get(".db")}}})})()},function(e,t){ns.Model.define("do-admsubscribe-calendar")},function(e,t){ns.Model.define("base-calendar-event",{methods:{getError:function(e){e.error&&(e.data={error:e.error},delete e.error)},preprocessData:function(e){var t=no.jpath(".eventInfo.attendees",e);if(t&&t.length){var n=[],i=[],r=jpath(e,".eventInfo.organizer.email")[0];return _.forEach(t,(function(e){"yandexUser"===e.type||"externalUser"===e.type?e.email!==r&&n.push(e):"resource"===e.type&&i.push(e)})),e.eventInfo.organizer&&(e.eventInfo.organizer.isOrganizer=!0,n.unshift(e.eventInfo.organizer)),e.rooms=i,e.eventInfo.attendees=n,e.isNotPast=!e.eventInfo.isPast,e.toCollapsedMessage="declined"!==e.eventInfo.decision&&!e.refusal,e.isNotOperate="undecided"===e.eventInfo.decision&&!e.eventInfo.isNoRsvp,e.showWidgetInMessageHead=!e.refusal&&Daria.IS_CORP&&!e.eventInfo.isPast,e.showRightPartOfWidget=!e.eventInfo.isCancelled||e.eventInfo.isCancelled&&e.eventInfo.repetitionDescription&&e.eventInfo.isPast,e.eventInfo.eventTime=e.eventInfo.repetitionDescription?this.getTimeForRepeatEvents(e.eventInfo):this.convertEventDates(e.eventInfo.start,e.eventInfo.end),e}},convertEventDates:function(e,t){if((t-e)/36e5<=24){var n=i18n("%Week_Full_Day",new Date(e).getDay()),i=Jane.Date.format("%Date_HM__colon",e),r=Jane.Date.format("%Date_HM__colon",t),o=i18n("%Message_Item_Event_Dates",i,r);return Jane.Date.format("%Date_dB",e)+", "+n+", "+o}var s=Jane.Date.format("%Date_dBY_year",e),a=Jane.Date.format("%Date_dBY_year",t),c=Jane.Date.format("%Date_HM__colon",e),l=Jane.Date.format("%Date_HM__colon",t);return i18n("%Message_Item_Event_Dates",s+" "+c,a+" "+l)},getTimeForRepeatEvents:function(e){var t=Jane.Date.format("%Date_HM__colon",e.start),n=Jane.Date.format("%Date_HM__colon",e.end);return i18n("%Message_Item_Event_Dates",t,n)+" "+e.repetitionDescription},getEventInfo:function(){return this.get(".eventInfo")}}})},function(e,t){ns.Model.define("dimensions",{events:{"ns-model-init":"_onInit"},methods:{DOC_HEIGHT_KEY:".document-height",DOC_WIDTH_KEY:".document-width",WIN_HEIGHT_KEY:".window-height",WIN_WIDTH_KEY:".window-width",_$document:null,_$window:null,_onInit:function(){this._$document=$(document),this._$window=$(window),this._$window.on("resize",_.throttle(this._onResize.bind(this),20)),this.clean()},getWindowScrollTop:function(){return this._$window.prop("pageYOffset")},getDocumentHeight:function(){var e=this.get(this.DOC_HEIGHT_KEY);return e||(e=this._$document.height(),this._setDimension(this.DOC_HEIGHT_KEY,e)),e},getDocumentWidth:function(){var e=this.get(this.DOC_WIDTH_KEY);return e||(e=this._$document.width(),this._setDimension(this.DOC_WIDTH_KEY,e)),e},getWindowHeight:function(){var e=this.get(this.WIN_HEIGHT_KEY);return e||(e=this._$window.height(),this._setDimension(this.WIN_HEIGHT_KEY,e)),e},getWindowWidth:function(){var e=this.get(this.WIN_WIDTH_KEY);return e||(e=this._$window.width(),this._setDimension(this.WIN_WIDTH_KEY,e)),e},clean:function(){this.setData({},{silent:!0})},_onResize:function(e){e.originalEvent&&e.originalEvent.data&&e.originalEvent.data.custom||(this.clean(),this.trigger("resize",e))},_setDimension:function(e,t){this.set(e,t,{silent:!0})}}})},function(e,t,n){ns.Model.define("do-client-log",{params:{messages:null},methods:n(912)})},function(e,t,n){ns.Model.define("do-journal-log",{params:{messages:null},methods:n(912)})},function(e,t){ns.Model.define("do-service-worker-log",{params:{params:null}})},function(e,t){ns.Model.define("do-mail-reset-recent-counter")},function(e,t){ns.Model.define("do-messages",{params:{ids:null,tids:null,movefile:null,action:null,with_sent:null,fid:null,tabId:null},methods:{preprocessData:function(e){if("notspam"===this.params.action&&Array.isArray(this.params.ids)){var t=this.params.ids.map((function(e){return ns.Model.get("message",{ids:e})}));ns.forcedRequest(t)}return e}}})},function(e,t){ns.Model.define("do-sanitize",{params:{content:null}})},function(e,t){ns.Model.define("do-settings",{params:{params:null}})},function(e,t){ns.Model.define("do-clean-suggest-history",{params:{all:null,request:null}})},function(e,t){ns.Model.define("do-staff-settings",{params:{lang_ui:null}})},function(e,t){ns.Model.define("index-data",{events:{"ns-model-init":"_onInit","ns-model-destroyed":"_onDestroy"},methods:{_onInit:function(){this._state="inbox",this._fixTabs=this._fixTabs.bind(this),ns.events.on("ns-page-before-load",this._fixTabs)},_onDestroy:function(){ns.events.off("ns-page-before-load",this._fixTabs)},preprocessData:function(e){return Daria.IS_CORP||this._fixTabs(e),e},_getTabsIds:function(e){return Array.isArray(e)?e.map((function(e){return e.id})).filter((function(e){return e})):[]},getAllTabsIds:function(){return{head:this._getTabsIds(this.get(".tabs.head")),more:this._getTabsIds(this.get(".tabs.more"))}},_fixTabs:function(e,t){if(this.isValid()){var n=t[1];if("abook"===n.page&&"inbox"===this._state){this._state="abook";var i=this.get(".tabs.head"),r=_.findIndex(i,{href:"#contacts"});i.splice(r,1,{href:"#inbox",content:i18n("%Tab_mail"),id:"inbox"}),this.set(".tabs.head",i)}else if("abook"!==n.page&&"abook"===this._state){this._state="inbox";var o=this.get(".tabs.head"),s=_.findIndex(o,{href:"#inbox"});o.splice(s,1,{href:"#contacts",content:i18n("%Tab_contacts"),id:"contacts"}),this.set(".tabs.head",o)}}}}})},function(e,t){ns.Model.define("filters",{params:{master:null},methods:{getMasterRequest:function(){var e=this,t=ns.Model.get(this.id,_.assign({},this.params,{master:1}));return t.destroy(),t.once("ns-model-changed",(function(){e.setData(this.getData())})),t},getFilters:function(){return this.get(".action")||[]},getById:function(e){return jpath(this.getFilters(),'.[.filid == "'+e+'"]')[0]},getForLabel:function(e){return jpath(this.getFilters(),'.[.actions.type == "movel" && .actions.parameter == "'+e+'"]')},getForFolder:function(e){return jpath(this.getFilters(),'.[.actions.type == "move" && .actions.parameter == "'+e+'"]')},getForCollector:function(e){return jpath(this.getFilters(),'.[.condition.div == "X-yandex-rpop-id" && .condition.pattern == "'+e+'"]')},getCountEnableFilters:function(){return jpath(this.getFilters(),'.action[.enable == "yes"]').length}}})},function(e,t){!(function(){ns.Model.define("focus",{events:{"ns-model-init":"_onInit"},methods:{DEFAULT_COLUMN:1,DEFAULT_ITEM:0,indexColumns:{LEFT:0,MESSAGES:1,MESSAGE:2},preventOpenOnFocus:!1,_onInit:function(){this._rebuild=this._rebuild.bind(this),this.setData({tree:[[],[],[]],itemIndex:null,columnIndex:null,currentFocus:null,lastFocus:[],lastActionFocus:{},pageParams:JSON.stringify(ns.Model.getKeyAndParams("messages",ns.page.current.params).params)}),this._buildTree(),this._setDefaultCoordinates(),ns.events.on("ns-page-after-load",this._rebuild),ns.events.on("daria:mFocus:buildTree",this._rebuild)},_rebuild:function(){this._buildTree(),this._updateFocus()},_updateFocus:function(){var e=JSON.stringify(ns.Model.getKeyAndParams("messages",ns.page.current.params).params),t=this.get(".pageParams"),n=this.get(".columnIndex");this.set(".pageParams",e),n!==this.indexColumns.LEFT&&e!==t?this.resetFocus():this._recalculateFocus()},_buildTree:function(){Daria.DEBUG&&console.time("mFocus buildTree");var e=Daria.nsTreeWalker.getTreeForFocus();this.set(".tree",e);var t=this.get(".lastFocus").map((function(t,n){return t&&{focusView:t.focusView,itemIndex:e[n].indexOf(t.focusView)}}));this.set(".lastFocus",t),Daria.DEBUG&&(console.timeEnd("mFocus buildTree"),console.log("mFocus tree",e))},_recalculateFocus:function(){if(this.hasFocus()){var e=this.get(".columnIndex"),t=this.get(".itemIndex"),n=this.get(".tree")[e],i=this.getFocus();if(-1===n.indexOf(i)){var r,o,s;if(Daria.is3pane()&&e===this.indexColumns.MESSAGE&&0===n.length&&this.get(".tree")[this.indexColumns.MESSAGES].length>0)n=this.get(".tree")[this.indexColumns.MESSAGES],r=this._getLastFocusedItemIndex(this.indexColumns.MESSAGES,!0),o=this.indexColumns.MESSAGES;else if(r=t,o=e,s=_.method("getParentReferenceParams")(i)){var a=_.findIndex(n,s);-1!==a&&(r=a)}r=Math.min(n.length-1,r),r=Math.max(r,0),this.set(".itemIndex",r),this.set(".columnIndex",o),this._setCurrentFocus(o,r)}}},_setDefaultCoordinates:function(){this.set(".itemIndex",this.DEFAULT_ITEM);var e=this.get(".tree"),t=this.DEFAULT_COLUMN;0===e[t].length&&(t=this.indexColumns.LEFT),this.set(".columnIndex",t)},setLastActionFocus:function(){var e=_.clone(this.get(".lastActionFocus"));_.isEmpty(e)||e.focusView&&e.focusView.isVisible()&&(this.pubEvent("blur"),this.set(".columnIndex",e.columnIndex),this.set(".itemIndex",e.itemIndex),this.set(".currentFocus",e.focusView),this._updateFocus(),this.pubEvent("focus"))},setPreventOpenOnFocus:function(e){void 0===e&&(e=!0),this.set(".preventOpenOnFocus",e)},getPreventOpenOnFocus:function(){return this.get(".preventOpenOnFocus")},resetFocus:function(e){this.pubEvent("blur"),this.set(".currentFocus",null),this.set(".itemIndex",this.DEFAULT_ITEM),e&&this.set(".columnIndex",this.DEFAULT_COLUMN);var t=_.clone(this.get(".lastFocus"));t[this.indexColumns.MESSAGES]=null,t[this.indexColumns.MESSAGE]=null,this.set(".lastFocus",t),this.set(".lastActionFocus",{}),this.set(".preventOpenOnFocus",!1)},clearFocus:function(){this.hasFocus()&&(this.pubEvent("blur"),this.set(".currentFocus",null)),this.set(".preventOpenOnFocus",!1)},changeItem:function(e,t){var n=this.get(".columnIndex"),i=this.get(".itemIndex"),r=this.get(".tree")[n];if(!this.hasFocus()){if(n===this.indexColumns.MESSAGES&&!r[i]){var o=this._getFirstIndexForViews(r);o>=0&&(i=o)}return void this._changeFocus(n,i,{select:t})}var s=this.get(".currentFocus");if(Daria.Focus.needLazyScroll(s,e))return void Daria.Focus.lazyScroll(e);var a=r.length,c=r.indexOf(s);if(e?c++:c--,n===this.indexColumns.MESSAGES&&c===a)return void this._loadMoreMessages();c>=0&&c<a&&this._changeFocus(n,c,{select:t})},_loadMoreMessages:function(){ns.events.trigger("daria:vMessagesPager:messages-load")},changeColumn:function(e){var t;t=e?this._getNextColumnIndex():this._getPrevColumnIndex(),this.setColumn(t)},setColumn:function(e){var t=this.get(".columnIndex"),n=this.get(".tree").length;if((t!==e||!this.hasFocus())&&e>=0&&e<n){var i=this._getLastFocusedItemIndex(e);this._changeFocus(e,i)}},_getNextColumnIndex:function(){for(var e=this.get(".columnIndex"),t=this.get(".tree"),n=t.length,i=e,r=e+1;r<n;r++){if(t[r].length>0){i=r;break}}return i},_getPrevColumnIndex:function(){for(var e=this.get(".columnIndex"),t=this.get(".tree"),n=e,i=e-1;i>=0;i--){if(t[i].length>0){n=i;break}}return n},_getLastFocusedItemIndex:function(e,t){var n=this.get(".tree")[e],i=this.get(".lastFocus")[e],r=null;if(i&&(r=n.indexOf(i.focusView),-1!==r||t?t&&(r=i.itemIndex):r=null),null===r&&e===this.indexColumns.MESSAGE){var o=n[0];if(o&&"message-thread-item-wrap"===o.id)return this._getFirstVisibleMessageInThread(n)}if(null===r&&e===this.indexColumns.MESSAGES){var s=this._getFirstIndexForViews(n);if(s>=0)return s}return r||0},_getFirstIndexForViews:function(e){var t=this._getOpenMessageIndex(e);if(t>=0)return t;var n=this._getFirstUnpinnedMessage(e);return n>=0?n:-1},_getFirstVisibleMessageInThread:function(e){for(var t=ns.Model.get("scroller-message").getVDimensions(),n=e.length,i={},r=0;r<n;r++){var o=e[r];if(o.isOpen()){var s=o.isVisibleInScroller(t,!1);if(s)return r;i[o.key]=s}}for(var a=0;a<n;a++){var c=e[a],l=i[c.key];if(_.isBoolean(l)){if(l)return a}else if(l=c.isVisibleInScroller(t,!1))return a}return 0},_getOpenMessageIndex:function(e){if(Daria.is3pane())return-1;for(var t=ns.page.current.params,n=t.ids||t.thread_id,i=0,r=e.length;i<r;i++){var o=e[i],s=o.getModel("message");if(s&&s.params.ids===n)return i}return-1},_getFirstUnpinnedMessage:function(e){for(var t=0,n=e.length;t<n;t++){var i=e[t],r=i.getModel("message");if(r&&!r.isPinned())return t}return-1},saveViewAsLastFocused:function(e,t){var n=this.get(".tree")[t].indexOf(e);this._saveLastFocusView(e,t,n)},_saveFocus:function(e,t){var n=this.get(".currentFocus");n&&this._saveLastFocusView(n,e,t)},_saveLastFocusView:function(e,t,n){var i=_.clone(this.get(".lastFocus"));i[t]={focusView:e,itemIndex:n},this.set(".lastFocus",i)},isFocusedInColumn:function(e,t){if(this.get(".columnIndex")===e)return this.getFocus()===t;var n=this.get(".lastFocus");return!!n&&(n[e]||{}).focusView===t},_saveLastActionFocus:function(e,t){var n=_.clone(this.get(".lastActionFocus")),i=this.get(".currentFocus");i&&(n={columnIndex:e,focusView:i,itemIndex:t},this.set(".lastActionFocus",n))},_changeFocus:function(e,t,n){var i={scroll:!0,select:!1,show:!0},r=_.extend(i,n),o=this.get(".columnIndex"),s=this.get(".itemIndex");if(o!==e&&this._saveFocus(o,s),this._saveLastActionFocus(o,s),this.set(".itemIndex",t),this.set(".columnIndex",e),this.set(".preventOpenOnFocus",!1),!r.show)return void this.clearFocus();var a=this._setCurrentFocus(e,t);a&&(r.scroll&&(Daria.Focus.needLazyScroll(a,!1)?Daria.Focus.lazyScroll(!1):Daria.Focus.scrollIntoView(a.$node,e)),r.select&&this.keyboardSelection(a.params.ids))},_setCurrentFocus:function(e,t){var n=_.get(this.get(".currentFocus"),".key"),i=this.get(".tree")[e][t];if(n!==_.get(i,".key"))return this.pubEvent("blur"),this.set(".currentFocus",i),this.pubEvent("focus"),i},pubEvent:function(e,t){var n=this.getFocus();if(!n)return!0;ns.assert(n.onFocusEvent,"View: "+n.id,"Не реализован метод #onFocusEvent()"),Daria.DEBUG&&console.log("mFocus","pubEvent",e,n),n.isValid()?(t=Object.assign({},t,{type:e}),"focus"===e&&this.get(".preventOpenOnFocus")&&(t.preventOpenOnFocus=!0),n.onFocusEvent(t)):Daria.DEBUG&&console.warn("mFocus",n.id+" невалиден","Событие "+e+" проигнорировано",n)},hasFocus:function(){return Boolean(this.get(".currentFocus"))},getFocus:function(){return this.get(".currentFocus")},getFocusOrDefault:function(){var e=this.getFocus();if(e)return e;var t=this.get(".itemIndex"),n=this.get(".columnIndex");return this.get(".tree")[n][t]},goInbox:function(){var e=this;ns.page.go("#inbox").then((function(){e._changeFocus(e.indexColumns.LEFT,e.DEFAULT_ITEM)}))},_focusToMessage:function(e,t){this.get(".tree")[this.indexColumns.MESSAGES].length>0&&this._changeFocus(this.indexColumns.MESSAGES,e,{select:t})},focusToFirstMessage:function(e){this._focusToMessage(0,e)},focusToLastMessage:function(e){var t=this.get(".tree")[this.indexColumns.MESSAGES].length;this._focusToMessage(t-1,e)},setFocusByMid:function(e,t){var n=this.get(".tree")[this.indexColumns.MESSAGES],i=_.findIndex(n,"params.ids",e);if(i>-1){var r={scroll:t,show:Daria.is3pane()};this._changeFocus(this.indexColumns.MESSAGES,i,r)}},keyboardSelection:function(e){this.get(".keyboardSelection").select(e)},startKeyboardSelect:function(){var e=this.getFocusOrDefault();if(e){var t=e.getModel("message");if(t){var n=new Daria.CBS;n.start(t.params.ids),this.set(".keyboardSelection",n)}}},getRange:function(e,t){for(var n=ns.Model.get("message",{ids:e}),i=ns.Model.get("message",{ids:t}),r=this.get(".tree")[this.indexColumns.MESSAGES],o=-1,s=-1,a=0,c=r.length;a<c;a++){var l=r[a],u=l.getModel("message");if(!u)throw new Error("Something goes wrong");if(-1===o&&u===n&&(o=a),-1===s&&u===i&&(s=a),-1!==s&&-1!==o)break}return o<=s?r.slice(o,s+1):r.slice(s,o+1).reverse()},getIndexCurrentColumn:function(){return this.get(".columnIndex")},isCurrentFocusOnMessage:function(){if(!this.hasFocus())return!1;var e=this.getFocus();return Boolean(e.getModel("message")&&e.getModel("messages-checked"))},findIndex:function(e){var t=-1;return _.forEach(this.get(".tree"),(function(n){if((t=n.indexOf(e))>-1)return!1})),t},setFocusAfterPageLoaded:function(){this.__setFocusAfterPageLoaded=!0},cancelSetFocusAfterPageLoaded:function(){this.__setFocusAfterPageLoaded=!1},shouldSetFocusAfterPageLoaded:function(){return Boolean(this.__setFocusAfterPageLoaded)}}},ns.ModelStatic),ns.events.on("pageinit",(function(){_.defer((function(){var e=ns.Model.get("focus");"message"===ns.page.current.page&&e.setColumn(e.DEFAULT_COLUMN);var t=ns.page.current.params,n=t.ids||t.thread_id;n&&ns.Model.get("focus").setFocusByMid(n,!0)}))}))})()},function(e,t){ns.Model.define("footer-data",{events:{"ns-model-init":function(){var e=Daria.Config;this.setData({"full-year":new Date(Daria.now()).getFullYear(),"link-advert":this._linkAdvert(),"link-lite":"/u2709/go2lite","link-mobile-apps":this._linkMobileApps(),"link-yandex":Daria.IS_CORP?e["company-url"]:e["www-url"]})}},methods:{_linkAdvert:function(){return Daria.Config["adv-url"]},_linkMobileApps:function(){var e=Daria.Config,t=!1;return"RUS"===e.product&&(t=e["mobile-mail-url"],"uk"===e.locale&&(t=t.replace("yandex.ru","yandex.ua"))),t}}},ns.ModelStatic)},function(e,t){!(function(){ns.Model.define("get_user_activity",{events:{"ns-model-changed":"_onModelChanged"},methods:{_onModelChanged:function(){this._lastLcnCheck=!0;var e=this.get(".lcn");e&&(this._lastLcnCheck=Daria.Xiva.handlers.processNewLcn(e))},syncLcn:function(){return ns.forcedRequest([this]).then((function(){return vow.resolve(this._lastLcnCheck)}),this)}}},ns.ModelArmour)})()},function(e,t){ns.Model.define("get-group-user-events",{ctor:function(){this._lazyRequestDebounce=_.debounce(this._lazyRequest.bind(this),50),this._models={},this._promise=null},methods:{request:function(){return this.isValid()||(this._promise=Vow.promise()),this._lazyRequestDebounce(),this._promise},addModel:function(e){this._models[e.key]=e},isValid:function(){return _.isEmpty(this._models)},canRequest:function(){return!_.isEmpty(this._models)},_lazyRequest:function(){if(!this.canRequest())return void this._promise.fulfill();var e,t,n,i,r=_.assign({},this._models);_.forEach(r,(function(r){(!e||e.getTime()>r.dateFrom.getTime())&&(e=r.dateFrom,n=r.params.from),(!t||t.getTime()<r.dateTo.getTime())&&(t=r.dateTo,i=r.params.to)}));var o=ns.Model.get("get-user-events",{from:n,to:i,group:!0});o.destroy();var s=this;ns.request.models([o]).then((function(){_.forEach(r,(function(e){e.setDataFromEvents(o)}))})).always((function(){_.forEach(r,(function(e){delete s._models[e.key]})),s._promise.fulfill(),o.destroy()}))}}})},function(e,t){ns.Model.define("get-user-events",{events:{"ns-model-init":"_onInit","ns-model-touched":"_setUpdateTimer"},params:{from:"",to:"",group:!1},maxAge:24*Jane.Date.HOUR,maxStaleAge:Number(Jane.Date.MINUTE),ctor:function(){this._updateTimer=null,this._minimalViewTime=15,this._minimalViewInterval=Daria.timify({minutes:15},"hours"),this._mapEventsIterator=this._mapEventsIterator.bind(this),this._sortEvents=this._sortEvents.bind(this),this._reduceGroupsIterator=this._reduceGroupsIterator.bind(this)},methods:{_onInit:function(){this.params.from&&(this.dateFrom=Jane.Date.LocalDate.parseDate(this.params.from)),this.params.to&&(this.dateTo=Jane.Date.LocalDate.parseDate(this.params.to),this.dateTo.setHours(23,59,59))},getRequest:function(){if(this.isValid())return this;if(this.params.group)return this;if(!this.dateFrom||!this.dateTo)return this;var e=ns.Model.get("get-group-user-events");return e.addModel(this),e},extractData:function(e){var t=this._extractData(e);return!t&&this.data&&(t=this.data,t._lastData=!0),t||{events:[]}},hasDataChanged:function(e){return(!e||!e._lastData)&&Boolean(e)},preprocessData:function(e){return e._lastData?e:this.params.group?(e.events=_.map(e.events,this._mapEventsCommonIterator),e):(Array.isArray(e.events)?e.ranges=this.createGroupsOfEvents(e.events):Jane.ErrorLog.send({errorType:"HandlerError",name:"get-user-events",reason:"calendar_get-user-events_failed"}),e)},_setUpdateTimer:function(){var e=this;this.params.group||(this._updateTimer&&(clearTimeout(this._updateTimer),this._updateTimer=null),this._updateTimer=setTimeout((function(){e._updateTimer=null,e.isValid()&&(e.invalidate(),e.atrigger("daria:mGetUserEvents:update"))}),this.info[this.isLastData()?"maxStaleAge":"maxAge"]))},getEventsFromRange:function(e,t){var n=e.getTime(),i=t.getTime();return _.filter(this.get(".events"),(function(e){var t=e.startDate.getTime(),r=e.endDate.getTime();return!(n>r||i<t)}))},setDataFromEvents:function(e){var t=e.getEventsFromRange(this.dateFrom,this.dateTo);return this.setData({events:t})},isLastData:function(){return Boolean(this.get("._lastData"))},createGroupsOfEvents:function(e){return _(e).chain().map(this._mapEventsCommonIterator).map(this._mapEventsIterator).sortBy(this._sortEvents).reduce(this._reduceGroupsIterator,[]).value()},_getSizeOfRange:function(e,t){var n=(t.getTime()-e.getTime())/Jane.Date.HOUR;return Number(n.toFixed(2))},_sortEvents:function(e){return e.startDate.getTime()},_findGroupIndex:function(e,t){var n=e.startDate.getTime(),i=e.viewEndDate.getTime(),r=t.startDate.getTime(),o=t.viewEndDate.getTime();return!(i<=r||n>=o)},_reduceGroupsIterator:function(e,t){var n=_.findIndex(e,this._findGroupIndex.bind(this,t)),i=e[n];return i||(i={events:[]},e.push(i)),i.events.push(t),i.startDate=i.startDate?i.startDate.getTime()>t.startDate.getTime()?t.startDate:i.startDate:t.startDate,i.endDate=i.endDate&&i.endDate.getTime()>t.endDate.getTime()?i.endDate:t.endDate,_.assign(i,this._createIntervalOptions(i.startDate,i.endDate)),e},_mapEventsCommonIterator:function(e){var t=Jane.Date.LocalDate.parseISOTime(e.startTs),n=Jane.Date.LocalDate.parseISOTime(e.endTs);return _.assign({},e,{startDate:t,endDate:n})},_mapEventsIterator:function(e){return _.assign({},e,this._createIntervalOptions(e.startDate,e.endDate))},_createIntervalOptions:function(e,t){var n,i,r=this._getSizeOfRange(e,t);r<this._minimalViewInterval?(i=this._minimalViewInterval,n=Jane.Date.clone(e),n.setMinutes(e.getMinutes()+this._minimalViewTime)):(i=r,n=Jane.Date.clone(t));var o=Jane.Date.getHours(e),s=o,a=Jane.Date.clone(e),c=Jane.Date.clone(n),l=!0,u=!0;return this.dateTo&&this.dateTo.getTime()<n.getTime()&&(c=Jane.Date.clone(this.dateTo),l=!1),this.dateFrom&&this.dateFrom.getTime()>e.getTime()&&(a=Jane.Date.clone(this.dateFrom),u=!1,s=0),{intervalInHours:r,viewEndDate:n,viewIntervalInHours:i,startInHours:o,startInRange:s,viewIntervalInRange:this._getSizeOfRange(a,c),isFinishedInRange:l,isStartedInRange:u,stringDate:Jane.Date.getDaysInterval(e,t),startStringHour:Jane.Date.format("%Date_HM__colon",e),endStringHour:Jane.Date.format("%Date_HM__colon",t),startDay:Jane.Date.format("%F",e)}}}},ns.ModelArmour)},function(e,t){ns.Model.define("head-user-state",{events:{"ns-model-init":"_onInit"},methods:{LS_ITEM_NAME:"newLettersInMA",_onInit:function(){this.setData({newLettersInMA:Boolean(Daria.LS.getItem("newLettersInMA"))}),window.addEventListener("storage",function(e){if(e&&"newLettersInMA"===e.key){var t=Daria.LS.getItem(this.LS_ITEM_NAME);this.setNewLettersInMA(t)}}.bind(this),!1)},hasNewLettersInMA:function(){return this.get(".newLettersInMA")},setNewLettersInMA:function(e){this.setIfChanged(".newLettersInMA",e),e?Daria.LS.setItem(this.LS_ITEM_NAME,"true"):Daria.LS.removeItem(this.LS_ITEM_NAME)}}},ns.ModelStatic)},function(e,t,n){function i(e){return s(e)||o(e)||r()}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function o(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function s(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}!(function(){function e(e){var t=e.prefix,n=e.defaultPostfix,r=e.getPostfix,o=e.args;return t+(r.apply(void 0,i(o))||n||"")}function t(t){return e({prefix:"boot--Yandex_",defaultPostfix:"ru",getPostfix:function(e){return-1===["ru","uk","kk","be"].indexOf(e)&&"en"},args:[t]})}function r(t,n){return e({prefix:"boot--Mail".concat(n?"-logoaas":"","_"),defaultPostfix:"ru",getPostfix:function(e){return-1!==["uk","kk","be"].indexOf(e)?"be":"ru"!==e?"en":void 0},args:[t]})}var o=n(2079);ns.Model.define("ws-header-data"),ns.Model.define("header-logo-data",{params:{},methods:{request:function(){return Daria.hasFeature("workspace-header")?this._setWSHeaderData():Daria.IS_CORP?this._setCorpHeaderData():this._setProdHeaderData()},_getLogoData:function(e){e=e||{};var n=Daria.Config,i=n.locale,o=n["www-url"];return n.pddDomain&&n["pdd-logo"]&&!Daria.is3pane()&&(o="http://".concat(n.pddDomain)),Object.assign({href:o,mailIcon:r(i,e.src),yandexIcon:t(i),mailboxCheckHref:"#inbox"},e)},_setWSHeaderData:function(){return ns.request.fetchModels([ns.Model.get("ws-header-data")]).then((function(e){var t=e.models[0],n=this.extractError(t);if(n)throw n;ns.request.extractModel(this,t);var i=this.get(".logo")||{};this.set(".logo",this._getLogoData(i))}),this).fail(this._setProdHeaderData,this)},_setCorpHeaderData:function(){var e=this,t=this._getCorpDropdownServices(),n=this._getLogoData();return vow.Promise.resolve().then((function(){e.setData({dropdownServices:t,logo:n})}))},_setProdHeaderData:function(){var e=this,t=this._getProdDropdownServices(),n=this._getLogoData();return vow.Promise.resolve().then((function(){e.setData({dropdownServices:t,logo:n})}))},_getCorpDropdownServices:function(){return{services:o(Daria.IS_CORP,Daria.Config.locale)}},_getProdDropdownServices:function(){var e=o(Daria.IS_CORP,Daria.Config.locale),t=ns.Model.get("index-data").get(".tabs");t=t.head.concat(t.more);for(var n=e.slice(0,2),i=0;i<e.length;i++){var r=e[i];if(!(["mail","search"].indexOf(r.id)>-1))for(var s=0;s<t.length;s++){var a=t[s];a.separator||(a.id&&"all_services"===a.id?this.servicesAll=a:a.id&&a.id===r.id&&(r.href=a.href,n.push(r)))}}return{services:n,servicesAll:this.servicesAll||{}}}}},ns.Model)})()},function(e,t,n){"use strict";function i(e,t){return"mail--Service_stub_"+e+"_"+t}e.exports=function(e,t){return e?[{id:"mail-corp",href:Daria.Config["mail-url"],content:i18n("%ServiceTabs_mail"),icon:"mail--Service_mail-corp"},{href:Daria.Config["calendar-url"],content:i18n("%Tab_calendar"),icon:"mail--Service_calendar"},{href:Daria.Config["q-url"],content:i18n("%ServiceTabs_q"),icon:"mail--Service_q"},{href:Daria.Config["calendar-url"]+"/invite",content:i18n("%Tab_invite"),icon:i("invite",t)},{href:Daria.Config["wiki-url"],content:i18n("%ServiceTabs_wiki"),icon:"mail--Service_wiki"},{href:Daria.Config["staff-host"],content:i18n("%ServiceTabs_staff"),icon:"mail--Service_people"},{href:Daria.Config["startrek-url"],content:i18n("%ServiceTabs_startrek"),icon:"mail--Service_startrek"},{href:Daria.Config["diary-url"],content:i18n("%ServiceTabs_diary"),icon:i("diary",t)},{href:Daria.Config["idm-url"],content:i18n("%ServiceTabs_agranat"),icon:i("idm",t)},{href:Daria.Config["jhist-url"],content:i18n("%ServiceTabs_jabber"),icon:i("jabber",t)},{href:Daria.Config["golem-url"],content:i18n("%ServiceTabs_admins"),icon:i("golem",t)},{href:Daria.Config["abc-url"],content:i18n("%ServiceTabs_abc"),icon:"mail--Service_stub_A"},{href:Daria.Config["libra-url"],content:i18n("%ServiceTabs_libra"),icon:i("lib",t)},{href:Daria.Config["doc-url"],content:i18n("%ServiceTabs_doc"),icon:i("doc",t)},{href:Daria.Config["lego-url"],content:i18n("%ServiceTabs_lego"),icon:i("lego",t)},{href:Daria.Config["magazine-url"],content:i18n("%ServiceTabs_magazine"),icon:i("magazine",t)},{href:Daria.Config["maillist-url"],content:i18n("%ServiceTabs_maillists"),icon:i("ml",t)},{href:Daria.Config["otrs-url"],content:i18n("%ServiceTabs_otrs"),icon:i("otrs",t)},{href:Daria.Config["stat-url"],content:i18n("%ServiceTabs_statface"),icon:i("stat",t)}]:[{id:"mail",href:Daria.Config["mail-url"],content:i18n("%ServiceTabs_mail"),icon:"mail--Service_mail-prod"},{id:"search",href:Daria.Config["www-url"],content:i18n("%ServiceTabs_www"),icon:"mail--Service_search_"+(-1!==["ru","uk","kk","by"].indexOf(t)?"ru":"en")},{id:"calendar",href:Daria.Config["calendar-url"],content:i18n("%Tab_calendar"),icon:"mail--Service_calendar"},{id:"disk",href:Daria.Config["disk-url"],content:i18n("%ServiceTabs_disk"),icon:"mail--Service_yadisk"},{id:"money",href:Daria.Config["money-url"],content:i18n("%ServiceTabs_money"),icon:"mail--Service_money"},{id:"images",href:Daria.Config["images-url"],content:i18n("%ServiceTabs_images"),icon:"mail--Service_images"},{id:"news",href:Daria.Config["news-url"],content:i18n("%ServiceTabs_news"),icon:"mail--Service_news"},{id:"maps",href:Daria.Config["maps-url"],content:i18n("%ServiceTabs_maps"),icon:"mail--Service_maps"},{id:"market",href:Daria.Config["market-url"],content:i18n("%ServiceTabs_market"),icon:"mail--Service_market"},{id:"pogoda",href:Daria.Config["weather-url"],content:i18n("%ServiceTabs_weather"),icon:"mail--Service_pogoda"},{id:"tv",href:Daria.Config["tv-url"],content:i18n("%ServiceTabs_tv"),icon:"mail--Service_tv"},{id:"music",href:Daria.Config["music-url"],content:i18n("%ServiceTabs_music"),icon:"mail--Service_music"},{id:"afisha",href:Daria.Config["afisha-url"],content:i18n("%ServiceTabs_afisha"),icon:"mail--Service_afisha"},{id:"browser",href:Daria.Config["browser-url"],content:i18n("%ServiceTabs_browser"),icon:"mail--Service_browser"},{id:"metrika",href:Daria.Config["metrika-url"],content:i18n("%ServiceTabs_metrika"),icon:"mail--Service_metrika"},{id:"direct",href:Daria.Config["direct-url"],content:i18n("%ServiceTabs_direct"),icon:"mail--Service_direct"},{id:"fotki",href:Daria.Config["fotki-url"],content:i18n("%ServiceTabs_fotki"),icon:"mail--Service_fotki"}]}},function(e,t){ns.Model.define("is-yandex-user",{params:{email:null}})},function(e,t){!(function(e){for(var t={ru:{abbr:"ru",short:"Ru",name:"Русский","date-format":"%d %h. %Y в %H:%M",locale:"ru_RU.UTF-8",locale_short:"ru_RU"},uk:{abbr:"uk",short:"Ua",name:"Українська","date-format":"%d %h. %Y о %H:%M",locale:"uk_UA.UTF-8",locale_short:"uk_UA"},az:{abbr:"az",short:"Az",name:"Azərbaycan","date-format":"%d %h. %Y в %H:%M",locale:"az_AZ.UTF-8",locale_short:"az_AZ"},tt:{abbr:"tt",short:"Tat",name:"Татарча","date-format":"%d %h. %Y %H:%M",locale:"tt_RU.UTF-8",locale_short:"tt_RU"},en:{abbr:"en",short:"En",name:"English","date-format":"%h %d, %Y at %H:%M",locale:"en_US.UTF-8",locale_short:"en_US"},tr:{abbr:"tr",short:"Tr",name:"Türkçe","date-format":"%d %h. %Y о %H:%M",locale:"tr_TR.UTF-8",locale_short:"tr_TR"},be:{abbr:"be",short:"By",name:"Беларуская","date-format":"%d %h. %Y о %H:%M",locale:"be_BE.UTF-8",locale_short:"be_BE"},kk:{abbr:"kk",short:"Kz",name:"Қазақ","date-format":"%d %h. %Y о %H:%M",locale:"kk_KK.UTF-8",locale_short:"kk_KK"},ka:{abbr:"ka",short:"Geo",name:"ქართული","date-format":"%d %h. %Y о %H:%M",locale:"ka_KA.UTF-8",locale_short:"ka_KA"},ro:{abbr:"ro",short:"Ro",name:"Română","date-format":"%d %h. %Y о %H:%M",locale:"ro_RO.UTF-8",locale_short:"ro_RO"},hy:{abbr:"hy",short:"Arm",name:"Հայերեն","date-format":"%d %h. %Y о %H:%M",locale:"hy_HY.UTF-8",locale_short:"hy_HY"}},n=[],i=0,r=0;i<e.length;i++){var o=t[e[i]];o&&(n[r++]=o)}ns.Model.define("languages",{events:{"ns-model-init":function(){this.setData({languages:{lang:n}})}}},ns.ModelStatic)})(Daria.locales)},function(e,t){ns.Model.define("message-failed",{events:{"ns-model-init":"_onInit"},methods:{_onInit:function(){this.setData({})},hasMid:function(e){return this.data.hasOwnProperty(e)},setMid:function(e){e&&(this.data[e]=!0)},removeMid:function(e){delete this.data[e]}}},ns.ModelStatic)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(325),r=n(394),o=n(913);!(function(){ns.Model.define("message-body",{params:{ids:null,is_spam:!1,hid:null,raw:!1,frequency:(function(){return"ru"===Daria.Config.locale&&Daria.hasFeature("web_email-classification")?_.get(Daria.getFeatureParams("web_email-classification"),"frequency",.1):0})(),draft:!1},calculateParamsForMessageBody:function(e){var t=Array.isArray(e.ids)&&e.ids.length>1&&"forward"===e.oper;return!e.ids||t?null:_.extend({},e,{draft:Boolean(!e.oper&&e.ids)})},methods:{_bodyNodesCache:{},_bodyNodesCacheLifetime:3e5,_destroyNodesCacheTimer:null,exists:function(){if(this.status===this.STATUS.ERROR){var e=this.getError();return!(e&&String(e.code)===Daria.WMI.ERROR_CODES.NO_SUCH_MESSAGE)}return!0},extractError:function(e){if(e){var t=no.jpath(".error.code",e);return String(t)===Daria.WMI.ERROR_CODES.NO_SUCH_MESSAGE&&(this.canRequest=no.False),e.error}},canRequest:function(){return!ns.Model.get("message-failed").hasMid(this.params.ids)},preprocessData:function(e){var t=this.params;this._cancelDestroyNodesCacheTimer(),this._destroyNodesCache(),this.setIconInfo(e);var n=ns.Model.get("message",{ids:t.ids});e["is-spam"]=n.isSpam(),e["is-support"]=n.isYaSupport(),e["is-noreply-notification"]=n.isNoreplyNotification(),(e["is-spam"]||e.phishing)&&(e["hide-imgs"]=!0);var i=e.attachment;return i&&i.forEach((function(e){var t=e.name,n=Daria.splitName(t);e.narod?(e.filename=n[0],e.fileext=n[1]?"."+n[1]:"",e["name-uri-encoded"]=encodeURIComponent(t),e["preview-src"]=e.preview):".wdp"===e.fileext&&delete e["preview-supported"];var i=Daria.splitAttachmentName(t);e.nameprefix=i.prefix,e.namesuffix=i.suffix,e.nameext=(n[1]||"").toLowerCase()})),e.info&&e.info.date&&(e.info.date.view=Daria.MessageTime.getFormattedTime(e.info.date.timestamp)),e},hasRelativeTime:function(){return this.get(".info.date.view.isRelative")},updateTime:function(){var e=Daria.MessageTime.getFormattedTime(this.get(".info.date.timestamp"));this.set(".info.date.view",e)},setIconInfo:function(e){(jpath(e,".attachment")[0]||[]).forEach((function(e){var t=Daria.getExtensionInfo(e.name);t.icon&&(e.icon=t.icon)}))},getEmailInfoParams:function(){var e=this.select('.info.field[.type=="from"]')[0],t=e&&e.email&&e.email.toLowerCase();return t&&Jane.FormValidation.checkEmail(t)?{ref:e.ref,email:t}:null},getEmailRef:function(e){return this.select('.info.field[.email=="'+e+'"].ref')[0]},parseDate:function(e){var t=String(e).match(/^(\d+)-(\d+)-(\d+) (\d+):(\d+):(\d+)$/);return t?new Date(parseInt(t[1],10),parseInt(t[2],10)-1,parseInt(t[3],10),parseInt(t[4],10),parseInt(t[5],10),parseInt(t[6],10)).getTime():null},getSubtype:function(){var e=this.get(".body.subtype");return e&&e[0]},getAddressField:function(e,t){return Daria.formatContacts(this.select('.info.field[.type == "'+e+'"]'),t)},filterRecipients:function(e){var t=ns.Model.get("account-information").getAllUserEmails().map((function(e){return e.replace(/-/g,".").toLowerCase()})),n=function(e){var n=Daria.Recipients.getRecipientFromCache(e.name,e.email);return(!n||!n.isSelf)&&_.indexOf(t,e.email.replace(/-/g,".").toLowerCase())<0};return _.filter(this.getFieldsByType(e),n)},getRecipients:function(e,t){var n;n=t?function(e){return e}:function(e){return Daria.formatContacts(e,!1)};var i=this.filterRecipients("reply-to");i.length||(i=this.filterRecipients("from")),i.length&&!e||(i=i.concat(this.filterRecipients("to"))),i.length||(i=this.getFieldsByType("from")),i=_.uniq(i,"email");var r=e?this.filterRecipients("cc"):[];return{to:n(i),cc:n(r)}},allowedReplyAll:function(){var e=this.getRecipients(!0,!0),t=_(e).chain().values().flatten().filter("email").uniq("email").value(),n=this.getFieldsByType("to").pop();return n&&Daria.email.isCA(n.email)&&_.remove(t,(function(e){return e.email===n.email})),t.length>1},participantsCount:function(){return this.filterRecipients("to").length+this.filterRecipients("cc").length},getFieldsByType:function(e){return this.select('.info.field[.type == "'+e+'"]')},recipientsCount:function(){return this.getFieldsByType("to").length+this.getFieldsByType("cc").length+this.getFieldsByType("bcc").length},hasTooManyRecipients:function(){return this.recipientsCount()>=10},getInfo:function(e){return this.select(".info."+e)},getMessageId:function(){return this.get(".info.message-id")||null},getInReplyTo:function(){return this.get(".info.in-reply-to")||null},getReferences:function(){return this.get(".info.references")||null},getAttachments:function(){return this.get(".attachment")||[]},hasInlineAttachments:function(){var e=this.getData();return!!e&&jpath(e,".attachment[!.narod]")>0},_COLLECTOR_MSG_STIDS:["102.66466005.241046198820547232969001058","102.66466005.157526963565013225811429732","102.66466005.134090406637961488505874094","102.66466005.776572722362711757375188712","102.66466005.856799731918248093078980991"],getComposeHTML:function(){var e=this.get(".body"),t=[];if(Array.isArray(e))for(var n=0,i=e.length;n<i;n++)t.push(e[n].content);return t},getHTML:function(e){e=e||{},e.ids=this.params.ids;var t=this.getData();if(!t||t.error)return Jane.ErrorLog.send({errorType:"message-body.error",params:JSON.stringify(e),msgBodyError:t&&t.error}),Jane.tt("message:message-body-error");if(this.isCollectorMessage())return Jane.tt("message:message-body-collector-msg",{lang:this.getDefaultLangId()});this._resetDestroyNodesCacheTimer();var n=Daria.getParamsHash(e),i=Daria.getParamsHash(Object.assign({interactive:!0},e));if(this._bodyNodesCache[i]){var r=this._bodyNodesCache[i].cloneNode(!0);return Daria.MessageProcess.interactiveRuntime.transform(r,this.getSTID()),r}if(this._bodyNodesCache[n])return this._bodyNodesCache[n].cloneNode(!0);var o=document.createElement("div"),s=["mail-Message-Body-Content"],a=t.body||[],c=a[0];c&&"plain"===c.subtype&&(s.push("mail-Message-Body-Content_plain"),ns.Model.get("settings").isSet("use_monospace_in_text")&&s.push("mail-Message-Body-Content_monospace")),o.className=s.join(" ");for(var l,u,d,f=0,g=a.length;f<g;f++)for(l=this._processBody(a[f],e),u=0,d=l.length;u<d;u++)o.appendChild(l[u]);if(Daria.hasFeature("web_interactive-email")&&Daria.MessageProcess.interactiveRuntime.isInteractive(o)){this._bodyNodesCache[i]=o;var p=this._bodyNodesCache[i].cloneNode(!0);return Daria.MessageProcess.interactiveRuntime.transform(p,this.getSTID()),p}return this._bodyNodesCache[n]=o,this._bodyNodesCache[n].cloneNode(!0)},_destroyNodesCache:function(){this._bodyNodesCache={}},_cancelDestroyNodesCacheTimer:function(){clearTimeout(this._destroyNodesCacheTimer)},_resetDestroyNodesCacheTimer:function(){this._cancelDestroyNodesCacheTimer(),this._destroyNodesCacheTimer=setTimeout(this._destroyNodesCache.bind(this),this._bodyNodesCacheLifetime)},getDefaultLangId:function(){switch(Daria.Config.locale){case"ru":case"be":return 1;case"en":return 2;case"uk":return 5;case"tr":return 44;default:return 0}},_processBody:function(e,t){var n=Daria.MessageProcess.processBody(e.content,t),i=$(n).contents().get(),r="";return"message"===e.type&&"delivery-status"===e.subtype&&(r="<p>"+i18n("%Message_Delivery_Status")+"</p>"),$(r).get().concat(i)},isCollectorMessage:function(){var e=this.getSTID();return!!e&&this._COLLECTOR_MSG_STIDS.indexOf(e)>-1},getSTID:function(){return this.get(".info.stid")},getRawFirstBody:function(){return this.get(".body[0].content")||""},getReplyBody:function(e,t,n){var i=ns.Model.get("settings"),r="";if(i.isSet("enable_quoting")&&(r=this.getQuoteContent(e)),!n){var o=Daria.Translate.getLangByMid(this.params.ids);o||(o=Daria.Translate.defineLanguage(this.getComposeHTML())),r=Daria.signs.appendToBody(r,e,null,t,o)}return r},getQuoteContent:function(e){var t=ns.Model.get("message",{ids:this.params.ids}),n=t.getDateTime(),i=t.getAddressField("from").replace(/\\"/g,'"'),r=this.getComposeHTML();return"html"===e?(r=Daria.Html2Text.quoteHtml(r),"<div><br/></div><div><br/></div><div>"+n+", "+_.escape(i)+":</div>"+r):(r=Daria.Html2Text.html2text(r),r=Daria.Html2Text.quoteText(r),"\n\n"+n+", "+i+":\n"+r)},getForwardBody:function(e,t){var n=ns.Model.get("message",{ids:this.params.ids}),i="",r=n.getDateTime(),o=n.getAddressField("from").replace(/\\"/g,'"'),s=this.getComposeHTML(),a=Daria.Translate.getLangByMid(this.params.ids)||Daria.Translate.defineLanguage(s);return s='<div class="normalize">'+s+"</div>","html"===e?(i+="<div><br/></div><div><br/></div><div>-------- "+i18n("%Compose_Forward_Start")+" --------</div>",i+="<div>"+r+", "+_.escape(o)+":</div><div><br/></div>",i+=s,i+="<div><br/></div><div>-------- "+i18n("%Compose_Forward_End")+" --------</div>"):(i+="\n\n-------- "+i18n("%Compose_Forward_Start")+" --------",i+="\n"+r+", "+o+":\n\n",i+=Daria.Html2Text.html2text(s),i+="\n-------- "+i18n("%Compose_Forward_End")+" --------"),Daria.signs.appendToBody(i,e,!0,t,a)},getDraftBody:function(e){var t;if(e&&(t=$.makeArray(this.get('.body[.subtype == "'+e+'" && .name == ""]')||[])[0]),t||(t=this.getFirstBody()),!t)return"";var n=t.content,i=t.subtype;return"plain"===e&&"html"===i?n=Daria.Html2Text.html2text(n):"html"===e&&"plain"===i&&(n=n.replace(/\u0020\u0020/g,"  "),n=_.unescape(n),n=Daria.Html2Text.text2html(n)),"plain"===e&&(n=_.unescape(n)),n},_getLocationsData:function(){var e=this.get(".facts.addr");return _.flatten(e).filter((function(e){return Boolean(e)}))},getInvalidLocations:function(){return _.difference(this._getLocationsData(),this.getLocations())},getLocations:function(){return _(this._getLocationsData()).filter((function(e){return e.weight>=40&&"string"==typeof e.geo_addr})).valueOf()},hasPGP:function(){if(!this.isValid())return!1;var e=this.getFirstNonEmptyBodyContent()||"";return e.indexOf("wmi-pgp")>-1||e.indexOf("-----BEGIN PGP MESSAGE-----")>-1},getPGP:function(){var e={ids:this.params.ids,raw:!0},t=$.Deferred();return ns.request("message-body",e).then((function(e){var n=e[0],i=n.getFirstNonEmptyBodyContent()||"",r=n.getFieldsByType("from")[0],o=n.getFieldsByType("to")[0];t.resolve({from:{email:r.email,name:r.name},message:i.trim(),to:{email:o.email,name:o.name}})}),(function(){t.reject()})),t},getCalendarEvent:function(){return this.select(".facts.events.CalendarEvent")[0]},getCalendarICS:function(){return this.select(".calendars.calendar.hid")[0]},fetch:function(e){return e=no.extend(this.params,e||{}),ns.forcedRequest(this.id,e)},isLoaded:function(){return Boolean(this.get(".body"))},hasListUnsubscribe:function(){return Boolean(this.getInfo("list-unsubscribe")[0])},hasFactUnsubscribe:function(){return Boolean(jpath(this.getData(),".body[0].facts.unsubscribe.url")[0])},getUnsubscribeOptions:function(){function e(e,t){if(e){var n=$.url(e);n.Proto.match(/^https?$/gi)&&n.host&&(o[n.Proto+(t?"-"+t:"")]=e)}}var t,n=this.getInfo("list-unsubscribe")[0],i=this.get(".body.facts.unsubscribe"),r="<((mailto|https?):[^>]+)>",o={},s=n.match(new RegExp(r,"gi"));if(s)for(var a=0;a<s.length;a++){t=new RegExp(r,"i").exec(s[a]);var c=t[2]+"-header";o[c]||(o[c]=t[1])}else Jane.FormValidation.reEmail.test(n)?o["mailto-header"]="mailto:"+n:e(n,"header");if(i&&i.length){var l=jpath(i[0],".url");l.length&&e(l[0],"body")}return o},fromComposeMessage:function(e,t){if(this.isValid())return this;var n=ns.Model.get("message",{ids:t}),i=ns.Model.get("message-body",{ids:t}),r=e.get(".sentMessageId"),o=e.get(".from_mailbox"),s=[{email:o,name:e.get(".from_name"),ref:i.getEmailRef(o),type:"from"}];s=s.concat(e.formatContacts("to",i),e.formatContacts("cc",i),e.formatContacts("bcc",i));var a=e.getSendMessage();return e.isHtmlType()||(a=Daria.Html2Text.text2html(a)),this.setData({fake:!0,body:[{type:"text",subtype:e.get(".ttype"),content:a}],info:{date:n.createMessageCurrentDate(),field:s,"message-id":r}})},isRecipient:function(){var e=ns.Model.get("account-information"),t=this.getFieldsByType("to").concat(this.getFieldsByType("cc"),this.getFieldsByType("bcc"));return _.some(t,(function(t){return e.isMyEmail(t.email)}))},hasPhishingBody:function(){return(this.get(".body")||[]).some((function(e){return Boolean(e.phishing)}))},getFirstBody:function(){return(this.get(".body")||[])[0]},getFirstNonEmptyBodyContent:function(){return(this.get(".body.content")||[])[0]},setError:function(){this.scenarioManager.hasActiveScenario(i.e)&&this.scenarioManager.getActiveScenario(i.e).logError(r.c),this.scenarioManager.hasActiveScenario(i.f)&&this.scenarioManager.getActiveScenario(i.f).logError(o.a),ns.Model.prototype.setError.apply(this,arguments)}}},"model-with-scenario-manager-mixin")})()},function(e,t){ns.Model.define("message",{events:{"ns-model-init":"_onInit"},params:{ids:null,hid:null},methods:{_threadKeyPrefix:"t",_readInfo:{},_countInfo:{},INVALID_FOLDERS_SYMBOLS_FOR_PIN:["spam","trash"],_onInit:function(){this._checkIds(),this.params.ids&&this.params.ids[0]===this._threadKeyPrefix&&this.setData({FAKE_THREAD_DATA:!0})},_checkIds:function(){if(!this.params.ids)throw new Error("Can't create Daria.mMessage without ids")},preprocessData:function(e){if(e.date&&e.date.chunks){var t=e.date.chunks;e.date.ts=new Date(t.year,t.month,t.date,t.hours,t.minutes).getTime(),e.date.view=Daria.MessageTime.getFormattedTime(e.date.timestamp)}var n=e.subject;n&&"No subject"!==n||(e.subject=i18n("%Без_темы"));var i=e.recipients;if(i){for(var r in i)Daria.Recipients.cacheRecipient(i[r]);delete e.recipients}return e},hasRelativeTime:function(){return this.get(".date.view.isRelative")},updateTime:function(){var e=Daria.MessageTime.getFormattedTime(this.get(".date.timestamp"));this.set(".date.view",e)},hasDataChanged:function(e){var t=this.data;if(!t||!this.hasRealData())return!0;if(e.__prevent_update)return!1;var n=[];return t.count!==e.count&&n.push({jpath:".count",value:e.count}),t.fid!==e.fid&&n.push({jpath:".fid",value:e.fid}),t.tabId!==e.tabId&&n.push({jpath:".tabId",value:e.tabId}),t.tid!==e.tid&&n.push({jpath:".tid",value:e.tid}),t.firstline!==e.firstline&&n.push({jpath:".firstline",value:e.firstline}),t.new!==e.new&&n.push({jpath:".new",value:e.new}),_.isEqual(t.flags,e.flags)||n.push({jpath:".flags",value:e.flags}),_.isEqual(t.lid,e.lid)||n.push({jpath:".lid",value:e.lid}),_.isEqual(t.field,e.field)||n.push({jpath:".field",value:e.field}),_.isEqual(t.last_mid,e.last_mid)||n.push({jpath:".last_mid",value:e.last_mid}),e.date&&!_.isEqual(t.date,e.date)&&n.push({jpath:".date",value:_.extend({},e.date,{view:Daria.MessageTime.getFormattedTime(e.date.timestamp)})}),n.forEach((function(e){this.set(e.jpath,e.value)}),this),this.isThread()&&(n.length||t.thread_scn!==e.thread_scn)&&ns.forcedRequest([{id:"messages",params:{thread_id:t.tid}}]),!1},exists:function(){if(this.status===this.STATUS.ERROR){var e=this.getError();return!(e&&String(e.code)===Daria.WMI.ERROR_CODES.NO_SUCH_MESSAGE)}return!0},extractError:function(e){if(e){var t=no.jpath(".error.code",e);return String(t)===Daria.WMI.ERROR_CODES.NO_SUCH_MESSAGE&&(this.canRequest=no.False),e.error}},canRequest:function(){return!ns.Model.get("message-failed").hasMid(this.params.ids)},isDraftLike:function(){return!this.isThread()&&this.inFolderBySymbol(["outbox","draft","template"])},isExternalLike:function(){return!this.inFolderBySymbol(["draft","outbox","sent","template"])},isOutcomeMessage:function(){return this.inFolderBySymbol(["sent","outbox"])},canReply:function(){return!this.inFolderBySymbol(["spam","trash","draft","sent"])},canReplyQR:function(){return!this.inFolderBySymbol(["spam","trash","draft"])},isTemplate:function(){return!this.isThread()&&this.inFolderBySymbol("template")},isThread:function(){return this.isThreadModel()},isMessageThread:function(){return this.isThreadModel()&&1===this.getThreadCount()},getMessageThreadMid:function(){if(!this.isMessageThread())return this.params.ids;var e=this.getThreadMessages(),t=e.models[0];return t?t.params.ids:this.params.ids.slice(1)},isThreadModel:function(){return this.params.ids&&this.params.ids[0]===this._threadKeyPrefix},getSocialLabel:function(){var e=this.get(".dlid");return e||(e=this.get(".dtype.name")),e},getFolderId:function(){return this.get(".fid")||null},getTabId:function(){return this.get(".tabId")||null},getMessageFieldName:function(){var e="from",t=ns.Model.get("folders"),n=["sent","draft","outbox","template"];return t.isFolder(ns.page.current.params.current_folder,n)&&(e="to"),ns.page.current.params.search&&t.isFolder(ns.page.current.params.fid,["sent"])&&(e="to"),e},isNew:function(){return Boolean(this.get(".new"))},isSpam:function(){var e=this.getFolderId();return ns.Model.get("folders").isFolder(e,"spam")},isNoreplyNotification:function(){var e=ns.Model.get("labels").getLabelByName("SystMetkaWJDT:NOTIFY");return e&&this.hasLabel(e.lid)},hasAttachment:function(){return Boolean(this.get(".flags.attachment"))},hasLabel:function(e){var t=this.getData();return Boolean(t&&Array.isArray(t.lid)&&t.lid.indexOf(e)>-1)},hasLabelWithSymbolicName:function(e){var t=ns.Model.get("labels").getLabelBySymbolicName(e);return Boolean(t&&this.hasLabel(t.lid))},inFolder:function(e){var t=this.get(".fid");return!(!e||!t||t!==e)},inFolderBySymbol:function(e){var t=this.getFolderId();return ns.Model.get("folders").isFolder(t,e)},isIntoThread:function(){return this.getThreadMessage().hasRealData()},getThreadId:function(){return this.get(".tid")},getUrl:function(){var e=this.inFolder(ns.Model.get("folders").getFidBySymbol("draft"));return Daria.isMessagePage()&&Daria.is2pane()&&(e=!1),ns.router.generateUrl(e?"compose2":"message",{ids:this.get(".mid")})},getSOLabels:function(){return this.get(".type")},toMove:function(e){var t=e.tabId&&(this.getTabId()!==e.tabId||this.getFolderId()!==e.current_folder);return this.isThread()||t||this.getFolderId()!==e.current_folder},toDelete:function(e){return this.inFolderBySymbol("trash")||this.toMove(e)},toSpam:function(e){return this.toMove(e)},toNotspam:function(e){return this.toMove(e)},_grep:function(e,t,n,i){var r=[];if($.isArray(e))for(var o=0,s=e.length;o<s;o++)this[i](t+e[o],n)&&r.push(e[o]);return r},grep:function(e,t,n){var i=this._grep(e.mids,"",t,n),r=this._grep(e.tids,this._threadKeyPrefix,t,n);return!(!i[0]&&!r[0])&&{mids:i,tids:r}},label:function(e){var t=new Daria.MOPS.Opinfo,n=e.lid;if(!this._canLabel(n))return t;if(this._addLid(n),this.isThreadModel()){if(!e.onlyAdd)return this._correctThreadListLabel("label",e)}else{t.addAdjust(n,1),t.addMid(this.get(".mid"));var i=this.getThreadId(),r=ns.Model.get("message",{ids:i});r._addLid(n),r._correctThreadLidCount(n,1)}return t},unlabel:function(e){var t=new Daria.MOPS.Opinfo,n=e.lid;if(!this._canUnlabel(n))return t;if(this._removeLid(n),this.isThread())return this._correctThreadListLabel("unlabel",e);t.addAdjust(n,-1),t.addMid(this.get(".mid"));var i=this.getThreadId(),r=ns.Model.get("message",{ids:i});return 0===r._correctThreadLidCount(n,-1)&&r._removeLid(n),t},_hasLid:function(e){var t=_.clone(this.get(".lid"));return!(!e||!t)&&-1!==t.indexOf(e)},_canLabel:function(e){return!this._hasLid(e)||!!this.isThreadModel()&&((this.get(".lid_cnt")||{})[e]||0)!==this.getThreadCount()},_addLid:function(e){if(!this._hasLid(e)){var t=_.clone(this.get(".lid"))||[];t.push(e),this.set(".lid",t)}},_canUnlabel:function(e){return this._hasLid(e)},_removeLid:function(e){if(this._hasLid(e)){var t=_.clone(this.get(".lid"));Jane.Array.remove(t,e),this.set(".lid",t)}},toTemplate:function(){var e=ns.Model.get("folders"),t=this.getFolderId(),n=e.getFolderById(t);return!(!n||!n.user&&!e.isFolder(t,["inbox"]))},mark:function(){var e=new Daria.MOPS.Opinfo,t=this.get(".new");if(t>0){if(this.set(".new",0),this.isThread())return this._correctThreadListMark("mark",-t);this._correctThreadMark("mark"),Daria.areFoldersTabsEnabled()&&this.isInTab()?e.addTabsAdjust(this.getTabId(),-t):e.addAdjust(this.getFolderId(),-t),e.addMid(this.get(".mid")),e.saveMid(this.get(".mid"))}return e},unmark:function(){var e=new Daria.MOPS.Opinfo,t=this.getThreadCount(),n=t-this.get(".new");if(n>0){if(this.set(".new",t),this.isThread())return this._correctThreadListMark("unmark",n);this._correctThreadMark("unmark"),Daria.areFoldersTabsEnabled()&&this.isInTab()?e.addTabsAdjust(this.getTabId(),n):e.addAdjust(this.getFolderId(),n),e.addMid(this.get(".mid")),e.saveMid(this.get(".mid"))}return e},toggleMark:function(){var e,t=this.isNew()?"mark":"unmark";return e=this.isThread()?this.getThreadMessagesCheckedModel(!0):this.getMessagesCheckedModel(!0),Daria.MOPS[t](e)},toggleMute:function(){var e=this.isMuted()?"unignore":"ignore";return Daria.MOPS[e]({tids:this.getThreadId()})},_correctThreadMark:function(e){var t=this.getThreadId(),n=ns.Model.get("message",{ids:t});if(n.data){var i=n.get(".new")||0,r=n.getThreadCount();"mark"===e?i--:i++,i=Math.max(i,0),i=Math.min(i,r),n.setIfChanged(".new",i)}},getThreadMessages:function(e){return _.isUndefined(e)&&(e=this.getThreadId()),ns.Model.get("messages",{thread_id:e})},getThreadMessage:function(e){if(_.isUndefined(e)&&(e=this.getThreadId()),e)return ns.Model.get("message",{ids:e})},_correctThreadListMark:function(e,t){var n=this.getThreadId(),i=this.getThreadMessages(n)[e]();return i.saveUnreadCounter(n,Math.abs(t)),i.saveAffectedMids(),i.checkTidAdjust(t,n),i},_correctThreadListLabel:function(e,t){var n=this.getThreadId(),i=this.getThreadMessages(n)[e](t),r=this.getThreadCount();return this._correctThreadLidCount(t.lid,"label"===e?r:-r),i.getModelsCount()!==r&&i.checkTidAdjust(NaN,n),i},_correctThreadLidCount:function(e,t){var n=this.getThreadCount(),i=this.get(".lid_cnt")||{};if(e){var r=i[e]||0,o=Daria.clamp(r+t,0,n);return i[e]=o,this.set(".lid_cnt",i),o}},getAddressField:function(e,t){var n=this.getFieldsByType(e);return Daria.formatContacts(n,t)},getToEmail:function(){if(!this.getData())return"";var e="",t=this.getFieldsByType("to"),n=ns.Model.get("account-information").getAllUserEmails();return $.each(t,(function(i){var r=t[i].email;if(!r)return!0;for(var o=0;o<n.length;o++)if(n[o].toLowerCase()===r.toLowerCase())return e=n[o],!1})),e},getReplyToEmail:function(){return this.getFieldsByType("reply-to")[0].email||""},getReplyToName:function(){return this.getFieldsByType("reply-to")[0].name||""},getToEmails:function(){var e=this.getFieldsByType("to");return $.map(e,(function(e){return e.email||null}))},getToNames:function(){var e=this.getFieldsByType("to");return $.map(e,(function(e){return e.name||null}))},getFromName:function(){var e=this.getFieldsByType("from")[0];return e&&e.name?e.name:""},getFromEmail:function(){var e=this.getFieldsByType("from")[0];return e&&e.email?e.email:""},getSubject:function(e){var t=this.getData();if(!t)return"";var n="";return!e&&t.subject_prefix&&(n=t.subject_prefix+" "),n+t.subject},getDate:function(){var e=this.get(".date.iso");return e?e.replace(/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})$/,"$3.$2.$1"):""},getTime:function(){var e=this.get(".date.iso");return e?e.replace(/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})$/,"$4:$5"):""},getDateTime:function(){return this.getDate()+", "+this.getTime()},getEmailRef:function(e){return this.select('.field[.email=="'+e+'"].ref')[0]},getSelectedInfo:function(e){var t,n,i,r,o=this._readInfo,s=this._countInfo,a=0,c=0;if(e.mids)for(t=0,n=e.mids.length;t<n;t++)i=e.mids[t],r=s[i],o[i]&&(a+=r),c+=r;if(e.tids)for(t=0,n=e.tids.length;t<n;t++)i=this._threadKeyPrefix+e.tids[t],r=s[i],o[i]&&(a+=r),c+=r;return{read:a,all:c}},isForward:function(){return/^Fwd:/.test(this.getSubject())},hasSocialLabels:function(){return Boolean(this.getSocialLID())},getSocialLID:function(){var e=_.flatten($.makeArray(this.select(".lid"))),t=e.length;if(t)for(var n=ns.Model.get("labels"),i=0;i<t;i++)if(n.isSocial(e[i]))return e[i];return null},COUPON_SERVICE_TYPES:[13,14],isCouponService:function(){var e=this.COUPON_SERVICE_TYPES;return _.intersection(e,this.get(".type")).length===e.length},CALENDAR_SERVICE_TYPE:42,isCalendarService:function(){return this.hasType(this.CALENDAR_SERVICE_TYPE)},isHuman:function(){return this.hasType(4)},hasType:function(e,t){var n=this.get(".type");_.isArray(e)||(e=[e]);var i="all";return t&&(i="any"),n&&_[i](e,(function(e){return _.contains(n,e)}))},updateThreadsUnreadCount:function(e,t){var n=[];for(var i in t){var r=this._threadKeyPrefix+i,o=this.getCache(r);if(o){var s,a=o.new||0;s="mark"===e?a-t[i].length:a+t[i].length,s=Math.max(0,s),this._readInfo[r]=0===s,s?o.new=s:delete o.new,("mark"===e&&0===s||"unmark"===e&&s>0)&&n.push(i)}}return n},getThreadCount:function(){return this.get(".count")},updateThreadCount:function(e){var t=this.getThreadCount();this.set(".count",t+e)},updateThreadInfo:function(e){if(!this.hasRealData())return!1;if(e.isNew()){var t=this.get(".new");this.set(".new",t+1)}e.isExternalLike()&&this.updateThreadContextInfo(e),this.updateThreadCount(1);var n=e.get(".lid"),i=this.get(".lid");i=_.uniq(i.concat(n)),this.set(".lid",i);var r=_.extend({},this.params,{fid:e.get(".fid")}),o=ns.Model.get("message-presentation",r);return o.fill(e),o.ensureOnDestroyBinded(this),!0},updateThreadContextInfo:function(e){this.set(".date",e.get(".date")),this.set(".fid",e.get(".fid")),this.set(".field",e.get(".field")),this.set(".firstline",e.getFirstline()),this.set(".last_mid",e.get(".mid")),this.set(".subject",e.getSubject(!0)),this.set(".subject_prefix",e.get(".subject_prefix")),this.set(".flags.attachment",e.hasAttachment())},uncheckThreadMessages:function(e){if(e=e||ns.Model.get("messages-checked"),this.isThread()){var t=this.getThreadMessages();_.forEach(t.models,(function(t){e.isChecked(t)&&e.check(t,!1)}))}},getEmails:function(){var e={},t=this.getData();if(t){var n=t.field;$.each(n,(function(t,n){var i=e[n.type]={},r=n.name,o=n.email;o&&(i.ref=n.ref,i.email=o),r&&(i.name=r)}))}return e},isYaSupport:function(){var e=ns.Model.get("labels").getLabelByName("yasupport");return!!e&&this.hasLabel(e.lid)},isBodyAutoExpand:function(){var e=this.getData();if(!e)return!1;var t=e.lid;if(!t||!t.length)return!1;for(var n,i=ns.Model.get("labels"),r=0,o=t.length,s=/^(vtnrf0roemru|vtnrf0habrahabr|vtnrf0livejournal)$/;r<o;r++)if((n=i.getLabelById(t[r]))&&s.test(n.name))return!0;return!1},getFieldsByType:function(e){return this.select('.field[.type == "'+e+'"]')},getFirstline:function(){return this.get(".firstline")||""},getMessageLink:function(){return ns.router.generateUrl("message",{ids:this.get(".mid")})},getMessagesCheckedModel:function(){var e=ns.Model.get("messages-checked",{mid:this.get(".mid")});return e.check(this,!0,{silent:!0}),e},getThreadMessagesCheckedModel:function(){if(this.isThread()){var e="all_"+this.get(".mid"),t=ns.Model.get("messages-checked",{mid:e}),n=this.getThreadMessages();return t.check(this,!0),_.each(n.models,(function(e){t.check(e,!0)})),t}return ns.Model.get("messages-checked")},isImportant:function(){var e=ns.Model.get("labels").getImportantLID();return this.hasLabel(e)},isPriority:function(){var e=ns.Model.get("labels").getPriorityLID();return Boolean(e&&this.hasLabel(e))},isPinned:function(){var e=ns.Model.get("labels").getPinnedLabel();return!!e&&this.hasLabel(e.lid)},isDelayed:function(){if(!this.inFolderBySymbol("outbox"))return!1;var e=ns.Model.get("labels").getDelayedMessageLabel();return!!e&&(!!this.hasLabel(e.lid)&&!((this.get(".date.ts")||this.get(".date.timestamp"))<Daria.now()))},getDelayedTime:function(){if(this.isDelayed())return this.get(".date.ts")||this.get(".date.timestamp")},move:function(e){var t=e.fid,n=e.tabId,i={current_folder:t,tabId:n};Daria.isAttachmentsTab()&&this.toSpam(i)?this.remove():this.toMove(i)?this.doMove(i):this.toDelete(i)&&this.remove();var r=new Daria.MOPS.Opinfo;return r.resetAdjust(),r.resetTabsAdjust(),r},moveToDrafts:function(){var e=this.params.ids,t=ns.Model.get("folders").getFidBySymbol("draft");return Daria.Xiva.moveMessageToFolder(e,t)},doMove:function(e){var t,n=e.current_folder,i=e.tabId,r=this,o=this.getThreadId(),s=this.get(".fid"),a=this.inFolderBySymbol(["trash"]),c=new Daria.MOPS.Opinfo,l=this.get(".lid"),u=this.getTabId(),d=this.isInTab();i?(this.set(".tabId",i),s!==n&&this.set(".fid",n)):s===n?s="":this.set(".fid",n);var f=this.inFolderBySymbol(["trash"]),g=this.inFolderBySymbol(["spam"]),p=this.getThreadMessages(),h=this.isThread();if(h?t=this:(t=ns.Model.get("message",{ids:o}),t.hasRealData()||(t=this)),f&&this.isNew()&&!h&&this.isIntoThread()&&t._correctThreadMark("mark"),p.isValid())if(h)p.models.forEach((function(e){i&&e.set(".tabId",i),e.inFolderBySymbol("sent")||e.set(".fid",n)}));else{var m=d&&s&&u&&!p.hasMessagesFromTab(s,u);if(m){var v=ns.Model.get("messages",{current_folder:s,tabId:u,threaded:"yes"});v.isValid()&&v.remove(t)}var _=s&&s!==n&&!p.hasMessagesFromFolder(s);if(_){var b=ns.Model.get("messages",{current_folder:s,threaded:"yes"});b.isValid()&&b.remove(t)}var y=(_||m)&&(g||f)&&t.isPinned();y&&ns.Model.traverse("messages",(function(e){"yes"===e.params.with_pins&&e.remove(t)}))}var S,w=ns.page.current.params.current_folder,k=ns.page.current.params.category,x=ns.page.current.params.tabId;f&&l&&(S={},l.forEach((function(e){S[e]=!0})));var M={};return ns.Model.traverse("messages",(function(e){if(k&&k===e.params.category&&(g||f)&&e.remove(r),r.isPinned())(g||f)&&e.remove(r);else{var c=e.params.tabId;d&&(c===u||x&&c===x&&u===x&&i!==x)?e.remove(r):i&&c===i?e.insertMessageBySort("yes"===e.params.threaded?t:r):e.params.current_folder===s||w&&e.params.current_folder===w&&n!==w?e.remove(r):e.params.current_folder===n&&("yes"===e.params.threaded?e.insertMessageBySort(t):e.insertMessageBySort(r))}var p=e.params.thread_id;if(f&&!h&&p===o){if(e.remove(r)){var m=ns.Model.get("message",{ids:p});m.hasRealData()&&!M[p]&&(m.updateThreadCount(-1),M[p]=!0)}}f&&(e.isUnreadMessagesCollection()||e.isWithAttachmentMessagesCollection()||e.isImportantMessagesCollection())&&e.remove(r),f&&l&&e.params.current_label&&S[e.params.current_label]&&e.remove(r),!a||f||h||p!==o||("yes"===e.params.threaded?e.insertMessageBySort(t):e.insertMessageBySort(r))})),ns.Model.invalidateAll("messages-from"),c.resetAdjust(),c.resetTabsAdjust(),c},remove:function(){var e=this;ns.Model.traverse("messages",(function(t){t.remove(e)})),this._cleaningModelsAfterAction(),ns.Model.get("message-body",{ids:this.params.ids}).destroy(),this.destroy()},getEmailInfoParams:function(){var e=this.getEmails().from,t=e&&e.email&&e.email.toLowerCase();return t&&Jane.FormValidation.checkEmail(t)?{ref:e.ref,email:t}:null},createMessageCurrentDate:function(){var e=Daria.now(),t=new Date(e),n=Jane.Date.format("%Date_db",e),i=Jane.Date.format("%Date_db_in_HM",e);return{chunks:{date:t.getDate(),hours:t.getHours(),minutes:t.getMinutes(),month:t.getMonth(),year:t.getFullYear()},timestamp:e,user_timestamp:e,view:{attach:n,list:n,message:i,title:i}}},fromComposeMessage:function(e,t){if(this.isValid())return this;var n=ns.Model.get("message",{ids:t}),i=ns.Model.get("message-body",{ids:t}),r=e.get(".from_mailbox"),o=[{email:r,name:e.get(".from_name"),ref:i.getEmailRef(r),type:"from"}];return o=o.concat(e.formatContacts("to",i),e.formatContacts("cc",i),e.formatContacts("bcc",i)),this.setData({fake:!0,mid:this.params.ids,tid:n.getThreadId()||"t"+this.params.ids,lid:e.get(".lids"),field:o,subject:e.get(".subj"),date:n.createMessageCurrentDate(),types:"4",type:[4],flags:{human:!0},count:1,new:0})},hasRealData:function(){return this.isValid()&&!this.get(".FAKE_THREAD_DATA")},isCheckedInList:function(){return ns.Model.get("messages-checked").isChecked(this)},isInSharedFolder:function(){return ns.Model.get("folders").isShared(this.getFolderId())},isInTab:function(){return this.getTabId()&&this.getFolderId()===ns.Model.get("folders").getFidBySymbol("inbox")},isMuted:function(){if(!this.isThread())return!1;var e=jpath(ns.Model.get("labels").getMuteThreadLabel(),".lid")[0];return this.hasLabel(e)},isMutable:function(){return this.isThread()&&!this.isMuted()&&!this.isInSharedFolder()},isValidForPin:function(){var e=ns.Model.get("folders"),t=this.getFolderId();return!e.isFolder(t,this.INVALID_FOLDERS_SYMBOLS_FOR_PIN)},hasUserLabel:function(){var e=this.get(".lid");if(!Array.isArray(e)||!e.length)return!1;for(var t=ns.Model.get("labels"),n=0,i=e.length;n<i;n++){var r=t.getLabelById(e[n]);if(r&&r.user)return!0}return!1},hasLabelInDiff:function(e,t){var n=this.get(".lid");return _().xor(n,t).contains(e)},markAnswered:function(){return this.isValid()&&this.set(".flags.replied",!0),new Daria.MOPS.Opinfo},markForwarded:function(){return this.isValid()&&this.set(".flags.forwarded",!0),new Daria.MOPS.Opinfo},isRecipient:function(){var e=ns.Model.get("account-information"),t=this.getFieldsByType("to").concat(this.getFieldsByType("cc"),this.getFieldsByType("bcc"));return _.some(t,(function(t){return e.isMyEmail(t.email)}))},_cleaningModelsAfterAction:function(){var e=ns.Model.get("messages-from-item",this.params);e.isValid()&&ns.Model.traverse("messages-from",(function(t){t.remove(e)}))},getTrustLevel:function(){var e=this.get(".type")||[],t=!0,n=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var s=r.value;if(s>=51&&s<=56)return s-50}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return null}}})},function(e,t){ns.Model.define("message-presentation",{params:{ids:null,hid:null,fid:null},methods:{fill:function(e){this.setData({field:e.get(".field"),firstline:e.get(".firstline")})},ensureOnDestroyBinded:function(e){if(this._isBindedOnDestroy){if(e.key!==this._bindedOnDestroyMessageKey){var t="ensureOnDestroyBinded called more then once: was binded to "+this._bindedOnDestroyMessageKey+", now binding to "+e.key;Jane.ErrorLog.send({errorType:"message-presentation.error",params:JSON.stringify(this.params),errorMessage:t})}}else this._isBindedOnDestroy=!0,this._bindedOnDestroyMessageKey=e.key,this.destroyWith([e])}}},ns.ModelStatic)},function(e,t){ns.Model.define("message-widget-events",{params:{ids:null},methods:{request:function(){return ns.request("message-body",this.params).then(this._onRequestSuccess,this._onRequestError,this)},_onRequestSuccess:function(){var e=ns.Model.get("message-body",this.params);return this.params.inc_hid=e.getCalendarICS(),this.params.stid=e.getSTID(),ns.request("get-event-ics",this.params).then(this._onRequestSuccessEventData,(function(e){return this.setData({error:e}),Vow.reject(e)}),this)},_onRequestSuccessEventData:function(e){var t=e&&e[0]&&e[0].data;t=t||{},this.setData(t),this.updateEventsData()},updateEventsData:function(){this.getEventKey()&&(this.hasOutdatedLabelOnMessage()&&this.markOutdated(),ns.Model.traverse("message-widget-events",this._onUpdateEventData.bind(this)))},_onUpdateEventData:function(e){if(e.isValid()){var t=this.getEventKey(),n=ns.Model.get("message-body",this.params),i=n.get(".info.date.timestamp"),r=ns.Model.get("message-body",e.params),o=r.get(".info.date.timestamp");this!==e&&t===e.getEventKey()&&(o<=i||e.hasOutdatedLabelOnMessage()?e.markOutdated():this.markOutdated())}},getEventKey:function(){var e=this.get(".eventInfo.instanceKey");return e&&e[0]},markOutdated:function(){this.getOutdatedLID()&&!this.hasOutdatedLabelOnMessage()&&this.setOutdatedLabel(),this.set(".isOutdated",!0)},hasOutdatedLabelOnMessage:function(){var e=this.getOutdatedLID();return!!e&&ns.Model.get("message",this.params).hasLabel(e)},getOutdatedLID:function(){return ns.Model.get("labels").getLIDByName("not_show_widget_event")},setOutdatedLabel:function(){Daria.MOPS.doActionWithMessages([this.params.ids],"label",{lid:this.getOutdatedLID()})},setEventInfo:function(e){this.set(".eventInfo",e),this.set(".isNotOperate",!1)},_onRequestError:function(e){return this.setData({error:e}),Vow.reject(e)}}})},function(e,t){function n(e){return o(e)||r(e)||i()}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function r(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function o(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}ns.Model.define("messages-checked",{params:Daria.params.messagesChecked,ctor:function(){this.touch=_.throttle(this.touch,100),this.bTouch=this.touch.bind(this),this.bOnMessagesInserted=this.onMessageInserted.bind(this),this.bOnMessagesRemoved=this.onMessageRemoved.bind(this)},events:{"ns-model-init":"_onInit","ns-model-destroyed":"_onDestroy"},methods:{INFOLINE_MESSAGES_COUNT:2,_mMessages:null,_onDestroy:function(){this._resetChecked(),this._mMessages.off("ns-model-insert",this.bOnMessagesInserted).off("ns-model-remove",this.bOnMessagesRemoved)},_onInit:function(){this._resetChecked(),this._mMessages=ns.Model.get("messages",this.params),this._mMessages.on("ns-model-insert",this.bOnMessagesInserted).on("ns-model-remove",this.bOnMessagesRemoved)},_resetChecked:function(){var e=this;_.forIn(this._checked,(function(t){t.off("ns-model-touched",e.bTouch)})),this._checked={},this._folderSelected=!1,this._listSelected=!1,this._lastCheckedMessage=null,this.trigger("ns-model-reset-checked"),this.resetMemoizeAndTouch()},_resetMemoize:function(){Daria.memoizeClearCache(this.getCount)||(this.getCount=_.memoize(this.getCount)),Daria.memoizeClearCache(this.getData)||(this.getData=_.memoize(this.getData))},resetMemoizeAndTouch:function(){this._resetMemoize(),this.touch()},isValid:no.True,onMessageInserted:function(e,t){this.isListSelected()&&_.forEach(t,function(e){this.check(e,!0,{silent:!0})}.bind(this)),this.touch()},onMessageRemoved:function(e,t){_.forEach(t,function(e){this.check(e,!1,{silent:!0})}.bind(this)),this.touch()},resetChecked:function(){this._resetChecked()},getData:function(){return Object.keys(this.getCheckedMessagesHash())},isChecked:function(e){return Boolean(this._checked[e.get(".mid")])},isCheckedByMid:function(e){return Boolean(this._checked[e])},isSearchTopResultByMid:function(e){return this._mMessages.isSearchTopResult(e)},isCheckedByMidFromYate:function(e){var t=yr.nodeset2scalar(e);return this.isCheckedByMid(t)},toggleCheck:function(e){this.check(e,!this.isChecked(e)),this.setLastChecked(e)},check:function(e,t,n){var i=e.get(".mid"),r=!1;n=_.extend({silent:!1},n),t?this._checked.hasOwnProperty(i)||(this._checked[i]=e,e.on("ns-model-touched",this.bTouch),r=!0):(this._checked.hasOwnProperty(i)&&(delete this._checked[i],e.off("ns-model-touched",this.bTouch),r=!0),this._listSelected=!1,this._folderSelected=!1),r&&(this._resetMemoize(),n.silent||(this.touch(),this.triggerToggleCheckedOnMessage(e,n)))},triggerToggleCheckedOnMessage:function(e,t){e.trigger("ns-model-checked-toggle",t,this.key)},checkByMidInParams:function(){if(this.params.mid){var e=ns.Model.get("message",{ids:this.params.mid});this.check(e,!0)}return this},isOnlyMessageChecked:function(){var e=this.getIds();return 1===e.ids.length&&0===e.tids.length},isEmptyMessagesList:function(){return this._mMessages.isEmptyList()},isPinnedMessagesList:function(){return this._mMessages.hasOnlyPinnedMessages()},isOnlyMessageOrThreadChecked:function(){var e=this.getIds();return 1===e.ids.length&&0===e.tids.length||0===e.ids.length&&1===e.tids.length},getOnlyMessageCheckedMid:function(){var e=this.getIds();return 1===e.ids.length&&0===e.tids.length?e.ids[0]:null},getOnlyCheckedMidOrTid:function(e){return e=e||this.getIds(),_.isEmpty(e.tids)?_.isEmpty(e.ids)?null:_.first(e.ids):_.first(e.tids)},getOnlyNotPinnedMessages:function(){return this._mMessages.models.filter((function(e){return!e.isPinned()}))},getLabels:function(){var e=ns.Model.get("labels").getLabelsHash();return _(this.getCheckedMessages()).forEach((function(t){var n=t.get(".count"),i=t.get(".lid"),r=t.get(".lid_cnt");_(i).forEach((function(t){e[t]+=n>1?r[t]||0:n})).value()})).value(),e},getFolders:function(){var e=this,t=ns.Model.get("folders").getFoldersHash(),n=this.getIds();return n.ids.concat(n.tids).forEach((function(n){var i=e.getCheckedMessagesHash()[n];t[i.getFolderId()]+=i.get(".count")})),t},getTabs:function(){var e=ns.Model.get("tabs").get(".tabs").reduce((function(e,t){return e[t.id]=0,e}),{}),t=this.getIds(),i=this.getCheckedMessagesHash();return[].concat(n(t.ids),n(t.tids)).reduce((function(e,t){var n=i[t];return n.isInTab()&&(e[n.getTabId()]+=n.get(".count")),e}),e)},getCount:function(){var e=this,t=0;if(this.isFolderSelected())t=ns.Model.get("folders").getCount(this.params.current_folder);else{var n=this.getIds();t=n.ids.length,n.tids.forEach((function(n){t+=e.getCheckedMessagesHash()[n].get(".count")}))}return t},getPinnedCount:function(){var e=this.getData(),t=0;return e.forEach((function(e){ns.Model.get("message",{ids:e}).isPinned()&&(t+=1)})),t},getCheckedMessages:function(){var e=this.getIds();return _.map(e.tids.concat(e.ids),(function(e){return ns.Model.get("message",{ids:e})}))},getCheckedMessagesHash:function(){if(_.isEmpty(this._checked)){var e=ns.page.current.params.thread_id||ns.page.current.params.ids;if(Daria.is3pane()&&e){var t=ns.Model.get("message",{ids:e});if(t.hasRealData())return _.set({},e,t)}}return this._checked},isFolderSelected:function(){return this._folderSelected},selectFolder:function(){this._folderSelected||!Boolean(this.params.current_folder)||this.params.tabId||(this._folderSelected=!0,this._checkAllFromCollection(),this.resetMemoizeAndTouch())},getSelectedFolder:function(){return this._folderSelected?this.params.current_folder:null},selectList:function(){this._listSelected=!0,this._checkAllFromCollection(),this.resetMemoizeAndTouch()},isListSelected:function(){return this._listSelected},canShowInfoline:function(){return(this.getCheckedMessages()||[]).length>=this.INFOLINE_MESSAGES_COUNT},shouldSelectAll:function(){return!this.isListSelected()&&!this.isFolderSelected()},toggleSelectAll:function(){this.shouldSelectAll()?this.selectList():this.resetChecked()},_checkAllFromCollection:function(){var e=this._mMessages.isSearch(),t=Boolean(this._mMessages.params.category);this._mMessages.models.forEach((function(n){(!n.isPinned()||e||t)&&this.check(n,!0)}),this)},areAllCheckedInFolder:function(){var e=ns.Model.get("folders").getCount(ns.page.current.params.current_folder),t=this.getCount();return this.isFolderSelected()||t>0&&t>=e},_areAllCheckedRead:function(e){if(this.isFolderSelected()){var t=ns.Model.get("folders").getUnreadCount(this.getSelectedFolder());return e?!t:t}var n=this.getCheckedMessagesHash();return!_.isEmpty(n)&&_.every(n,(function(t){var n=t.isNew();return e?!n:n}))},areAllCheckedRead:function(){return this._areAllCheckedRead(!0)},areAllCheckedPinned:function(){var e=this._mMessages.getPinned();if(0===e.length)return!1;var t=this.getCheckedMessages().filter((function(e){return e.isPinned()}));return!_.difference(e,t).length},hasPinnedCheckedMessage:function(){return this.getCheckedMessages().some((function(e){return e.isPinned()}))},hasImportantCheckedMessage:function(){return this.getCheckedMessages().some((function(e){return e.isImportant()}))},areAllCheckedNotPinned:function(){var e=this._mMessages.getPinned();if(0===e.length)return!1;var t=this._mMessages.models;if(e.length===t.length)return!1;var n=this.getCheckedMessages(),i=_.difference(t,n);return 0===_.difference(i,e).length},hasMorePages:function(){return this._mMessages.canLoadMore()},getIds:function(e,t){var n={threads:[],messages:[]},i=this.getCheckedMessagesHash();for(var r in i){var o=i[r];if(e){var s="to"+Daria.capitalize(e);if(o[s]&&!o[s](t))continue}n[o.isThreadModel()?"threads":"messages"].push(o)}var a={ids:[],tids:[]};return n.threads.forEach((function(e){var t=e.get(".mid");n.messages=n.messages.filter((function(e){return e.get(".tid")!==t})),a.tids.push(t)})),n.messages.length&&(a.ids=a.ids.concat(n.messages.map((function(e){return e.params.ids})))),a},runAction:function(e,t){var n={action:e,params:t};this.trigger("run-action",n)},runOps:function(e,t){return Daria.MOPS[e](this,t)},runLabelAction:function(e){return this.runAction("label",{lid:e})},getLastChecked:function(){if(Daria.is2pane())return this._lastCheckedMessage||this._mMessages.models[0];var e=ns.page.current.params.thread_id||ns.page.current.params.ids;return this._lastCheckedMessage||this._mMessages.getMessageByMid(e)||this._mMessages.models[0]},setLastChecked:function(e){var t=this.isChecked(e);if(t)return void(this._lastCheckedMessage=e);if(t||this._lastCheckedMessage!==e||(this._lastCheckedMessage=null),!this._lastCheckedMessage){var n=this._mMessages.models,i=n.indexOf(e);if(-1===i)return void(this._lastCheckedMessage=null);var r,o,s=null,a=1;do{if(r=n[i+a],o=n[i-a],r&&this.isChecked(r)){s=r;break}if(o&&this.isChecked(o)){s=o;break}a++}while(r||o);this._lastCheckedMessage=s}}}},ns.ModelStatic)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(325),r=n(394),o=n(913);!(function(){function e(e,n,i){i=i||Number.POSITIVE_INFINITY;for(var r=[],o=ns.Model.get("folders"),s=0,a=e.length;s<a;s++){var c=e[s].getData(),l=e[s].isThread();if((l||o.isIncoming(c.fid)&&t(c,n))&&(l?r.push({tid:c.tid}):r.push({mid:c.mid}),r.length>=i))break}return r}function t(e,t){return parseInt(e.size,10)<t}ns.Model.define("messages",{events:{"ns-model-before-destroyed":"_setRefreshCount","ns-model-insert":"_arrangeTopResultsFirst","ns-model-remove":"_onModelRemove"},params:{threaded:null,goto:null,filter_ids:null,current_folder:null,current_label:null,thread_id:null,extra_cond:null,page_number:null,sort_type:"date",request:null,scope:null,unread:null,datePager:null,mrange:null,from:null,to:null,fid:null,lid:null,excluded:null,search:null,force:null,type:null,attaches:null,category:null,tabId:null,first:null,count:null,with_pins:"yes",allow_empty:null,prevent_update:null},split:{items:".message",model_id:function(){return"message"},params:{ids:".mid"}},paramsRewrite:function(e){return e.thread_id&&e.current_folder&&delete e.thread_id,Daria.messages.checkUsePinsByParams(e)?e.with_pins="yes":delete e.with_pins,e},requiredFeatures:["web_search_extra_params"],methods:{SEARCH_PARAMS:["request","scope","unread","from","to","excluded","search","type","attaches"],_splitModels:function(e){this.params.prevent_update&&_.each(e,(function(e){e.__prevent_update=!0}));var t=this.super_._splitModels.apply(this,arguments),n=this.params.current_folder;return n&&t.forEach((function(e){if(e.isValid()){var t=_.extend({},e.params,{fid:n}),i=ns.Model.get("message-presentation",t);i.fill(e),i.ensureOnDestroyBinded(e)}})),t},preprocessData:function(e){return"yes"===this.params.threaded&&(e=this._createThreadsFromMessages(e)),_.defer(this.preloadAllMessages.bind(this)),e},getRequestParams:function(){var e=this.super_.getRequestParams.apply(this,arguments);return this.params.search&&(e.reqid=Daria.React.getSearchSessionId(),this.isSearchNotFilter()&&"count"in e&&(e.count=Math.max(e.count,10))),e.filter_ids&&(e.filter_ids=e.filter_ids.join()),e},_setRefreshCount:function(){this._refreshCount=this.models.length},_unsetRefreshCount:function(){delete this._refreshCount},_hasParamsForRequest:function(){var e=this.params,t="search"===e.search,n=e.category,i=e.deviation,r=e.current_folder,o=e.thread_id,s=e.current_label,a="all"===e.goto;return[t,n,i,r,o,s,a&&"only_new"===e.extra_cond,a&&"only_atta"===e.extra_cond,e.filter_ids,e.tabId].some((function(e){return e}))},_fakeRequest:function(){return this.request=void 0,this.setData({details:{"has-more":!1},message:[]}),Vow.resolve()},getRequest:function(){var e=this;if(this.isFakeMessages())return this.params.allow_empty||Jane.ErrorLog.send({errorType:"messages-request-no-params",params:JSON.stringify(this.params),stack:(new Error).stack}),this.request=this._fakeRequest,this;if(this.isValid())return this;var t=this.getCount()||this._refreshCount;if(!t)return this;var n=this._getCountForRequest(t),i=ns.Model.get(this.id,$.extend({},this.params,{first:this.params.first||0,count:n}));return i.destroy(),i.once("ns-model-changed",(function(){e.setData(this.getData()),e._unsetRefreshCount()})),i},_arrangeTopResultsFirst:function(){var e=this;this.isSearchNotFilter()&&Daria.arrangeMatchingFirstInline(this.models,(function(t){return e.isSearchTopResult(t.get(".mid"))}))},_onModelRemove:function(e,t){this._updateThreadMetaOnRemove(t),this._updateDetailsForSearch(t)},_updateThreadMetaOnRemove:function(e){var t=this.params.thread_id;if(t){var n=ns.Model.get("message",{ids:t});if(n.hasRealData()){var i=n.get(".last_mid");-1!==_.findIndex(e,(function(e){return e.params.ids===i&&e.get(".date.timestamp")===n.get(".date.timestamp")}))&&this.updateThreadMeta(n)}}},_updateDetailsForSearch:function(e){if(void 0!==this.get(".details.total-found")){var t=this.get(".details.total-found")||0,n=e.length;this.set(".details.total-found",Math.max(t-n,0));var i=this.get(".details.top-relevant")||0,r=this.get(".details.topResultsMids"),o=0;r&&(e.forEach((function(e){var t=e.get(".mid"),n=r.indexOf(t);n>-1&&(o++,r.splice(n,1))})),o>0&&(this.set(".details.top-relevant",Math.max(i-o,0)),this.set(".details.topResultsMids",r)))}},_createThreadsFromMessages:function(e){return e.message=e.message.map(this._createThreadFromMessage),e},_createThreadFromMessage:function(e){var t=ns.Model.get("message",{ids:e.mid}).setData(e);if(!Daria.messages.toCreateThread(t))return e;var n=_.cloneDeep(e);n.last_mid=e.mid,n.mid=n.tid;var i=ns.Model.get("messages",{thread_id:n.tid});return i.isValid()||i.setData({details:{"has-more":!1},message:[e]}),n},loadMore:function(e){var t;e&&!this.isValid()?(t=0,this.clear()):t=this.models.length;var n=ns.Model.get("settings").getSetting("messages_per_page"),i=$.extend({},this.params,{first:t,count:n});return ns.request("messages",i).then((function(e){var t=e[0];this.data&&this.isValid()||(this.data={},this.status=this.STATUS.OK);var n,i=t.get(".details")||{},r=this.get(".details")||{};("topResultsMids"in i||"topResultsMids"in r)&&(n=_.union(r.topResultsMids,i.topResultsMids));var o=$.extend(r,i);n&&(o.topResultsMids=n),this.set(".details",o,{silent:!0});var s=t.models;return this.insert(s),ns.Model.destroy(t),s}),this)},refresh:function(){var e=_.assign({},this.params,{first:0,count:this._getCountForRequest(this.getCount())}),t=ns.Model.get(this.id,e),n=this;return t.once("ns-model-changed",(function(){n.setData(this.getData())})),ns.request.models([t],{forced:!0}).then((function(){ns.Model.destroy(t)}))},_getCountForRequest:function(e){var t=ns.Model.get("settings").getSetting("messages_per_page"),n=e||t;return n=Math.ceil(n/t)*t,n=Math.min(n,200)},canLoadMore:function(){return Boolean(this.get(".details.has-more"))},getCount:function(){return this.models.length},getUnreads:function(){return this.models.filter((function(e){return e.isNew()}))},getUnreadCount:function(){return this.getUnreads().length},getPinned:function(){return this.models.filter((function(e){return e.isPinned()}))},getTotal:function(){for(var e=0,t=0,n=this.models.length;t<n;t++)e+=this.models[t].get(".count");return e},preloadAllMessages:function(){var e=this.params,t=ns.Model.get("folders"),n=e.current_folder;if(!n||!t.spamOrTrash(n)){var i=this.models.map((function(e){var t=e.get(".mid");return e.isThread()?{tid:t}:{mid:t}}));Daria.messages.preload(i)}},preloadMessages:function(){var t,n=this.params,i=ns.Model.get("folders"),r=n.current_folder;if(r===i.getFidBySymbol("inbox"))t="inbox";else{if(r in i.ids())return!1;t="user_folder"}n.thread_id&&(t="thread");var o=this.getUnreads(),s=o.length;if(0===s)return!1;var a=this.getCount(),c=Math.round(s/a*100),l=[];switch(t){case"user_folder":(a<=10||c<=80)&&(l=e(o,20,10));break;case"thread":default:a<=10||c<=30?l=e(o,50):c<=80&&(l=e(o,50,10))}return Daria.messages.preload(l),!0},getNextPage:function(){return jpath(this.data,".details.pager.next")[0]||null},getPrevPage:function(){return jpath(this.data,".details.pager.prev")[0]||null},deleteMessage:function(e){var t=ns.Model.get("message",{ids:e});return this.remove(t)},getCountThreadMessageInFolder:function(){if(!this.canLoadMore())return this.select('.message[.fid == "'+ns.page.current.params.current_folder+'"]').length;return!1},getEmails:function(){var e={};return this.models.forEach((function(t){var n=t.getData(),i={};i.social=t.hasSocialLabels(),i.type=n.type,n.field.forEach((function(e){i[e.type]={ref:e.ref,email:e.email}})),e[n.mid]=i})),e},isFakeMessages:function(){return this.canRequest()&&!this._hasParamsForRequest()},insertMessage:function(e,t){if(!this.isValid())return!1;ns.events.trigger("daria:vContextMenu:close"),t&&this.remove(t);var n=0;return"yes"!==this.params.with_pins||e.isPinned()||(n=this.getPinned().length),this.insert(e,n),!0},insertMessageBySort:function(e){if(!this.isValid())return!1;if(this.isEmptyList())this.insert(e);else{var t=n[this.params.sort_type];ns.assert(t,"mMessages","invalid sort type");var i,r,o=this.models.length,s=this.getPinned(),a=s.length;e.isPinned()?(r=this.models.slice(0,a),-1===(i=_.findIndex(r,t,e))&&(i=a)):(r=this.models.slice(a),i=_.findIndex(r,t,e),-1===i?i=o:i+=a),(i>=0&&i<o||!this.canLoadMore())&&this.insert(e,i)}},updateThreadMeta:function(e){var t=_.findIndex(this.models,(function(e){return e.isExternalLike()}));-1===t&&(t=0);var n=this.models[t];n&&e.updateThreadContextInfo(n)},isEmptyList:function(){return this.isValid()&&0===this.getCount()},isSearch:function(){return Object.keys(this.params).some((function(e){return _.include(this.SEARCH_PARAMS,e)}),this)},isSearchNotFilter:function(){return Boolean(this.params.search)&&(Boolean(this.params.request)||Boolean(this.params.fid)||Boolean(this.params.lid))&&"rpopinfo"!==this.params.scope},isSearchTopResult:function(e){return(this.get(".details.topResultsMids")||[]).indexOf(e)>-1},isUnreadMessagesCollection:function(){return"only_new"===this.params.extra_cond||"yes"===this.params.unread||"unread"===this.params.unread},isWithAttachmentMessagesCollection:function(){return"only_atta"===this.params.extra_cond},isImportantMessagesCollection:function(){var e=ns.Model.get("labels");return this.params.current_label===e.getImportantLID()},_doOper:function(e,t){var n=new Daria.MOPS.Opinfo,i=this.models.length;if(!i)return n.resetAdjust(),n;n.setModelsCount(i);for(var r=0;r<i;r++){var o=this.models[r][e](t);n.merge(o)}return n},mark:function(){return this._doOper("mark")},unmark:function(){return this._doOper("unmark")},label:function(e){return this._doOper("label",e)},unlabel:function(e){return this._doOper("unlabel",e)},hasOnlyPinnedMessages:function(){return!this.hasUnpinned()&&!this.canLoadMore()},hasMessageWithLabel:function(e,t){var n=this.models.length;if(!n||n!==t)return null;for(var i=0;i<n;i++)if(this.models[i].hasLabel(e))return!0;return!1},getPrevMessageByMid:function(e){return this.getNearestMessageByMid(e,"prev")},getNextMessageByMid:function(e){return this.getNearestMessageByMid(e,"next")},getNearestMessageByMid:function(e,t){if(!e)return!1;var n=ns.Model.get("message",{ids:e}),i=this.models,r=i.indexOf(n),o=-1;switch(t){case"prev":o=r-1;break;case"next":o=r+1}return i[o]||!1},getMessageByMid:function(e){return _.find(this.models,"params.ids",e)||null},recalculateIndexesAfterPin:function(e,t){var n=this.params.current_folder;this.remove(e),e.forEach((function(e){(t||!t&&n===e.getFolderId())&&this.insertMessageBySort(e)}),this)},getLastReplyMessage:function(){for(var e,t=0,n=this.models.length;t<n&&(e=this.models[t],!e.canReply());t++);return e},getLastReplyMessageQR:function(){return _.find(this.models,(function(e){return e.canReplyQR()}))},hasUnpinned:function(){return this.models.some((function(e){return!e.isPinned()}))},hasMessagesFromFolder:function(e){return-1!==_.findIndex(this.models,(function(t){return t.getFolderId()===e}))},hasMessagesFromTab:function(e,t){return-1!==_.findIndex(this.models,(function(n){return n.getFolderId()===e&&n.getTabId()===t}))},setError:function(){this.scenarioManager.hasActiveScenario(i.e)&&this.scenarioManager.getActiveScenario(i.e).logError(r.d),this.scenarioManager.hasActiveScenario(i.f)&&this.scenarioManager.getActiveScenario(i.f).logError(o.b),ns.Model.prototype.setError.apply(this,arguments)}}},"model-collection-with-scenario-manager-mixin");var n={from:function(e){return e.getFromName().toLowerCase()>this.getFromName().toLowerCase()},from1:function(e){return e.getFromName().toLowerCase()<this.getFromName().toLowerCase()},date:function(e){return e.get(".date.timestamp")<this.get(".date.timestamp")},date1:function(e){return e.get(".date.timestamp")>this.get(".date.timestamp")},size:function(e){return e.get(".length")<this.get(".length")},size1:function(e){return e.get(".length")>this.get(".length")},subject:function(e){return e.getSubject().toLowerCase()>this.getSubject().toLowerCase()},subject1:function(e){return e.getSubject().toLowerCase()<this.getSubject().toLowerCase()}}})()},function(e,t){ns.Model.define("message-head-state",{params:{ids:null,hid:null},events:{"ns-model-init":function(){var e=ns.Model.get("settings"),t=Boolean(e.hasSetting(this.SETTING_MSG_HEAD_SENDER_CLOSE)&&e.isSet(this.SETTING_MSG_HEAD_SENDER_CLOSE)),n=Boolean(e.hasSetting(this.SETTING_MSG_HEAD_RECIEVERS_OPEN)&&e.isSet(this.SETTING_MSG_HEAD_RECIEVERS_OPEN));this.setData({"sender-closed":t,"recievers-opened":n})}},methods:{SETTING_MSG_HEAD_SENDER_CLOSE:"m_head_folded_sender",SETTING_MSG_HEAD_RECIEVERS_OPEN:"m_head_full_edition",toggleSenderOpened:function(){var e=this.get(".sender-closed");return this._lockToggleMessageHead||(this._lockToggleMessageHead=!0,ns.Model.get("settings")[e?"setSettingOff":"setSettingOn"](this.SETTING_MSG_HEAD_SENDER_CLOSE,this._onSettingsChangeSuccess.bind(this))),this.set(".sender-closed",!e),!e},setRecieversOpened:function(e){this.set(".recievers-opened",e)},getRecieversOpened:function(){return this.get(".recievers-opened")},toggleRecieversOpened:function(){var e=this.get(".recievers-opened");return this._lockToggleMessageHead||(this._lockToggleMessageHead=!0,ns.Model.get("settings")[e?"setSettingOff":"setSettingOn"](this.SETTING_MSG_HEAD_RECIEVERS_OPEN,this._onSettingsChangeSuccess.bind(this))),this.set(".recievers-opened",!e),!e},_onSettingsChangeSuccess:function(){this._lockToggleMessageHead=!1}}},ns.ModelStatic)},function(e,t){ns.Model.define("module-common",{methods:{MODULES:[],request:function(){var e=this;return new vow.Promise(function(t){Jane.Services.runModules(e.MODULES).then((function(){return e.afterRunModules()})).then((function(){return e.finishRequest()})).then(t)})},afterRunModules:function(){},finishRequest:function(){this.setData(!0),ns.Model.get("app-state").set(".".concat(this.id,"-loaded"),!0)}}})},function(e,t){ns.Model.define("module-compose",{methods:{MODULES:Daria.hasFeature("web-compose-2019")?["compose.css","compose2.js","compose2.yate","compose2019.js","compose2019.css"]:["compose.css","compose2.js","compose2.yate"]}},"module-common")},function(e,t){ns.Model.define("module-direct",{methods:{MODULES:["direct.js","direct.css"],afterRunModules:function(){return Daria.yabsManager.run()}}},"module-common")},function(e,t){ns.Model.define("module-editor",{methods:{MODULES:["ckeditor.js","ckeditor.yate","editor.css"]}},"module-common")},function(e,t){ns.Model.define("module-message",{methods:{MODULES:["message.css","message.js","message.yate"]}},"module-common")},function(e,t){ns.Model.define("module-messages",{methods:{MODULES:["messages.css","messages.js","messages.yate"]}},"module-common")},function(e,t){ns.Model.define("module-promo",{methods:{MODULES:["promo.css","promo.js","promo.yate"]}},"module-common")},function(e,t){ns.Model.define("module-setup",{methods:{MODULES:["messages.css","setup.css","setup.js","setup.yate"]}},"module-common")},function(e,t){ns.Model.define("module-timeline",{methods:{MODULES:["timeline.js","timeline.yate"]}},"module-common")},function(e,t){ns.Model.define("module-todo",{methods:{MODULES:["todo.js","todo.yate","todo.css"]}},"module-common")},function(e,t){ns.Model.define("module-welcome-wizard",{methods:{MODULES:["welcome-wizard.js","welcome-wizard.css"]}},"module-common")},function(e,t){ns.Model.define("scroller-common",{methods:{EVENT_NAME:"MUST_BE_DEFINED",HEIGHT_KEY:".height",OFFSET_HEIGHT_KEY:".offset-height",SCROLL_HEIGHT_KEY:".scroll-height",SCROLL_BOTTOM_KEY:".scroll-bottom",SCROLL_TOP_KEY:".scroll-top",_rafTimer:0,_$area:null,init:function(){this.getScroller(),this._onResizeBinded||(this._onResizeBinded=!0,ns.Model.get("dimensions").on("resize",this._onScroll.bind(this)))},_initScroller:function(){var e="scroll."+this.id;this._$area&&(this._$area.off(e),this._$area=null),this._$area=this._getScroller(),this._$area[0]===window?this._$animatedArea=$("body, html"):this._$animatedArea=this._$area,this._$area.on(e,this._onScroll.bind(this))},_getScroller:ns.todo,_onScroll:function(){this._rafTimer||(this.clean(),ns.events.trigger(this.EVENT_NAME))},clean:function(){this.setData({},{silent:!0}),this._rafTimer=0},getScrollOffset:function(){return 0},getNodeTop:function(e){var t=this.getScroller()[0];if(t===window)return e.getBoundingClientRect().top+this.getScrollTop();var n=0,i=e;do{if(n+=i.offsetTop,(i=i.offsetParent)&&i===t)break}while(i);return n},getScroller:function(){var e=this._$area&&this._$area[0];return e&&($.isWindow(e)||document.body.contains(e))||this._initScroller(),this._$area},getHeight:function(){var e=this.get(this.HEIGHT_KEY);return"number"!=typeof e&&(e=this.getScroller().height(),this._setDimension(this.HEIGHT_KEY,e)),e},getScrollHeight:function(e){var t=this.get(this.SCROLL_HEIGHT_KEY);return("number"!=typeof t||e)&&(t=this.getScroller().prop("scrollHeight"),this._setDimension(this.SCROLL_HEIGHT_KEY,t)),t},getOffsetHeight:function(e){var t=this.get(this.OFFSET_HEIGHT_KEY);return("number"!=typeof t||e)&&(t=this.getScroller().prop("offsetHeight"),this._setDimension(this.OFFSET_HEIGHT_KEY,t)),t},getScrollBottom:function(){var e=this.get(this.SCROLL_BOTTOM_KEY);return"number"!=typeof e&&(e=this.getScrollHeight()-this.getHeight()-this.getScrollTop(),this._setDimension(this.SCROLL_BOTTOM_KEY,e)),e},getScrollTop:function(){var e=this.get(this.SCROLL_TOP_KEY);return"number"!=typeof e&&(e=this.getScroller().scrollTop(),this._setDimension(this.SCROLL_TOP_KEY,e)),e},getVDimensions:function(){var e=this.getScrollTop()+this.getScrollOffset();return{bottom:e+this.getHeight(),top:e}},setScrollTop:function(e,t){if(this._$animatedArea.stop(),t){var n=this;this._rafTimer="ANIMATED",this._$animatedArea.animate({scrollTop:e},{duration:"fast",always:function(){n._rafTimer=null,n._onScroll()}})}else this._$animatedArea.scrollTop(e)},scrollIntoView:function(e,t){t=t||{};var n,i="boolean"==typeof t.alignToTop,r=Number(t.viewTopOffset)||0,o=Number(t.viewBottomOffset)||0,s=$(e),a=t.relative?e.offsetTop:s.offset().top,c=a+s.outerHeight(),l=this.getScrollTop()+Math.abs(r),u=l+this.getHeight()+o;return c>u&&(!1===t.alignToTop||!i)?n=l+(c-u):a<l&&(!0===t.alignToTop||!i)&&(n=a+r),void 0!==n&&(n=Math.max(Math.floor(n),0),this.setScrollTop(n,Boolean(t.animate)),!0)},isRelativeOffset:function(){return!1},_setDimension:function(e,t){this.set(e,t,{silent:!0})}}},ns.ModelStatic)},function(e,t){ns.Model.define("scroller-message",{events:{"ns-model-init":"clean"},methods:{THREAD_HEAD_HEIGHT:51,EVENT_NAME:"daria:vScrollerMessage:scroll",getScrollOffset:function(){return this.THREAD_HEAD_HEIGHT},isRelativeOffset:function(){return Daria.is3pane()},_getScroller:function(){return Daria.is2pane()?$(window):$(".js-message-scroll-area")}}},"scroller-common")},function(e,t){ns.Model.define("scroller-messages",{events:{"ns-model-init":"clean"},methods:{EVENT_NAME:"daria:vScrollerMessages:scroll",FIXED_HEAD_HEIGHT:60,FIXED_TOOLBAR_HEIGHT:47,_getScroller:function(){return Daria.is2pane()?$(window):$(".js-messages-scroll-area")},getScrollOffset:function(){var e=this.FIXED_HEAD_HEIGHT;return Daria.is2pane()&&(e+=this.FIXED_TOOLBAR_HEIGHT),e}}},"scroller-common")},function(e,t){ns.Model.define("scroller-compose",{events:{"ns-model-init":"clean"},methods:{EVENT_NAME:"daria:vScrollerCompose:scroll",getScrollOffset:function(){return 0},isRelativeOffset:function(){return!1},_getScroller:function(){return Daria.is2pane()?$(window):$(".js-compose-scroller")}}},"scroller-common")},function(e,t){ns.Model.define("scroller-abook-contacts",{events:{"ns-model-init":"clean"},methods:{EVENT_NAME:"daria:vScrollerAbookContacts:scroll",FIXED_HEAD_HEIGHT:60,FIXED_TOOLBAR_HEIGHT:47,_getScroller:function(){return Daria.is2pane()?$(window):$(".js-entries-container")},getScrollOffset:function(){var e=this.FIXED_HEAD_HEIGHT;return Daria.is2pane()&&(e+=this.FIXED_TOOLBAR_HEIGHT),e}}},"scroller-common")},function(e,t){ns.Model.define("secret-key")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(325),r=n(394);ns.Model.define("email-info",{events:{"ns-model-init":"_onInit"},params:{email:null,ref:null},methods:{_onInit:function(){this.params.email||this.setData({})},setError:function(){this.scenarioManager.hasActiveScenario(i.e)&&this.scenarioManager.getActiveScenario(i.e).logError(r.a),ns.Model.prototype.setError.apply(this,arguments)}}},"model-with-scenario-manager-mixin")},function(e,t){ns.Model.define("informer-tanks-news",{events:{"ns-model-init":"onInit"},methods:{onInit:function(){setInterval((function(){ns.Model.invalidate("informer-tanks-news")}),18e5)},preprocessData:function(e){if(!_.isEmpty(e))return e.forEach((function(e){e.date&&(e.date.view=Daria.MessageTime.getFormattedTime(e.date.timestamp)),e.firstline&&(e.firstline=$(e.firstline)[0].innerText.trim())})),e}}})},function(e,t){ns.Model.define("settings-sign",{methods:{SETTINGS_SIGN:{browser_notify_blank:"_invert",contextmenu_disable:"_invert",compose_samples:"_defaultTrue",dont_save_history:"_invert",disable_etickets:"_invert",disable_promo:"_invert",disable_inboxattachs:"_invert",disable_events:"_invert",disable_yabbles:"_invert",no_definition_types:"_invert",notify_message:"_signNotifyMessage",no_signature_select:"_invert",mute_ad_until:"_zeroByDefault",timeline_enable:"_signTimelineEnable",right_column_expanded:"_defaultTrue",show_priority_label:"_defaultTrue",show_priority_popup:"_defaultTrue",show_tabs:"_defaultTrue",show_folders_tabs:"_defaultTrue",subscribed_folders:"_allFoldersByDefault",show_widgets_decor:"_defaultTrue",show_widgets_buttons:"_defaultTrue"},getSign:function(e,t){var n=this.getSetting(e,t),i=this.SETTINGS_SIGN[e];return i&&(n=_.method(i,n,e)(this)),n},signToSetting:function(e,t){var n=this.SETTINGS_SIGN[e];return"_invert"===n&&(t=_.method(n,t,e)(this)),t},_invert:function(e){return!e},_defaultTrue:function(e,t){return e=!this.hasSetting(t)||this.getSetting(t),Boolean(e)},_zeroByDefault:function(e,t){return this.hasSetting(t)?Number(this.getSetting(t)):0},_signNotifyMessage:function(e,t){return this.hasSetting(t)||(e=!Daria.IS_CORP),Boolean(e)},_signTimelineEnable:function(){return ns.Model.get("settings").checkTimelineEnable()},_allFoldersByDefault:function(){var e=ns.Model.get("folders"),t=ns.Model.get("settings").getSetting("subscribed_folders");if("string"==typeof t){var n=[];return"["===t[0]?n=JSON.parse(t.replace(/&quot;/g,'"')):t&&(n=t.split(",")),n.filter(e.isPresentAndNotShared.bind(e))}return e.getInboxFolders().sort()}}})},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(914);!(function(){var e=function(e,t){_.isString(e)&&(e=e.split("."));var n=_.size(e)-1;return e.reduce((function(e,i,r){var o=r===n?t:{},s=_.last(e)[i]=o;return e.push(s),e}),[{}])[0]},t=[{name:"enable_hotkeys",trueValue:!0},{name:"dnd_enabled",trueValue:!0}],n={};n.POPULAR_CONTACTS_SETTING_NAME="compose_samples",n.getSetting=function(e,n){if(Daria.Config.NO_SETTINGS){var i=_.find(t,"name",e);if(i)return i.trueValue}var r=this.get("."+e);if("json"===n)try{return JSON.parse(decodeURIComponent(r))}catch(e){return{}}if("signs"===e&&Array.isArray(r)&&r.length>0){var o=ns.Model.get("account-information").getAllUserEmails();r=r.map((function(e){return e.emails=e.emails.filter((function(e){return-1!==o.indexOf(e)})),e}))}return r},n.hasSetting=function(e){return(this.getData()||{}).hasOwnProperty(e)},n.isSet=function(e){return!(!Daria.Config.NO_SETTINGS||!_.find(t,"name",e))||Boolean(this.get("."+e))},n.setSettingOn=function(e,t){if(t=t||Jane.Common.nop,this.isSet(e))t(!0);else{var n={};n[e]=!0,this.setSettings(n,(function(e,n){t(e,n)}))}},n.setSettingOff=function(e,t){if(t=t||Jane.Common.nop,this.isSet(e)){var n={};n[e]=!1,this.setSettings(n,(function(e,n){t(e,n)}))}else t(!0)},n.toggleSetting=function(e,t){this.isSet(e)?this.setSettingOff(e,t):this.setSettingOn(e,t)},n.setSettings=function(e,t,n){if("function"==typeof t&&(n=t,t=null),t=t||{},Daria.Config.NO_SETTINGS||$.isEmptyObject(e))return vow.reject();n=n||Jane.Common.nop;var o=this._makeSaveRequest(e);if(null===o)return n(!0,[]),vow.resolve();if(o.error)return n(!1,o.error),vow.reject();for(var s in e)this.setIfChanged("."+s,e[s],t);var a=ns.forcedRequest([{id:"do-settings",params:o},{id:"settings",params:{actual:!0,list:o.list}}]).then((function(e){var o=ns.Model.get("settings"),s=e[1].getData(),a=!1;s&&"object"===i(s)&&Object.keys(s).forEach((function(e){o.setIfChanged("."+e,s[e],t),a=a||Object(r.a)(e)})),a&&Object(r.b)(o.getData()),ns.Model.destroy(e[1]),n(!0,[])}),(function(){n(!1,[])}));return vow.resolve().then((function(){return a}))},n.getMultiSetting=function(e){return this.getSetting(e,"json")||{}},n.saveMultiSetting=function(e,t){if("object"!==i(t)||null===t)throw new TypeError("Parameter value must be not empty object");var n=$.Deferred(),r={};r[e]=t;var o=this;return this.setSettings(r,(function(){n.resolve(o.getData())})),n.promise()},n.updateSetting=function(t,n,i){if(arguments.length<2)throw new Error(Daria.supplant("updateSettings takes exactly 2 arguments - {argc} given",{argc:arguments.length}));if(!t)throw new Error("Argument `name` must be specified");var r=t.split(".");t=r[0],r.length>1&&(n=e(r.slice(1),n));var o,s=this.getSetting(t,"json");return o=$.isPlainObject(n)?_.merge({},s,n):n,this.setSettings(_.zipObject([t],[o]),i)},n.setOpenedFolders=function(e){var t=e.join(",");this.setSettings({folders_open:t})},n.setLastActive=function(e){this.setSettings({last_active:Daria.now()},e)},n.recordAttemptToRegisterMAILTOProtocolHandler=function(e,t){if(t=Boolean(t),!e)return!1;var n=this.getSetting("rph")||"mozilla=0&opera=0&webkit=0",i=e+"="+Number(t);return!_(n).contains(i)&&(n=n.replace(e+"="+Number(!t),i),this.setSettings({rph:n}),!0)},n.isThreaded=function(){return this.isSet("folder_thread_view")},n.threadedOn=function(){this.isThreaded()||this.setSettingOn("folder_thread_view")},n.threadedOff=function(){this.isThreaded()&&this.setSettingOff("folder_thread_view")},n.threadedToggle=function(){this.isThreaded()?this.threadedOff():this.threadedOn()},n.getValidatedEmails=function(){return this.get(".reply_to")||[]},n._checkSName=function(e){if(!e)throw new Error("Parameter namespace is compulsory");if(e=String(e),e.length>30)throw new RangeError('Namespace "'+e+'" can not be over than 30 chars');return{name:e}},n._checkSValue=function(e,t){var n=$.type(t),i=!1;switch(n){case"boolean":case"object":case"array":case"string":case"null":case"undefined":case"number":break;default:throw new TypeError('Invalid type setting "'+e+'" value: '+n)}switch(e){case"signs":if("array"!==n)throw new TypeError('Invalid type setting "'+e+'" value: '+n);t=$.map(t,(function(t){if("object"!==$.type(t))throw new TypeError('Invalid type setting "'+e+'"');if("string"===$.type(t.text)){t.text.length>1e4&&(i="signs.maxlen");var n={text:t.text,isDefault:Boolean(t.isDefault),emails:$.isArray(t.emails)?t.emails:[]};return t.userLang&&(n.lang=t.userLang),n}})),this.getSetting("signs").length<=t.length&&t.length>20&&(i="signs.maxcount")}return{value:t,error:i}},n._makeSaveRequest=function(e){var t={},n=[],i=[];for(var r in e){var o=this._checkSName(r),s=this._checkSValue(r,e[r]);!1===s.error?(t[o.name]=s.value,n.push(o.name)):i.push(s.error)}return i.length?{error:i}:{actual:!0,list:n.join(","),params:JSON.stringify(t)}},n.checkTimelineEnable=function(){if(Daria.checkTimelineAvailable())return!this.hasSetting("timeline_enable")||this.isSet("timeline_enable");var e=ns.Model.get("account-information");return this.isSet("timeline_enable")&&e.hasSid(31)},ns.Model.define("settings",{params:{list:null,actual:null},methods:no.extend(n,{preprocessData:function(e){return["from_name"].forEach((function(t){e.hasOwnProperty(t)&&(e[t]=_.unescape(e[t]))})),Modernizr.ios&&(e.enable_richedit=!1),ns.events.trigger("settings-updated"),(!e.messages_per_page&&!this.params.list||Daria.is3pane())&&(e.messages_per_page=30),e},getPromoThemeSettingName:function(e){var t="_shown";return e&&(t="_set"),"promo_theme"+t},withBiggerText:function(){return this.isSet("with_bigger_text")},isNativeEmail:function(){var e=this.getSetting("emails"),t=Daria.email.normalize(this.getSetting("default_email"));return(e.filter((function(e){return e.native?Daria.email.normalize(e.address)===t:e.address===t}))[0]||{}).native}})},"settings-sign")})()},function(e,t,n){"use strict";var i="".concat("stngs",".").concat("1"),r=[{name:"color_scheme",defaultValue:"colorful"},{name:"layout",defaultValue:0},{name:"messages_avatars",defaultValue:!0},{name:"enable_autosave",defaultValue:!0}];e.exports={COOKIE_NAME:"stngs",COOKIE_VERSION:"1",COOKIE_SIGN:i,SETTINGS_FALLBACK:r,SETTINGS_FALLBACK_KEY:"FALLBACK"}},function(e,t){ns.Model.define("do-translate",{params:{text:null,lang:null,format:null},methods:{_canRequest:function(){return!this.retries||this.retries<this.RETRY_LIMIT}}})},function(e,t){ns.Model.define("translate-langs",{methods:{getName:function(e){return _.get(this.data,"langs."+e,"")},getLangs:function(){return _(this.get(".langs")).chain().map(this._getLangsMapIterate).sortBy("name").value()},getRecent:function(){return _(ns.Model.get("settings").getSetting("translateRecent")||"").chain().split(",").uniq().map(this._getRecentMapIterate.bind(this)).compact().slice(0,5).value()},hasRecent:function(){return!_.isEmpty(this.getRecent())},setRecent:function(e){var t=_(this.getRecent()).chain().map(this._setRecentMapIterate).unshift(e).uniq().slice(0,5).join(",").value();ns.Model.get("settings").setSettings({translateRecent:t})},_getLangsMapIterate:function(e,t){return{name:e,lang:t}},_setRecentMapIterate:function(e){return e.lang},_getRecentMapIterate:function(e){var t=e&&this.getName(e);if(t)return{name:t,lang:e}}}})},function(e,t){ns.Model.define("typefilter-tabs-state",{events:{"ns-model-init":"onInit"},methods:{onInit:function(){var e={all:{id:"all",title:i18n("%Tab_Title_For_All_Categories"),metrikaTitle:"Все категории"},people:{id:"people",title:i18n("%Alternative_Tab_Title_For_People_Category"),description:i18n("%Typographic_Tab_Description_For_People_Category"),metrikaTitle:"Общение"},social:{id:"social",title:i18n("%Tab_Title_For_Social_Category"),description:i18n("%Typographic_Tab_Description_For_Social_Category"),metrikaTitle:"Соцсети"},eshops:{id:"eshops",title:i18n("%Tab_Title_For_Eshops_Category"),description:i18n("%Typographic_Tab_Description_For_Eshops_Category"),metrikaTitle:"Покупки"},trips:{id:"trips",title:i18n("%Tab_Title_For_Trips_Category"),description:i18n("%Typographic_Tab_Description_For_Trips_Category"),metrikaTitle:"Поездки"}};this.setData({tabs:e})},getIdsOfEnabledTabs:function(){return["all"].concat(["people","eshops","trips","social"])},getEnabledTabs:function(){var e=this.get(".tabs");return this.getIdsOfEnabledTabs().map((function(t){return e[t]}))},isTabEnabled:function(e){return _.isObject(e)&&(e=yr.nodeset2scalar(e)),-1!==this.getIdsOfEnabledTabs().indexOf(e)},getMetrikaTitlesOfEnabledTabs:function(){var e=this.get(".tabs");return this.getIdsOfEnabledTabs().map((function(t){return e[t].metrikaTitle}))},getMetrikaTitle:function(e){return this.get(".tabs."+e).metrikaTitle},getTab:function(e){return _.isObject(e)&&(e=yr.nodeset2scalar(e)),this.get(".tabs."+e)||null},getCategoryTitleBySearchRequest:function(e){var t=/filter:(\w*)/i.exec(e),n=t&&t[1];if(!n)return"";var i=this.getTab(n);return i&&i.title||""}}},ns.ModelStatic)},function(e,t){ns.Model.define("themes-selector",{events:{"ns-model-init":"_onInit"},methods:{_onInit:function(){this.setData({opened:!1})},isOpened:function(){return this.get(".opened")},open:function(){this.set(".opened",!0)},close:function(){this.set(".opened",!1)}}},ns.ModelStatic)},function(e,t){!(function(){"use strict";var e={};e.getActivePhone=function(){var e=this.getData()||{};return jpath(e,'.phone[.active == "1"]')[0]},e.getUnconfirmedPhone=function(){},e.getActiveMaskedNumber=function(){var e=this.getActivePhone();return e&&e.masked_number},e.getUnconfirmedNumber=function(){},e.getUnconfirmedIdByNumber=function(){},e.hasActiveNumber=function(){var e=this.getData();return Boolean(jpath(e,'.phone[.active == "1"]').length)},e.normalize=function(e){return e=(e||"").replace(/^8/,"+7")},e.getPhone=function(e){if(!e)throw new ReferenceError("Required parameter phoneNumber is missing");return ns.forcedRequest("userphones").then((function(t){var n=t[0],i=$.makeArray(n.get(".phone")).filter((function(t){return t.number===e}));return i.length?i[0]:null}))},e.getAll=function(e){return ns.request.models([this],{forced:!e})},ns.Model.define("userphones",{methods:e})})()},function(e,t){!(function(){ns.Model.define("user-apps-activity",{methods:{MOBILE_FIELDS:["mobile","mobile_ios","mobile_android","tablet_android","tablet_ios"],preprocessData:function(e){return Object.keys(e).forEach((function(t){e[t]=this._toNumber(e[t])}),this),e},getActivityInterval:function(e){if("last-mobile-activity"!==e)return!1;var t=this.getLastMobileActivityDate();if(!1===t)return!1;var n=Daria.promoNow()-t.getTime();return!(n<0)&&n},getLastMobileActivityDate:function(){var e=this._fieldsToData(this.MOBILE_FIELDS),t=e.filter((function(e){return e})).reduce((function(e,t){return e<t?t:e}),0);return this._secondsToDate(t)},isEmpty:function(){return Boolean(this.get(".empty"))||Boolean(this.get(".notfound"))},_secondsToDate:function(e){return!!e&&new Date(1e3*e)},_toNumber:function(e){return e=Number(e),isNaN(e)?0:e},_fieldsToData:function(e){return Array.isArray(e)||(e=[]),e.map((function(e){return this.get("."+e)}),this)}}})})()},function(e,t){ns.Model.define("weather",{params:{geoid:null,date:null}})},function(e,t){ns.Model.define("help-link",{events:{"ns-model-init":"_onInit"},methods:{_hrefSuffixMap:{folder:"web/mailbox/folders.html#my-folders",archive:"web/mailbox/folders.html",draft:"web/letter/create.html#drafts",template:"web/letter/create.html#templates",abook:"web/abook.html",unread:"web/mailbox/tags.html",attachments:"web/letter/attachments.html",important:"web/mailbox/tags.html",label:"web/mailbox/tags.html","setup/abook":"web/abook.html","setup/client":"mail-clients.html","setup/journal":"web/security.html#journal","setup/todo":"web/features/to-do.html"},_onInit:function(){this.setData({href:this._getHref(ns.page.current)}),ns.events.on("ns-page-before-load",this._onPageBeforeLoad.bind(this))},_onPageBeforeLoad:function(e,t){_.isEqual(t[0],t[1])||this.updateHref(t[1])},updateHref:function(e){this.set(".href",this._getHref(e))},_getHref:function(e){var t=this._getHrefSuffix(e.page,e.params);return Daria.Config["help-url"]+(t?"/"+t:"")},_getHrefSuffix:function(e,t){if("messages"===e){if(t.important)return this._hrefSuffixMap.important;if("only_new"===t.extra_cond)return this._hrefSuffixMap.unread;if("only_atta"===t.extra_cond)return this._hrefSuffixMap.attachments}if(t.current_folder){var n=ns.Model.get("folders"),i=n.getFolderById(t.current_folder);if(i.symbol)return this._hrefSuffixMap[i.symbol]||"";if(i.user)return this._hrefSuffixMap.folder}return t.current_label?this._hrefSuffixMap.label:"setup"===e||"setup-sender"===e?t.tab?this._hrefSuffixMap["setup/"+t.tab]||"":"":this._hrefSuffixMap[e]?this._hrefSuffixMap[e]||"":""}}},ns.ModelStatic)},function(e,t){ns.Model.define("skin-saver-state",{events:{"ns-model-init":"_onInit"},methods:{_onInit:function(){this.setData({previewMode:!1})},isPreviewMode:function(){return this.get(".previewMode")},togglePreviewMode:function(e){return this.set(".previewMode",e)}}},ns.ModelStatic)},function(e,t){ns.Model.define("date-time",{events:{"ns-model-init":"_onInit"},methods:{_onInit:function(){var e=this;this.setData({local:{date:this.getLocalDate(),time:this.getLocalTime()},server:{date:this.getServerDate(),time:this.getServerTime()}});var t=new Date,n=new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes()+1),i=n-t;setTimeout((function(){return e.updateData()}),i)},getLocalTime:function(){return this._getTime(new Date)},getLocalDate:function(){return this._getDate(new Date)},getServerTime:function(){return this._getTime(new Date(Daria.passportNow()))},getServerDate:function(){return this._getDate(new Date(Daria.passportNow()))},_getTime:function(e){return Number(new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes()))},_getDate:function(e){return Number(new Date(e.getFullYear(),e.getMonth(),e.getDate()))},updateData:function(){var e=this;this.setIfChanged(".local.date",this.getLocalDate()),this.setIfChanged(".local.time",this.getLocalTime()),this.setIfChanged(".server.date",this.getServerDate()),this.setIfChanged(".server.time",this.getServerTime()),setTimeout((function(){return e.updateData()}),6e4)}}},ns.ModelStatic)},function(e,t){ns.Model.define("search-suggest",{params:{status:null,limit:null,"rocks-suggest":null,request:null,scope:null,fid:null,lid:null,from:null,to:null,attaches:null,reqid:null,history:null,highlight:null},requiredFeatures:["web_search_extra_params"],methods:{request:function(){return ns.request.fetchModels([this]).then(function(e){ns.request.extractModel(this,e.models[0])}.bind(this))}}})},function(e,t){ns.Model.define("ad-presentation",{isStrictParams:!0,params:{messages:null,route:null,params:null,presentations:null},methods:{RETRY_LIMIT:0}})},function(e,t){ns.Model.define("filter-search",{params:{mids:null},methods:{preprocessData:function(e){if(Array.isArray(e.envelopes))for(var t=ns.Model.get("labels").get(".label"),n=e.envelopes.length;n--;){var i=e.envelopes[n];if(!i.processed){for(var r=0;r<i.labels.length;r++){var o=_.find(t,{lid:i.labels[r]});if(o&&o.social){i.dlid=o.name.replace(/^vtnrf0/,"");break}}i.processed=!0;var s=ns.Model.get("filter-search",{mids:i.mid});s.select(".envelopes.processed")[0]||s.setData({envelopes:[i]})}}return e},hasSocialLabels:function(){return Boolean(this.getSocialLID())},getSocialLID:function(){var e=_.flatten($.makeArray(this.select(".envelopes.labels"))),t=e.length;if(t)for(var n=ns.Model.get("labels"),i=0;i<t;i++)if(n.isSocial(e[i]))return e[i];return null}}})},function(e,t){!(function(){ns.Model.define("messages-pager",{events:{"ns-model-init":"_onInit"},methods:{_onInit:function(){if("all"===this.params.current_folder){var e;if(Daria.IS_CORP)e={year:"2000",month:"1",day:"1"};else{var t=ns.Model.get("account-information").getDataKey("reg_date");t=new Date(t),e={year:String(t.getFullYear()),month:String(t.getMonth()+1),day:"1"}}this.setData(e)}},preprocessData:function(e){var t=Jane.Common.n,n=e.year,i=e.month,r=e.day,o=new Date,s=new Date(n,i-1,r);if(!n||o<=s)return{};for(var a=o.getFullYear(),c=s.getFullYear(),l=o.getMonth()+1,u=s.getMonth()+1,d=[],f=c,g=u,p={id:f,datePager:f,year:f,from:"01.01."+f,to:"01.01."+(f+1),month:[],isYear:!0},h=0,m=f>=Daria.Config.messagesMaxDate;f<a||f===a&&g<=l;)if(m&&p.month.push({datePager:t(g)+"."+f,month:g-1,year:f,from:"01."+t(g)+"."+f,to:"01."+t(g<12?g+1:1)+"."+(g<12?f:f+1),id:t(g)+String(f)}),g++,13===g&&(g=1,m?d.push(p):0===d.length&&d.push({id:f,datePager:f,year:f,old:1}),f++,(m=f>=Daria.Config.messagesMaxDate)&&(p={id:f,datePager:f,year:f,from:"01.01."+f,to:"01.01."+(f+1),month:[],isYear:!0})),++h>1e3)return Jane.ErrorLog.send({errorType:"messages-pager.infinity",dataYear:n,dataMonth:i,dataDay:r,nowDate:o.toString()}),{};return p.month.length&&d.push(p),{year:d}},getCountMonth:function(){return this.select(".year.month.datePager").length}},params:{current_folder:null}})})()},function(e,t){!(function(){var e=[{type:"#inbox",isInbox:!0,name:"Входящие",label:i18n("%Folder_inbox"),icon:"MailTypes-Inbox"},{type:"4",name:"Люди",label:i18n("%Messages_Title_By_Type_4"),icon:"MailTypes-People"},{type:"5",name:"Билеты",label:i18n("%Messages_Title_By_Type_5"),icon:"MailTypes-Ticket"},{type:"35",name:"Гостиницы",label:i18n("%Messages_Title_By_Type_35"),icon:"MailTypes-Hotels"},{type:"14",name:"Скидки",label:i18n("%Messages_Title_By_Type_14"),icon:"MailTypes-Sale"},{type:"18",name:"Социальные сети",label:i18n("%Messages_Title_By_Type_18"),shortLabel:i18n("%Messages_Title_By_Type_18_Short"),icon:"MailTypes-Social"}];ns.Model.define("messages-types",{methods:{preprocessData:function(t){var n,i=[];for(n in t)0!==t[n].freq&&i.push(n);var r={notEmptyTypes:i,typesInFilter:e};return $.extend(r,this.filterByArrayOfTypes(i,e)),r},getTypeById:function(t){return _(e).findWhere({type:String(t)})},filterByArrayOfTypes:function(e,t){var n={};return n.typesAfterFilter=[],n.typesAfterFilterDiscarded=[],t.forEach((function(t){t.canNotBeDeleted||"#inbox"===t.type||e.indexOf(t.type)>-1?n.typesAfterFilter.push(t):n.typesAfterFilterDiscarded.push(t)})),n}}})})()},function(e,t){!(function(){ns.Model.define("message-read-mute-fsm",{params:{ids:null,type:null},methods:{start:"",transitions:{toRead:["toMute","toUnread"],toMute:["toUnmute","toUnread","toRead"],toUnmute:["toUnread","toRead"],toUnread:["toRead","toUnmute"]}}},ns.ModelFsm)})()},function(e,t){ns.Model.define("state-message-thread-item",{params:{ids:null},events:{"ns-model-init":"_onNsModelInit"},methods:{_onNsModelInit:function(){this.setData({isOpened:!1,isFocused:!1,isIgnoreMarkRead:!1,promiseWillBeLoaded:!1,isVisible:!1,shouldBeInViewport:!1,forceMark:!1})},_setChangedData:function(e,t,n){if(e="."+e,this.get(e)!==t){var i=n?{silent:!0}:{};return this.set(e,t,i),!0}return!1},isOpen:function(){return this.get(".isOpened")},setOpen:function(e,t){return this._setChangedData("isOpened",e,t)},setVisible:function(e,t){return this._setChangedData("isVisible",e,t)},setFocus:function(e,t){return this._setChangedData("isFocused",e,t)},setIgnore:function(e,t){return this._setChangedData("isIgnoreMarkRead",e,t)}}},ns.ModelStatic)},function(e,t){ns.Model.define("get-maillists",{params:{emails:null}})},function(e,t){ns.Model.define("get-maillists-static",{events:{"ns-model-init":"_onInit"},methods:{_onInit:function(){this.setData({emails:null},{silent:!0})},getMaillists:function(e){var t=this,n=this.get(".emails")||{},i=_.difference(e,Object.keys(n)),r=vow.fulfill();if(i.length>0){var o=ns.Model.get("get-maillists",{emails:i.join(",")});r=ns.request.models([o]).then((function(i){var r=i[0].get(".maillists");r.forEach((function(e){n[e]||(n[e]=!0)})),_.difference(e,r).forEach((function(e){n[e]||(n[e]=!1)})),t.set(".emails",n),vow.fulfill()}))}return r.then((function(){var t=[];return e.forEach((function(e){!0===n[e]&&t.push(e)})),vow.fulfill(t)}))}}},ns.ModelStatic)},function(e,t){ns.Model.define("reset-unvisited",{params:{fid:null},methods:{resetUnvisited:function(){return ns.Model.get("folder",{fid:this.params.fid}).get(".recent")?ns.forcedRequest([this]).then((function(e){return vow.fulfill(e[0].get(".is_reset"))})):vow.fulfill(!0)}}})},function(e,t){ns.Model.define("notifications",{isCollection:!0,events:{"ns-model-init":"_onInit"},methods:{_uniqueId:0,DELAY_BEFORE_DELETE:600,MAX_NOTIFICATION_COUNT:10,_onInit:function(){this.setData({queue:[]})},hasNotifications:function(){return 0!==this.models.length},hasNotificationsInQueue:function(){return 0!==this.get(".queue").length},addNotification:function(e){if(ns.Model.get("notifications-state").isExpanded()){var t=this.get(".queue");t=t.concat(e),this.set(".queue",t)}else{var n=this.models[0];if(n&&n.isVIP()&&!e.vip)return;this._addNotification(e),this._tryRemoveLastNotification()}},_addNotification:function(e){var t=ns.Model.get("notifications-item",{id:this._uniqueId++}).setData(e);this.insert(t,0)},_tryRemoveLastNotification:function(){if(this.models.length>this.MAX_NOTIFICATION_COUNT){var e=this;_.delay((function(){e.remove(e.models.length-1)}),this.DELAY_BEFORE_DELETE)}},insertFromQueue:function(){this.get(".queue").length&&(this._moveVIPtoEndOfQueue(),this._insertFromQueue())},_moveVIPtoEndOfQueue:function(){var e=this.get(".queue");e=e.sort((function(e,t){return e.vip&&!t.vip?1:0})),this.set(".queue",e)},_insertFromQueue:function(){var e=this.get(".queue"),t=this;e.forEach((function(e){t._addNotification(e),t._tryRemoveLastNotification()})),this.set(".queue",[])}}},ns.ModelCollectionStatic)},function(e,t){ns.Model.define("notifications-item",{params:{id:null},methods:{isVIP:function(){return Boolean(this.get(".vip"))},isCalendarEvent:function(){return Boolean("calendar"===this.get(".type"))}}},ns.ModelStatic)},function(e,t){ns.Model.define("notifications-state",{events:{"ns-model-init":"_onInit"},methods:{_onInit:function(){this.setData({expanded:!1})},expand:function(){this.set(".expanded",!0)},collapse:function(){this.set(".expanded",!1)},isExpanded:function(){return this.get(".expanded")}}},ns.ModelStatic)},function(e,t){ns.Model.define("disk-secret-key",{methods:{isValid:function(){return this.get(".expirationDate")>=Date.now()}}})},function(e,t){ns.Model.define("thread-info",{params:{thread_id:null},methods:{request:function(){var e=ns.Model.get("message",{ids:this.params.thread_id});return e.get(".FAKE_THREAD_DATA")&&Daria.is3pane()?ns.request.fetchModels([this]).then(function(t){e.get(".FAKE_THREAD_DATA")&&e.setData(t.models[0].data),this.setData({})}.bind(this)):(this.setData({}),Vow.resolve())}}})},function(e,t){ns.Model.define("threads-info",{params:{thread_ids:null}})},function(e,t){ns.Model.define("push-vapid",{})},function(e,t){ns.Model.define("push-subscriptions",{params:{clients:null}})},function(e,t){ns.Model.define("do-push-subscribe",{params:{folders:null,subscription:null}})},function(e,t){ns.Model.define("do-push-unsubscribe",{})},function(e,t,n){"use strict";function i(e){return _.get(e,"xhr.status",!1)}ns.Model.define("versions",{events:{"ns-model-init":"onInit"},ctor:function(){this._timer=null},methods:{TIMEOUT:9e5,onInit:function(){this.setData({u2709:{version:Daria.Config.version}}),this.scheduleVersionUpdate()},request:function(){var e=this,t=Daria.api.versions;return ns.http(t,{model:this.id},{type:"GET"}).then((function(t){return e.setData(_.isPlainObject(t)?t:{})})).fail((function(e){i(e)||Jane.ErrorLog.send({errorType:"no_version.set_data_err"},JSON.stringify(e))}))},scheduleVersionUpdate:function(e){var t=this;this._timer&&clearTimeout(this._timer),e||(this._timer=setTimeout((function(){t.request().then((function(){return t._checkNeedPageUpdate()})).fail((function(){return!1})).then((function(e){return t.scheduleVersionUpdate(e)}))}),this.TIMEOUT))},_checkNeedPageUpdate:function(){if(Daria.Config.dev)return!1;var e=this.get(".u2709.version");return e?e!==Daria.Config.version&&(Jane.Services.setUpdateNeeded(),!0):(Jane.ErrorLog.send({errorType:"no_version.model"},JSON.stringify(this.getData())),!1)}}})},function(e,t){ns.Model.define("system-status",{events:{"ns-model-init":"onInit","ns-model-changed":"updateLoop"},methods:{TIMEOUT:Daria.IS_CORP?6e4:6e5,onInit:function(){this._shouldLoad=!0,this._timer=null},updateLoop:function(){Daria.Config["db-status"]=this.getData()["db-status"],this._restartTimer()},request:function(){return this._shouldLoad?ns.request.fetchModels([this]).then((function(e){if(!1===ns.request.canProcessResponse(e))return void this._setDefaultData();ns.request.extractModel(this,e.models[0]),this._checkNeedPageUpdate()}),this).fail((function(){this._setDefaultData()}),this):Vow.resolve()},_restartTimer:function(){this._timer&&clearTimeout(this._timer),this._timer=setTimeout(this._timerRequest,this.TIMEOUT)},_timerRequest:function(){ns.forcedRequest("system-status")},_setDefaultData:function(){this.setData({"db-status":"rw",problem:""})},_checkNeedPageUpdate:function(){Daria.timestamp<(Number(this.get(".reload_timestamp"))||0)&&Jane.Services.setUpdateNeeded()}}})},function(e,t){function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){i(e,t,n[t])}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}ns.Model.define("unsubscribe-furita-newsletters",{params:{},methods:{getRequestParams:function(){return n({},this.super_.getRequestParams.apply(this,arguments),{master:1})}}})},function(e,t){ns.Model.define("recipients",{isStrictParams:!0,params:{recipientsIds:null},methods:{extractData:function(e){return e&&e.data||{}}}})},function(e,t){function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!(function(){var e,t=function(e){return"404"===(e=e||ns.page.current.page)||"not-found"===e||"no-message"===e},i=function(){return{"search-react":{}}},r=function(){var e={"folders-box@":function(){if(Daria.areFoldersTabsEnabled()){var e={tabs:{},"attachments-tab":{},"user-folders-switcher":{},"user-folders":{},"folders-setup":{},"system-folders":{}};return Daria.isAttachmentsTabEnabled()||delete e["attachments-tab"],e}return{folders:{},"folders-setup":{}}},"messages-filters":{"messages-filters-box@":function(){var e={"messages-filters-wait":{},"messages-filters-important":{},"messages-filters-unread":{},"messages-filters-attachments":{}},t=ns.Model.get("labels"),n=t.getWaitingForReplyLabel();return n&&0!==n.count||delete e["messages-filters-wait"],Daria.isAttachmentsTabEnabled()&&delete e["messages-filters-attachments"],e}},labels:{},"labels-setup":{}};return Daria.hasAsideScrollContainer()&&(e={"aside-scroll-container":e}),e=Object.assign({"compose-buttons-box@":function(){return Daria.is2pane()?{"main-action-buttons":{}}:{}}},e),Daria.IS_CORP||(Daria.hasAsideScrollContainer()?(e["aside-scroll-container"]["collectors&"]={},e["aside-scroll-container"]["collectors-setup&"]={}):(e["collectors&"]={},e["collectors-setup&"]={})),Daria.Config.mayHaveAdv&&Object.assign(e,Daria.getDirectBlockLayoutInfo("banner").layout),Daria.is2pane()&&(e["fill-height-placeholder-box@"]={}),e["skin-saver-box@"]=function(){var e=ns.Model.get("themes").getCurrentTheme().hasSkinSaver(),t={};return e&&(t["skin-saver"]={}),t},e["copyright-box@"]=function(){var e={},t=ns.Model.get("theme-"+Daria.getThemeId()).get(".copyright");return t&&(e["copyright-"+t]={}),e},Daria.is3pane()&&(e.footer={"footer-journal-link&":{},"footer-help-link":{}}),e},o={"page-class-manager":{},"technical-problems-alert&":{},logo:{},"bug-report-box@":function(){return Daria.IS_CORP||Daria.hasSid("669")?{"bug-report":{}}:{}},notifications:{},"left-box@":{},"right-box@":{},"infoline-box@":{infoline:{}},"fake-head-background-box@":{},"typefilter-tabs-box@":function(){return Daria.areTabsVisible()&&!t()?{"typefilter-tabs":{}}:{}},"toolbar-box@":{},"service-box@":{},"more-services-box@":function(){return Daria.CompactMode.isCompactHeader()&&Daria.isSettingsPage()?{"more-services":{}}:{}},"search-box@":i(),"yandex-plus-renderer":{"yandex-plus-box@":function(){var e={};return Daria.canShowYandexPlusButton()&&(e["yandex-plus"]={}),e}},"loading-bar":{},"head-tabs":{},"compose-buttons-3p-box@":function(){var e=-1!==["message","messages","abook","compose2"].indexOf(ns.page.current.page);return Daria.is3pane()&&e?{"main-action-buttons":{}}:{}},"head-settings-controls":{},"head-user":{},"timeline-loader-box@":function(){return ns.Model.get("app-state").get(".module-timeline-loaded")?{"timeline-wrap&":!0}:{}},"themes-skin-rotater-box@":function(){var e={};return e["skin-rotater-"+Daria.themeId]={},e},"themes-footer-wrapper@":function(){var e=Daria.CompactMode;return!(e.isCompactMessagesList()||e.isCompactHeader()||Daria.is3pane())&&{"themes-footer-box@":function(){var e=Daria.themes.footers;return t()?e._default:e[Daria.themeId]||e._default}}},"themes-selector-box@":function(){if(ns.Model.get("themes-selector").isOpened()){var e={};return ns.Model.get("themes").get(".themes.*.settings").forEach((function(t){e[t]={}})),{"themes-selector":e}}return{}},"browser-notifications":{},"messages-time-updater":{}};ns.layout.define("common",{app:_.extend({},o,Daria.getDirectBlockLayoutInfo("messages-direct").layout)}),ns.layout.define("common-d",{app:o}),ns.layout.define("common+left+toolbar-compose",{"app toolbar-box@":{toolbar:{"search-box@":i(),"toolbar-buttons-box@":"toolbar-buttons-compose"}}},"common+left+toolbar"),_.each(["common","common-d"],(function(e){var t=e+"+left+toolbar";ns.layout.define(t,{"app left-box@":r,"app toolbar-box@":{"mops-confirmation-box@":"mops-confirmation",toolbar:function(){var e={"toolbar-buttons-box@":"toolbar-buttons"};return"message"!==ns.page.current.page&&(e["toolbar-aside-box@"]=function(){var e=ns.page.current.page,t={};if("abook"!==e){!Daria.areTabsVisible()&&(t["inbox-filter&"]={}),Daria.Config.NO_SETTINGS||(t["layout-switch"]={})}return Daria.CompactMode.isCompactHeader()&&(t["more-services"]={}),t}),e}}},e)})),ns.layout.define("common+left",{"app left-box@":r},"common"),ns.layout.define("not-found",(e={},n(e,"app "+Daria.getDirectBlockLayoutInfo("messages-direct").name,{}),n(e,"app service-box@",{404:{}}),e),"common"),ns.layout.define("user-dropdown",{"user-dropdown":{"user-dropdown-help-link":{}}}),ns.layout.define("user-feedback",{"user-feedback":{"user-feedback-box@":"user-feedback-report"}})})()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2148),r=n.n(i),o=n(914);ns.events.on("pageinit",(function(){ns.request(["filters"]),Daria.IS_CORP||ns.request(["userphones"]);var e=["module-compose","module-message"];ns.Model.get("settings").getSign("timeline_enable")&&e.push("module-timeline"),ns.request(e)})),ns.events.on("pageinit",(function(){ns.forcedRequest(["do-mail-reset-recent-counter"]),ns.events.on("pageVisible.change",(function(){Jane.watcher.get("pageVisible")&&ns.forcedRequest(["do-mail-reset-recent-counter"])}))})),ns.events.on("pageinit",(function(){ns.events.on("ns-page-before-changed",(function(){nb.trigger("popup-close")}))})),ns.events.on("pageinit",(function(){Daria.Sound.preload("message")})),ns.events.on("pageinit",(function(){Daria.Geolocation.monitoring()})),ns.events.on("pageinit",(function(){ns.Model.get("settings").isSet("show_todo")&&ns.request(["module-todo"]).then((function(){Daria.Todo.init()}))})),ns.events.on("pageinit",(function(){Jane.HAS_AD&&ns.request("module-direct")})),ns.events.on("pageinit",(function(){var e=ns.Model.get("app-state");e&&e.set(".shouldAnimate",!1)})),ns.events.on("pageinit",(function(){new r.a({cspHost:Daria.Config.cspHost,from:"LIZA",tld:Daria.Config.TLD,reqid:Daria.Config.connection_id}).check()})),ns.events.on("pageinit",(function(){Jane.HAS_AD&&"messages"===ns.page.current.page&&Daria.monitoring.session({action:"first_render",messages:Daria.MailboxAdvState.messagesInfo})})),ns.events.on("pageinit",(function(){Object(o.b)(ns.Model.get("settings").getData())}))},,function(e,t){Daria.IS_CORP&&ns.events.on("ns-page-after-load",(function(){$.ajax({url:"//center.yandex-team.ru/whistlah",dataType:"jsonp"})})),ns.events.on("ns-page-before-load",(function(e,t){var n=t[0],i=t[1];"messages"===n.page&&(n.params.ids||n.params.thread_id)&&(n.params.ids===i.params.ids&&n.params.thread_id===i.params.thread_id||ns.events.trigger("daria:message-will-close"))}))},function(e,t){var n=function(e,t){return e.call(this,t)},i=_.throttle(n,100,{leading:!1});Daria.ContextMenu=function(e){if(!e.items||!e.items.length)throw new Error('Parameter "items" must contain at least 1 element');e.items=_.sortBy(e.items,"index"),this._params=e,this._parentMenu=e.parentMenu,this._scrollItervalIds={},this._menuInfo=this._transformItems(e.items),this._$container=$(Jane.tt("mail:context-menu",{items:this._menuInfo.items,"is-main-menu":!this._parentMenu})),this._$menu=this._$container.find(".js-context-menu"),this._$menuWrapper=this._$container.find(".js-context-menu-wrapper"),this._$menuContent=this._$container.find(".js-context-menu-items"),this._$menu.on("contextmenu",(function(){return!1})).on("mouseenter",".js-item",i.bind(this,this._onItemHover)).on("click",".js-item:not(.is-inactive):not(.js-submenu)",this._onItemClick.bind(this))},ns.events.on("dropdowns-closed",(function(){Daria.ContextMenu.close()})),ns.events.on("daria:dropdown:close",(function(){Daria.ContextMenu.close()})),Daria.ContextMenu.Helpers={},Daria.ContextMenu._$menuContainer=null,Daria.ContextMenu._isOpened=!1,Daria.ContextMenu.isOpened=function(){return this._isOpened},Daria.ContextMenu.close=function(e){e=e||{},ns.events.trigger("daria:vContextMenu:close",{success:Boolean(e.success),staySelection:Boolean(e.staySelection)}),$(".js-layout-left").off("scroll.context-menu-close")},Daria.ContextMenu.prototype._isVisible=!1,Daria.ContextMenu.prototype.show=function(e){var t=this,n=this._isTopLevelMenu=!this._parentMenu,i=!n,r=$(window),o=$("BODY"),s=$(document);n&&(Daria.Dropdown.closeAll(),Daria.ContextMenu.close(),Daria.ContextMenu._isOpened=!0,ns.events.once("daria:vContextMenu:close",(function(e,n){n=n||{},n.menuId&&n.menuId!==t._menuId||t._onCloseMenu(e,n)})),o[0].addEventListener("mousedown",this._closeMenuIfOut),o[0].addEventListener("contextmenu",this._closeMenuIfOut),this._$scrollContainer=e.$scrollContainer||r,this._$scrollContainer.on("scroll.context-menu-show",Daria.ContextMenu.close),r.on("resize.context-menu-show",Daria.ContextMenu.close),$.Shortcuts.modalListOn("context-menu"));var a=Daria.ContextMenu._$menuContainer;a||(a=Daria.ContextMenu._$menuContainer=$("<div>"),a.appendTo("body")),a.append(this._$container),this._isVisible=!0;var c=o.outerWidth(),l=o.outerHeight(),u=s.scrollLeft(),d=s.scrollTop(),f=!1,g={top:e.y,left:e.x},p=this._$menu.find(".js-item:first"),h=this._itemHeight=p.outerHeight(),m=this._$menu.outerWidth(),v=this._$menu.outerHeight();i&&v>l/2&&(v=l/2,v=Math.floor(v/h)*h,this._$menuWrapper.css({"max-height":v}),this._addScrollControls(),f=!0);var _=!1,b=e.x-u,y=e.y-d;if(b+m>c&&(g.left-=m,i&&(g.left-=this._parentMenu._$menu.outerWidth()+2)),y+v>l&&(g.top-=v,i&&(g.top+=h),_=!0),i){var S=p.offset().top-this._$menu.offset().top;_&&!f?g.top+=S:g.top-=S}this._$menu.css(g);var w=this._$menuWrapper.width(),k=this._$menuContent.width();w>k&&this._$menu.css({width:2*w-k}),n&&this._log("Показ")},Daria.ContextMenu.prototype._log=function(e){Jane.c("Меню по правому клику",Daria.is2pane()?"2pane":"3pane",Daria.Metric.getPath(),this._params.metrika,e)},Daria.ContextMenu.prototype._closeMenuIfOut=function(e){$(e.target).closest(".js-context-menu").length||Daria.ContextMenu.close({staySelection:!0})},Daria.ContextMenu.prototype._addScrollControls=function(){this._$menu.addClass("context-menu_scroll"),this._$menu.addClass("context-menu_scroll_allow-down"),this._contentHeight=this._$menuContent.outerHeight(),this._contentWrapperHeight=this._$menuWrapper.outerHeight(),this._$menuWrapper.on("scroll",_.throttle(this._updateArrowsState.bind(this),50,{leading:!1})),this._$menu.on("mouseenter",".js-context-menu-scroll-up",this._toggleScrolling.bind(this,"up",!0)).on("mouseleave",".js-context-menu-scroll-up",this._toggleScrolling.bind(this,"up",!1)).on("mouseenter",".js-context-menu-scroll-down",this._toggleScrolling.bind(this,"down",!0)).on("mouseleave",".js-context-menu-scroll-down",this._toggleScrolling.bind(this,"down",!1))},Daria.ContextMenu.prototype._onItemHover=function(e){if(this._isVisible){var t=$(e.currentTarget);if(this._$activeItem&&(this._$activeItem.removeClass("context-menu-item_active"),this._$activeItem=null),t.hasClass("js-submenu")){this._$activeItem=t,t.addClass("context-menu-item_active");var n=t.data("id"),i=this._menuInfo.subMenusHash[n];if(i.subMenu&&i.subMenu.isShown())return;this._closeAllSubMenus(),i.subMenu=new Daria.ContextMenu({items:i.items,parentMenu:this,metrika:this._params.metrika}),i.subMenu.show({x:t.offset().left+t.outerWidth()+1,y:t.offset().top})}else this._closeAllSubMenus()}},Daria.ContextMenu.prototype._onItemClick=function(e){var t=$(e.currentTarget),n=this._params.items[t.data("id")];this.closeMenu({success:!0}),this._log(n.metrika||"Неизвестная строка"),n.onClick&&n.onClick()},Daria.ContextMenu.prototype._closeAllSubMenus=function(){for(var e in this._menuInfo.subMenusHash){var t=this._menuInfo.subMenusHash[e];t.subMenu&&t.subMenu.close()}},Daria.ContextMenu.prototype.isShown=function(){return this._isVisible},Daria.ContextMenu.prototype.close=function(){for(var e in this._scrollItervalIds)clearInterval(this._scrollItervalIds[e]);if(this._isTopLevelMenu){var t=$("BODY");t[0].removeEventListener("mousedown",this._closeMenuIfOut),t[0].removeEventListener("contextmenu",this._closeMenuIfOut),this._$scrollContainer.off(".context-menu-show"),$(window).off(".context-menu-show"),$.Shortcuts.modalListOff()}this._isVisible=!1,this._closeAllSubMenus(),this._$container&&this._$container.remove()},Daria.ContextMenu.prototype._transformItems=function(e){for(var t={},n=e.map((function(e,n){return e.items&&(t[n]={items:e.items}),{id:n,type:e.type,text:e.text,alt:e.alt,"inline-css":e.style,"add-class":e.addClass,"custom-icon":e.customIcon,"sub-menu":Boolean(e.items),inactive:e.hasOwnProperty("isActive")&&!e.isActive}})),i=[],r=0;r<n.length;++r){var o=n[r];("separator"!==o.type||0!==i.length&&r!==n.length-1&&"separator"!==n[r+1].type)&&i.push(o)}return{items:i,subMenusHash:t}},Daria.ContextMenu.prototype._onCloseMenu=function(e,t){Daria.ContextMenu._isOpened&&(t=t||{},this.close(),Daria.ContextMenu._$menuContainer.remove(),Daria.ContextMenu._$menuContainer=null,Daria.ContextMenu._isOpened=!1,!t.success&&this._params.onCancel&&this._params.onCancel(t),this._params.onClose&&this._params.onClose())},Daria.ContextMenu.prototype._updateArrowsState=function(){var e=this._$menuWrapper.scrollTop();this._$menu.toggleClass("context-menu_scroll_allow-up",e>0).toggleClass("context-menu_scroll_allow-down",this._contentHeight-this._contentWrapperHeight>e)},Daria.ContextMenu.prototype._toggleScrolling=function(e,t){t?this._scrollItervalIds[e]=setInterval(this._scroll.bind(this,e),220):clearInterval(this._scrollItervalIds[e])},Daria.ContextMenu.prototype._scroll=function(e){var t=this._$menuWrapper.scrollTop(),n="up"===e?Math.ceil:Math.floor,i=n(t/this._itemHeight)*this._itemHeight,r=i+("up"===e?-this._itemHeight:this._itemHeight);r=Math.min(Math.max(r,0),this._contentHeight-this._contentWrapperHeight),this._$menuWrapper.scrollTop(r),this._updateArrowsState()},Daria.ContextMenu.prototype.closeMenu=Daria.ContextMenu.close.bind(Daria.ContextMenu)},function(e,t,n){n(2152),n(2153),n(2154),n(2155),n(2156),n(2157),n(2158),n(2159),n(2160),n(2161),n(2162),n(2163),n(2164),n(2165),n(2166),n(2167),n(2168),n(2169),n(2170),n(2171),n(2172),n(2173),n(2174),n(2175),n(2176),n(2177),n(2178),n(2179),n(2188),n(2189),n(2190),n(2191),n(2192),n(2193),n(2194),n(2195),n(2196),n(2197),n(2198),n(2199),n(2200),n(2201),n(2202),n(2203),n(2204),n(2205),n(2206),n(2207),n(2208),n(2209),n(2210),n(2211)},function(e,t){ns.View.define("prevent-scroll-propagation-mixin",{yateModule:"mail",methods:{getScrollContent:function(){throw new Error("Must be overwritten")},onWheel:function(e){var t=this.getScrollContent(e);if(!t)return e.preventDefault(),void e.stopImmediatePropagation();var n=e.originalEvent.deltaY,i=t.scrollTop,r=t.offsetHeight,o=t.scrollHeight;(n<0&&0===i||n>0&&i+r>=o||r===o)&&(e.preventDefault(),e.stopImmediatePropagation())}}})},function(e,t){ns.View.define("page-class-manager",{models:{"app-state":{"ns-model-changed":!1,"ns-model-changed.pageClasses":"updatePageClasses"}},yateModule:"mail",methods:{updatePageClasses:function(){this.keepValid();var e=this.getModel("app-state"),t=e.get(".pageClasses"),n=_.uniq([].concat(Object.keys(t),Array.from(document.documentElement.classList))),i=function(e){return t[e]||void 0===t[e]};document.documentElement.className=n.filter(i).join(" ")}}})},function(e,t){ns.View.define("kbd-dropdown-actions",{methods:{moveKbdCursor:function(e){var t=this,n=function(e){var t=e[0],n=e.closest(".js-filter-list-wrap")[0];if(!t||!n)return!1;var i=0,r=n.getBoundingClientRect(),o=t.getBoundingClientRect(),s=o.height;o.top+o.height+s>=r.bottom&&(i=r.bottom-o.top-o.height-s),o.top<r.top+s&&(i=r.top-o.top+s),0!==i&&(n.scrollTop+=i>0?-i:Math.abs(i))},i=function(e){var i=t.visibleList[t.kbdSelected],r=t.visibleList[e];i?i.$node.removeClass(t.selectedClass):t.newListElementActive&&($(t.newListSelector).removeClass(t.selectedClass),t.newListElementActive=!1),r?(n(r.$node),r.$node.addClass(t.selectedClass),t.kbdSelected=e):(-2===e&&(t.newListElementActive=!0,$(t.newListSelector).addClass(t.selectedClass),t.kbdSelected=t.visibleList.length),-1===e&&(t.kbdSelected=-1))};i("down"===e?(function(){return null===t.kbdSelected?0:t.kbdSelected+1<t.visibleList.length?t.kbdSelected+1:-2})():(function(){return t.kbdSelected<0?-1:null===t.kbdSelected?0:t.kbdSelected-1>-1?t.kbdSelected-1:-1})())},getOpenOptions:function(e){var t={width:200,autoclose:!0,how:{my:"center top",at:"center bottom"}};return jpath(e,".isInMore")[0]?t=_.extend(t,{how:{my:"left center",at:"right center",collision:"flipfit fit",within:".mail-App"},class:"is-in-more-button"}):jpath(e,".isInDropdown")[0]&&(t=_.extend(t,{class:"is-in-dropdown"})),t},_preventDefaultAndStopPropagation:function(e){e.preventDefault(),e.stopPropagation()}}})},function(e,t){ns.View.define("404",{events:{"ns-view-show":"onShow","ns-view-hide":"onHide"},methods:{onShow:function(){$("html").addClass("mail-Page_404")},onHide:function(){$("html").removeClass("mail-Page_404")}},yateModule:"mail"})},function(e,t){var n=["show_checkbox_inside_userpic","messages_avatars","liza_minified"];ns.View.define("app",{models:{"app-state":{"ns-model-changed":!1,"ns-model-changed.module-timeline-loaded":"onTimelineModuleLoaded","ns-model-changed.timelineHeight":"onChangedTimelineHeight"},"account-information":!1,settings:Object.assign({"ns-model-changed":!1,"ns-model-changed.liza_minified_header":"onChangedLizaMinifiedHeader","ns-model-changed.folder_thread_view":"onSwitchThreadMode","ns-model-changed.with_bigger_text":"onSwitchBiggerText"},n.reduce((function(e,t){return e["ns-model-changed."+t]="onChangeInterfaceSettings",e}),{})),"index-data":!1,"skin-saver-state":{"ns-model-changed":!1,"ns-model-changed.previewMode":"toggleSkinPreviewMode"},versions:!1},events:{"ns-view-htmlinit":"onHtmlinit","ns-view-show":"onShow","ns-view-hide":"onHide","ns-page-after-load":"onPageAfterLoad","ns-view-htmldestroy":"onHtmlDestroy","click .mail-App-Content":"closeMessageOnExternalClick","scroll .js-messages-scroll-area":"_onPaneScroll","click .js-layout-left-toggler":"_onToggleLeftColumWidth","click .js-header-themes-selector":"_onThemesSelectorClick","resize window":"onWindowResize","daria:vMail:resizer:initialized":"_onMailResizerInitialized","daria:vApp:changeLeftColumWidth@show":"_onChangeLeftColumWidth","daria:vApp:enableLeftColumnResize@show":"_onEnableLeftColumnResize","daria:vApp:disableLeftColumnResize@show":"_onDisableLeftColumnResize","daria:vApp:changeAppWidth@show":"onChangeAppWidth","daria:unsubscribe-popup:show":"onShowUnsubscribePopup","daria:unsubscribe-popup:hide":"onHideUnsubscribePopup"},ctor:function(){this._onPaneScroll=_.throttle(this._onPaneScroll.bind(this),50),this._onThemesSelectorClick=_.throttle(this._onThemesSelectorClick.bind(this),300,{leading:!1}),this.onWindowResize=_.throttle(this.onWindowResize.bind(this),50),this.boundOnButtonKeyPress=this.onButtonKeyPress.bind(this),this._onTransitionEndDebounce=_.debounce(this._onTransitionEnd.bind(this),20)},yateModule:"mail",methods:{MIN_WIDTH_HEADER_LEFT:220,MIN_LOGO_GAP:20,MIN_WIDTH_HEADER_BUTTONS:201,_resizerCommon:{_vMailPane2Width:0,_vMailFixBeforeCssUpdate:_.noop,_vMailFixAfterCssUpdate:_.noop,_setActualRatio:_.once((function(){var e,t=this.getFromSettings();e=_.isFinite(t)?this.unitsToRatio(t):this.unitsToRatio(this.sizes.pane1),this.setRatio(e,!0,!0)}))},onHtmlinit:function(){this.MIN_WIDTH_LOGO=this.$node.find(".js-mail-Logo").width(),Daria.resize.init(),this.$node.transitionEnd(this._onTransitionEndDebounce)},onHtmlDestroy:function(){Daria.resize.dispose()},onShow:function(){this.splitter&&this.splitter.initialized&&this.splitter.options.splitter.show(),this._onChangeLeftColumWidth(),$("body").on("keydown","button",this.boundOnButtonKeyPress),"themes"===Daria.urlParams.startWithPromo&&this._openThemesSelector(),this.onChangeInterfaceSettings()},onHide:function(){$("body").off("keydown","button",this.boundOnButtonKeyPress)},onPageAfterLoad:function(){"messages"===ns.page.current.page&&(Daria.is3pv()&&(Daria.resize.reinit3paneVerticalResizer(),ns.events.trigger("daria:vApp:changeRightColumSize")),Daria.is3ph()&&(Daria.resize.reinit3paneHorizontalResizer(),ns.events.trigger("daria:vApp:changeAppWidth"))),this._onChangeLeftColumWidth()},onChangeInterfaceSettings:function(){var e=this.getModel("settings"),t=this.$node.find(".js-mail-layout");n.forEach((function(n){t.toggleClass(n,Boolean(e.getSign(n)))}))},onTimelineModuleLoaded:function(){Daria.hasFeature("web_ad_prerender")&&!ns.Model.get("settings").getSign("timeline_enable")||ns.page.lazyRefresh()},onChangedTimelineHeight:function(){var e=this.getModel("app-state").get(".timelineHeight"),t=ns.Model.get("scroller-message").getScroller();t.scrollTop()+t.height()+e>(Daria.is2pane?this.$node.height():this.$node.find(".js-message-inner").height())&&(this._needScrollMessage=!0)},_onTransitionEnd:function(){this._needScrollMessage&&(this._needScrollMessage=!1,this.onScrollOutTimeline())},onScrollOutTimeline:function(){var e=this.getModel("app-state").get(".timelineHeight");if(e>0){var t=ns.Model.get("scroller-message").getScroller(),n=t.scrollTop();t.scrollTop(n+e)}},saveLayoutConstraints:function(){var e=this.$node.find(".js-mail-layout")[0];this.getModel("app-state").set(".mailLayoutClientRect",e.getBoundingClientRect())},getLayoutConstraints:function(){return this.getModel("app-state").get(".mailLayoutClientRect")||this.saveLayoutConstraints(),this.getModel("app-state").get(".mailLayoutClientRect")},_leftColumnClassesAll:["mail-Layout-Aside_maximum","mail-Layout-Aside_middle","mail-Layout-Aside_minimum","mail-Layout-Aside_compact"].join(" "),_leftColumnWidthOptions:[{min:250,max:Number.MAX_VALUE,nameOfClass:"mail-Layout-Aside_maximum",sizeKind:"maximum"},{min:180,max:250,nameOfClass:"mail-Layout-Aside_middle",sizeKind:"middle"},{min:100,max:180,nameOfClass:"mail-Layout-Aside_minimum",sizeKind:"minimum"},{min:0,max:100,nameOfClass:"mail-Layout-Aside_minimum mail-Layout-Aside_compact",sizeKind:"compact"}],onChangedLizaMinifiedHeader:function(){this.resizeHeaderLeftColumn()},onSwitchThreadMode:function(){_.contains(["message","messages"],ns.page.current.page)&&ns.page.go(ns.router.generateUrl(ns.page.current.page,ns.page.current.params))},onSwitchBiggerText:function(){this.getModel("app-state").updatePageClasses({"with-bigger-text":ns.Model.get("settings").isSet("with_bigger_text")}),ns.events.trigger("daria:vMessagesPager:restruct"),ns.events.trigger("daria:vToolbarButton:restruct"),ns.events.trigger("head-tabs-recalculate")},_onChangeLeftColumWidth:function(){var e=this.$node.find(".js-layout-left");if(!Daria.isPageWithResizableLeftColumn())return e.removeClass(this._leftColumnClassesAll),void(this._prevAsideSizeKind=null);var t=e.width(),n=_.find(this._leftColumnWidthOptions,(function(e){return t>=e.min&&t<e.max}));n.sizeKind!==this._prevAsideSizeKind&&(e.removeClass(this._leftColumnClassesAll),e.addClass(n.nameOfClass),Daria.resize.isWithCompactLeftColumn="compact"===n.sizeKind,"compact"===this._prevAsideSizeKind?Jane.c("Left column",Daria.is2pane()?"2pane":"3pane","Choosed","Full mode"):void 0!==this._prevAsideSizeKind&&"compact"===n.sizeKind&&Jane.c("Left column",Daria.is2pane()?"2pane":"3pane","Choosed","Compact mode")),ns.events.trigger("shortcuts.update-labels-list"),this.getModel("app-state").setIfChanged(".asideSizeKind",n.sizeKind),this.resizeHeaderLeftColumn({size:{width:t}}),this._prevAsideSizeKind=n.sizeKind},_onToggleLeftColumWidth:function(){var e,t=ns.Model.get("settings"),n=this.$node.find(".js-layout-left"),i=n.width();Daria.resize.isWithCompactLeftColumn?(Jane.c("Left column",Daria.is2pane()?"2pane":"3pane","Click","Unfold"),t.setSettings({"size-aside-minified":i}),e=Math.max(this.MIN_WIDTH_HEADER_LEFT,parseInt(t.getSetting("size-aside-expanded"),10))||this.MIN_WIDTH_HEADER_LEFT):(Jane.c("Left column",Daria.is2pane()?"2pane":"3pane","Click","Fold"),t.setSettings({"size-aside-expanded":i}),e=Math.min(79,parseInt(t.getSetting("size-aside-minified"),10))||60),n.width(e),Daria.resize.saveSizeOnSettings({settingName:"size-layout-left",type:"h"},n),Daria.is3pv()||ns.events.trigger("daria:vApp:changeAppWidth"),ns.events.trigger("daria:vApp:changeLeftColumWidth"),ns.events.trigger("daria:vApp:changeRightColumSize"),this.resizeHeaderLeftColumn({size:{width:e}})},_onDisableLeftColumnResize:function(){if(!Daria.isPageWithResizableLeftColumn()){var e=this.$node.find(".js-layout-left");e.addClass("with-disabled-resize"),this.resizeHeaderLeftColumn({size:{width:e.width()}})}},_onEnableLeftColumnResize:function(){if(Daria.isPageWithResizableLeftColumn()){var e=this.$node.find(".js-layout-left");e.hasClass("with-disabled-resize")&&(e.removeClass("with-disabled-resize"),ns.events.trigger("daria:vApp:changeAppWidth"),ns.events.trigger("daria:vApp:changeLeftColumWidth"))}},resizeHeaderLeftColumn:function(e){var t,n=ns.Model.get("settings");if(t=e?e.size.width:this.WIDTH_LAYOUT_LEFT?this.WIDTH_LAYOUT_LEFT:parseInt(n.getSetting("size-layout-left"),10)||this.MIN_WIDTH_HEADER_LEFT,this.WIDTH_LAYOUT_LEFT=t,!Daria.CompactMode.isCompactHeader()){var i=this.getLayoutConstraints();t=Math.max(t,this.MIN_WIDTH_LOGO),t-=Math.max(0,this.MIN_LOGO_GAP-i.left)}var r=this.$node.find(".js-header-left-column").outerWidth(),o=Math.max(t-r,0);this.$node.find(".js-exp-header-left-column").css("max-width",o+"px"),this.$node.find(".js-header-left-column").css("min-width",t+"px")},_onThemesSelectorClick:function(){this._openThemesSelector()},_openThemesSelector:function(){ns.Model.get("themes-selector").open(),ns.page.go()},_onPaneScroll:function(e){var t=$(e.target),n=t.find(".ui-resizable-s");n.length&&n.css({top:t.scrollTop()+t.height()-n.height()})},onWindowResize:function(){this.saveLayoutConstraints()},onChangeAppWidth:function(){this.saveLayoutConstraints()},onButtonKeyPress:function(e){var t=$(e.currentTarget);if(e.keyCode===Jane.Common.keyCode.ENTER){var n=jQuery.Event("click");return t.trigger(n),!0}},closeMessageOnExternalClick:function(e){if(Daria.is2pane()){if(e.target===e.currentTarget){Daria.isMessageOpenedInList()&&(Jane.c("Закрытие писем кликом в сторону"),ns.page.go(Daria.Page.generateUrl.closeMessage()))}}},toggleSkinPreviewMode:function(){var e=this.getModel("skin-saver-state");this.getModel("app-state").updatePageClasses({"mail-Page_skin_preview":e.isPreviewMode()})},_onMailResizerInitialized:function(e,t){"h"===t.options.direction&&(this._resizerCommon._vMailFixBeforeCssUpdate=function(){t&&t.initialized&&(t.updateSizes(),this._vMailPane2Width=t.sizes.pane2)},this._resizerCommon._vMailFixAfterCssUpdate=function(){if(t&&t.initialized){t.updateSizes();var e=t.totalSize-this._vMailPane2Width,n=t.unitsToRatio(e);t.setRatio(n)}})},onShowUnsubscribePopup:function(){Daria.React.popupSubscriptions.openPopup(),this.getModel("app-state").updatePageClasses({"with-UnsubscribePopup":!0})},onHideUnsubscribePopup:function(){this.getModel("app-state").updatePageClasses({"with-UnsubscribePopup":!1})}}})},function(e,t,n){"use strict";function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){r(e,t,n[t])}))}return e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var o=n(906);ns.View.define("journal-log-mixin",{methods:{getUserBehaviorId:function(){return this._readingId||(this._readingId=Daria.Config.yandexuid+(this.params.tid||"")+Math.random().toString(16).slice(2)),this._readingId},_fillMid:function(e,t){t.ids&&(e.mid=t.ids)},_fillTid:function(e,t){t.tid&&(e.tid=t.tid)},_fillFolderTabParams:function(e,t){var n=ns.Model.get("message",t);if(n)if(Daria.isAttachmentsTab())e.container_kind="tab",e.container_id="attachments",e.container_type="attachments";else if(Daria.isSearchPage())e.container_kind="search",e.container_id="",e.container_type="";else if(Daria.areFoldersTabsEnabled()&&n.isInTab()){var i=n.getTabId();e.container_kind="tab",e.container_id=i,e.container_type=i}else{var r=n.getFolderId();e.container_kind="folder",e.container_id=r,e.container_type=Object(o.a)(r)}},getUserBehaviorParams:function(){var e=this.params,t={target:e.tid?"thread":"message",isSearch:Daria.Page.isParamsForSearch(e),readingId:this.getUserBehaviorId()};return this._fillMid(t,e),this._fillTid(t,e),this._fillFolderTabParams(t,e),t},writeToUserJournal:function(e,t){var n=this.getUserBehaviorParams(),r=i({},n,t);Daria.monitoring.journal(e,r)},writeLogForWidgets:function(e,t){Daria.monitoring.journal(e,Object.assign({target:"message"},t))},writeAttachOpenToUserJournal:function(e,t){this.writeToUserJournal("open",{target:"attach",open_type:e?"embed":"external",container_subtype:t,isSearch:Daria.isSearchPage()})}}})},function(e,t){ns.View.define("messages-search-logger-mixin",{methods:{logClickMessageFromSearch:function(e){var t=ns.page.current.params,n=ns.Model.get("messages",t),i=n.params,r=this.getModel("message")||ns.Model.get("message",this.params),o=r.get(".mid"),s=n.models.indexOf(r);s=s>-1?s+1:-1,Daria.React.logSearchMessageClick(e,r.get(".mid"),s,n.isSearchTopResult(o),i)},logSearchSuggest:function(e,t){var n=e.suggestUsed?Number(ns.Model.get("focus").findIndex(this))+1:-1;Daria.React.logSearchSuggest(_.extend({},e,{itemPos:n}),t)}}})},function(e,t){ns.View.define("preview-eml-mixin",{methods:{_getParamsFromNode:function(e){var t=Daria.parseQuery($(e).data("params")),n=t.mid||this.params.ids,i=t.hid,r=t.subj;return r&&"No subject"!==r||(r=i18n("%Без_темы")),{ids:n,hid:i,subj:r}},_getPopupWidth:function(){var e=Daria.is3pane()?$(".js-layout-second-pane").width():$(".js-layout-first-pane").width();return e||(e=this.$node.width()),e},previewEml:function(e){e.preventDefault();var t=this._getParamsFromNode(e.currentTarget);if(this.vPopup&&(this.popupIsLoading||this.vPopup.isValid()))return this.vPopup.close(),this.vPopup.destroy(),void(this.vPopup=null);var n=$(window).height(),i=this._getPopupWidth();this.vPopup=ns.View.create("attached-message-popup",t),this.vPopup.appendToNode=this.node,this.popupIsLoading=!0,ns.request(["message","message-body"],{ids:t.ids,hid:t.hid}).then((function(){this.vPopup.open({width:i,maxHeight:n,where:window}),this.popupIsLoading=!1}),this),this.countAttachmentPreview()}}})},function(e,t){ns.View.define("save-to-disk-mixin",{events:{"click .js-show-save-popup":"showSavePopup"},yateModule:"mail",methods:{_deferred:null,showSavePopup:function(e){ns.assert(this.getCountLocationName,"Daria.vSaveToDiskMixin","method getCountLocationName should be declared");var t=e.currentTarget,n=$(t),i=n.closest(".js-mail-file");e.preventDefault(),this._deferred||(this._deferred=ns.View.create("disk-widget-save-popup").open({mid:t.getAttribute("data-mid"),hid:t.getAttribute("data-hid"),diskDownloadUrl:t.getAttribute("data-disk-download-url"),countLocationName:this.getCountLocationName(),popup:{where:t,withTail:!1}}),n.toggleClass("is-disabled",!0),i.toggleClass("is-active",!0),this._deferred.promise().then((function(){n.removeClass("is-disabled"),i.removeClass("is-active"),this._deferred=null}),this),this.countSaveToDisk())}}})},function(e,t){ns.View.define("count-attachments-ops-mixin",{methods:{_locationNames:{"attachments-widget":"in messages list","attachments-widget-body":"in message","attachments-widget-popup":"in popup on messages list","thread-sidebar-item-attachments-item":"in right column","compose-attach-area":"in compose","attachments-tab-widget":'in tab "Attachments"'},getCountLocationName:function(){var e=this._locationNames[this.id];return ns.assert(e,"Daria.vAttachmentsWidget","no name specified for %s to count in metrika",this.id),e},sendMetric:function(e){Jane.c(["Attachments",e,this.getCountLocationName()])},sendGroupedMetric:function(e){Jane.groupedCount(["Attachments",e,this.getCountLocationName(),"+"])},_countAttachmentsShow:function(){this.sendGroupedMetric("attachments show")},countAttachmentsShow:Daria.memoizeMetricsById([],(function(e){return"".concat(this.__uniqueId,"_").concat(e)}),(function(){return this._countAttachmentsShow()})),countAttachmentPreview:function(){this.sendMetric('click "show"/preview')},countDownloadAttachment:function(){this.sendMetric('click "download one"')},countDownloadAllAttachments:function(){this.sendMetric('click "download all"')},countAttachmentsNumberClick:function(){this.sendMetric("click on attachments count")},countSaveToDisk:function(){this.sendMetric('click on "save to disc"')}}})},function(e,t){ns.View.defineNg("attachments-widget",{models:{"message-body":!0},events:{"ns-view-show":"onShow","click .js-attachment-actions-item":"onAttachmentActionsItemClick","click .js-image-preview":"previewImage","click .js-download-attachment":"countDownloadAttachment","click .js-eml-preview":"previewEml","click .js-show-info":"showInfoPopup","click .js-download-all-attachments":"countDownloadAllAttachments","click .js-preview-attachment":"countAttachmentPreview","daria:vScrollerMessages:scroll":"_updateItemsVisibility","daria:vScrollerMessage:scroll":"_updateItemsVisibility"},params:function(e){var t=ns.Model.get("message",{ids:e.ids}),n={ids:t.get(".last_mid")||t.get(".mid")};return e.hid&&(n.hid=e.hid),n},yateModule:"mail",methods:{onShow:function(){this._updateItemsVisibility()},_updateItemsVisibility:function(e){var t=this,n=Daria.is3pane()?"scroller-message":"scroller-messages";if("daria:vScrollerMessages:scroll"!==e||!Daria.is3pane()){var i=this.$node.find(".js-mail-file").toArray(),r=ns.Model.get(n),o=r.getHeight()+r.getScrollTop();i.forEach((function(e,n){if(r.getNodeTop(e)<o){var i=$(e).find(".js-mail-file-icon");"none"!==i.css("background-image")||i.attr("style",i.attr("_style")),t.countAttachmentsShow(n)}}))}},previewImage:function(e){var t=Daria.parseQuery($(e.currentTarget).data("params")),n=t.mid||this.params.ids,i=t.hid,r=this.params.hid;Daria.ImageViewer.open("",n,i,r),e.preventDefault()},onAttachmentActionsItemClick:function(e){this.logClickMessageFromSearch("attach");var t=$(e.currentTarget);this.writeAttachOpenToUserJournal(Boolean(t.data("embed")),this.getAttachSource()),ns.events.trigger("daria:vAttachmentsViewer:open")},getAttachSource:function(){return Daria.isSearchPage()?"search":"messages"},showInfoPopup:function(e){"attachments-widget"===this.id&&(e.preventDefault(),ns.View.create("attachments-widget-popup",this.params).showAt(e.currentTarget),this.countAttachmentsNumberClick())}}},"count-attachments-ops-mixin","preview-eml-mixin","messages-search-logger-mixin","save-to-disk-mixin","journal-log-mixin",ns.View)},function(e,t){var n="mail-MessageSnippet-AttachTab-Item_Attachments_expanded",i=ns.View.infoLite("count-attachments-ops-mixin");ns.View.defineNg("attachments-tab-widget",{models:{"message-body":!0,"scroller-messages":!1},events:{"ns-view-show":"onShow","click .js-attach-preview":"previewAttach","click .js-eml-preview":"previewEml","click .js-attachments-tab-counter":"toggleExpanded","daria:vApp:changeAppWidth":"_updateCounterState","daria:vApp:changeRightColumSize":"_updateCounterState","daria:vScrollerMessages:scroll":"_updateCounterState"},params:function(e){var t=ns.Model.get("message",{ids:e.ids}),n={ids:t.get(".last_mid")||t.get(".mid")};return e.hid&&(n.hid=e.hid),n},yateModule:"mail",methods:{onShow:function(){this._updateCounterState()},_sendShowExpandedCounterMetric:function(){this.sendGroupedMetric('show "Minimize"')},_sendShowCollapsedCounterMetric:function(){this.sendGroupedMetric('show "total n"')},sendShowExpandedCounterMetric:Daria.memoizeMetricsById([],(function(){return this.__uniqueId}),(function(){return this._sendShowExpandedCounterMetric()})),sendShowCollapsedCounterMetric:Daria.memoizeMetricsById([],(function(){return this.__uniqueId}),(function(){return this._sendShowCollapsedCounterMetric()})),sendShowCounterMetrics:function(e){e.hasClass("is-visible")&&this._isNodeInViewport(e[0])&&(e.closest(".js-attachments-snippet").hasClass(n)?this.sendShowExpandedCounterMetric():this.sendShowCollapsedCounterMetric())},_isNodeInViewport:function(e){var t=this.getModel("scroller-messages"),n=t.getScrollTop(),i=t.getHeight()+n,r=t.getNodeTop(e);return r<i&&r+e.offsetHeight>=n},_calculateGridOffsets:function(e){var t=[],n=[t];return e.each((function(e,i){t.length&&t[0].top!==i.offsetTop&&(t=[],n.push(t)),t.push({left:i.offsetLeft,top:i.offsetTop})})),n},_updateCounterState:function(){var e=this.$node.find(".js-attachments-snippet"),t=e.find(".js-mail-file"),i=e.find(".js-attachments-tab-counter"),r=e.hasClass(n),o=this._calculateGridOffsets(t),s=o.length>1;i.toggleClass("is-visible",s);var a=o[0];if(a.length){this._updateItemsVisibility(t,r?t.length:a.length);var c=a[a.length-1],l=Math.min(c.left+t.width(),e.width()-i.width()),u={left:l};if(r&&s){var d=o[o.length-1];u.top=d[d.length-1].top;var f=o[o.length-2];d.length!==f.length&&(u.left=f[d.length].left)}else u.top=o[0][0].top;i.css("left",u.left),i.css("top",u.top),this.sendShowCounterMetrics(i)}},_updateItemsVisibility:function(e,t){var n=this;e.toArray().forEach((function(e,i){if(!(i>=t)&&n._isNodeInViewport(e)){var r=$(e).find(".js-mail-file-icon");if(!("none"!==r.css("background-image"))){var o=r.data("image"),s=r.data("icon");$('<img src="'.concat(o,'" />')).on("load",(function(){return r.css("background-image","url('".concat(o,"'), none"))})).on("error",(function(){return r.css("background-image","none, url('".concat(s,"')"))}))}n.countAttachmentsShow(i)}}))},previewAttach:function(e){var t=$(e.currentTarget),n=!t.hasClass("js-preview-attachment");n&&(e.preventDefault(),this.previewImage(t)),ns.events.trigger("daria:vAttachmentsViewer:open"),this.countAttachmentPreview(),this.writeAttachOpenToUserJournal(n,Daria.isSearchPage()?"search":"messages")},previewImage:function(e){var t=Daria.parseQuery(e.data("params")),n=t.mid||this.params.ids,i=t.hid,r=this.params.hid;Daria.AttachViewer.open(n,i,r)},toggleExpanded:function(e){e.preventDefault(),e.stopImmediatePropagation();var t=this.$node.find(".js-attachments-snippet"),i=t.hasClass(n);t.toggleClass(n,!i),this._updateCounterState(),i?this.sendMetric('click "Fold"'):this.sendMetric('click "total n"')},sendMetric:function(){Daria.isSearchWithAttachesTab()||i.methods.sendMetric.apply(this,arguments)},sendGroupedMetric:function(){Daria.isSearchWithAttachesTab()||i.methods.sendGroupedMetric.apply(this,arguments)}}},"count-attachments-ops-mixin","preview-eml-mixin","journal-log-mixin",ns.View)},function(e,t){ns.View.defineNg("attachments-widget-body",{models:{"message-body":!0},events:{"ns-view-htmlinit":"onHtmlInit","click .js-image-preview":"previewImage","click .js-eml-preview":"previewEml","click .js-show-info":"onShowInfoClick","daria:vApp:changeAppWidth@show":"updateBlockState","daria:vApp:changeRightColumSize@show":"updateBlockState","daria:vAttachmentsWidgetBody:downloadAttachments@show":"downloadAttachments"},methods:{CLASS_DISABLED_INFO_BUTTON:"disabled",CLASS_BLOCK_WITH_MASK:"mail-MessageSnippet-Item_attachments_closed",CLASS_ACTION_ALIGN_RIGHT:"mail-MessageSnippet-Item_actionRight",MIN_INDENT_ACTION_BLOCK:32,onHtmlInit:function(){this.$infoButton=this.$node.find(".js-show-info"),this.$filesBlock=this.$node.find(".js-attachments-files"),this.$actionBlock=this.$node.find(".js-attachments-action"),this.heightFilesBlockOnFirstLoad=this.$filesBlock.height(),this.updateBlockState(),this._openedManually&&this.showAllAttach(!0)},onShowInfoClick:function(){this.showAllAttach()},logClickMessageFromSearch:function(){},getAttachSource:function(){return"message"},updateBlockState:function(){var e=this.$filesBlock[0]&&this.$filesBlock[0].scrollHeight;this.$filesBlock.height()===e?this.markOpened():this.markClosed(),e>this.heightFilesBlockOnFirstLoad?this.enableInfoButton():this.disableInfoButton(),this.updateAlignActionButton()},updateAlignActionButton:function(){var e=this.$node.width()-this.$filesBlock.width()-this.$actionBlock.width()<this.MIN_INDENT_ACTION_BLOCK;this.$node.toggleClass(this.CLASS_ACTION_ALIGN_RIGHT,e)},showAllAttach:function(e){if(!this.isDisabledInfoButton()){if(e)this.$filesBlock.css("max-height","none"),this.$filesBlock[0]&&this.$filesBlock.css("max-height",this.$filesBlock[0].scrollHeight),this.markOpened(),this._openedManually=!0;else{var t=this.$filesBlock[0]&&this.$filesBlock[0].scrollHeight,n=this.$filesBlock.height();t>n?(this.$filesBlock.css("max-height",t),this.markOpened(),this._openedManually=!0):n>this.heightFilesBlockOnFirstLoad&&(this.$filesBlock.css("max-height","").afterTransition(this.markClosed.bind(this)),this._openedManually=!1)}this.countAttachmentsNumberClick()}},markClosed:function(){this.$node.addClass(this.CLASS_BLOCK_WITH_MASK)},markOpened:function(){this.$node.removeClass(this.CLASS_BLOCK_WITH_MASK)},isDisabledInfoButton:function(){return this.$infoButton.hasClass(this.CLASS_DISABLED_INFO_BUTTON)},disableInfoButton:function(){this.$infoButton.addClass("is-hidden "+this.CLASS_DISABLED_INFO_BUTTON)},enableInfoButton:function(){this.$infoButton.removeClass("is-hidden "+this.CLASS_DISABLED_INFO_BUTTON)},downloadAttachments:function(){var e=Daria.url.archive(this.getModel("message-body").getData(),this.params.ids);e&&(window.location.href=e)}},yateModule:"mail"},"attachments-widget")},function(e,t){ns.View.edefine("attachments-widget-popup",{models:{"message-body":!0,message:!0,dimensions:{"ns-model-changed":!1,resize:"_onResize"}},events:{"click .js-show-info":"onClickInfo"},yateModule:"mail",methods:{showAt:function(e){this.update(this.params).then(this._initNbPopup.bind(this,e))},onClickInfo:function(e){e.stopPropagation(),nb.block(this.node).close()},getScrollContent:function(e){return $(e.target).parents("._nb-popup")[0]},_initNbPopup:function(e){var t=this;$(e).closest(":focusable").focus();var n=nb.block(this.node);n.on("nb-closed",(function(){t.destroy(),this.destroy(),t._nbPopup=null})),n.open({where:e,how:{my:"right+20 top-16",at:"right top",collision:"fit fit"},animation:!1,autoclose:!0}),this._nbPopup=n,this._onResize()},_onResize:function(){this._nbPopup&&this.$node.contextDialog("option",{maxHeight:this._$window.height()})}}},"attachments-widget","prevent-scroll-propagation-mixin",ns.View)},function(e,t){ns.View.define("footer",{models:["footer-data","languages"],events:{"ns-view-show":"onShow","daria:vScrollerMessages:scroll":"_checkFooterVisibility"},yateModule:"mail",methods:{_isVisible:!1,onShow:function(){this._checkFooterVisibility()},_checkFooterVisibility:function(){if(Daria.is2pane()){var e=ns.Model.get("scroller-messages"),t=e.getHeight()+e.getScrollTop(),n=e.getNodeTop(this.node)<t;!this._isVisible&&n&&Jane.c("Футер в 2-пейн","показ футера"),this._isVisible=n}}}})},function(e,t){ns.View.define("footer-journal-link",{models:{"system-status":!0},yateModule:"mail"})},function(e,t){ns.View.define("services-list-mixin",{methods:{METRIKA_TABS_NAMES:{search:"Search",search_more:"Search",contacts:"Contacts",disk:"Disk",money:"Money",images:"Images",news:"News",maps:"Maps",metrika:"Metrika",pogoda:"Pogoda",tv:"TV",music:"Music",afisha:"Afisha",browser:"Browser",market:"Market",direct:"Direct",fotki:"Fotki",q:"Q",all_services:"All services",calendar:"Calendar",translate:"Translate",inbox:"Inbox",portal:"Connect"},isShowMetrikaSend:!1,_getShowMetrikaData:function(){var e=ns.Model.get("index-data"),t=e.getAllTabsIds(),n=t.head,i=t.more,r=this.getHiddenTabsMetrikaId();return n=n.filter((function(e){return-1===r.indexOf(e)})),i=i.concat(r),{head:n,more:i}},getHiddenTabsMetrikaId:function(){return this.getHiddenTabs().map((function(e){return e.node.getAttribute("data-metrika-id")})).filter((function(e){return e}))},_tabsMetrikaIdToObj:function(e,t){if(!Array.isArray(e))return[];var n=this;return e.map((function(e){var i=n._getMetrikaTabName(e);if(!i)return!1;if(t){var r={};return r[i]=t,r}return i})).filter((function(e){return e}))},registerShowTabs:function(e){this._registerShowTabs(e)},_registerShowTabs:function(e){if(ns.assert(e,"Daria.vServicesListMixin",'parameter "mode" is obligatory'),!Daria.IS_CORP){var t=-1!==["navigation-visible-tabs","navigation-hidden-tabs"].indexOf(e),n=ns.Model.get("settings").isSet("liza_minified_header");if(!(t&&n||"navigation-visible-tabs"===e&&this.isShowMetrikaSend)){var i=[];if("services"===e){var r=ns.Model.get("index-data").getAllTabsIds();i=[].concat(r.head,r.more)}else i=this._getShowMetrikaData()["navigation-visible-tabs"===e?"head":"more"];if(i.length){var o={},s={"Login header.Left part":{"Portal navigation/Services":o}},a=this._tabsMetrikaIdToObj(i,"Show"),c=Daria.Config["yandex-domain"];-1!==["services","navigation-hidden-tabs"].indexOf(e)?(o[c]={},o[c]["services"===e?"Services":"More"]=a):o[c]=a,Jane.c(s),this.isShowMetrikaSend=!0}}}},registerTabClick:function(e,t){this._registerTabClick(e,t)},_registerTabClick:function(e,t){if(!Daria.IS_CORP){var n=["Login header.Left part","Portal navigation/Services",Daria.Config["yandex-domain"]],i=this._getMetrikaTabName(e);i&&("navigation-hidden-tabs"===t?n.push("More"):"services"===t&&n.push("Services"),Jane.c(n.concat([i,"Click"])))}},_getMetrikaTabName:function(e){return!(!e||"string"!=typeof e)&&this.METRIKA_TABS_NAMES[e]}}})},function(e,t){ns.View.define("head-tabs",{events:{"ns-view-htmlinit":"onHtmlInit","click@show .js-more-services":"showDropdown","mousedown .js-services-tab":"onServicesTabClick","ns-page-before-load":"onPageBeforeLoad","head-tabs-recalculate":"recalculateTabs","daria:vApp:changeAppWidth":"recalculateTabs"},models:{"index-data":"invalidate",settings:{"ns-model-changed":"keepValid","ns-model-changed.liza_minified_header":"onLizaMinifiedHeaderChanged"}},yateModule:"mail",ctor:function(){this.nbPopup=null,this.onPopupClosed=this.onPopupClosed.bind(this),this.onHtmlInitDebounce=_.debounce(this._onHtmlInitDebounce.bind(this),0)},methods:{onHtmlInit:function(){this.onHtmlInitDebounce()},_onHtmlInitDebounce:function(){this.recalculateTabs(),this.registerShowTabs("navigation-visible-tabs")},onLizaMinifiedHeaderChanged:function(){this.registerShowTabs("navigation-visible-tabs")},recalculateTabs:function(){this.calculateTabs()},calculateTabs:function(){var e=_.toArray(this.$node.children(":not(.js-phantom-tab)"));$(this.node).addClass("js-force-visible-tabs");var t=0;this.tab=e.map((function(e){return t+=e.clientWidth+1,{node:e,minWidth:t}})),$(this.node).removeClass("js-force-visible-tabs"),this.getHiddenTabsId().length>5&&Jane.ErrorLog.send({errorType:"header-tabs.infinity"})},onPageBeforeLoad:function(){this.popupClose()},getHiddenTabs:function(){return _.isArray(this.tab)?this.tab.filter((function(e){return e.node&&e.node.classList.contains("is-hidden")})):[]},getHiddenTabsId:function(){return this.getHiddenTabs().map((function(e){return e.node.getAttribute("data-id")}))},showDropdown:function(){if(!this.popupClose()){var e=this.getModel("index-data"),t=this.getHiddenTabsId(),n=e.get(".tabs.more"),i=e.get(".tabs.head").filter((function(e){return _(t).includes(e.id)})),r=[].concat(i,n);r=r.map((function(e){var t=_.omit(e,["id"]);return t.class="js-more-services-tab js-services-tab",e.id&&"string"==typeof e.id&&(t.attrs={"data-metrika-id":e.id}),t})),this.nbPopup=nb.block(ns.renderNode({tabs:r},"head-tabs-popup","mail")),this.nbPopup.on("nb-opened",this.onPopupOpened.bind(this)),this.nbPopup.on("nb-closed",this.onPopupClosed.bind(this)),this.nbPopup.open({where:this.$node.find(".js-more-services-target")}),this.registerShowTabs("navigation-hidden-tabs")}},onPopupOpened:function(){this.nbPopup.$node.on("mousedown",".js-services-tab",this.onServicesTabClick.bind(this))},onPopupClosed:function(){this.nbPopup&&(this.nbPopup.$node.off(),this.nbPopup.destroy(),this.nbPopup=null)},popupClose:function(){return!!this.nbPopup&&(this.nbPopup.close(),!0)},onServicesTabClick:function(e){if(e&&"mousedown"===e.type&&(0===e.button||1===e.button)){var t=e.currentTarget;this.registerTabClick(t.getAttribute("data-metrika-id"),t.classList.contains("js-more-services-tab")?"navigation-hidden-tabs":"navigation-visible-tabs")}}}},"services-list-mixin")},function(e,t){ns.View.define("head-settings-controls",{models:{},yateModule:"mail",ctor:function(){this.mSettings=ns.Model.get("settings"),this.START_SHOW_NEW_ICON_TIME=new Date("2018-04-01").getTime()},events:{"click .js-header-settings":"onHeaderSettingsClick"},methods:{hasNewItems:function(){return(parseInt(this.mSettings.get(".settingsOpenedTime"),10)||0)<this.START_SHOW_NEW_ICON_TIME},onHeaderSettingsClick:function(){this.mSettings.setSettings({settingsOpenedTime:Date.now()}),this.$node.find(".js-header-settings").removeClass("mail-GhostButton_has_new_items")}}})},function(e,t){ns.View.define("head-user",{events:{"ns-view-show":"onShow","ns-view-hide":"onHide",click:"toggleDropdown","daria:vApp:changeAppWidth@show":"onChangeAppWidth"},models:{"index-data":"keepValid","head-user-state":{"ns-model-changed":"keepValid","ns-model-changed.newLettersInMA":"onNewLettersInMA"}},yateModule:"mail",ctor:function(){var e=this;this._onChangeAppWidthThrottle=_.throttle((function(){return e._onChangeAppWidth()}),100)},methods:{MINIFIED_TITLE_APP_SIZE:1060,MINIFIED_TITLE_CLASS:"mail-User_minified",onShow:function(){this.$mailLayoutElement=this.$node.closest(".js-mail-layout"),this.onChangeAppWidth(),this.onNewLettersInMA(),this.metriksForAddMultiUser(),_.delay((function(){ns.request(["user-dropdown-data"])}),1e3)},onHide:function(){this._onChangeAppWidthThrottle&&this._onChangeAppWidthThrottle.cancel&&this._onChangeAppWidthThrottle.cancel(),this.$mailLayoutElement=null},onChangeAppWidth:function(){this._onChangeAppWidthThrottle()},_onChangeAppWidth:function(){this.$mailLayoutElement&&this.$node.toggleClass(this.MINIFIED_TITLE_CLASS,this.$mailLayoutElement.width()<=this.MINIFIED_TITLE_APP_SIZE)},toggleDropdown:function(){if(this.vPopup&&this.vPopup.isValid())return this.vPopup.close(),void(this.vPopup=null);var e=$(window).innerHeight()-120;this.vPopup=ns.View.create("user-dropdown"),this.vPopup.open({maxHeight:e,where:this.node,withoutTail:!0})},onNewLettersInMA:function(){var e=this.getModel("head-user-state").hasNewLettersInMA();this.$node.toggleClass("is-updated",e)},metriksForAddMultiUser:function(){var e=["Login header.Right part","Menu behind login"],t=!1;Daria.urlParams.addMultiUserFromDropdownLink?(t=!0,e.push("User added by link under Exit")):Daria.urlParams.addMultiUserFromDropdownButton?(t=!0,e.push('User added by link "Add user"')):Daria.urlParams.addMultiUserFromDropdownPromo&&(t=!0,e.push('User added by button "Add account" in promo')),t&&(Jane.c(e),ns.Model.get("settings").setSettingOn("user_dropdown_promo"))}}})},function(e,t){ns.View.define("logo",{models:{"index-data":!1,"header-logo-data":!1},events:{"ns-view-htmlinit":"onHtmlInit","daria:vApp:changeRightColumSize":"onResizeRightColumn"},ctor:function(){this.onResizeRightColumn=_.once(this.onResizeRightColumn),this.onWheel=this.onWheel.bind(this)},yateModule:"mail",methods:{onHtmlInit:function(){var e=this,t=this.$node.closest(".js-header-left-column").find("#logo-dropdown");if(t&&t.length){this.popup=nb.block(t[0]);var n=$(".js-mail-logo-yandex");this.popup.on("nb-opened",(function(){n.addClass("is-active"),$(window).on("wheel",e.onWheel),Jane.c("Login header.Left part","Hamburger services menu","Open hamburger menu popup")})),this.popup.on("nb-closed",(function(){n.removeClass("is-active"),$(window).off("wheel",e.onWheel)})),$(t[0]).on("mouseenter",(function(){$(window).on("wheel",e.onWheel)})),$(t[0]).on("mouseleave",(function(){$(window).off("wheel",e.onWheel)}))}},onResizeRightColumn:function(){this.popup&&this.popup.close()},getScrollContent:function(e){return e&&e.target?$(e.target).parents("._nb-popup")[0]:null}}},"prevent-scroll-propagation-mixin")},function(e,t){ns.View.define("search-react",{models:{dimensions:!1,folders:!1,labels:!1,"header-logo-data":!1},events:{"ns-view-htmlinit":"onHtmlInit","ns-view-htmldestroy":"onHtmlDestroy"},yateModule:"mail",methods:{onHtmlInit:function(){var e={toneDefault:"mail-suggest-themed",uniqueId:this.__uniqueId,logo:this._getLogoDetails()};Daria.React.setInitialState(),Daria.React.renderSearchBox(this.node,e)},onHtmlDestroy:function(){Daria.React.unmountReactBox(this.node)},_getLogoDetails:function(){var e=this.getModel("header-logo-data"),t={ndaUrl:Daria.IS_CORP?"".concat(Daria.Config["wiki-url"],"/HR/NDA"):null,serviceIconId:e.get(".logo.mailIcon"),serviceUrl:e.get(".logo.mailboxCheckHref")};return Daria.Config.workspace&&e.get(".logo.src")?t.orgImageSrc=e.get(".logo.src"):(t.orgIconId=e.get(".logo.yandexIcon"),t.orgUrl=e.get(".logo.href")),t}}})},function(e,t){ns.View.define("typefilter-tabs",{models:["typefilter-tabs-state"],events:{"ns-page-before-load@show":"onPageBeforeLoad","ns-view-show":"sendMetricsOnFirstShow","click .js-invalidate-tab":"invalidateTab"},methods:{onPageBeforeLoad:function(e,t,n){ns.page.currentUrl!==n&&this.invalidate()},invalidateTab:function(e){var t=$(e.currentTarget).data("category");t&&"all"!==t&&ns.Model.invalidate("messages",(function(e){return e.params.category===t}))},sendMetricsOnFirstShow:_.once((function(){var e=this.getModel("typefilter-tabs-state").getMetrikaTitlesOfEnabledTabs(),t={"Табы":e.reduce((function(e,t){return _.set(e,t,"Показ ссылки на таб")}),{})};Jane.c(t)}))},yateModule:"mail"})},function(e,t){ns.View.define("themes-selector",{models:{themes:"keepValid",settings:{"ns-model-changed":"keepValid","ns-model-changed.color_scheme":"invalidate"}},params:function(e){return e},events:{"ns-view-htmlinit":"onHtmlInit","ns-view-show":"onShow","click .js-close":"onCloseClick","click .js-themes-overlay":"onThemesOverlayClick","Daria:vThemesSelector:close":"closePopup","mouseenter .js-theme":"onThemeThumbFocus","mousedown .js-theme":"onThemeThumbClick","wheel .js-themes-list":"onMouseWheel","click .js-themes-content":"stopPropagation","scroll .js-themes-list":"notifyListScroll","daria:vThemeColorfulSelector:scope-changed@show":"_metrikaCountThemeChange","daria:vThemeWeatherSettings:weather-city-changed@show":"_metrikaCountThemeChange","daria:vThemeSeasonsSelector:scope-changed@show":"_metrikaCountThemeChange"},yateModule:"mail",methods:{CONTENT_TRANSITION_SAFE_DELAY:350,SETTINGS_TRANSITION_SAFE_DELAY:250,_wasHidden:!0,onHtmlInit:function(){this.$list=this.$node.find(".js-themes-list"),this.setListScrollTop()},onShow:function(){if(!this._closeInProgress)return this._wasHidden&&this._metrikaCount(["opening"]),this._wasHidden?(this._wasHidden=!1,vow.Promise.resolve().then(this._scrollIntoView.bind(this,!0)).then(this._showContent,this)):vow.Promise.resolve().then(this._showContent,this).then(this._scrollIntoView,this)},onCloseClick:function(){this.closePopup(),this._metrikaCount(["cross"])},onThemesOverlayClick:function(){this.closePopup(),this._metrikaCount(["close by click outside popup"])},setListScrollTop:function(){this.$list.scrollTop(this._listScrollTop||this._howToScrollIntoView())},_howToScrollIntoView:function(){if(this.$node){var e=this.$node.find(".is-active");if(e.length){var t=this.$list.scrollTop(),n=e.position().top,i=n+e.height(),r=this.$list.outerHeight(),o=t;return i>r?o+=i-r+16:n<0&&(o+=n-16),o}}},_showContent:function(){return new vow.Promise(function(e){this.$node.find(".js-themes-content").one("transitionend",e),_.delay(e,this.CONTENT_TRANSITION_SAFE_DELAY),_.delay((function(){$("html").addClass("with-ThemeOverlay")}),50)}.bind(this))},_scrollIntoView:function(e){return new vow.Promise(function(t){if(this._listWasScrolled)return t();var n=this._howToScrollIntoView();this._saveListScrollTop(n),e?(this.$list.scrollTop(n),t()):this.$list.animate({scrollTop:n},n,t)}.bind(this))},_saveListScrollTop:function(e){this._listWasScrolled=!1,this._listScrollTop=e||this.$list.scrollTop()},onSetTheme:function(e,t){return this._setThemeById(t)},onThemeThumbClick:function(e){var t=$(e.currentTarget);if(!t.hasClass("is-active")){this._metrikaCountThemeChange();var n=t.data("id");return this._setThemeById(n)}},_setThemeById:function(e){return this._saveListScrollTop(),this._lastLoadingThemeId=e,this._currentLoadingTheme=this._currentLoadingTheme||vow.Promise.resolve(),this._currentLoadingTheme.then((function(){return vow.Promise.all([this._setTheme(e),this._runTheme(e),this._hideSettings(Daria.themeId).then((function(){if(this._isActualTheme(e))return Daria.themeId=e,this.$node&&(this.$node.find(".is-active").removeClass("is-active"),this.$node.find('[data-id="'+e+'"]').addClass("is-active")),this._showSettings(e)}),this)])}),this).then((function(){if(this._isActualTheme(e))return ns.events.trigger("daria:vThemesSelector:new-schema"),ns.page.go().then((function(){$(window).trigger("resize"),this._scrollIntoView(),this._lastLoadingThemeId=null,this._currentLoadingTheme=null}),this)}),this)},_setTheme:function(e){return ns.Model.get("settings").setSettings({color_scheme:e})},_runTheme:function(e){return new vow.Promise(function(t){Jane.Services.runModules(["theme-"+e+".css"],t)})},_loadTheme:function(e){return new vow.Promise(function(t){Jane.Services.loadModules(["theme-"+e+".css"],t)})},_hideSettings:function(e){return new vow.Promise(function(t){if(!this.$node)return t();var n=this.$node.find(".is-active"),i=n.data("id"),r=ns.Model.get("themes").hasSettings(e);if(i!==e||!r)return t();_.delay(t,this.SETTINGS_TRANSITION_SAFE_DELAY),this._trySwitchSettings(),n.one("transitionend",t),n.removeClass("has-settings")}.bind(this))},_trySwitchSettings:function(){var e=this.$node.find(".is-active"),t=this.$node.find('[data-id="'+this._lastLoadingThemeId+'"]'),n=ns.Model.get("themes").hasSettings(this._lastLoadingThemeId),i=e.offset().top===t.offset().top,r=n&&i,o=t.data("index")-e.data("index");r&&e.addClass("switch-settings switch-settings-"+o)},_showSettings:function(e){return new vow.Promise(function(t){if(!this.$node)return t();var n=this.$node.find(".is-active");if(n.data("id")!==e||!ns.Model.get("themes").hasSettings(e))return t();_.delay(t,this.SETTINGS_TRANSITION_SAFE_DELAY),n.one("transitionend",t),n.addClass("has-settings")}.bind(this))},_isActualTheme:function(e){return!this._lastLoadingThemeId||this._lastLoadingThemeId===e},onMouseWheel:function(){this._listWasScrolled=!0,this._listScrollTop=this.$list.scrollTop()},closePopup:function(){return this._closeInProgress=!0,$.Shortcuts.modalListOff("themes-selector"),vow.Promise.resolve().then(this._hideContent,this).then((function(){return ns.Model.get("themes-selector").close(),this._closeInProgress=!1,ns.page.go()}),this)},_hideContent:function(){return new vow.Promise(function(e){this._saveListScrollTop(),this._wasHidden=!0,this.$node.find(".js-themes-content").one("transitionend",e),_.delay(e,this.CONTENT_TRANSITION_SAFE_DELAY),$("html").removeClass("with-ThemeOverlay")}.bind(this))},onThemeThumbFocus:function(e){var t=$(e.currentTarget),n=t.data("id");return this._loadTheme(n)},getThumbName:function(e){e=yr.nodeset2scalar(e);var t="";return"seasons"===e&&(t="-"+ns.Model.get("theme-seasons").getSeason()),e+t},stopPropagation:function(e){e.stopPropagation()},notifyListScroll:function(){ns.events.trigger("daria:vThemesSelector:themes-list-scroll")},_metrikaCount:function(e){var t=["Login header.Right part","Themes chooser popup"];Jane.c(t.concat(e))},_metrikaCountThemeChange:function(){this._metrikaCount(["choose of theme"])}}})},function(e,t){!(function(){function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.length;return t?1===t?e[0]:_.set({},e.slice(0,t-1),e[t-1]):e}function t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return _.set({},t,n.map(e))}function n(e){var t=e.data("metric");return t?t.trim().split(":"):[]}ns.View.define("user-dropdown",{models:{"index-data":!1,"user-dropdown-data":!0,settings:!1},events:{"ns-view-show":"onShow","click a":"onLinkClick","click .js-user-dropdown-promo-click":"onPromoClick","click .js-user-dropdown-promo-close":"onPromoClose"},yateModule:"mail",methods:{open:function(e){this.updateByLayout("user-dropdown",{execFlag:ns.U.EXEC.PARALLEL}).then((function(){this.nbPopup=nb.block(this.node),this.nbPopup.open(e),this.nbPopup.on("nb-opened",this.onPopupShow.bind(this)),this.nbPopup.on("nb-closed",this.destroySelf.bind(this))}),this)},onPopupShow:function(){var e=this.nbPopup&&this.nbPopup.$node;if(e&&e.length){var t=[];e.find(".js-user-dropdown-item").each((function(e,i){var r=n($(i));r.length&&(r.push("Show"),t.push(r))})),t.length&&this._metriks(t,!0)}},close:function(){this.nbPopup&&this.nbPopup.close()},destroySelf:function(){var e=this;_.defer((function(){e.nbPopup&&(e.nbPopup.destroy(),e.nbPopup=null),e.destroy()}))},onShow:function(){ns.Model.get("head-user-state").setNewLettersInMA(!1),ns.forcedRequest("do-mail-reset-recent-counter"),this._metriks();var e=this.$node.find(".js-user-dropdown-promo");e.length&&!e.children().length&&(e.html(Jane.tt("mail:js-user-dropdown-promo")),this._metriks("Promo shows"));var t=this.getModel("user-dropdown-data").getSumOfFresh();t&&(t<11?this._metriks(["Messages count","".concat(t," messages")]):t<51?this._metriks(["Messages count","11-50 messages"]):t<101?this._metriks(["Messages count","51-100 messages"]):this._metriks(["Messages count","more than 100 messages"]))},onLinkClick:function(e){var t=$(e.currentTarget),i=n(t);return i.length&&(t.hasClass("js-user-dropdown-item")&&i.push("Click"),this._metriks(i)),!0},onPromoClick:function(e){e.preventDefault(),e.stopPropagation(),this.getModel("settings").setSettingOn("user_dropdown_promo",(function(){var t=$(e.currentTarget).attr("href");window.location.replace(t)}))},onPromoClose:function(){return this.getModel("settings").setSettingOn("user_dropdown_promo"),this.$node.find(".js-user-dropdown-promo").addClass("g-hidden"),this.$node.find(".js-dropdown-users-list").removeClass("g-hidden"),this.$node.find(".js-mail-dropdown__item-user-add").removeClass("g-hidden"),!1},_metriks:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1?arguments[1]:void 0,r=["Login header.Right part","Menu behind login"];if(n.length){var o=this.getModel("user-dropdown-data").getSumOfFresh();r.push(o?"Has new messages":"No new messages"),e=i?t(r,n):r.concat(n)}else e=r.concat(["Click"]);Jane.c(e)}}})})()},function(e,t,n){"use strict";function i(e){return s(e)||o(e)||r()}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function o(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function s(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(736),c=n(325),l=n(353),u=n(337);!(function(){function e(){throw new Error("Это абстрактный метод. Он должен быть перегружен в производном классе.")}ns.View.define("message-actions",{methods:{onReplyHotkey:function(e,t){if("qr"===t.compose)this.showQuickReply(t.replyAll);else{var n=t.replyAll?"reply-all":"reply";this._replyHelper(n,{from:"toolbar"})}},_replyHelper:function(e,t){t=t?_.clone(t):{},t.mMessagesChecked||(t.mMessagesChecked=this.getMessagesCheckedInstance(!0));var n=_.last(e.split(":"));ns.action.run(n,t)},_onDrop:function(e,t){var n;switch(t.operation){case"label":case"unlabel":case"mark":case"unmark":case"move":case"remove":case"tospam":case"notspam":case"reply":case"reply-all":case"forward":n="_on"+t.operation.split("-").map((function(e){return Daria.capitalize(e)})).join("")+"ToolbarButton";break;case"messages.deselect":n="_onDeselect";break;default:return!1}n&&_.isFunction(this[n])&&(t.params=t.params||{},t.params._source="dnd",this[n](e,t.params));var r,o=t.operation,s=t.params;if(r="move"===o&&s?s.tab?["в таб (левая колонка)"]:["в папку (левая колонка)"]:{forward:["тулбар","переслать"],remove:["тулбар","удалить"],tospam:["тулбар","спам"],mark:["тулбар","прочитано"],move:["в папку (левая колонка)"],unmark:["тулбар","не прочитано"]}[o]){var a;(a=Jane).c.apply(a,["Drag-n-drop","Почта"].concat(i(r)))}},_onLabelToolbarButton:e,_onUnlabelToolbarButton:e,_onMarkToolbarButton:e,_onUnmarkToolbarButton:e,_onMoveToolbarButton:e,_onRemoveToolbarButton:e,_onTospamToolbarButton:e,_onNotspamToolbarButton:e,_onDeselect:e,_onReplyToolbarButton:Object(a.a)((function(e,t){this._replyHelper("reply",t)})),_onReplyAllToolbarButton:Object(a.a)((function(e,t){this._replyHelper("reply-all",t)})),_onForwardToolbarButton:Object(a.a)((function(e,t){u.a.startScenario(c.a,l.g),Jane.ToolbarMetric.messageToolbar("forward"),this._replyHelper("forward",t)})),getMessagesCheckedInstance:function(e){return ns.Model.get("messages-checked")},showQuickReply:function(e){ns.page.go(ns.router.generateUrl("compose2",{ids:this.params.ids,oper:e?"reply-all":"reply"}))}}})})()},function(e,t){ns.View.define("contact-actions",{params:function(e){return e.emails=e.email,e},models:{"account-information":!1,"abook-contacts":!1,"email-info":!1},events:{"ns-view-show":"_onNsViewShow","ns-view-hide":"_onNsViewHide","ns-view-htmldestroy":"_onHtmlDestroy","daria:vScrollerMessage:scroll":"onScroll"},yateModule:"mail",methods:{patchTree:function(){var e=this.super_.patchTree.call(this);return e.menuItems=this._getMenuItems(),e},_onNsViewShow:function(){var e=this.$node.find(".js-clipboard");if(e.length){var t=this.params.email;this._clip=new Daria.Clipboard(e,{hoverClass:"mail-ContactMenu-Item_hover"}),this._clip.on("ready",(function(){this.setText(t)}))}},_onNsViewHide:function(){this._clip&&(this._clip.destroy(),delete this._clip)},_onHtmlDestroy:function(){this.nbPopup&&(this.nbPopup.destroy(),this.nbPopup=null)},_destroySelf:function(){_.defer(this.destroy.bind(this))},_onPopupSelect:function(e,t){t.ui.item.children().data("noclose")||this.nbPopup.close()},onScroll:function(){this.nbPopup&&this.nbPopup.close()},open:function(e){this.update({},{execFlag:ns.U.EXEC.PARALLEL}).then(function(){var t=this.nbPopup=nb.block(this.node);t.on("nb-select",this._onPopupSelect.bind(this)),t.on("nb-closed",this._destroySelf.bind(this)),t.open(e)}.bind(this))},_getAbookContact:function(){return this.getModel("abook-contacts").getContactDataByEmail(this.params.email)||{}},_getMenuItems:function(){var e=this.getModel("account-information").isMyEmail(this.params.email),t=[{content:this.params.email,class:["mail-ContactMenu-Item_selectonly"],attrs:{"data-noclose":"1"}},{separator:!0}];if(e||t.push({content:i18n("%Message_Написать_письмо"),attrs:{href:ns.router.generateUrl("compose2",{to:this.params.email})}}),Daria.IS_CORP){var n=this.getModel("email-info").getData();"staff"!==n.type||n.staff._error||t.push({content:i18n("%Message_Перейти_на_Стафф"),attrs:{href:_.result(_.find(n.staff.services,"type","staff"),"url"),target:"_blank",rel:"noopener noreferrer"}})}return t.push({content:i18n("%Скопировать_адрес"),class:[Daria.Clipboard.canUse?"js-clipboard":"mail-ContactMenu-Item_disabled"]}),e||(this._getAbookContact().cid||t.push({content:i18n("%Message_to_contacts"),class:["ns-action"],attrs:{"data-click-action":"message.add-contact","data-params":ns.params2query({email:this.params.email,name:this.params.name,counter:"71054"})}}),t.push({content:i18n("%Message_to_blacklist"),class:["ns-action"],attrs:{"data-click-action":"message.lists-add-from-message","data-params":ns.params2query({listtype:"black",email:this.params.email,counter:"71055"})}})),t}}})},function(e,t,n){n(2180),n(2181),n(2182),n(2183),n(2184),n(2185),n(2186),n(2187)},function(e,t){var n=!1,i=!0;ns.View.define("context-menu-mixin-base",{methods:{_insertCustomIcon:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"context-menu-MainToolbar-icon";return yr.run("mail",{icon:e},t)},_cmBaseBindMenuableElements:function(e){var t=ns.Model.get("settings");i=!t.getSetting("contextmenu_disable"),n||(n=!0);var r=e.$node;this.__$bindedNode=r,this.__mMessagesChecked=e.mMessagesChecked,r.on("mousedown.context-menu",e.selector,this.__cmBaseOnMouseDown.bind(this)).on("contextmenu.context-menu",e.selector,this.__cmBaseOnContextMenu.bind(this))},_cmBaseUnbindMenuableElements:function(){this.__$bindedNode&&(this.__$bindedNode.off(".context-menu"),this.__$bindedNode=null)},__cmBaseOnMouseDown:function(e){i&&2===e.button&&$(e.currentTarget).addClass("no-user-select")},__cmBaseOnContextMenu:function(e){i&&(e.stopPropagation(),e.preventDefault(),this.__showContextMenu(e))}}})},function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e){return a(e)||s(e)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function s(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function a(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}Object.defineProperty(t,"__esModule",{value:!0});var c=n(325),l=n(353),u=n(337);ns.View.edefine("context-menu-mixin-messages",{methods:{__showContextMenu:function(e){$(e.currentTarget).closest(".js-messages-item-checkbox-controller").hasClass("is-checked")||ns.events.trigger("daria:vMessages:deselect"),this.__cmMessagesPrepareToShowMenu(e).show({x:e.pageX,y:e.pageY,$scrollContainer:Daria.is3pane()?$(".b-layout__inner_type_messages:visible"):null}),$(".js-messages-scroll-area").one("scroll",(function(){Daria.ContextMenu.close()}))},__cmMessagesPrepareToShowMenu:function(e){var t=this;Jane.watcher.set("messages-context-menu:opened",!0),clearTimeout(this.__deferredCloseTimeout),this.__preventDeselect=!1,this.__$onMessage=$(e.currentTarget);var n=this.__isThread=this.__$onMessage.hasClass("js-thread");this.__originalMid=this.__$onMessage.data("id");var i=this.__originalMid;/^t/.test(i)&&(i=i.substr(1)),this.__mid=i,Daria.is3pane()&&this.__toggleMessagesSelectionSuppression(!0);var r=!1,o=this.__mMessagesChecked.getIds();if(o.tids.length+o.ids.length>0?(!n&&!_.contains(o.ids,i)||n&&!_.contains(o.tids,i))&&(r=!0):r=!0,r){this.__isNeedDeselect=!0;ns.Model.get("messages-checked").check(ns.Model.get("message",{ids:this.__originalMid}),!0)}return new Daria.ContextMenu({items:this.__getContextMenuItems(),metrika:"Письма",onClose:function(){Jane.watcher.set("messages-context-menu:opened",!1),t.__toggleMessagesSelectionSuppression(!1),Daria.is3pane()&&r&&(t.__deferredCloseTimeout=_.defer((function(){t.__preventDeselect||(t.__preventDeselect=!1)})))}})},__toggleMessagesSelectionSuppression:function(e){Jane.watcher.set("Daria:vMessagesSelection.dontChangeViewToBatchOperation",e)},__getContextMenuItems:function(){var e,t=this,n=this.__extractButtonsFromToolbar(),i=[],r=ns.page.current.params.current_folder;r&&(e=ns.Model.get("folders").getFolderById(r).symbol);var o=this.__mMessagesChecked.getIds();if(i.push({type:"separator",index:8.9}),i.push({text:i18n("%Folders_Dropdown_Label"),customIcon:this._insertCustomIcon("Folder"),index:9,metrika:"Переложить в папку",items:this.__getFoldersMenuItems()}),!_.contains(["trash","spam"],e)){var s=this.__getLabels(),a=this.__processLabels(s.label,"label",0),c=this.__processLabels(s.unLabel,"unlabel",500);a.push({type:"separator",index:998.9}),a.push({text:i18n("%Labels_Dropdown_Add"),index:999,metrika:"Создать метку",onClick:function(){t.__preventDeselect=!0,ns.action.run("labels.add",{contextMenu:!0,isNeedDeselect:t.__isNeedDeselect})}});var l=a;c.length&&(l.push({type:"separator",index:489},{text:i18n("%Labels_Dropdown_Unlabel_Title"),index:490,isActive:!1}),l.push.apply(l,c)),i.push({text:i18n("%Labels_Dropdown_Label"),customIcon:this._insertCustomIcon("Tag"),index:10,items:l})}if(i.push({type:"separator",index:10.1}),(1===o.ids.length+o.tids.length||0===o.ids.length&&1===o.tids.length&&this.__isThread)&&(i.push({text:i18n("%Messages_Context_Menu_Open_Tab"),index:1,metrika:"Открыть в новом окне",onClick:function(){var e,n=t.__$onMessage;e=t.__isThread?n.find(".b-messages__thread-count"):n.find(".js-message-snippet"),window.open(e.attr("href"))}}),i.push({type:"separator",index:1.1})),0===o.tids.length&&1===o.ids.length){var u=this.__$onMessage.find('A[href*="print"]');u.length&&i.push({text:i18n("%Message_Print"),index:100,metrika:"Печать",onClick:function(){window.open(u.attr("href"))}})}var d=ns.Model.get("message",{ids:this.__originalMid});if(1===o.tids.length&&0===o.ids.length||0===o.tids.length&&1===o.ids.length){var f=d.get(".fid"),g=ns.Model.get("folders").getFolderById(f).symbol;_.contains(["outbox","template","draft"],g)||i.push({text:i18n("%Messages_Context_Menu_Create_Filter"),index:14,metrika:"Настроить фильтр",onClick:function(){ns.page.go(ns.router.generateUrl("setup",{tab:"filters-create",message:t.__$onMessage.attr("data-id")}))}})}return i.push.apply(i,n),i},__getFoldersMenuItems:function(){var e=this,t=this.__getCurrentFolder(),n=this.__getFolders(t.fid,Daria.areFoldersTabsEnabled());if(Daria.areFoldersTabsEnabled()){n=[].concat(r(this.__getTabs(t.tabId)),r(n))}var i=0,o=n.map((function(e){return{id:e.tabId||e.fid,text:e.name,alt:e.name,isActive:!e.isCurrent,addClass:e.isCurrent?"is-current":"",style:"padding-left:"+(e.level+2)+"em",index:i++,metrika:"Переложить в папку",onClick:function(){var t={fid:e.fid};e.tabId&&(t.tabId=e.tabId),ns.action.run("move",t)}}}));return o.push({type:"separator",index:998.9}),o.push({text:i18n("%Folders_Dropdown_Add"),index:999,metrika:"Новая папка",onClick:function(){e.__preventDeselect=!0,ns.action.run("folders.add",{contextMenu:!0,isNeedDeselect:e.__isNeedDeselect})}}),o},__processLabels:function(e,t,n){var i=this,r=ns.Model.get("labels"),o=r.getImportantLID(),s=n;return e.reduce((function(e,a){var c=a===o;if(c&&Daria.shouldShowContextToolbar())return e;var l=r.getLabelById(a),u=c?yr.run("mail",{icon:"Important"},"context-menu-MainToolbar-icon"):yr.run("mail",{color:l.color},"context-menu-label-custom-icon"),d=["метка",c?"флажок":"пользовательская метка"];return d=d.concat("label"===t?"проставление":"снятие"),e.push({id:a,text:l.name,alt:l.name,index:c?s-1:++n,customIcon:u,metrika:d,onClick:function(){i._onToolbarButton(t,{lid:a})}}),e}),[])},__extractButtonsFromToolbar:function(){function e(){this._triggerAction&&(n._onToolbarButton(this._triggerAction,{},{refreshImmediately:!0}),-1===["remove","tospam"].indexOf(this._triggerAction)&&ns.events.trigger("daria:vMessages:deselect"))}var t,n=this,r=(t={},i(t,Daria.Constants.TOOLBAR_BUTTONS.DELETE,{text:i18n("%Удалить"),customIcon:this._insertCustomIcon("Delete"),index:2,metrika:"Удалить",onClick:e,_triggerAction:"remove"}),i(t,Daria.Constants.TOOLBAR_BUTTONS.REPLY,{text:i18n("%Toolbar_Ответить"),customIcon:this._insertCustomIcon("Reply"),index:3,metrika:"Ответить всем",onClick:this.__onReplyClick.bind(this)}),i(t,Daria.Constants.TOOLBAR_BUTTONS.DRAFT_FINISH,{text:i18n("%Toolbar_Дописать"),customIcon:this._insertCustomIcon("Compose"),index:3,metrika:"Дописать",onClick:function(){var e=n.__$onMessage.attr("data-id");ns.page.go(ns.router.generateUrl("compose2",{ids:e}))}}),i(t,Daria.Constants.TOOLBAR_BUTTONS.FORWARD,{text:i18n("%Toolbar_Переслать"),customIcon:this._insertCustomIcon("Forward"),index:4,metrika:"Переслать",onClick:function(){u.a.startScenario(c.a,l.e);var e={};e.mMessagesChecked=ns.Model.get("messages-checked"),ns.action.run("forward",e)}}),i(t,Daria.Constants.TOOLBAR_BUTTONS.MARK_AS_READ,{text:i18n("%Toolbar_Прочитано"),customIcon:this._insertCustomIcon("Read"),index:5,metrika:"Прочитано",onClick:e,_triggerAction:"mark"}),i(t,Daria.Constants.TOOLBAR_BUTTONS.MARK_AS_UNREAD,{text:i18n("%Toolbar_Не_прочитано"),customIcon:this._insertCustomIcon("Unread"),index:5,metrika:"Не прочитано",onClick:e,_triggerAction:"unmark"}),i(t,Daria.Constants.TOOLBAR_BUTTONS.SPAM,{text:i18n("%Folder_spam"),customIcon:this._insertCustomIcon("Spam"),index:6,metrika:"Спам",onClick:e,_triggerAction:"tospam"}),i(t,Daria.Constants.TOOLBAR_BUTTONS.NOT_SPAM,{text:i18n("%Toolbar_Не_спам"),customIcon:this._insertCustomIcon("Unspam"),index:6,metrika:"Не спам",onClick:e,_triggerAction:"notspam"}),i(t,Daria.Constants.TOOLBAR_BUTTONS.ARCHIVE,{text:i18n("%Folder_archive"),customIcon:this._insertCustomIcon("Archive"),index:7,metrika:"Архив",onClick:function(){Daria.MOPS.archive(n.__mMessagesChecked).then((function(){n.__mMessagesChecked.resetChecked()}))}}),i(t,Daria.Constants.TOOLBAR_BUTTONS.MARK_IMPORTANT,{text:i18n("%Labels_Toolbar_Important"),customIcon:this._insertCustomIcon("MarkImportant"),index:8,metrika:["Важное","проставление"],onClick:function(){var e=ns.Model.get("labels").getImportantLID();n.__mMessagesChecked.runAction("label",{lid:e})}}),i(t,Daria.Constants.TOOLBAR_BUTTONS.MARK_UNIMPORTANT,{text:i18n("%Labels_Toolbar_Important"),customIcon:this._insertCustomIcon("MarkUnimportant"),index:8,metrika:["Важное","снятие"],onClick:function(){var e=ns.Model.get("labels").getImportantLID();n.__mMessagesChecked.runAction("unlabel",{lid:e})}}),t),o=[];return this.__getButtonsIds().forEach((function(e){e in r&&o.push(r[e])})),o},__getButtonsIds:function(){var e=ns.Model.get("folders"),t=null,n=this.__mMessagesChecked.hasImportantCheckedMessage();ns.page.current.params.current_folder&&(t=e.getFolderById(ns.page.current.params.current_folder).symbol);var i=[Daria.Constants.TOOLBAR_BUTTONS.DELETE];this.__mMessagesChecked.getCount()<=Daria.Constants.MAX_MESSAGES_TO_FORWARD&&"template"!==t&&i.push(Daria.Constants.TOOLBAR_BUTTONS.FORWARD);var r=this.__mMessagesChecked.getIds();r.ids.concat(r.tids).some((function(t){var n=ns.Model.get("message",{ids:t});if(!n.hasRealData())return!1;var i=e.getFolderById(n.get(".fid")).symbol;return!_.contains(["spam","template","draft","outbox","sent"],i)}))?i.push(Daria.Constants.TOOLBAR_BUTTONS.SPAM):"spam"===t&&i.push(Daria.Constants.TOOLBAR_BUTTONS.NOT_SPAM),"archive"!==t&&i.push(Daria.Constants.TOOLBAR_BUTTONS.ARCHIVE),"template"!==t&&(this.__hasUnreadMessages()?i.push(Daria.Constants.TOOLBAR_BUTTONS.MARK_AS_READ):i.push(Daria.Constants.TOOLBAR_BUTTONS.MARK_AS_UNREAD));var o=!1;if(1===r.ids.length){var s=ns.Model.get("message",{ids:r.ids[0]});if(!s.hasRealData())return!1;var a=e.getFolderById(s.get(".fid")).symbol;o=_.contains(["draft"],a)}return(1===r.ids.length&&0===r.tids.length||0===r.ids.length&&1===r.tids.length)&&!o&&i.push(Daria.Constants.TOOLBAR_BUTTONS.REPLY),o&&i.push(Daria.Constants.TOOLBAR_BUTTONS.DRAFT_FINISH),Daria.shouldShowContextToolbar()&&(n?i.push(Daria.Constants.TOOLBAR_BUTTONS.MARK_UNIMPORTANT):i.push(Daria.Constants.TOOLBAR_BUTTONS.MARK_IMPORTANT)),i},__getCurrentFolder:function(){var e=this.__mMessagesChecked.getIds(),t={tabId:null,fid:null};return[].concat(r(e.ids),r(e.tids)).some((function(e){var n=ns.Model.get("message",{ids:e});if(n.isThread())return!0;if(Daria.areFoldersTabsEnabled()&&n.isInTab()){var i=n.getTabId();if(t.fid||t.tabId&&t.tabId!==i)return!0;t.tabId=i}else{var r=n.getFolderId();if(t.tabId||t.fid&&t.fid!==r)return!0;t.fid=r}}))?{fid:null,tabId:null}:t},__getFolders:function(e,t){var n=ns.Model.get("folders"),i=n.getHierarchyStructure((function(e){return!_.contains(["outbox"],e.symbol)&&"1000"!==e.fid}),t);return this.__processItems(i,e)},__getTabs:function(e){return ns.Model.get("tabs").getTabs().map((function(t){return{name:t.get(".title"),tabId:t.get(".id"),fid:ns.Model.get("folders").getFidBySymbol("inbox"),isCurrent:t.get(".id")===e,level:0}}))},__processItems:function(e,t,n,i){var r=this;return i=i||[],n=n||0,e.forEach((function(e){i.push({name:e.name,fid:e.fid,isSystem:Boolean(!e.user||e.symbol),isCurrent:e.fid===t,level:n}),e.items&&r.__processItems(e.items,t,n+1,i)})),i},__getLabels:function(){var e=this.__getUserLabelHash(),t=[],n=[];return e.labels.forEach((function(i){i.count!==e.count&&t.push(i.lid),i.count&&n.push(i.lid)})),{label:t,unLabel:n}},__getUserLabelHash:function(){var e=[],t={},n=ns.Model.get("labels"),i=n.getImportantLID(),r=ns.Model.get("settings").getSetting("label_sort");n.data.label.forEach((function(n){if(n.user||n.lid===i){var r={name:n.name,lid:n.lid,count:0,allCount:n.count};t[n.lid]=r,e.push(r)}})),e="by_count"===r?e.sort((function(e,t){return t.allCount-e.allCount})):_.sortBy(e,"name");var o=this.__mMessagesChecked.getCount(),s=this.__mMessagesChecked.getLabels();return _.forEach(s,(function(e,n){t[n]&&(t[n].count=e)})),{count:o,labels:e}},__hasUnreadMessages:function(){var e=this.__mMessagesChecked.getIds();return e.ids.concat(e.tids.map((function(e){return e}))).some((function(e){var t=ns.Model.get("message",{ids:e});return t&&t.get(".new")}))},__replyClickDataPreparation:function(e){return new vow.Promise(function(t,n){ns.Model.get("message",{ids:e}).isThread()?ns.request("messages",{thread_id:e}).then((function(e){var i=e[0].getLastReplyMessageQR();i?t(i.get(".mid")):n()})):t(e)})},__onReplyClick:function(){var e=this.__$onMessage.attr("data-id");if(e){u.a.startScenario(c.a,l.k);var t=this.__replyClickDataPreparation(e);t.always((function(){ns.events.trigger("daria:vMessages:deselect")})),t.then((function(e){var t=ns.router.generateUrl("compose2",{oper:"reply-all",ids:e});ns.page.go(t)}))}}}},"context-menu-mixin-base",ns.View)},function(e,t){ns.View.edefine("context-menu-mixin-left-panel",{methods:{__showContextMenu:function(e){var t=this;e.preventDefault();var n=$(e.currentTarget);n.removeClass("no-user-select");var i=new Daria.ContextMenu({items:this.__getContextMenuItems({$item:n,url:this.__leftPanelExtractUrl(e),id:this.__extractId(n)}),onClose:function(){t.__toggleHoverClass(n,!1)},metrika:this.__metrika});this.__toggleHoverClass(n,!0),i.show({x:e.pageX,y:e.pageY,$scrollContainer:null}),$(".js-layout-left").one("scroll.context-menu-close",(function(){Daria.ContextMenu.close()}))},__toggleHoverClass:no.nop,__leftPanelExtractUrl:function(e){return $(e.target).closest("A[href]").attr("href")},__cmLeftPanelGetContextMenuItems:function(e){return[{text:i18n("%Messages_Context_Menu_Open_Tab"),index:1,metrika:"Открыть в новом окне",onClick:function(){window.open(e.url)}},{type:"separator",index:2},{text:i18n("%Messages_Context_Menu_New_Folder"),customIcon:this._insertCustomIcon("Folder"),index:3,metrika:"Создать новую папку",onClick:function(){var t=Daria.parseQuery(e.$item.attr("data-params")).fid,n=ns.Model.get("folders"),i=n.getFolderById(t);i&&(i.symbol||i.shared)&&(t=n.getFidBySymbol("inbox")),ns.action.run("folders.add",{"only-create":!0,parent_id:t})}},{text:i18n("%Messages_Context_Menu_New_Label"),customIcon:this._insertCustomIcon("Tag"),index:4,metrika:"Создать новую метку",onClick:function(){ns.action.run("labels.add",{"only-create":!0})}},{type:"separator",index:5},{text:i18n("%Messages_Context_Menu_Folders_Setup"),index:6,metrika:"Настройки папок и меток",onClick:function(){var e=ns.router.generateUrl("setup",{tab:"folders"});ns.page.go(e)}}]}}},"context-menu-mixin-base",ns.View)},function(e,t){ns.View.edefine("context-menu-mixin-labels",{methods:{__metrika:"Метки",__extractId:function(e){return Daria.parseQuery(e.attr("data-params")).lid},__toggleHoverClass:function(e,t){e.toggleClass("is-checked",t)},__getContextMenuItems:function(e){var t=this.__cmLeftPanelGetContextMenuItems.call(this,e);if(e.id){ns.Model.get("labels").getLabelById(e.id).user&&t.push({text:i18n("%LabelsMenu_Edit_Button"),customIcon:this._insertCustomIcon("Edit"),index:2.4,metrika:"Переименовать метку",onClick:function(){ns.action.run("label.edit",{id:e.id,"only-edit":!0})}}),t.push({text:i18n("%Labels_Remove_Button"),customIcon:this._insertCustomIcon("Delete"),index:2.5,metrika:"Удалить метку",onClick:function(){ns.action.run("label.remove",{id:e.id})}}),t.push({type:"separator",index:2.9})}return t}}},"context-menu-mixin-left-panel",ns.View)},function(e,t){ns.View.edefine("context-menu-mixin-folders",{methods:{__metrika:"Папки",__extractId:function(e){return Daria.parseQuery(e.attr("data-params")).fid},__toggleHoverClass:function(e,t){e.toggleClass("mail-NestedList-Item_hover",t)},__getContextMenuItems:function(e){var t=this.__cmLeftPanelGetContextMenuItems.call(this,e);if(e.id){var n=ns.Model.get("folders"),i=n.getFolderById(e.id);i.user&&!i.symbol&&"1000"!==i.fid&&"1000"!==i.parent_id&&t.push({text:i18n("%Folders_Edit_Button"),customIcon:this._insertCustomIcon("Edit"),index:2.4,metrika:"Переименовать папку",onClick:function(){ns.action.run("folder.edit",{id:e.id,"only-edit":!0})}}),(!i.default&&"1000"!==i.fid&&"1000"!==i.parent_id||Daria.Folder.REMOVABLE_SYMBOLS[i.symbol])&&t.push({text:i18n("%Folders_Remove_Button"),customIcon:this._insertCustomIcon("Delete"),index:2.5,metrika:"Удалить папку",onClick:function(){ns.action.run("folder.remove",{id:e.id})}}),i.new>0&&t.push({text:i18n("%Message_Right_Пометить_все_прочитанными"),customIcon:this._insertCustomIcon("Read"),index:2.3,metrika:"Пометить все письма прочитанными",onClick:function(){Daria.Folder.markRead(e.id)}}),_.contains(["trash","spam"],i.symbol)&&i.count>0&&t.push({text:i18n("%Messages_Infoline_Folder_Clear_Spam_Intruder"),customIcon:this._insertCustomIcon("Inbox-CleanFolder","context-menu-icon"),index:2.6,metrika:"Очистить папку",onClick:function(){ns.action.run("folder.clear",{fid:e.id})}}),_.contains(["template"],i.symbol)&&t.push({text:i18n("%Toolbar_Создать_шаблон"),customIcon:this._insertCustomIcon("AddTemplate"),index:2.7,metrika:"создать шаблон",onClick:function(){ns.page.go(ns.router.generateUrl("compose2",{save_symbol:"template"}))}}),t.push({type:"separator",index:2.9})}return t}}},"context-menu-mixin-left-panel",ns.View)},function(e,t){ns.View.edefine("context-menu-mixin-collectors",{methods:{__metrika:"Коллектор",__extractId:function(e){return{popid:e.attr("data-popid"),email:e.attr("data-email")}},__toggleHoverClass:no.nop,__getContextMenuItems:function(e){return[{text:i18n("%Messages_Context_Menu_Open_Tab"),index:1,metrika:"Открыть в новом окне",onClick:function(){window.open(e.url)}},{type:"separator",index:1.1},{text:i18n("%Messages_Context_Menu_Edit_Settings"),customIcon:this._insertCustomIcon("Settings","context-menu-icon"),index:2,metrika:"Редактировать",onClick:function(){var t=ns.router.generateUrl("setup",{tab:"collector",popid:e.id.popid,email:e.id.email});ns.page.go(t)}},{type:"separator",index:9.9},{text:i18n("%Messages_Context_Menu_Create_New_Collector"),customIcon:this._insertCustomIcon("AddBtn"),index:10,metrika:"Создать новый сборщик",onClick:function(){var e=ns.router.generateUrl("setup",{tab:"collectors"});ns.page.go(e)}}]}}},"context-menu-mixin-left-panel",ns.View)},function(e,t,n){"use strict";ns.View.edefine("context-menu-mixin-tabs",{methods:{__metrika:"Табы",__extractId:function(e){return Daria.parseQuery(e.attr("data-params")).tabId},__toggleHoverClass:function(e,t){e.toggleClass("mail-NestedList-Item_hover",t)},__getContextMenuItems:function(e){return this.__cmLeftPanelGetContextMenuItems.call(this,e)}}},"context-menu-mixin-left-panel",ns.View)},function(e,t,n){"use strict";ns.View.edefine("context-menu-mixin-attachments-tab",{events:{"ns-view-show":"onShow","ns-view-hide":"onHide"},methods:{__extractId:function(){return"attaches"},onShow:function(){this._cmBaseBindMenuableElements({$node:this.$node,selector:".js-attach-tab"})},onHide:function(){this._cmBaseUnbindMenuableElements()}}},"context-menu-mixin-tabs")},function(e,t){ns.View.define("footer-help-link",{models:{"help-link":{"ns-model-changed":"keepValid","ns-model-changed.href":"invalidate"}},yateModule:"mail"})},function(e,t){ns.View.define("user-dropdown-help-link",{models:{"help-link":{"ns-model-changed":"keepValid","ns-model-changed.href":"invalidate"}},yateModule:"mail"})},function(e,t){ns.View.define("messages-time-updater",{models:{"date-time":{"ns-model-changed":!1,"ns-model-changed.server.date":"updateTime"}},yateModule:"mail",methods:{updateTime:function(){ns.Model.traverse("message",this.updateMessageRelativeTime),ns.Model.traverse("message-body",this.updateMessageRelativeTime),ns.Model.traverse("messages-from-item",this.updateMessageRelativeTime)},updateMessageRelativeTime:function(e){e.isValid()&&e.hasRelativeTime()&&e.updateTime()}}})},function(e,t){ns.View.define("messages-direct-line-placeholder",{events:{"ns-view-htmlinit":"onHtmlInit"},yateModule:"mail",methods:{onHtmlInit:function(){if(!Jane.HAS_AD||!Daria.AdvPresenter.shouldShowLine())return void this.$node.addClass("is-hidden");Daria.Config.heightClassForDirect&&this.$node.addClass(Daria.Config.heightClassForDirect)}}})},function(e,t){ns.View.define("message-dimensions-mixin",{methods:{getDimensions:function(e){return Daria.is2pane()?this.getDimensions2Pane(e):this.getDimensions3Pane(e)},getDimensions2Pane:function(e){var t,n,i={bottom:0,height:0,top:0};if(e){if(t=this.$node.find(".js-message-body"),0===t.length)return i;n=t.outerHeight()}else t=this.$node,n=t.height();return i.top=t.offset().top,i.height=n,i.bottom=i.top+i.height,i},getDimensions3Pane:function(e){var t,n,i={bottom:0,height:0,top:0};if(!this.node)return i;if(e){if(!(t=this.node.getElementsByClassName("js-message-body")[0]))return i;n=this.node.offsetTop+t.offsetTop}else t=this.node,n=t.offsetTop;return i.height=t.offsetHeight,i.top=n,i.bottom=i.top+i.height,i},isVisibleInScroller:function(e,t){if(t){if(!ns.Model.get("message-body",this.params).isValid())return!1}var n=this.getDimensions(t),i=n.height,r=n.top,o=n.bottom,s=e.top,a=e.bottom;return i>0&&(s<=r&&r<=a||s<=o&&o<=a||s>=r&&o>=a)}}})},function(e,t){!(function(){ns.View.define("fixed-element-in-message-mixin",{events:{"daria:vApp:changeRightColumSize@show":"recalculateHeaderFixedState","daria:vFixedElementInMessageMixin:resize@show":"_fixedElementChangeHeight","daria:vScrollerMessage:scroll@show":"_fixedElementOnWindowScroll","daria:layout-changed@show":"_fixedElementOnWindowScroll","resize@show window":"recalculateHeaderFixedState","scroll@show window":"recalculateHeaderFixedState"},methods:{_fixedElementHeader:!1,fixedElementStart:function(){this.getModel("scroller-message").init(),this._fixedElementSetFixed3PaneHeader()},lazyFixedRecalc:function(){_.defer(this.fixedElementStart.bind(this))},fixedElementStop:function(){this._fixedElementReset3PaneHeader(),this._fixedElementHeader=!1},_fixedElementOnWindowScroll:function(){Daria.is3pane()?this._checkFixedState():Daria.isMessagePage()||this._fixedElementRecalcStickyHeader()},_checkFixedState:function(){var e=this.$node.find(".js-thread-toolbar"),t=this.getModel("scroller-message").getScrollTop(),n=t>0;this._fixedElementHeader!==n&&(this._fixedElementHeader=n,e.toggleClass("is-fixed",n))},_fixedElementRecalcStickyHeader:function(){var e=this.getModel("scroller-message").getScrollTop(),t=this.$node.offset(),n=e>t.top;if(n){var i=this.$node.closest(".js-cbt-item").height();i||(i=this.$node.height()),t.top+i<e+60&&(n=!1)}this._fixedElementToggleFixedHeader(n,t)},_fixedElementSetFixed3PaneHeader:function(){if(!Daria.is2pane()){var e=this.$node.find(".js-thread-toolbar");e.css("position","absolute");var t=this.$node.offset(),n=this.$node.outerWidth();e.css({position:"fixed",left:this._$window.scrollLeft()>0?this.node.getBoundingClientRect().left:t.left,top:this.getModel("scroller-message").getScroller().offset().top,width:n,"z-index":10});var i=this.$node.find(".js-mail-Message-Toolbar-Content").outerHeight();this.$node.css({paddingTop:i}),this._fixedElementChangeHeight()}},_fixedElementReset3PaneHeader:function(){var e=this.$node.find(".js-thread-toolbar"),t=this.$node.find(".js-mail-Message-Toolbar-Content");e.length&&(e[0].style.cssText="",e.removeClass("is-fixed")),t.length&&(t[0].style.cssText=""),this.$node.length&&(this.$node[0].style.cssText="")},_fixedElementToggleFixedHeader:function(e,t){this._fixedElementHeader=e;var n=this.$node.find(".js-thread-toolbar"),i=n.find(".js-mail-Message-Toolbar-Content"),r=n.width()-16;i.css({left:e?this._$window.scrollLeft()>0?this.node.getBoundingClientRect().left:t.left:"",width:e?r:""}),n.toggleClass("is-fixed",e)},_fixedElementChangeHeight:function(){var e=this.$node,t=e.find(".js-mail-Message-Toolbar-Content").outerHeight();e.find(".js-thread-toolbar").css({height:t}),Daria.is3pane()&&e.css({paddingTop:t})},recalculateHeaderFixedState:function(){Daria.is2pane()?this._fixedElementOnWindowScroll():this._fixedElementSetFixed3PaneHeader()}}})})()},function(e,t){ns.View.define("preserve-scroll-position-mixin",{events:{"vMessages:items-list-will-update@show":"_saveScrollPosition","vMessages:items-list-updated@show":"_restoreScrollPosition"},methods:{_shouldPreserveScrollPosition:!1,_offsetTop:null,_saveScrollPosition:function(){this._shouldPreserveScrollPosition&&(this._offsetTop=this.$node.offset().top-this._$document.scrollTop())},_restoreScrollPosition:function(){null!==this._offsetTop&&(this._$document.scrollTop(this.$node.offset().top-this._offsetTop),this._offsetTop=null)}}})},function(e,t){ns.View.define("fixed-message-toolbar-mixin",{events:{"daria:vScrollerMessage:scroll@show":"_fixedToolbar","daria:layout-changed@show":"_fixedToolbar","daria:vMessageToolbar:toolbar-didRendered":"_fixedToolbar","daria:vApp:changeRightColumSize@show":"_fixedToolbar","ns-view-htmlinit":"onInit","resize@show window":"_fixedToolbar","scroll@show window":"_fixedToolbar"},methods:{onInit:function(){var e=Daria.is2pane()?".js-cbt-item":".js-message-scroll-area";this.$header=this.$node.closest(e).find(".js-thread-toolbar"),0===this.$header.length&&Daria.isMessagePage()&&(this.$header=this.$node.find(".js-thread-toolbar")),this.$headerHeight=this.$header.height()||0,this.$messageHead=this.$node.find(".js-message-head"),this.getMessageToolbar()},getMessageToolbar:function(){this.$toolbar=this.$node.find(".js-message-toolbar-content")},_fixedToolbar:function(){if(this.$messageHead&&this.$messageHead.length){this.getMessageToolbar();var e=this.getModel("scroller-message"),t=e.getScrollTop(),n=this.isVisibleInScroller(e.getVDimensions(),!1);if(this.isOpen()&&n){var i=this.getDimensions(!1),r=i.top+16,o=i.bottom-this.$toolbar.height()-60;Daria.isMessagePage()?r+=this.$headerHeight:(r-=this.$headerHeight,r+=this.$messageHead.height());var s=t>r&&t<=o;this._toggleFixed(s)}else this._toggleFixed(!1)}},_toggleFixed:function(e){if(e){var t=this.$node.offset(),n=parseInt(this.$toolbar.css("padding-left"))+parseInt(this.$toolbar.css("padding-right")),i=this.$node.width()-n,r=this.$headerHeight;Daria.is3pane()&&(r+=this.getModel("scroller-message").getScroller().offset().top),this.$toolbar.css({left:this._$window.scrollLeft()>0?this.node.getBoundingClientRect().left:t.left,top:r,width:i})}else this.$toolbar&&this.$toolbar[0]&&(this.$toolbar[0].style.cssText="");this.$toolbar.toggleClass("is-fixed",e)},resetFixedToolbar:function(){this._toggleFixed(!1)}}})},function(e,t){ns.View.define("fixed-quick-reply-mixin",{events:{"daria:vScrollerMessage:scroll@show":"toggleStickyMode","message-body-full-load@show":"fixedInit","resize@show window":"onResize","scroll@show window":"onResize"},methods:{QR_OFFSET:20,fixedInit:function(){this.$qr=this.$node.find(".mail-QuickReply"),this.$message=this.$node.closest(".js-message-wrap"),this.getModel("scroller-message").init();var e=ns.Model.get("app-state");this.toggleFixedAfterTimeline=this.toggleFixedAfterTimeline.bind(this),e.on("ns-model-changed.timelineHeight",this.toggleFixedAfterTimeline),this.toggleStickyMode()},fixedDestroy:function(){ns.Model.get("app-state").off("ns-model-changed.timelineHeight",this.toggleFixedAfterTimeline)},toggleFixedAfterTimeline:function(){this.getModel("quick-reply-state").get(".fixed")&&this.stickyModeOn()},isQRInvisibleInScrollArea:function(){var e=this.getModel("scroller-message"),t=ns.Model.get("app-state").get(".timelineHeight"),n=this.$qr.offset().top+this.$qr.innerHeight()+t;return e.getVDimensions().bottom-e.getScrollOffset()<=n},setFixed:function(e){this.getModel("quick-reply-state").setIfChanged(".fixed",e)},isFixed:function(){return this.getModel("quick-reply-state").get(".fixed")},stickyModeOn:function(){this.isFixed()||(this.setFixed(!0),this.handleResizeIfSticky())},stickyModeOff:function(){this.isFixed()&&(this.setFixed(!1),this.$node[0].style.cssText="",this.$qr.removeClass("is-fixed"),this.$qr[0].style.cssText="")},onResize:function(){this.handleResizeIfSticky(),this.toggleStickyMode()},handleResizeIfSticky:function(){this.isFixed()&&(this.$node.css({height:this.$node.innerHeight()}),this.$qr.addClass("is-fixed"),this.$qr.css({width:this.$node.innerWidth(),left:this._$window.scrollLeft()>0?this.$message[0].getBoundingClientRect().left:this.$message.offset().left,bottom:ns.Model.get("app-state").get(".timelineHeight")}))},toggleStickyMode:function(){this.getModel("message").isHuman()&&(Math.floor(this.$qr.offset().top)>=Math.floor(this.$node.offset().top)+this.QR_OFFSET?(this.stickyModeOff(),this.isQRInvisibleInScrollArea()&&this.stickyModeOn()):this.stickyModeOn())}}})},function(e,t){ns.View.define("go-to-replied-message-mixin",{events:{"click .js-go-to-replied-message":"goToRepliedMessage"},methods:{goToRepliedMessage:function(){var e={mid:this.params.ids},t=this.getModel("message").get(".message_id");return t&&(e.message_id=t),ns.request(["message-in-reply-to"],e).then((function(e){var t=e[0].get(".mid");if(t){var n=ns.router.generateUrl("message",{ids:t});ns.page.go(n)}})),!1}}})},function(e,t){ns.View.edefine("infoline",{events:{"ns-view-show":"onShow","ns-view-hide":"onHide","ns-view-htmlinit":"onHtmlinit","daria:vApp:changeAppWidth@show":"onResize","daria:vApp:changeLeftColumWidth@show":"onResize","daria:vScrollerMessages:scroll@show":"onScroll","daria:layout-changed@show":"onScroll","daria:vMessagesItemWrap:message-closed":"onToggleOpenMessage","daria:vToolbar:message-opened":"onToggleOpenMessage","click .js-deselect-all":"onDeselectAllClick","click .js-select-folder":"onSelectFolderClick"},yateModule:"mail",ctor:function(){this._isMessageOpened=!1,this._isFixed=!1,this._isVisible=!1,this.recalculateValues=function(){_.defer(this._recalculateValues.bind(this))},this.onCompactModeChanged=function(){_.defer(this._onCompactModeChanged.bind(this))},this.onMessagesCheckedChanged=function(){_.defer(this._onMessagesCheckedChanged.bind(this))},this.onScroll=_.throttle(this.onScroll.bind(this),100)},models:{settings:{"ns-model-changed":!1,"ns-model-changed.liza_minified":"onCompactModeChanged","ns-model-changed.liza_minified_header":"onCompactModeChanged","ns-model-changed.size-layout-left":"onLayoutLeftSizeChanged"},"scroller-messages":!1,"messages-checked":{"ns-model-changed":"onMessagesCheckedChanged"},dimensions:{resize:"onResize"},folders:{"ns-model-changed":"onFoldersChanged"}},params:function(e){var t=["thread_id","ids","important"];for(var n in e)_.include(t,n)&&delete e[n];var i={};return Object.keys(e).sort().forEach((function(t){i[t]=e[t]})),i},methods:{MIN_LAYOUT_WIDTH:990,leftPanelWidth:null,offset:null,getToolbarHeight:function(){return ns.Model.get("settings").getSetting("hide_daria_left")?43:58},onHtmlinit:function(){this.$counter=this.$node.find(".js-messages-count"),_.defer(function(){this.onLayoutLeftSizeChanged(),this.toggleVisibility(),this.updateCounter()}.bind(this))},onShow:function(){Daria.is2pane()&&(this.getModel("scroller-messages").init(),this._isVisible&&this.togglePositionFixed(!1))},onHide:function(){this.togglePositionFixed(!1),this.resetValues()},onResize:function(){this._isVisible&&this.togglePositionFixed(this._isFixed)},onLayoutLeftSizeChanged:function(){this.leftPanelWidth=parseFloat(this.getModel("settings").getSetting("size-layout-left")),this.onResize()},onDeselectAllClick:function(){this.getModel("messages-checked").resetChecked()},_onCompactModeChanged:function(){if(!this._isVisible)return!1;Daria.is2pane()&&(this.recalculateValues(),this.togglePositionFixed(this._isFixed),this.onScroll())},togglePositionFixed:function(e){this._isFixed=e,this._isFixed?this.toFixed():this.toInitial()},toFixed:function(){this.$node.addClass("is-fixed"),this.$node.css({left:this.getPositionFixedLeft(),top:this.getToolbarHeight()})},toInitial:function(){this.$node.removeClass("is-fixed"),this.resetValues(),this.$node.css({left:"50%",top:"auto"})},getPositionFixedLeft:function(){var e=this.getModel("dimensions");return Math.max(this.MIN_LAYOUT_WIDTH,e.getWindowWidth())/2+this.leftPanelWidth/2},resetValues:function(){this.offset=null},_recalculateValues:function(){this.offset=this.getOffset()},getOffset:function(){return this.$node.offset()},toggleVisibility:function(){var e=this.getModel("messages-checked");this._isVisible=e.canShowInfoline(),this._isVisible&&(this._isVisible=!(this._isVisible&&this._isMessageOpened)),this._isVisible&&(e.atrigger("ns-model-reset-checked"),this.updateCounter()),this.$node.toggleClass("is-hidden",!this._isVisible),this.togglePositionFixed(this._isFixed)},_onMessagesCheckedChanged:function(){this.toggleVisibility(),this._isVisible&&this.updateCounter(),Daria.is2pane()&&this.onScroll(),this.toggleSelectFolderLinkDisabled(this.getModel("messages-checked").areAllCheckedInFolder())},updateCounter:function(){if(this.$counter){var e=this.getModel("messages-checked"),t=e.getSelectedFolder(),n=t?ns.Model.get("folder",{fid:t}).get(".count"):e.getCount();this.$counter.html(i18n("%Выбрано_N_писем",n))}},onScroll:function(){return!Daria.is3pane()&&(!!this._isVisible&&(_.isNull(this.offset)&&(this.offset=this.getOffset()),void(this.getModel("scroller-messages").getScrollTop()>this.offset.top-this.getToolbarHeight()?this._isFixed||this.togglePositionFixed(!0):this._isFixed&&this.togglePositionFixed(!1))))},onToggleOpenMessage:function(e){switch(e){case"daria:vMessagesItemWrap:message-closed":this._isMessageOpened=!1;break;case"daria:vToolbar:message-opened":this._isMessageOpened=!0}Daria.is2pane()&&this.toggleVisibility()},onSelectFolderClick:function(){var e=this.getModel("messages-checked");e.resetChecked(),e.selectFolder()},onFoldersChanged:function(){this.updateCounter()},showSelectFolderLink:function(){var e=ns.page.current.params;return Boolean(e.current_folder)&&!e.tabId},toggleSelectFolderLinkDisabled:function(e){this.$node.find(".js-select-folder").toggleClass("is-disabled",e)}}})},function(e,t){ns.ViewCollection.edefine("notifications",{events:{"wheel .js-notifications-scroll":"onMouseWheel","mouseleave .js-notifications-scroll":"onMouseLeave","mouseenter .js-notifications-fake":"loadMore"},models:{notifications:{"ns-model-changed":"keepValid","ns-model-changed.queue":"onQueueUpdate","ns-model-insert":"forceUpdate","ns-model-remove":"onItemRemove"},"notifications-state":{"ns-model-changed":"keepValid","ns-model-changed.expanded":"onExpandedChange"}},split:{byModel:"notifications",intoViews:"notifications-item"},yateModule:"mail",methods:{DELAY_BEFORE_HIDE_FAKE:150,getScrollContent:function(e){return $(e.target).closest(".js-notifications-scroll")[0]},onExpandedChange:function(){var e=this.getModel("notifications-state").isExpanded();this.$node.toggleClass("is-expanded",e),e||this.getModel("notifications").insertFromQueue()},onMouseLeave:function(){this.$node.find(".js-notifications-scroll").scrollTop(0),this.getModel("notifications-state").collapse()},onMouseWheel:function(e){e.originalEvent.deltaY<0&&this.loadMore(),this.onWheel(e)},onItemRemove:function(){var e=this.getModel("notifications"),t=this.getModel("notifications-state");!e.hasNotifications()&&t.isExpanded()&&t.collapse(),this.forceUpdate()},loadMore:function(){this.getModel("notifications").insertFromQueue()},onQueueUpdate:function(){var e=this.$node.find(".js-notifications-fake");this.getModel("notifications").hasNotificationsInQueue()?e.addClass("is-show"):_.delay((function(){e.removeClass("is-show")}),this.DELAY_BEFORE_HIDE_FAKE)}}},"prevent-scroll-propagation-mixin",ns.ViewCollection)},function(e,t){ns.View.define("notifications-item",{events:{"ns-view-show":"onShow",click:"onClick","click .js-remove":"onRemoveClick",mouseenter:"onMouseEnter"},models:{"notifications-item":"keepValid","notifications-state":{"ns-model-changed":"keepValid","ns-model-changed.expanded":"recalculateShowTimer"}},params:{id:null},ctor:function(){this.startTimerTime=0,this.stopTimerTime=0,this.timerId=null},yateModule:"mail",methods:{MIN_TIME_TO_SHOW:1e3,TIME_TO_SHOW:3e3,TIME_TO_SHOW_VIP:6e3,DELAY_BEFORE_REMOVE:300,DELAY_BEFORE_VIP_ANIMATION:400,onShow:function(){var e=this,t=this.getModel("notifications-item").isVIP(),n=this.getModel("notifications-state").isExpanded();_.defer((function(){e.$node.addClass("is-showed")})),t&&!n&&_.delay((function(){e.$node.addClass("is-vip")}),this.DELAY_BEFORE_VIP_ANIMATION),n||(this.startTimerTime=Date.now(),this.startShowTimer(t?this.TIME_TO_SHOW_VIP:this.TIME_TO_SHOW)),this.sendMetric("Показ")},startShowTimer:function(e){this.timerId=setTimeout(this.remove.bind(this),e)},clearShowTimer:function(){this.timerId&&(this.stopTimerTime=Date.now(),clearTimeout(this.timerId))},onClick:function(){this.getModel("notifications-item").isCalendarEvent()||(this.remove(),this.getModel("notifications-state").collapse()),this.sendMetric("Клик на нотификацию")},onRemoveClick:function(e){e.preventDefault(),e.stopPropagation(),this.clearShowTimer(),this.remove()},remove:function(){if(this.isValid()){this.$node.addClass("is-removed");var e=this;_.delay((function(){ns.Model.get("notifications").remove(e.getModel("notifications-item"))}),this.DELAY_BEFORE_REMOVE)}},onMouseEnter:function(){this.getModel("notifications-state").isExpanded()||this.getModel("notifications-state").expand()},recalculateShowTimer:function(){if(this.getModel("notifications-state").isExpanded())this.clearShowTimer();else{var e=this.stopTimerTime-this.startTimerTime,t=Math.max(this.TIME_TO_SHOW-e,this.MIN_TIME_TO_SHOW);this.startTimerTime||(this.startTimerTime=Date.now()),this.startShowTimer(t)}},sendMetric:function(e){Jane.c("Нотификации","Нотификации-оповещения",e)}}})},function(e,t){!(function(){"use strict";function e(e){return"on"===e||!0===e}ns.View.define("browser-notifications",{events:{"ns-view-init":"onInit","daria:PushManager:permissionResolved@show":"onPermissionResolved","daria:PushManager:permissionConverted@show":"onPermissionConverted","daria:PushManager:subscriptionUpdated@show":"onSubscriptionUpdated","daria:folder-add-done":"onFolderCreation"},models:{settings:{"ns-model-changed":!1,"ns-model-changed.browser_notify_message":"updateSubscription","ns-model-changed.open-message-list":"updateServiceWorkerSettings","ns-model-changed.folder_thread_view":"updateServiceWorkerSettings","ns-model-changed.browser_notify_blank":"updateServiceWorkerSettings","ns-model-changed.layout":"updateServiceWorkerSettings","ns-model-changed.subscribed_folders":"updateSubscribedFolders"},folders:!1},yateModule:"mail",methods:{onInit:function(){Daria.Config.NO_SETTINGS||this._checkSubscription(this.isEnabled())},isEnabled:function(){var e=this.getModel("settings"),t=e.get(".browser_notify_message"),n=e.get(".browser_notify_requested");return t||!n&&Daria.IS_CORP},onSubscriptionUpdated:function(e,t){var n=this.getModel("settings");(n.getSetting("subscribed_folders")||"").replace(/&quot;/g,'"')!==t.folders&&n.setSettings({subscribed_folders:t.folders},{silent:!0})},onPermissionResolved:function(e,t){this.keepValid();var n=this.getModel("settings"),i=this._fillSubscriptionSettings({browser_notify_requested:!0},t),r=!0;n.setSettings(i).catch((function(){return r=!1})).then((function(){return Daria.monitoring.workflow.ipush(Object.assign({action:"requested",saved:r},i))}))},onPermissionConverted:function(e,t){this.keepValid();var n=this.getModel("settings"),i=this._fillSubscriptionSettings({browser_notify_converted:!0},t),r=!0;n.setSettings(i).catch((function(){return r=!1})).then((function(){return Daria.monitoring.workflow.ipush(Object.assign({action:"converted",saved:r},i))}))},_fillSubscriptionSettings:function(e,t){var n=this.getModel("settings"),i=n.get(".browser_notify_message"),r=t!==Daria.PushManager.PERMISSION.SKIPPED,o=t===Daria.PushManager.PERMISSION.GRANTED;return r&&!i&&o&&(e.browser_notify_message=o,e.subscribed_folders=JSON.stringify(this._getSubscribedFolders())),e},onFolderCreation:function(e,t){var n=this.getModel("folders").getParentFid(t),i=this._getSubscribedFolders();if(_.includes(i,n)){var r=JSON.stringify(i.concat(t).sort());this.getModel("settings").setSettings({subscribed_folders:r})}},updateSubscription:function(t,n,i,r,o){this.keepValid();var s=this.getModel("settings"),a=s.get(".browser_notify_message");o=e(o),a=e(a),o!==a&&this._checkSubscription(a,!0)},updateServiceWorkerSettings:function(){this.keepValid();var e=this.getModel("settings");return e.getSign("browser_notify_message")?Daria.PushManager.settings({openMessageInList:e.getSign("open-message-list"),folderThreadView:e.getSign("folder_thread_view"),openInNewWindow:e.getSign("browser_notify_blank"),is3pane:e.getSign("layout")>0}):Promise.resolve()},updateSubscribedFolders:function(){this.isEnabled()&&(Daria.PushManager.resetSubscriptionDatetime(),Daria.PushManager.subscribe(this._getSubscribedFolders(),!0))},_checkSubscription:function(e,t){e?Daria.PushManager.subscribe(this._getSubscribedFolders()):Daria.PushManager.unsubscribe(t)},_getSubscribedFolders:function(){return ns.Model.get("settings").getSign("subscribed_folders")}}})})()},function(e,t){ns.View.define("translate-select-lang",{events:{"click@show .js-lang":"_onClick","daria:vScrollerMessages:scroll@show":"_onScroll","daria:vScrollerMessage:scroll@show":"_onScroll","daria:layout-changed@show":"_onScroll"},models:{"translate-langs":!1},params:function(e){return{currentLang:e.currentLang}},ctor:function(){this._defaultOptions={withoutTail:Daria.isComposePage(),autofocus:!0,autoclose:!0,how:{my:"left top",at:"left-100 bottom"}},this._options={},this._popup=null},yateModule:"mail",methods:{open:function(e){return this._options=_.extend({},this._defaultOptions,e),this.update(this.params,{execFlag:ns.U.EXEC.PARALLEL}).then(this._onAfterRender,this)},close:function(){_.method("close")(this._popup)},_onClick:function(e){var t=$(e.currentTarget).data("lang");this.getModel("translate-langs").setRecent(t),this.trigger("selected",t)},_onScroll:function(){var e=_.get(this._popup,"node.widget");_.method("_position")(e)},_onAfterRender:function(){this._popup=nb.block(ns.renderNode({},"js-translate-select-lang","mail")),this._popup.setContent(this.node),this._popup.on("nb-opened",this._onOpened.bind(this)),this._popup.on("nb-closed",this._onClosed.bind(this)),this._popup.on("nb-destroyed",this._onDestroyed.bind(this)),this._popup.open(this._options)},_onOpened:function(){this.trigger("opened")},_onClosed:function(e,t){t.destroy(),this.trigger("closed")},_onDestroyed:function(){delete this._popup,this._options={},this.destroy()}}})},function(e,t){ns.View.define("bug-report",{events:{click:"onClick"},yateModule:"mail",methods:{onClick:function(){ns.action.run("user-feedback.show",{onlyReport:!0})}}})},function(e,t){!(function(){var e=null,t=function(){if(e)return e;var t=new Vow.Promise;return Daria.Libs("DiskWidgetSaveApi",(function(){t.fulfill()})),e=t};ns.View.define("disk-widget-save-popup",{yateModule:"mail",methods:{_deferred:null,open:function(e){return this._deferred?null:(this._deferred=new vow.Deferred,this.update({},{execFlag:ns.U.EXEC.PARALLEL}).then((function(){$(e.popup.where).closest(":focusable").focus(),this.nbPopup=nb.block(this.node),this.nbPopup.open(e.popup),Vow.all([ns.request([ns.Model.get("disk-secret-key")]),t()]).then((function(t){var n=t[0][0],i=this._getSaveToDiskWidgetParams(e,n.get(".key"),this.$node.find(".js-container")[0]);if(!i)return void this.destroySelf();this.$node.toggleClass("mail-DiskWidgetSavePopup-Content_Loaded",!0),this.widget=window.WidgetSaveApi.saveAndMove(i,{onClose:this.close.bind(this),onError:function(t){Jane.c(["Attachments","Error while saving on disc",e.countLocationName||"Not set"]),t&&Jane.ErrorLog.send({errorType:"disk-widget-save-popup_save-failed",error:JSON.stringify(t)})}})}),(function(){this.close(),Jane.ErrorLog.send({errorType:"disk-widget-save-popup_open-failed"})}),this),this.nbPopup.on("nb-closed",this.destroySelf.bind(this))}),this),this._deferred)},close:function(){this.nbPopup&&this.nbPopup.close()},destroySelf:function(){var e=this;_.defer((function(){e.nbPopup&&(e.nbPopup.destroy(),e.nbPopup=null),e.widget&&(e.widget.destroy(),e.widget=null),e._deferred&&(e._deferred.resolve(),e._deferred=null),e.destroy()}))},_getSaveToDiskWidgetParams:function(e,t,n){var i=e.mid,r=e.hid,o=e.diskDownloadUrl,s=o?"disk-public":"mail",a=o||this._getMailAttachmentSrc(i,r);return a?{source:"copy-widget-yamail",type:s,sourceId:a,uid:ns.Model.get("account-information").get(".uid"),sk:t,container:n}:(Jane.ErrorLog.send({errorType:"disk-widget-save-popup_could-not-generate-source-id",mid:i,hid:r,diskDownloadUrl:o}),null)},_getMailAttachmentSrc:function(e,t){return e&&t?"/mail/file:"+e+":"+t:null}}})})()},function(e,t){ns.View.define("fake-head-background",{yateModule:"mail"})},function(e,t){!(function(){ns.View.define("technical-problems-alert",{models:{"system-status":{"ns-model-changed":"forceUpdate"}},yateModule:"mail",events:{"click .js-technical-problems-alert-toggler":"toggleDescription"},methods:{ERRORS:{internal:{title:i18n("%TechProblem_INTERNAL_title"),description:i18n("%TechProblem_INTERNAL_desc")},db_ro:{title:i18n("%TechProblem_DB_RO_title"),description:i18n("%TechProblem_DB_RO_desc")},no_send:{title:i18n("%TechProblem_NO_SEND_title")},no_settings:{title:i18n("%TechProblem_NO_SETTINGS_title")},no_search:{title:i18n("%TechProblem_NO_SEARCH_title")},no_abook:{title:i18n("%TechProblem_NO_ABOOK_title")},no_attachment:{title:i18n("%TechProblem_NO_ATTACHMENT_title")},slow_output:{title:i18n("%TechProblem_SLOW_OUTPUT_title")},slow_input:{title:i18n("%TechProblem_SLOW_INPUT_title")},broken_mails:{title:i18n("%TechProblem_BROKEN_MAILS_title")},broken_folders_labels:{title:i18n("%TechProblem_BROKEN_FOLDERS_LABELS_title")}},getErrorMessage:function(){var e=this.getModel("system-status").getData()||{};if(!e.problem)return{};if("%"===e.problem[0]){var t=e.problem.slice(1);return this.ERRORS[t]||this.ERRORS.internal}return{title:e.problem}},toggleDescription:function(e){e.preventDefault(),this.$node.toggleClass("mail-Page-Intruder__full_info"),ns.events.trigger("daria:layout-changed"),$(window).trigger("resize"),Daria.Dialog.position()}}})})()},function(e,t){ns.View.define("async-view-loading-fix-mixin",{methods:{_getTree:function(){var e=ns.View.prototype._getTree.apply(this);return this.isLoading()&&this._fixTreeStateByModels(e),e},_fixTreeStateByModels:function(e){var t=!1,n=this._getModelsForTree();for(var i in n)if("error"===n[i].status&&!n[i][i]){t=!0;break}t&&(e.state="loading")}}})},function(e,t,n){"use strict";ns.View.define("yandex-plus",{events:{"ns-view-htmlinit":"onHtmlInit","ns-view-htmldestroy":"onHtmlDestroy","daria:promo-manager:show-yandex-plus-tooltip@show":"showVisible"},yateModule:"mail",methods:{onHtmlInit:function(){Daria.React.yandexPlus.render(this.node)},showVisible:function(){Daria.React.yandexPlus.render(this.node,{tooltipAutoShow:!0})},onHtmlDestroy:function(){Daria.React.yandexPlus.unmount(this.node)}}})},function(e,t,n){"use strict";ns.View.define("yandex-plus-renderer",{models:{settings:{"ns-model-changed":!1,"ns-model-changed.disable_promo":"forceUpdate"}},yateModule:"mail"})},function(e,t){ns.View.define("user-feedback",{events:{"daria:vUserFeedback:update@show":"update"},yateModule:"promo",methods:{update:function(){return this.updateByLayout("user-feedback",{},{execFlag:ns.U.EXEC.PARALLEL})}}})},function(e,t){var n={PING:"ping",PONG:"pong",SENT:"sent"};ns.View.define("user-feedback-report",{events:{"ns-view-htmlinit":"onHtmlInit","ns-view-htmldestroy":"onHtmlDestroy"},yateModule:"promo",methods:{_formFrameListener:function(e){var t,i=e.originalEvent,r=i.data;try{t=JSON.parse(r)}catch(e){return}if("fos-form"===(t&&t.name)){var o=i.source;switch(t&&t.message||t){case n.PING:o.postMessage(n.PONG,"*");break;case n.SENT:this.finish()}}},onHtmlInit:function(){this._formFrameListener=this._formFrameListener.bind(this),$(window).on("message",this._formFrameListener)},onHtmlDestroy:function(){$(window).off("message",this._formFrameListener)},finish:function(){Jane.c("Новый ФОС","Отправка формы"),setTimeout((function(){return Daria.Dialog.close()}),15e3)}}})},function(e,t,n){n(2213),yr.externals["is-my-email"]=function(e){return ns.Model.get("account-information").isMyEmail(e)},yr.externals["has-experiment"]=Daria.hasExperiment,yr.externals["has-feature"]=Daria.hasFeature,yr.externals["get-feature-params"]=Daria.getFeatureParams,yr.externals["show-doublesized-contacts"]=Daria.showDoubleSizedContacts,(function(){function e(e){return t(),r.getFolderById(e)||r.getFolderBySymbol(e)}function t(){r||(r=ns.Model.get("folders"),o=ns.Model.get("labels"))}function i(e){var t=e.url,n=e["preview-supported"]||e["preview-src"],i="image"===e.class,r=[],o=_.includes(r,e.class);return(!t||n)&&(i&&n||o)}var r,o;n(2214),yr.externals["daria-url-attachment"]=function(){var e=Array.prototype.slice.call(arguments);return e[0]=yr.nodeset2data(e[0]),Daria.url.attachment.apply(Daria.url,e)},yr.externals["daria-url-attachment-archive"]=function(){var e=Array.prototype.slice.call(arguments);return e[0]=yr.nodeset2data(e[0]),Daria.url.archive.apply(Daria.url,e)},yr.externals["get-attach-preview-data"]=function(e,t,n,i){return Daria.getAttachPreviewData(yr.nodeset2data(e),t,n,i)},yr.externals["get-folder-by-fid-or-symbol"]=function(t){return yr.object2nodeset(e(t)||{})},yr.externals["get-folders-by-fids-or-symbols"]=function(t){for(var n=[],i=0;i<t.length;++i){var r=t[i].data,o=e(r);o&&n.push(o)}return yr.object2nodeset({folders:n})},yr.externals["get-tab-by-id"]=function(e){var t=ns.Model.get("tabs").getTab(e);return yr.object2nodeset(t?t.getData():{})},yr.externals["get-tabs"]=function(){var e=ns.Model.get("tabs").getTabs().map((function(e){return e.getData()}));return yr.object2nodeset({tabs:e||[]})},yr.externals["get-human-size"]=Jane.getHumanSize,yr.externals["get-label-by-name"]=function(e){return t(),yr.object2nodeset(o.getLabelByName(e)||{})},yr.externals["get-label-by-lid"]=function(e){return t(),yr.object2nodeset(o.getLabelById(e)||{})},yr.externals["get-label-important"]=function(){return t(),yr.object2nodeset(o.getLabelBySymbolicName("important_label")||{})},yr.externals["is-message-imap-deleted"]=function(e){var t=ns.Model.get("message",{ids:e});return t.hasLabelWithSymbolicName("deleted_label")||t.get(".flags.imap-deleted")},yr.externals["get-shortcut-label-for"]=function(e,t,n){return Daria.Shortcuts.getShortcutLabelFor(e,t,n)},yr.externals["get-current-page"]=function(){return ns.page.current.page},yr.externals["get-current-page-params"]=function(){return yr.object2nodeset(ns.page.current.params)},yr.externals["get-current-page-param"]=function(e){return ns.page.current.params[e]},yr.externals["is-2pane"]=Daria.is2pane,yr.externals["is-3pane"]=Daria.is3pane,yr.externals["is-message-page"]=Daria.isMessagePage,yr.externals["is-folders-tab-page"]=Daria.isFoldersTabPage,yr.externals["is-folder"]=function(e,n){return!(!e||!n)&&(t(),r.isFolder(e,n))},yr.externals.avatar=function(e){return Daria.Recipients.add(e)},yr.externals["head-avatar"]=function(e){return Daria.Recipients.addHeadAvatar(e)},yr.externals["should-show-checkbox-inside-userpic"]=Daria.UISettings.shouldShowCheckboxInsideUserpic,yr.externals["get-labels-by-lid"]=function(e){t();var n=yr.nodeset2data(e);"string"==typeof n&&(n=[n]);for(var i=[],r=0,s=n.length;r<s;r++){var a=o.getLabelById(n[r]);if(a){var c=yr.object2nodeset(a)[0];c.name="label",i.push(c)}}return i},yr.externals["can-use-pins-by-params"]=function(e){return Daria.messages.checkUsePinsByParams(yr.nodeset2data(e))},yr.externals["can-show-pin-controls-by-params"]=Daria.messages.canShowPinControlsByParams,yr.externals["has-attachment-preview"]=function(e){return i(yr.nodeset2data(e))},yr.externals["get-count-attachments-to-show"]=function(e){var t=yr.nodeset2data(e);return t=_.isArray(t)?t:[t],t.length>3?3:t.length},yr.externals["get-message-presentation-by-fid"]=function(e,t){var n=yr.nodeset2data(e)||{},i={ids:n.mid,fid:t||ns.page.current.params.current_folder||n.fid},r=ns.Model.get("message-presentation",i);return r&&r.isValid()&&r.getData()?yr.object2nodeset(r.getData()):null},yr.externals["get-browser-notifications-permission"]=function(){return Daria.PushManager.permission()},yr.externals["has-browser-notifications-support"]=function(){return Daria.PushManager.compatible}})(),yr.externals["show-priority-label"]=function(){return Daria.showPriorityLabel()},yr.externals["select-messages-direct-view"]=function(e){var t=yr.nodeset2data(e),n=Daria.getDirectBlockLayoutInfo("messages-direct").id,i=yr.object2nodeset(t[n]);return i[0].name=n,i[0].parent=e[0],i},yr.externals["repeat-str"]=_.repeat,yr.externals["has-folders-tabs"]=function(){return Daria.hasFoldersTabs()},yr.externals["are-folders-tabs-enabled"]=function(){return Daria.areFoldersTabsEnabled()},yr.externals["is-attachments-line-design"]=function(){return Daria.isAttachmentsLineDesign()},yr.externals["is-compact-messages-list"]=function(){return Daria.CompactMode.isCompactMessagesList()},yr.externals["get-compact-messages-list-value"]=function(){return Daria.CompactMode.getCompactMessagesListValue()},yr.externals["is-compact-header"]=function(){return Daria.CompactMode.isCompactHeader()},yr.externals["get-compact-header-value"]=function(){return Daria.CompactMode.getCompactHeaderValue()},yr.externals["should-show-context-toolbar"]=function(){return Daria.shouldShowContextToolbar()},yr.externals["has-rocks-suggest"]=function(){return Daria.hasRocksSuggest()}},function(e,t,n){"use strict";function i(e,t){var n=o.scope(r),i=n.priorityTypes[t];if(i)return i;var s="".concat(e,"+").concat(t),a=n.comboKeys[s];if(a)return a;var c=n.extensions[e];if(c)return c;var l=n.types[t];return l||void 0}var r="attach-icons-svg",o=n(520);yr.externals["get-attach-link"]=function(e,t){return i(e,t)||o.get(r,"default")},yr.externals["has-attach-image"]=function(e,t){return Boolean(i(e,t))}},function(e,t){!(function(){function e(){var e=ns.page.current.params,t=[];if("only_atta"===e.extra_cond)t.push("#attachments?");else if("only_new"===e.extra_cond)t.push("#unread?");else{var n=yr.externals["get-folder-by-fid-or-symbol"](e.current_folder);t.push(yr.externals["url-content-folder"](n,!0))}return t.push(yr.externals["url-params"](e,["current_folder","sort_type","page_number","extra_cond","goto","currentDateId","nextDateId","prevDateId"])),t.join("")}function t(){var e=ns.page.current.params,t=[];if(e.current_folder){var n=yr.externals["get-folder-by-fid-or-symbol"](e.current_folder);t.push(yr.externals["url-content-folder"](n,!0))}else if(e.current_label){var i=yr.externals["get-label-by-lid"](e.current_label);t.push(yr.externals["url-content-label"](i,!0))}else e.thread_id?t.push("#thread/"+e.thread_id+"?"):"search"===e.search?t.push("#search?request="+encodeURIComponent(e.request)+"&"):"only_new"===e.extra_cond?t.push("#unread?"):"only_atta"===e.extra_cond?t.push("#attachments?"):"all"===e.goto?t.push("#all?"):t.push("#messages?");return t.join("")}function n(){var e=ns.page.current.params,t=[];return e.current_folder?(t=["ids","thread_id","page_number","current_folder","datePager","mrange","pager_top","currentDateId","prevDateId","nextDateId"],Daria.is2pane()&&t.push("extra_cond")):t=e.current_label?["ids","thread_id","page_number","current_label"]:e.thread_id?["ids","thread_id","page_number"]:"search"===e.search?["ids","thread_id","page_number","search","request"]:"only_new"===e.extra_cond||"only_atta"===e.extra_cond||"all"===e.goto?["ids","thread_id","page_number","extra_cond","goto"]:["ids","thread_id","page_number","pager_top"],yr.externals["url-params"](e,t)}yr.externals["url-params"]=function(e,t,n){e||(e=ns.page.current.params),t=$.makeArray(t),n=$.makeArray(n),t.push("threaded");var i=[];for(var r in e)!e.hasOwnProperty(r)||t.length&&-1!==t.indexOf(r)||n.length&&-1===n.indexOf(r)||i.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return i.length?i.join("&")+"&":""},yr.externals["url-content-folder"]=function(e,t){return e=yr.nodeset2data(e),t=t?"?":"",e.symbol?"#"+e.symbol+t:"#folder/"+e.fid+t},yr.externals["url-content-label"]=function(e,t){return e=yr.nodeset2data(e),t=t?e.lid?"?":"&":"",e.lid?"#label/"+e.lid+t:"#messages?goto=all&extra_cond="+e.symbol+t},yr.externals["url-content-message"]=function(e,t){return e=yr.nodeset2data(e),Daria.Page.generateUrl.contentMessage(e,t)},yr.externals["url-content-sort"]=function(t,n){return Array.isArray(t)&&(t=yr.nodeset2scalar(t)),Array.isArray(n)&&(n=yr.nodeset2scalar(n)),e()+"sort_type="+t+("asc"===n?"1":"")+"&"},yr.externals["page-url-prefix"]=function(){return t()+n()}})()},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!(function(){var e=function e(t,n){this.options=$.extend({},e.defaults,n),this.options.showDoubleSizedContacts&&(this.options.suggestClass+=" mail-Suggest_size_double"),this.cache={},this.currentContent=[],this.currentTerm="",this._janeEvents={},this.dontClose=!1,this.isInputFieldBlur=!1,this.$document=$(document),this.changeInputField(t,!0)};no.extend(e.prototype,ns.Events),e.defaults={suggestClass:"nb-island _nb-fly-island _nb-suggest-container _nb-s-suggest mail-Suggest",handlers:{},cacheSize:50,multiple:!1,multipleSeparator:",",valuePrefix:"",minLength:0,delay:0,autoFocus:!0,getPositionNode:_.noop},e.extractLast=function(e,t){return e.split(t).pop()},e.mixPrivateMethodWithOption=function(e,t,n){return $.map(n,(function(n){var i="_"+n,r=e[i],o=t[n];$.isFunction(e[i])&&($.isFunction(o)?o.isMixed||(t[n]=function(){o.apply(this,arguments),r.apply(e,arguments)}):t[n]=function(){r.apply(e,arguments)},t[n].isMixed=!0)})),t},e.prototype.changeInputField=function(e,t){return t||this.destroy(),this.$inputField=$(e),this.inputField=this.$inputField[0],this.inputField&&"object"===n(this.inputField)&&1===this.inputField.nodeType&&this.init(),this},e.prototype.init=function(){return this.$inputField.addClass("_init"),this.$inputField.attr({"data-nb":"suggest","data-class-suggest":this.options.suggestClass}),this.nbSuggest=nb.block(this.inputField),this.setOptions(this.options).bindEvents(),this.nbSuggest.$jUI.suggest({open:function(){this._opened||(this._opened=!0,this.trigger("open"))}.bind(this),close:function(){this._opened&&(this._opened=!1,this.trigger("close"))}.bind(this)}),this},e.prototype.isOpen=function(){return Boolean(this._opened)},e.prototype.setOptions=function(t){if(t=t||{},$.extend(this.options,t),e.mixPrivateMethodWithOption(this,this.options,["source","search","select","focus","response","open","close"]),this.nbSuggest){var n=this.options.getPositionNode();n&&$.extend(!0,this.options,{position:{of:n}}),this.nbSuggest.setOption(this.options)}return this.options.multiple&&(this.options.multipleSeparatorRegExp=new RegExp(this.options.multipleSeparator+"\\s*")),this},e.prototype.show=function(e){return this.nbSuggest&&(e||(e=this.nbSuggest.getValue()),this.nbSuggest.search(e)),this},e.prototype.hide=function(){return this.dontClose=!1,this.abort(),this.nbSuggest&&this.nbSuggest.close(),$.isFunction(this.options.hide)&&this.options.hide.apply(this.inputField,arguments),this},e.prototype.bindJaneEvent=function(e,t){var n=this[t].bind(this);return this._janeEvents[e]=n,ns.events.on(e,n),this},e.prototype.unbindJaneEvent=function(e){return ns.events.off(e,this._janeEvents[e]),delete this._janeEvents[e],this},e.prototype.bindEvents=function(){if(Modernizr.msie){var e=this,t=this.$inputField.data("uiSuggest"),n=t.close;t.close=function(){e.dontClose||n.apply(this,arguments)},this.$document.on("mousedown.daria-suggest",this._ieDocumentMousedown.bind(this)),this.$inputField.on("blur.daria-suggest",this._ieInputBlur.bind(this))}return this},e.prototype.focusedSelect=function(){var e=$.Event("keydown",{which:Jane.Common.keyCode.ENTER,keyCode:Jane.Common.keyCode.ENTER});this.currentContent.length?this.$inputField.trigger(e):this.options.select(e,{item:{email:this.currentTerm,value:this.currentTerm}})},e.prototype._isSuggestDropDown=function(e){var t=this.nbSuggest.$suggest;return t[0]===e.target||$.contains(t[0],e.target)},e.prototype._ieDocumentMousedown=function(e){var t=this._isSuggestDropDown(e);this.dontClose=t,this.isInputFieldBlur&&!t&&this.hide()},e.prototype._ieInputBlur=function(){this.isInputFieldBlur=!0},e.prototype.getValueWithPrevious=function(){var e="";if(this.nbSuggest&&(e=this.nbSuggest.getValue(),this.options.multiple)){var t=[].concat(this.options.previousValues);t.push(e),e=t.join(this.options.multipleSeparator+" ")}return e},e.prototype._convertHandlers=function(e){var t=this.options.extraParams;return $.map(this.options.handlers,(function(n,i){return{name:i,params:$.extend({},t,n,e)}}))},e.prototype._parseHandlersData=function(e,t){var n=this,i=[],r=e.length;return $.each(t,(function(t,o){if(t>=r)return!1;var s;s=r>1?o[0].models:o.models,s||(s=[{}]),s[0].data||(s[0].data={});var a=n.parse(e[t].name,s[0].data);i=i.concat(a)})),i},e.prototype._getTerm=function(t){return this.options.multiple&&(t=e.extractLast(t,this.options.multipleSeparatorRegExp)),t},e.prototype._source=function(e,t){var n=this,i=this._getTerm(e.term);if(n.currentTerm=i,!(i.length<this.options.minLength)){var r={q:i},o=this._convertHandlers(r);if(this.abort(),!o.length)return void t([]);this.requests=[];var s=[];$.map(o,(function(e){var t={};$.each(e.params,(function(e,n){t[e+".0"]=n})),e.params=t,s.push(e.params)}));var a=JSON.stringify(s);s=[];var c=this.getCache(a);if(c&&c.length>0)return void t(c);$.map(o,(function(e){var t=$.url(Daria.api.models),i={"_model.0":e.name};ns.request.addRequestParams(i),t.addParams(i);var r=$.ajax({type:"get",dataType:"json",jsonp:"jsonp",scriptCharset:"utf-8",cache:!1,url:t.toString(),data:e.params});n.requests.push(r)})),$.when.apply($,this.requests).then((function(){var e=n._parseHandlersData(o,arguments);n.setCache(a,e),t(e)}))}},e.prototype._select=function(e,t){this.trigger("select",e,t);for(var n,i=e;i&&"click"!==i.type;)i=i.originalEvent;if(i&&(n=$(i.target).hasClass("nb-button")?$(i.target):$(i.target).parents(".nb-button"),n.length>0&&(t.button=n,this.trigger("button-click",i,t))),this.dontClose=!1,!e.isDefaultPrevented()){var r=this.nbSuggest.getValue(),o=t.item.value;this.options.multiple&&(o=r.split(this.options.multipleSeparatorRegExp),o.pop(),o.push(t.item.value),o.push(""),o=o.join(this.options.multipleSeparator+" ")),this.nbSuggest.setValue(o),e.preventDefault(),this.trigger("value-set",e,t,o)}},e.prototype._focus=function(e){e.preventDefault()},e.prototype._response=function(e,t){t.content.length?this.currentContent=t.content:this.currentContent=[];var n=this.getValueWithPrevious();if(this.options.multiple&&n.split(this.options.multipleSeparator).length>1){var i=$.grep(t.content,(function(e){return-1===n.indexOf(e.value)}));t.content.length=0,t.content.push.apply(t.content,i)}},e.prototype._search=_.noop,e.prototype._open=_.noop,e.prototype._close=function(){this.dontClose=!1,this.isInputFieldBlur=!1,this.currentContent=[],this.currentTerm=""},e.prototype.abort=function(){return $.isArray(this.requests)&&$.map(this.requests,(function(e){$.isFunction(e.abort)&&e.abort()})),delete this.requests,this},e.prototype.destroy=function(){var e=this;return this.abort(),this._close(),this.nbSuggest&&(this.nbSuggest.destroy(),this.nbSuggest=null),this.$inputField&&this.$inputField.off(".daria-suggest"),this.$document.off(".daria-suggest"),$.each(this._janeEvents,(function(t){e.unbindJaneEvent(t)})),this.off(),this},e.prototype.parse=function(e,t){return t},e.prototype.setCache=function(e,t){return Object.keys(this.cache).length>=this.options.cacheSize&&this.clearCache(),this.cache[e]=t,this},e.prototype.getCache=function(e){return this.cache[e]},e.prototype.clearCache=function(){return this.cache={},this},Daria.Suggest=e})()},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(544);!(function(){var e=Daria.Constants.CONTACTS.DELIMITER,t=function(e,t){t&&_.isFunction(t.exclude)&&(this._getContactsToExclude=t.exclude,delete t.exclude),t=$.extend({countMax:11,timeoutOfCopyToSms:!1,noSmsButton:!Daria.Config.MAY_HAVE_SMS_COPY,renderItem:this._renderItem.bind(this),showDoubleSizedContacts:Daria.showDoubleSizedContacts()},t),this.countOfClick=0,this.showAbookPopupButton=t.showAbookPopupButton,this.prevTerm="",this.hasBeenShown=!1,this.preventLog=!1,Daria.Suggest.call(this,e,t)};Daria.extend(t,Daria.Suggest);var n=t.superClass;t.prototype.init=function(){return this.$inputField.closest(".js-compose-mail-input").hasClass("js-compose-mail-message-input")&&(this.options.noSmsButton=!0),n.init.apply(this,arguments)},t.prototype.bindEvents=function(){return this.$inputField.on("keydown.daria-suggest keypress.daria-suggest",this._keydownEvent.bind(this)).on("click.daria-suggest",this._clickEvent.bind(this)),n.bindEvents.apply(this,arguments)},t.prototype._keydownEvent=function(e){var t=Jane.Common.keyCode;if(e.which!==t.ENTER){var n=!1;if(","===$.trim(this.options.multipleSeparator))switch(e.which){case t.COMMA_CHAR:case t.SEMI_CHAR:n=!0;break;case t.SPACE_CHAR:n=this.currentContent.length<=1}n&&this.currentFocused&&(e.preventDefault(),this.focusedSelect(),this.currentFocused=null)}},t.prototype._clickEvent=function(){this.show(),this.countOfClick++},t.prototype._renderItem=function(e){this.hasBeenShown=!0;var t=this,n=e.item,i=$.extend({noSmsButton:!1},this.options);if("label"!==n.type){var r=!0;$.each(["name","email","phone"],(function(e,i){var o="highlighted-"+i;r?(n[o]=t._highlight(n[i],t.currentTerm),-1!==n[o].indexOf("js-suggest-highlight")&&(r=!1)):n[o]=_.escape(n[i]),n[i]=_.escape(n[i])}))}if(n.email){var o=ns.Model.get("account-information").getAllUserEmails();$.inArray(n.email,o)>-1&&(i.noSmsButton=!0)}return Daria.showDoubleSizedContacts()&&(i.doubleHeight=!0),n.options=i,yr.run("mail",e,"compose-email-suggest-item")},t.prototype._isTemplate=function(){var e=ns.page.current.params,t="template"===jpath(Daria,".composeParams.save_symbol")[0],n="template"===e.save_symbol,i=!1;if(e.ids){var r=ns.Model.get("message",{ids:e.ids}),o=ns.Model.get("folders").getFidBySymbol("template");i=r.inFolder(o)}return t||n||i},t.prototype._isInnerEvent=function(e){return!e.originalEvent},t.prototype._isKeydown=function(e){return Boolean(e.originalEvent&&"keydown"===e.originalEvent.type)},t.prototype._isDownOrUpKey=function(e){var t=Jane.Common.keyCode;return this._isKeydown(e)&&(e.originalEvent.which===t.DOWN||e.originalEvent.which===t.UP)},t.prototype._search=function(e){return this.searchEvent=e,n._search.apply(this,arguments)},t.prototype._source=function(e){this.preventLog?this.preventLog=!1:this.prevTerm=this.currentTerm;var t,i=this.searchEvent,r=this._getTerm(e.term);this._getContactsToExclude&&(t=this._getContactsToExclude());var o={"abook-suggest":_.extend({},t,{climit:35,glimit:5,useAbook:"on"})};return r||this._isTemplate()||(this._isInnerEvent(i)||this._isDownOrUpKey(i)?(o["abook-suggest"].popular=!0,this.showAbookPopupButton&&!this._getTerm(e.term)?Daria.showDoubleSizedContacts()?o["abook-suggest"].climit=4:o["abook-suggest"].climit=5:o["abook-suggest"].climit=10):o={}),this.options.handlers=o,n._source.apply(this,arguments)},t.prototype._select=function(e,t){var i=t.item,r="abook-popup-button"===i.type;if(this.log({pos:_.findIndex(this.currentContent,t.item),count:this.currentContent.length,search_text:r?"all-contacts":t.item.email,suggest_used:"yes",suggest_show:"yes"}),r)return n._select.apply(this,arguments);var o=this.options.handlers["abook-suggest"];o&&o.popular&&(Daria.composeParams=Daria.composeParams||{},Daria.composeParams["popular-suggest-general"]||(Daria.composeParams["popular-suggest-general"]=[]),Daria.composeParams["popular-suggest-general"].push(i.email),Jane.c(["popular_suggest","Клики в саджест популярных контактов"]));var s={q:this.currentTerm,section:"group"===i.type?"group":"email",id:i.id||i.mcid,title:i.title||i.email};return ns.forcedRequest("abook-suggest-report",s),n._select.apply(this,arguments)},t.prototype._focus=function(e,t){return this.currentFocused=t.item,n._focus.apply(this,arguments)},t.prototype._response=function(e,t){n._response.apply(this,arguments),1===t.content.length&&"label"===t.content[0].type&&(t.content.length=0)},t.prototype._open=function(){jpath(this,".options.handlers.abook-suggest.popular")[0]&&Jane.c(["popular_suggest","Показы саджеста популярных контактов"]),n._open.apply(this,arguments),this._updateGroupView()},t.prototype._close=function(){this.countOfClick=0,n._close.apply(this,arguments)},t.prototype._updateGroupView=function(){$(this.nbSuggest.$suggest).find(".js-group-data").each((function(){if(this.clientWidth<this.scrollWidth){var e=$(".js-group-more",this.parentNode)[0];e&&$(e).show().css("min-width",e.scrollWidth)}}))},t.prototype._highlight=function(e,t){if(!e)return"";var n="/%strong-"+String($.now())+String(Math.round(1e3*Math.random())),i=Daria.regexpEscape(n);i=new RegExp(i+"(.*)"+i,"i"),t=Daria.regexpEscape(t);var r=new RegExp("("+t+")","i");return e=e.replace(r,n+"$1"+n),e=_.escape(e),e.replace(i,'<strong class="js-suggest-highlight">$1</strong>')},t.prototype.parse=function(e,t){switch(e){case"abook-suggest":return this.parseAbookSuggest(t)}return[]},t.prototype.parseAbookSuggest=function(t){var n=this;if("object"!==i(t)||!t)return[];$.isArray(t.contacts)||(t.contacts=[]),$.isArray(t.groups)||(t.groups=[]);var r=!0,o=$.map(t.contacts,(function(e){var t="contact";e.popdom?t="popdom":r=!1,!e.ya_directory||"group"!==e.ya_directory.type&&"department"!==e.ya_directory.type||(t="wsContainer");var o="";return Array.isArray(e.phones)?"object"===i(e.phones[0])?e.phones[0].value&&(o=e.phones[0].value):e.phones[0]&&(o=e.phones[0]):"string"==typeof e.phones&&(o=e.phones),e=$.extend({},e,{type:t,phone:o}),e.value=n.parseValue(e),e})),s=$.map(t.groups,(function(t){return r=!1,t=$.extend({},t,{type:"group",name:t.title?t.title:""}),t.email=$.map(t.contacts,(function(e){return e.email})).join(e),t.value=n.parseValue(t),t})),a=[].concat(o,s);return this.showAbookPopupButton&&!this.currentTerm&&a.length&&a.push({type:"abook-popup-button"}),r&&a.length&&(a=[].concat({type:"label",name:i18n("%Suggest_notify")+":"},a)),a},t.prototype.parseValue=function(t){var n,i=this;if("group"===t.type){n=$.map(t.contacts,(function(e){return i.formatContact(e)})).join(e)}else n=this.formatContact(t);return n},t.prototype.formatContact=function(e){return Jane.FormValidation.obj2contact(e)},t.prototype.log=function(e){this.preventLog||(e=Object.assign({project:"search_mail",action:"suggest-compose",product:r.b,uid:Daria.uid,filed:this.options.fieldType,suggest_used:"",suggest_show:this.hasBeenShown?"yes":"no",pos:"",count:"",user_text:this.currentTerm||this.prevTerm,search_text:""},e),"number"==typeof e.pos&&(e.pos=-1===e.pos?"":e.pos+1),e.user_text=e.user_text?encodeURIComponent(e.user_text):"",e.search_text=e.search_text?encodeURIComponent(e.search_text):"",Daria.searchClickCounter(_.pairs(e).map((function(e){return e.join("=")}))),this.hasBeenShown=!1,this.prevTerm="",this.preventLog=!0)},Daria.Suggest.Contacts=t})()},function(e,t){!(function(){var e=function(e,t){t=$.extend({noSmsButton:!0},t),Daria.Suggest.Contacts.call(this,e,t)};Daria.extend(e,Daria.Suggest.Contacts),e.prototype._source=function(){return this.options.handlers={"abook-suggest":{climit:35,glimit:5,phone:"must",useAbook:"on"}},Daria.Suggest.prototype._source.apply(this,arguments)},e.prototype.parse=function(e,t){return t&&$.isArray(t.groups)&&(t.groups=[]),Daria.Suggest.Contacts.prototype.parse.apply(this,arguments)},e.prototype.formatContact=function(e){return e.phone},Daria.Suggest.Phones=e})()},function(e,t){Daria.Folder=function(e){e=e||{};var t="boolean"!=typeof e.hotkey||e.hotkey;return{validate:function(){if(!this.folderName)return ns.events.trigger("folder.error",i18n("%Setup_Filters_Create_Error_Empty")),!1;var t,n=this.parent_folder&&this.parent_folder.data("fid")||e.parent_id,i=ns.Model.get("folders");t=n&&n!==i.getFidBySymbol("inbox")?i.getFolderByName(this.folderName,n):i.getFolderByName(this.folderName);var r=i.getFolderById(e.id);if(t&&t.fid!==n&&(!r||r.name!==this.folderName)){var o=t.symbol?i18n("%Folders_System_Msg",this.folderName):i18n("%Folders_Exists_Msg");return ns.events.trigger("folder.error",o),!1}return!0},setName:function(e){this.folderName=e},bindEvents:function(){var e=this,n=this.context.find(".b-teaser"),i=this.context.find(".b-form-layout_filters-simple");this.filter&&(this.filter.form=i.find("form"));var r={cls:"b-popup__field_error",active:!1,show:function(t){this.notification=e.context.find(".b-notification__text"),this.row=this.notification.closest(".b-table"),t&&(this.notification.text(t),this.row.addClass(this.cls),this.active=!0)},hide:function(){this.row.removeClass(this.cls),this.active=!1,ns.events.trigger("folder.error.hide")}};ns.events.on("folder.error",(function(t,n){r.show(n),e.input.focus()})),this.context.on("click",".js-filter-open",(function(){Jane.c(["Поп-ап создания папки","клик на открыть фильтры"]),n.fadeOut(150,(function(){i.fadeIn(200,(function(){var e=i.find("input:visible").eq(0).focus(),t=Daria.Autocompleter.getContact();t.setOptions({multiple:!1,formatResult:Daria.formatAutocompleteResult}),t.bindField({field:e,focus:1}),ns.events.trigger("folder.filter.toggle",!0)}))}))})),this.context.on("click",".js-filter-close",(function(){Jane.c(["Поп-ап создания папки","клик на свернуть фильтры"]),i.fadeOut(150,(function(){n.fadeIn(200,(function(){e.input.focus(),ns.events.trigger("folder.filter.toggle",!0)}))}))})),this.context.on("click",".js-filter-link",(function(){return e.filter=!1,e.success=function(e){ns.page.go("#setup/filters-create/folder="+e)},e.onCreate(),!1})),this.context.on("keyup",".js-input-name",(function(n){var i=$.trim(this.value);i!=e.folderName&&r.active&&r.hide(),e.setName(i),13===n.which&&t&&e.onCreate()})),this.context.on("click",".js-dropdown-folder-labels",(function(){var e=$(window).height()-$(this).rect().top-40;$(".js-folders-list").css("max-height",e).scrollTop(0)}))},filter:Daria.FilterSimpleCreatePopup(),onCreate:function(){var e=this;if(this.setName($.trim(this.input[0].value)),this.validate()){Daria.Dialog.close();var t=null;this.parent_folder&&this.parent_folder[0]&&(t=this.parent_folder[0].getAttribute("data-fid")||null),this.create((function(t){e.filter&&(e.filter.params.move_folder=t,e.filter.create())}),null,t)}},init:function(){this.input=$("input[name=folder_name]",this.context),this.parent_folder=$(".js-selink__folder",this.context),e.name&&this.input.val(e.name),this.bindEvents(),this.open()}}},Daria.Folder.REMOVABLE_SYMBOLS={archive:!0},Daria.Folder.remove=function(e){var t,n=ns.Model.get("folders"),i=n.getFolderById(e),r=_.escape(i.name),o=Number(i.count);n.getSubfolders(e).length&&(t=(function e(t){for(var i=n.getSubfolders(t),r=0,o=0;o<i.length;o++){var s=i[o];r+=Number(s.count),n.getSubfolders([s.fid]).length&&(r+=e(s.fid))}return r})(e));var s=ns.Model.get("filters").getForFolder(e),a=[],c=[];$.each(s,(function(e,t){jpath(t,'.condition[.div == "X-yandex-rpop-id"]').length?a.push(t):c.push(t)}));var l,u=c.length,d=a.length,f=ns.page.current.params.current_folder,g=f===e||ns.Model.get("folders").hasChildByFid(e,f),p=function(t){var r=[{id:"do-folder-remove",params:{fid:e,force:t?"yes":""}},{id:"folders"}];Daria.Folder.REMOVABLE_SYMBOLS[i.symbol]&&r.unshift({id:"do-folder-set-symbol",params:{fid:e,symbol:""}}),ns.forcedRequest(r).then((function(){ns.events.trigger("daria:folder-remove-done",e),g&&ns.page.go(ns.router.generateUrl("messages",{current_folder:n.getFidBySymbol("inbox")}))}),(function(){ns.events.trigger("daria:folder-remove-fail",e)}))},h=function(){for(var e=[],t=0;t<u;t++){var n=c[t];e.push('— «<a href="#setup/filters-create/id='+n.filid+'">'+_.escape(n.name)+"</a>»<br/>")}return e.join("")},m=[],v=i18n("%Folders_Remove_Button");o&&u?(m.push(i18n("%Folders_Remove_Messages_Filters_Body_1",o,u,r)),m.push(h()),m.push(i18n("%Folders_Remove_Messages_Filters_Body_2",o,u)),v=i18n("%Folders_Remove_Messages_Filters_Button",o,u)):o&&t?(m.push(i18n("%Folders_Remove_Messages_Submessages_Body",o+t,r)),l=o+t>1?2:1,v=i18n("%Folders_Remove_Messages_Button",l)):o?(m.push(i18n("%Folders_Remove_Messages_Body",o,r)),l=o>1?2:1,v=i18n("%Folders_Remove_Messages_Button",l)):t?(m.push(i18n("%Folders_Remove_SubMessages_Body",t,r)),l=t>1?2:1,v=i18n("%Folders_Remove_Messages_Button",l)):u&&(m.push(i18n("%Folders_Remove_Filters_Body_1",u)),m.push(h()),m.push(i18n("%Folders_Remove_Filters_Body_2",u)),v=i18n("%Folders_Remove_Filters_Button",u)),d&&m.push(i18n("%Folders_Remove_Collectors_Body",d,o||u)),o||u||d||t?Daria.Dialog.confirm({title:i18n("%Folders_Remove_Title"),width:450,body:m.join(""),okValue:v,okHandler:function(){if(p(!0),u||d){ns.Model.get("filters").getForFolder(e).forEach((function(e){Daria.Filter.removeById(e.filid)}))}}}):p()},Daria.Folder.markRead=function(e){ns.Model.get("folders").getUnreadCount(e)&&(["message-nearest","message-thread-nearest"].forEach((function(e){ns.Model.invalidate(e)})),ns.forcedRequest([{id:"do-folder-mark-read",params:{fid:e}}]).fail((function(t){return Daria.MOPS.registerOperationFail("mark",{fid:e},t,"do-folder-mark-read")})),Daria.MOPS.markByFid("mark",e))},Daria.Folder.createFilter=function(e){var t=$(Jane.tt("setup:js-setup-folders-dialog-folder-filter",{fid:e,single:null}));t.on("click",".js-filter-link",(function(){Jane.c(["Новый поп-ап фильтров","папка","клик на подробные условия"])}));var n=Daria.FilterSimpleCreatePopupSingle({form:t.find("form")});Daria.Dialog.open({title:i18n("%Setup_Filters_Simple_title_folder"),body:t,buttons:[{name:"submit",value:i18n("%Setup_filters-create_title"),onclick:function(){return Jane.c(["Новый поп-ап фильтров","папка","клик по создать"]),n.create()}},{name:"cancel"}],oncancel:function(){Jane.c(["Новый поп-ап фильтров","папка","клик по отменить"])},width:432,onopen:function(){Jane.c(["Новый поп-ап фильтров","папка","показ поп-апа для создания фильтра на папку"]),t.find("input[name=field3]:eq(0)").focus(),n.bindAutocompleter()}})}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}Object.defineProperty(t,"__esModule",{value:!0});var s=n(123),a=(n.n(s),n(542)),c=function(){return Object(s.uniqueId)("recipient-")},l={messageByMid:function(e){return delete e.tid,l.messageById(e)},messageByTid:function(e){return delete e.mid,l.messageById(e)},messageById:function(e){var t=e.tid||e.mid;if(t){var n=ns.Model.get("message",{ids:t});if(n.isValid()){var i={dlid:n.get(".dlid"),dtype:n.get(".dtype"),socialLid:n.getSocialLID()};return e.mid&&(i.fid=n.get(".fid")),i}}},messageBySearchId:function(e){if(e.mid){var t=ns.Model.get("filter-search",{mids:e.mid});return t.isValid()?{fid:t.select(".envelopes.fid")[0],dlid:t.select(".envelopes.dlid")[0],dtype:t.select(".envelopes.dtype")[0],socialLid:t.getSocialLID()}:void 0}}},u=(function(){function e(){var t=this;i(this,e),this._request=Object(s.debounce)((function(){t._makeRequest()}),100),this._extractData=function(e){var n=e[0],i=n.getData();for(var r in i){var o=t._cache[r]||{},a=Object(s.extend)({},o,t._normalizeRecipientData(i[r],o.isGroup,o.isWsContainer));t._cache[r]=a,t._validityCache[t._extractEmail(a.email)]=a.valid}t._updateAvatarsViews(),t._queue=[],n.destroy()},this._cache={},this._validityCache={},this._queue=[],this._recipients={},this._shouldUpdate=[],this._retryCount=0}return o(e,[{key:"_makeRequest",value:function(){var e=this;if(!this._queue.length)return vow.resolve();if(this._retryCount<=0)return vow.reject("no-more-retries");var t=this._queue.slice(0,256);return ns.forcedRequest("recipients",{recipientsIds:t}).then(this._extractData).fail((function(){return e._retryCount--,e._makeRequest()}))}},{key:"_resetRetryCount",value:function(){this._retryCount=3}},{key:"_getCacheId",value:function(e,t){return e||t?t?'"'.concat(t,'" <').concat(e,">"):"<".concat(e,">"):""}},{key:"addHeadAvatar",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=e.email,i=e.name,r=e.showUserAvatar,o=void 0===r||r,s=this._cache[this._getCacheId(n,i)],a=this._cache[this._getCacheId(n,n)];return!s&&a&&o&&a.url&&(e.name=n),this.add(e,t)}},{key:"add",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=e.name,i=void 0===n?"":n,r=e.email,o=void 0===r?"":r,a=e.size,l=e.id,u=e.className,d=e.target,f=e.title,g=e.isGroup,p=void 0!==g&&g,h=e.isWsContainer,m=void 0!==h&&h,v=e.showUserAvatar,_=void 0===v||v,b=e.href,y=e.mid,S=e.tid,w=e.participantType,k=e.single,x=e.fallbackAvatar;l=l||c(),a=-1!==Daria.Constants.AVATARS.VALID_SIZES.indexOf(parseInt(a,10))?a:Daria.Constants.AVATARS.DEFAULT_SIZE,Array.isArray(o)&&(o=o[0]),Array.isArray(i)&&(i=i[0]),i=i.replace(/"/g,""),p&&(o="".concat(o,"@yamail-group"));var M=this._getCacheId(o,i);if(this._recipients[l])t&&(this._shouldUpdate.push(l),M&&-1===this._queue.indexOf(M)&&this._queue.push(M),this._cache[M]&&delete this._cache[M]);else{var C=this._getMessageInfo({mid:y,tid:S,participantType:w,single:k});if(this._shouldUpdate.push(l),this._recipients[l]=Object(s.extend)({email:o,name:i,size:a,id:l,className:u,cacheId:M,target:d,title:f,showUserAvatar:_,href:b},this._createHref({href:b,message:C,title:f,participantType:w,email:o})),M&&-1===this._queue.indexOf(M)&&!this._cache[M]&&this._queue.push(M),!this._cache[M]||!this._cache[M].normalized){var T=this._normalizeRecipientData(this._cache[M],p,m,x);this._cache[M]=T,this._validityCache[o]=T.valid}}return this._resetRetryCount(),this._request(),this._getAvatarView(l)}},{key:"requestContacts",value:function(e){var t=this;return e.forEach((function(e){var n=t._getCacheId(e.email,e.name);-1!==t._queue.indexOf(n)||t._cache[n]||t._queue.push(n)})),this._resetRetryCount(),this._makeRequest()}},{key:"_normalizeRecipientData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,r=e.type,o=e.url,c=e.urlSmall,l=e.mono,u=void 0===l?"":l,d=Object(s.extend)({},e,{fallbackAvatar:i||this._getSocialavatarsUrl(t||n?"group":"person"),shortMono:1===u.length,isGroup:t,isWsContainer:n,normalized:!0});return d.url="icon"===r?this._getSocialavatarsUrl(o):a.a.isIE()||a.a.isEdge()?c:o,d}},{key:"_getSocialavatarsUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"".concat(Daria.Config.socialavatarsUrl,"/v4/").concat(e,".").concat(a.a.isIE()?"png":"svg").replace(Daria.Constants.HTTP_REG_EX,"")}},{key:"getRecipient",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this._recipients[e]||{};return"url"in t&&!t.url&&delete t.url,Object(s.extend)({},this._cache[t.cacheId]||{},t)}},{key:"isEmailValid",value:function(e){return this._validityCache[e]}},{key:"getRecipientFromCache",value:function(e,t){return this._cache[this._getCacheId(t,e)]}},{key:"_getAvatarView",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return ns.renderString(Object(s.extend)({},this.getRecipient(e),{isIE:a.a.isIE()}),"js-avatars","mail")}},{key:"_updateAvatarsViews",value:function(){var e=this,t=this._shouldUpdate.map((function(e){return"#".concat(e)})).join(",");$(t).each((function(t,n){var i=$(n).closest(".js-bubble").get(0);if(i)Daria.BaseBubble.updateBubbleAtNode(i);else{var r=ns.html2node(e._getAvatarView(n.id));r&&n.parentElement.replaceChild(r.firstChild,n)}})),this._shouldUpdate=[],ns.events.trigger("daria:recipients:update")}},{key:"update",value:function(){var e=this;[].concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(t){return e.add(e.getRecipient(t),!0)}))}},{key:"cacheRecipient",value:function(e){var t=e.cacheId;delete e.cacheId,Daria.debug.enabled&&ns.assert(t,"Daria.Recipients.cacheRecipient","cacheId not specified for recipient"),this._cache[t]||(this._cache[t]=e,this._validityCache[this._extractEmail(e.email)]=e.valid)}},{key:"_getMessageInfo",value:function(e){var t=e.mid,n=e.tid,i=e.single,r=e.participantType,o=["messageByMid","messageBySearchId","messageByTid"],a={};return"from"===r&&n&&!i&&(o=o.reverse()),o.some((function(e){return a=l[e]({mid:t,tid:n})})),Object(s.isEmpty)(a)?{}:{fid:a.fid,dlid:a.dlid,dtype:a.dtype,isService:Boolean(a.dlid||a.dtype),serviceName:a.dlid||a.dtype&&a.dtype.name,socialLabel:a.socialLid&&ns.Model.get("labels").getLabelById(a.socialLid)}}},{key:"_createHref",value:function(e){var t,n,i=e.message,r=e.participantType,o=e.email,a=i.socialLabel,c=void 0===a?{}:a,l=i.fid,u=i.dtype,d=e.href,f=e.title;if(!1===d||!i)return{};if(Object(s.isEmpty)(c)){if(u&&u.sender&&24!==Number(u.id))t=ns.router.generateUrl("messages",{search:"search",type:u.id});else if(r&&l){var g={search:"search",scope:"to"===r?"hdr_to":"hdr_from",request:o};ns.Model.get("folders").isFolder(l,["sent","draft"])&&(g.scope="hdr_to"),"hdr_to"===g.scope?(g.fid=l,n=i18n("%Все_письма_на_этот_адрес")):n=i18n("%Все_письма_с_этого_адреса"),t=ns.router.generateUrl("messages",g)}}else t=ns.router.generateUrl("messages",{current_label:c.lid}),n=c.title;return t&&(d=t),n&&!f&&!1!==f&&(f=n),{href:d,title:f}}},{key:"_extractEmail",value:function(e){var t=Jane.FormValidation.splitContacts(e);return t.length?t[0].email:e}}]),e})();Daria.Recipients=new u},function(e,t,n){var i=n(2221);ns.View.define("loading-bar",{events:{"ns-view-htmlinit":"onHtmlInit","ns-view-htmldestroy":"onHtmlDestroy","ns-page-before-load@show":"start","ns-page-after-load@show":"stop","ns-page-error-load@show":"stop","fake-loader@show":"refresh","beforeunload window@show":"onBeforePageUnload"},ctor:function(){this.start=_.debounce(this.start.bind(this),200)},yateModule:"mail",methods:{onHtmlInit:function(){this.progressBar=new i({node:this.node.querySelector(".js-loading-bar")}),this._refreshLock=!1},onHtmlDestroy:function(){this.progressBar.reset(),this.progressBar=null},start:function(){if(this._refreshLock)return void(this._refreshLock=!1);this.progressBar.start()},stop:function(){this.progressBar.isInProgress()&&this.progressBar.finish(),this.start.cancel()},refresh:function(){this.progressBar.start(),this._refreshLock=!0},onBeforePageUnload:function(){this.progressBar.reset()}}})},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}var s=0,a=100;e.exports=(function(){function e(t){var n=t.node,r=t.steps,o=void 0===r?4:r,c=t.stepDuration,l=void 0===c?.5:c;if(i(this,e),!n)throw new Error("Progress bar must have element");this._steps=o,this._minStepDuration=l,this._maxStepDuration=2*l,this._progress=s,this._progressLimit=a,this._progressTimeout=null,this._elem=n,this._makeStep()}return o(e,[{key:"_style",value:function(e){this._elem&&Object.assign(this._elem.style,e)}},{key:"_makeStep",value:function(){this._style({width:this._progress+"%"})}},{key:"_move",value:function(){var e=this;this._progress+=this._stepWidth,this._makeStep(),this._progressTimeout=setTimeout((function(){return e._move()}),1e3*this._stepDuration)}},{key:"start",value:function(){var e=this;return Promise.resolve().then((function(){return e.isInProgress()?e.reset():null})).then((function(){return e._move()}))}},{key:"finish",value:function(){var e=this;return clearTimeout(this._progressTimeout),this._progressLimit=a,this._progress=this._progressLimit,this._makeStep(),new Promise(function(t){setTimeout((function(){return e.reset().then(t)}),1e3*e._minStepDuration)})}},{key:"reset",value:function(){var e=this;return clearTimeout(this._progressTimeout),this._progressLimit=a,this._progress=s,this._style({opacity:0,transitionDuration:0}),this._makeStep(),new Promise(function(t){setTimeout((function(){e._style({opacity:1,transitionDuration:"".concat(e._minStepDuration,"s")}),t()}),1e3*e._minStepDuration)})}},{key:"isInProgress",value:function(){return this._progress!==s}},{key:"_stepWidth",get:function(){var e=this._progressLimit-this._progress,t=Math.floor(e/this._steps);return Math.floor(t/_.random(1,this._steps))}},{key:"_stepDuration",get:function(){return _.random(this._minStepDuration,this._maxStepDuration)}}]),e})()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},i.apply(this,arguments)}var r=n(328),o=n(339),s=n(331),a=(n.n(s),n(123)),c=n.n(a),l=n(737),u=n(746),d=n(2262),f=n(425),g=n(554),p=n(2376),h=n(2387),m=n(2389),v=n(2396),_=n(2400),b=n(2427),y=n(957),S=n(2488),w=n(2490);Object(r.useStrict)(Object(o.k)());var k=c.a.memoize,x=k((function(){return new y.a})),M=k((function(){return new f.a})),C=k((function(){return new g.a}));Daria.React=Daria.React||{},Daria.React.renderSearchBox=function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=Object(l.e)(),a=o.searchQuery,c={foldersStore:Object(l.b)(),labelsStore:Object(l.c)(),routerStore:Object(l.d)(),searchStore:o,settingsStore:Object(l.f)(),routerService:Object(u.a)(),searchService:Object(u.c)(),searchLogService:Object(u.b)(),settingsService:Object(u.d)(),shortcuts:C(),scenarioManager:u.f},f=M();f.currentShowText=a.currentSearchText,f.shouldShowCurrentSearchText=a.shouldShowCurrentSearchText;var g=function(e){Daria.React._searchRef=e};e.render(t.createElement(s.Provider,c,t.createElement(d.a,i({},r,{searchState:f,ref:g}))),n)},Daria.React.unmountReactBox=function(t){e.unmountComponentAtNode(t)},Daria.React.toggleSuggestFolded=function(e){Daria.React._searchRef&&Daria.React._searchRef.wrappedInstance&&Daria.React._searchRef.wrappedInstance.toggleFolded(e)},Daria.React.showLastSearchQuery=Object(r.action)((function(){var e=M(),t=Object(u.c)(),n=Object(l.e)();t.syncSearchQuery(),e.currentShowText=n.searchQuery.currentSuggestText})),Daria.React.activateSearch=function(){C().emit("Search:activate")},Daria.React.getSearchBoxIsFolded=function(){return!Daria.React._searchRef||!Daria.React._searchRef.wrappedInstance||Daria.React._searchRef.wrappedInstance.isFolded()},Daria.React.logSearchSuggest=function(e,t){var n=Object(u.b)();n.logSearchSuggest(e),t&&(n.suggestWasLogged=!0)},Daria.React.logSearchMessageClick=function(e,t,n,i,r){Object(u.b)().logMessageClick(e,t,n,i,r)},Daria.React.wasSearchRequestSimplified=function(){return Object(l.e)().wasSearchRequestSimplified},Daria.React.setSimplifiedParams=Object(r.action)((function(e){Object(l.e)().simplifiedParams=e})),Daria.React.startSearch=function(e,t,n){var i=Object(l.e)(),r=Object(u.c)(),o=M();n&&r.lockSearch((function(){i.searchQuery.reset()})),r.startSearch(e,t,o)},Daria.React.getSearchParams=function(){return Object(l.e)().searchQuery.paramsForSearch},Daria.React.setInitialState=function(){Object(u.c)().syncSearchQuery()},Daria.React.reactOnAdvancedChange=function(e,t){var n=Object(l.e)();return Object(r.reaction)((function(){return n.searchQuery.getAutosearchParams()}),t,e)},Daria.React.getSearchSessionId=function(){return Object(l.e)().getSearchSessionId()},Daria.React.dropSearchSession=function(){Object(l.e)().dropSearchSession()},Daria.React.getSearchId=function(){return Object(l.e)().getSearchId()},Daria.React.generateSearchId=function(){Object(l.e)().generateSearchId()},Daria.React.saveShowSearchResultsTimestamp=function(){Object(l.e)().saveShowSearchResultsTimestamp()},Daria.React.promoNPS=p.a,Daria.React.promoPopularContacts=h.a,Daria.React.popupSubscriptions=m.a,Daria.React.promoSubscriptions=v.a,Daria.React.promoCloseOldThemes=S.a,Daria.React.promoCloseOldThemesDisclaimer=w.a,Daria.React.yandexPlus=_.a,Daria.React.initStatusline=function(){var e=x();return Object(b.a)({statuslineState:e,themeStore:Object(l.g)()}),e}}.call(t,n(324),n(318))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function i(e){return Daria.memoizeClearCache(e)}t.a=i},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",(function(){return d}));var u=n(741),d=(function(e){function t(){return r(this,t),o(this,a(t).apply(this,arguments))}return c(t,e),t})(u.a)},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",(function(){return d}));var u=n(741),d=(function(e){function t(){return r(this,t),o(this,a(t).apply(this,arguments))}return c(t,e),t})(u.a)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return a}));var s=/^#(search(\?|\/|$)|(contacts))/,a=(function(){function e(){i(this,e)}return o(e,[{key:"navigateToMessage",value:function(e,t){var n=Daria.is2pane()?ns.router.generateUrl("message",{ids:e,tab:"thread"}):ns.router.generateUrl("messages",{ids:e,current_folder:t});ns.page.go(n)}},{key:"openLastPageBeforeSearch",value:function(){var e=ns.page.history.getFirstValidPrevious((function(e){return!s.test(e)})),t=e||ns.page.getDefaultUrl();ns.page.go(t,"replace")}}]),e})()},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function s(e,t,n,i,r){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n.d(t,"a",(function(){return p}));var a,c,l=n(328),u=n(390),d=n(2258),f=n(524),g=n(339),p=(a=c=(function(){function e(t,n){var r=this;i(this,e),this._searchSuggest=null,this._isSearchLocked=!1,this._setSuggestItems=function(e,t){r._stores.searchStore.setSuggestItems(e,t)},this._stores=t,this._services=n}return o(e,[{key:"startSuggest",value:function(){var e=this._stores.searchStore;this._suggest.request(e.searchQuery.paramsForSuggest)}},{key:"cleanupSuggest",value:function(){var e=this._stores.searchStore;this._suggest.abortCurrentRequest(),e.setSuggestItems([])}},{key:"removeSuggestItem",value:function(e){this._stores.searchStore.removeSuggestItem(e),f.a.forcedRequest("do-clean-suggest-history",{request:e.data.search_text})}},{key:"resetSearch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._services.routerService,n=this._stores.searchStore.searchQuery;return n.currentSuggestText.trim()&&!e.forced?(n.currentSuggestText="",!1):(n.currentSuggestText="",e.openPageBeforeSearch&&t.openLastPageBeforeSearch(),!0)}},{key:"startSearch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=this._services.searchLogService,r=this._stores.searchStore.searchQuery;try{r.currentSearchText=e,r.currentSuggestText=e,ns.Model.invalidate("history-suggest");var o=r.paramsForSearch;t.extraSearchParams&&Object.assign(o,t.extraSearchParams);var s=Object(l.action)((function(e){n.currentShowText=e,r.currentSuggestText=e}));(e||t.force)&&(Daria.MessagesSearch.search(o,{onCorrecting:s,onSuccess:t.onSuccess,onError:t.onError}),i.suggestWasLogged||(i.logSearchSuggest({text:e}),i.suggestWasLogged=!0),i.logSearch(e,o,t,n.showAdvanced))}finally{i.suggestWasLogged=!1}}},{key:"syncSearchQuery",value:function(){var e=this._stores,t=e.routerStore,n=e.searchStore,i=n.searchQuery,r=t.currentPage.params,o=r.request||"";i.currentSearchText=o,i.currentSuggestText=o,i.updateAdvancedParams(this.getInitialAdvancedSearchParams(),r),i.shouldShowCurrentSearchText=!0}},{key:"getInitialAdvancedSearchParams",value:function(){var e=this._stores,t=e.routerStore,n=e.foldersStore,i=t.currentPage.params;if("only_atta"===i.extra_cond&&"all"===i.goto)return{attaches:"yes"};if("only_new"===i.extra_cond&&"all"===i.goto)return{lid:"unread"};if(Daria.messages.params4SimpleLabel(i))return{lid:i.current_label};if(Daria.messages.params4SimplePath(i)){var r=i.current_folder;if(Daria.IS_CORP)return{fid:r};if(!n.isFidSymbol(r,"inbox"))return{fid:r}}return{}}},{key:"lockSearch",value:function(e){if(this._isSearchLocked)return void Object(u.b)({errorType:"search-service:search-already-locked",failIfPossible:!0});try{this._isSearchLocked=!0,e()}finally{this._isSearchLocked=!1}}},{key:"_suggest",get:function(){var e=this._stores,t=e.settingsStore,n=e.searchStore;return this._searchSuggest||(this._searchSuggest=new d.a(t,n,this._setSuggestItems)),this._searchSuggest}},{key:"isSearchLocked",get:function(){return this._isSearchLocked}},{key:"searchContainerHasLeftGap",get:function(){return this._stores.settingsStore.isSet("messages_avatars")&&!Object(g.n)()}},{key:"bubbles",get:function(){return this._folderBubble?[this._folderBubble]:[]}},{key:"_folderBubble",get:function(){var e=this._stores,t=e.foldersStore,n=e.searchStore.searchQuery,i=this._services.searchLogService,r=n.getAdvanced("fid");return r?{type:"folder",text:t.getFolderByFid(r).data.name,onClose:function(){n.setAdvanced("fid",""),i.countFolderBubble("Клик в крестик")}}:null}}]),e})(),s(a.prototype,"startSuggest",[l.action],Object.getOwnPropertyDescriptor(a.prototype,"startSuggest"),a.prototype),s(a.prototype,"resetSearch",[l.action],Object.getOwnPropertyDescriptor(a.prototype,"resetSearch"),a.prototype),s(a.prototype,"startSearch",[l.action],Object.getOwnPropertyDescriptor(a.prototype,"startSearch"),a.prototype),s(a.prototype,"syncSearchQuery",[l.action],Object.getOwnPropertyDescriptor(a.prototype,"syncSearchQuery"),a.prototype),s(a.prototype,"searchContainerHasLeftGap",[l.computed],Object.getOwnPropertyDescriptor(a.prototype,"searchContainerHasLeftGap"),a.prototype),s(a.prototype,"bubbles",[l.computed],Object.getOwnPropertyDescriptor(a.prototype,"bubbles"),a.prototype),s(a.prototype,"_folderBubble",[l.computed],Object.getOwnPropertyDescriptor(a.prototype,"_folderBubble"),a.prototype),a)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return f}));var s=n(123),a=n.n(s),c=n(524),l=n(2259),u=n(919),d=a.a.isEqual,f=(function(){function e(t,n,r){i(this,e),this._aborted=!1,this._lastParams=null,this._suggest=new l.a(this._requestSuggest.bind(this),300),this._settingsStore=t,this._searchStore=n,this._handleSuggest=r}return o(e,[{key:"request",value:function(e){this._aborted=!1,this._suggest.request(e)}},{key:"abortCurrentRequest",value:function(){this._aborted=!0}},{key:"_requestSuggest",value:function(e){var t=this;this._aborted||(this._lastParams=e,this._requestSuggestPart(e).then((function(n){if(n&&n.status)return t._requestSuggestPart(e,n.status,n.limit)})).catch(a.a.noop))}},{key:"_requestSuggestPart",value:function(e,t,n){if(!this._aborted){var i=new vow.Deferred,r=!this._settingsStore.isSet("dont_save_history"),o=Object.assign({},e,{highlight:1,limit:n||10,history:r?"yes":"no",reqid:this._searchStore.getSearchSessionId()});return t&&(o.status=t),c.a.forcedRequest("search-suggest",o).then((function(n){if(!d(this._lastParams,e)||this._aborted)return void i.reject();var r=(n.items||[]).map((function(e){return new u.a(e)}));t?(this._handleSuggest(r,Boolean(t)),i.resolve()):(this._handleSuggest(r),i.resolve({status:n.status,limit:10-r.length}))}),(function(e){i.reject(e)}),this),i.promise()}}}]),e})()},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return a}));var r=n(123),o=n.n(r),s=o.a.throttle,a=function e(t,n){var r=this;i(this,e),this._throttledRequest=function(e){r._request(e)},this._request=t,this.request=s(this._throttledRequest,n,{leading:!1})}},function(e,t,n){"use strict";var i=n(921);n.d(t,"a",(function(){return i.a}))},function(e,t,n){"use strict";var i=n(337);n.d(t,"a",(function(){return i.a}))},function(e,t,n){"use strict";var i=n(2263);n.d(t,"a",(function(){return i.a}))},function(e,t,n){"use strict";var i=n(2264);n.d(t,"a",(function(){return i.a}))},function(e,t,n){"use strict";(function(e,i){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function p(e,t,n,i,r){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var h,m,v,_,b,y,S,w,k,x=n(376),M=n.n(x),C=n(339),T=n(342),D=n.n(T),O=n(328),I=n(331),P=(n.n(I),n(425)),E=n(438),A=n(367),j=n(748),F=n(747),R=n(554),B=n(325),L=n(439),N=n(426),$=n(2265),H=(n.n($),n(2266).default),z=Object(C.g)("web_rocks-suggest")?n(2309).default:null,q=(h=Object(I.inject)("searchStore","searchService","searchLogService","settingsService","routerService","shortcuts","scenarioManager"))(m=Object(I.observer)((k=w=(function(t){function n(e,t){var i;return o(this,n),i=c(this,l(n).call(this,e,t)),i.state={expandTrigger:L.b,expandTime:Daria.now()},g(u(i),"_selectItem",_,u(i)),i._logSelectSuggestItem=function(e){var t=i.props,n=t.searchState,r=t.searchStore,o=t.searchLogService,s=e.data,a=r.getItemPosition(e)+1,c={text:n.currentShowText,suggestUsed:!0,target:s.target,show_text:s.show_text,search_text:s.search_text,itemPos:a};o.logSearchSuggest(c),o.suggestWasLogged=!0},i._startSearchScenario=function(e){var t=i.props,n=t.searchStore.searchQuery,r=t.scenarioManager,o=i.state,s=o.expandTime,a=o.expandTrigger;if(n.isDefaultSuggest&&!i.isFolded())return void r.finishScenarioIfActive(B.f,N.d);r.finishScenarioIfActive(B.f,N.a);var c=Daria.now()-s;r.startScenario(B.f,e,{duration:c,expandTrigger:a})},g(u(i),"_handleMessageClick",b,u(i)),g(u(i),"_handleQueryLanguageClick",y,u(i)),g(u(i),"_setAdvancedOption",S,u(i)),i._getContainerClass=i._getContainerClass.bind(u(i)),i._selectNext=i._selectNext.bind(u(i)),i._selectPrev=i._selectPrev.bind(u(i)),i._searchViaEnterPress=i._searchViaEnterPress.bind(u(i)),i._searchViaButton=i._searchViaButton.bind(u(i)),i._startSuggest=i._startSuggest.bind(u(i)),i._activateSearchViaShortcut=i._activateSearchViaShortcut.bind(u(i)),i._activateSearchViaClick=i._activateSearchViaClick.bind(u(i)),i._suggestWrapper=null,i}return d(n,t),a(n,[{key:"componentDidMount",value:function(){this.props.shortcuts.on("Search:activate",this._activateSearchViaShortcut)}},{key:"componentWillUnmount",value:function(){this.props.shortcuts.off("Search:activate",this._activateSearchViaShortcut)}},{key:"_selectNext",value:function(){this._changeSelectedItem(1)}},{key:"_selectPrev",value:function(){this._changeSelectedItem(-1)}},{key:"_changeSelectedItem",value:function(e){var t=this.props,n=t.searchState,i=t.searchStore,r=i.getSuggestItemRelative(n.getHighlightedSuggestItemIndex(),e),o=r.newItem,s=r.newIndex;this._onItemHighlighted(o,s)}},{key:"_onItemHighlighted",value:function(e,t){var n=this.props,i=n.searchState,r=n.searchStore;i.setHighlightedSuggestItemIndex(t),i.setLastSelectedSuggestItem(e),i.currentShowText=e?this._getItemShowText(e):r.searchQuery.currentSuggestText}},{key:"_getItemShowText",value:function(e){var t=e.data;switch(t.target){case"mail":return t.show_text;default:return t.search_text}}},{key:"_searchViaEnterPress",value:function(){this._startSearchScenario(L.e),this._startSearch({force:!0,metrika:"enter"})}},{key:"_searchViaButton",value:function(){var e=this.props.searchState;if(this.isFolded())return void this._activateSearchViaClick();e.resetCurrentSuggestItem(),this._startSearchScenario(L.d),this._startSearch({force:!0,metrika:"button"})}},{key:"_activateSearchViaShortcut",value:function(){this._startSuggest(M.a.HOTKEY),this._setFocusOnInput()}},{key:"_activateSearchViaClick",value:function(){this._startSuggest(M.a.CLICK),this._setFocusOnInput()}},{key:"_startSearch",value:function(e){var t=this.props,n=t.searchState,i=t.searchService,r=n.getLastSelectedSuggestItem();if(r)return void this._selectItem(r,e);n.showSuggest=!1,i.startSearch(n.currentShowText,e,n)}},{key:"_setFocusOnInput",value:function(){this._suggestWrapper&&this._suggestWrapper.wrappedInstance&&this._suggestWrapper.wrappedInstance.focusInput()}},{key:"isFolded",value:function(){return!this._suggestWrapper||!this._suggestWrapper.wrappedInstance||this._suggestWrapper.wrappedInstance.isFolded()}},{key:"toggleFolded",value:function(e){this._suggestWrapper&&this._suggestWrapper.wrappedInstance&&this._suggestWrapper.wrappedInstance.toggleFolded(e)}},{key:"_startSuggest",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M.a.CLICK;this.props.searchService.startSuggest(),this.isFolded()&&this.setState({expandTrigger:e,expandTime:Daria.now()})}},{key:"_getContainerClass",value:function(){var e=this.props.searchService;return D()({"mail-SearchContainer":!0,"has-left-gap":e.searchContainerHasLeftGap})}},{key:"render",value:function(){var t=this,n=this.props,i=n.uniqueId,r=n.logo,o=n.toneDefault,s=n.toneActive,a=n.searchState,c=n.searchStore,l=n.settingsService,u={searchQuery:c.searchQuery,searchState:a},d={uniqueId:i,logo:r,toneDefault:o,toneActive:s,isCompact:l.isCompactHeaderMode,getContainerClass:this._getContainerClass,getItemShowText:this._getItemShowText,startSuggest:this._startSuggest,searchViaButton:this._searchViaButton,searchViaEnterPress:this._searchViaEnterPress,selectNext:this._selectNext,selectPrev:this._selectPrev,selectItem:this._selectItem,ref:function(e){t._suggestWrapper=e}},f=Object(C.h)()?z:H;return e.createElement(I.Provider,u,e.createElement(f,d))}}]),n})(e.Component),w.propTypes={searchState:i.instanceOf(P.a).isRequired,searchStore:i.instanceOf(E.a).isRequired,searchService:i.instanceOf(A.b).isRequired,searchLogService:i.instanceOf(A.a).isRequired,settingsService:i.instanceOf(j.a).isRequired,routerService:i.instanceOf(F.a).isRequired,shortcuts:i.instanceOf(R.a).isRequired,scenarioManager:i.shape({startScenario:i.func.isRequired,finishScenarioIfActive:i.func.isRequired}),uniqueId:i.string.isRequired,logo:i.object,toneDefault:i.string,toneActive:i.string},v=k,p(v.prototype,"_onItemHighlighted",[O.action],Object.getOwnPropertyDescriptor(v.prototype,"_onItemHighlighted"),v.prototype),p(v.prototype,"_startSearch",[O.action],Object.getOwnPropertyDescriptor(v.prototype,"_startSearch"),v.prototype),_=p(v.prototype,"_selectItem",[O.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{force:!0,metrika:"suggest"},i=e.props,r=i.searchState,o=i.searchService,s=t.data,a=!1,c=!1;switch(e._logSelectSuggestItem(t),e._startSearchScenario(L.f),r.showSuggest=!1,s.target){case"mail":a=e._handleMessageClick(s),c=a;break;case"ql":e._handleQueryLanguageClick(s),a=!0,c=void 0;break;case"folder":a=e._setAdvancedOption("fid",s.fid);break;case"label":case"unread":case"important":a=e._setAdvancedOption("lid",s.lid)}return a||(r.currentShowText=s.search_text,o.startSearch(s.search_text,n,r)),c}}}),b=p(v.prototype,"_handleMessageClick",[O.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n=e.props.routerService;return!!t.mid&&(n.navigateToMessage(t.mid,t.fid),!0)}}}),y=p(v.prototype,"_handleQueryLanguageClick",[O.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n=e.props,i=n.searchState,r=n.searchStore.searchQuery;r.currentSearchText=t.search_text,r.currentSuggestText=t.search_text,i.currentShowText=t.search_text,e._setFocusOnInput()}}}),S=p(v.prototype,"_setAdvancedOption",[O.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,n){var i=e.props,r=i.searchState,o=i.searchStore.searchQuery;return!!n&&(o.setAdvanced(t,n),o.currentSearchText="",o.currentSuggestText="",r.currentShowText="",!0)}}}),m=v))||m)||m;t.a=q}).call(t,n(318),n(317))},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,i){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n,i){y||(y="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:y,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function p(e,t,n,i,r){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var h,m,v,_,b,y,S=n(328),w=n(331),k=(n.n(w),n(376)),x=n.n(k),M=n(425),C=n(554),T=n(743),D=n(438),O=n(367),I=n(922),P=n(923),E=n(924),A=n(2267),j=n(2268),F=n(925),R=n(2269),B=n(2270),L=n(352),N=n(497),$=n(343),H=n(2271),z=n(2279),q=n(928),V=g($.a,{id:"mail--Header-Search"}),U=g($.a,{id:"mail--Header-Search"}),W=g(N.a,{}),J=(h=Object(w.inject)("searchState","shortcuts","routerStore","searchStore","searchService","searchLogService","scenarioManager"))(m=Object(w.observer)((b=_=(function(t){function n(e,t){var i;return o(this,n),i=c(this,l(n).call(this,e,t)),i._searchContainer=null,i._activateSearchViaClick=i._activateSearchViaClick.bind(u(i)),i._unfoldAndShowSuggest=i._unfoldAndShowSuggest.bind(u(i)),i.isFolded=i.isFolded.bind(u(i)),i._foldSuggest=i._foldSuggest.bind(u(i)),i._unfoldSuggest=i._unfoldSuggest.bind(u(i)),i.state={wasMounted:!1},i}return d(n,t),a(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.searchState,n=e.searchStore,i=e.routerStore,r=e.searchService,o=e.searchLogService,s=e.scenarioManager,a=e.shortcuts,c=e.searchViaEnterPress,l=e.selectNext,u=e.selectPrev;this._navigationSearchReaction=new E.a(i,n,r,t,this.isFolded,this._foldSuggest,this._unfoldSuggest),this._searchSuggestReaction=new I.a(n,r,function(){return t.showSuggest}),this._searchReaction=new P.a(n,r,t,s,this.isFolded),this._cleanupSuggestReaction=new A.a(r,t),this._forgetCurrentSuggestItemReaction=new j.a(n,t),this._advancedShowReaction=new F.a(o,t),this._defaultSuggestShowReaction=new R.a(n,o,t),this._searchFoldedReaction=new B.a(t),a.on("SearchInput:enter",c),a.on("SearchInput:down",l),a.on("SearchInput:up",u),this.setState({wasMounted:!0})}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.shortcuts,n=e.searchViaEnterPress,i=e.selectNext,r=e.selectPrev;this._navigationSearchReaction.cancel(),this._searchSuggestReaction.cancel(),this._searchReaction.cancel(),this._cleanupSuggestReaction.cancel(),this._forgetCurrentSuggestItemReaction.cancel(),this._advancedShowReaction.cancel(),this._defaultSuggestShowReaction.cancel(),this._searchFoldedReaction.cancel(),t.off("SearchInput:enter",n),t.off("SearchInput:down",i),t.off("SearchInput:up",r)}},{key:"focusInput",value:function(){this._searchInput&&this._searchInput.wrappedInstance.setFocus()}},{key:"toggleFolded",value:function(e){e?this._foldSuggest():this._unfoldSuggest()}},{key:"_foldSuggest",value:function(){this.props.searchState.isFolded=!0}},{key:"_unfoldSuggest",value:function(){this.props.searchState.isFolded=!1}},{key:"isFolded",value:function(){return this.props.searchState.isFolded}},{key:"_maybeRenderSuggest",value:function(){var e=this.props,t=e.searchState,n=e.selectItem;return t.isFolded||t.isAnimated||!t.showSuggest||!this._searchInput?null:g(z.a,{anchorElement:this._searchContainer,onItemClick:n})}},{key:"_maybeRenderAdvancedParamsPopup",value:function(){var e=this.props.searchState;return e.isFolded||e.isAnimated||!this._searchInput||!e.showAdvanced?null:g(q.a,{anchorElement:this._searchInput})}},{key:"_maybeRenderCompactModeSearchButton",value:function(){var e=this.props,t=e.isCompact,n=e.searchState;return t&&n.isFolded?g("a",{className:"mail-GhostButton mail-GhostButton_search",onClick:this._activateSearchViaClick},void 0,V):null}},{key:"_activateSearchViaClick",value:function(){this._unfoldAndShowSuggest(x.a.CLICK),this.focusInput()}},{key:"_unfoldAndShowSuggest",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x.a.CLICK,t=this.props,n=t.startSuggest,i=t.searchState;n(e),i.isFolded=!1,i.showSuggest=!0}},{key:"_renderSearchInput",value:function(){var t=this;return e.createElement(H.a,{uniqueId:this.props.uniqueId,ref:function(e){return t._searchInput=e},unfoldAndShowSuggest:this._unfoldAndShowSuggest})}},{key:"_maybeRenderSearchContainerButton",value:function(){var e=this.props,t=e.isCompact,n=e.searchState;if(t&&n.isFolded)return null;var i=this.props.searchViaButton;return g(L.a,{theme:"normal",size:"m",pin:"round-brick",cls:"mail-SearchContainer-Button",onClick:i},void 0,U)}},{key:"render",value:function(){var t=this,n=this.props.getContainerClass,i={className:n()};return i.ref=function(e){return t._searchContainer=e},e.createElement("div",i,this._maybeRenderCompactModeSearchButton(),this._maybeRenderSearchContainerButton(),this._renderSearchInput(),this._maybeRenderSuggest(),this._maybeRenderAdvancedParamsPopup(),W)}}]),n})(e.Component),_.propTypes={searchState:i.instanceOf(M.a).isRequired,routerStore:i.instanceOf(T.a).isRequired,searchStore:i.instanceOf(D.a).isRequired,searchService:i.instanceOf(O.b).isRequired,searchLogService:i.instanceOf(O.a).isRequired,shortcuts:i.instanceOf(C.a).isRequired,scenarioManager:i.shape({startScenario:i.func.isRequired,finishScenarioIfActive:i.func.isRequired}),uniqueId:i.string.isRequired,isCompact:i.bool.isRequired,getContainerClass:i.func.isRequired,startSuggest:i.func.isRequired,searchViaButton:i.func.isRequired,searchViaEnterPress:i.func.isRequired,selectNext:i.func.isRequired,selectPrev:i.func.isRequired,selectItem:i.func.isRequired},v=b,p(v.prototype,"_foldSuggest",[S.action],Object.getOwnPropertyDescriptor(v.prototype,"_foldSuggest"),v.prototype),p(v.prototype,"_unfoldSuggest",[S.action],Object.getOwnPropertyDescriptor(v.prototype,"_unfoldSuggest"),v.prototype),p(v.prototype,"_unfoldAndShowSuggest",[S.action],Object.getOwnPropertyDescriptor(v.prototype,"_unfoldAndShowSuggest"),v.prototype),m=v))||m)||m;t.default=J}.call(t,n(318),n(317))},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",(function(){return d}));var u=n(391),d=(function(e){function t(e,n){return r(this,t),o(this,a(t).call(this,(function(){return n.showSuggest}),(function(t){t||e.cleanupSuggest()})))}return c(t,e),t})(u.a)},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",(function(){return d}));var u=n(391),d=(function(e){function t(e,n){return r(this,t),o(this,a(t).call(this,(function(){return e.suggestItems}),(function(){return n.resetCurrentSuggestItem()})))}return c(t,e),t})(u.a)},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",(function(){return d}));var u=n(391),d=(function(e){function t(e,n,i){return r(this,t),o(this,a(t).call(this,(function(){return{isUnfolded:!i.isFolded,isDefaultSuggest:e.searchQuery.isDefaultSuggest,hasSuggestItems:e.hasSuggestItems}}),(function(e){e.isUnfolded&&e.isDefaultSuggest&&e.hasSuggestItems&&n.logSearchSuggest({suggestWithEmptyRequest:!0})})))}return c(t,e),t})(u.a)},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",(function(){return f}));var u=n(339),d=n(391),f=(function(e){function t(e){return r(this,t),o(this,a(t).call(this,(function(){return e.isFolded}),(function(e){return Object(u.p)(!e)}),{fireImmediately:!0}))}return c(t,e),t})(d.a)},function(e,t,n){"use strict";var i=n(2272);n.d(t,"a",(function(){return i.a}))},function(e,t,n){"use strict";(function(e,i){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t,n,i){O||(O="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:O,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function h(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function m(e,t,n,i,r){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n.d(t,"a",(function(){return ee}));var v,_,b,y,S,w,k,x,M,C,T,D,O,I=n(339),P=n(328),E=n(331),A=(n.n(E),n(342)),j=n.n(A),F=n(424),R=n(425),B=n(438),L=n(367),N=n(748),$=n(554),H=n(537),z=n(2273),q=n(2277),V=n(730),U=n(750),W=n(2278),J=(n.n(W),n(376)),G=n.n(J),Q=n(325),K=n(426),Y=i18n("%Search_Placeholder"),X=i18n("%Toolbar_Mobile_SearchMessages"),Z=(D={},g(D,G.a.CLICK,K.b),g(D,G.a.HOTKEY,K.c),D),ee=(v=Object(E.inject)("searchStore","searchService","searchLogService","searchQuery","searchState","settingsService","shortcuts","scenarioManager"))(_=Object(E.observer)((T=C=(function(t){function n(){var e,t;o(this,n);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t=c(this,(e=l(n)).call.apply(e,[this].concat(r))),t.onInputClick=function(){t.props.unfoldAndShowSuggest()},t.onInputFocus=function(){t.props.unfoldAndShowSuggest()},t.onInputKeyDown=function(e){var n=t.props.shortcuts;switch(e.which){case V.a.ENTER:t.preventKeyDown(e),n.emit("SearchInput:enter");break;case V.a.ESC:t.preventKeyDown(e),t._handleEsc();break;case V.a.DOWN:t.preventKeyDown(e),n.emit("SearchInput:down");break;case V.a.UP:t.preventKeyDown(e),n.emit("SearchInput:up")}},h(u(t),"onInputChange",y,u(t)),h(u(t),"onIconAdvancedMouseDown",S,u(t)),h(u(t),"onIconCleanMouseDown",w,u(t)),h(u(t),"_handleEsc",k,u(t)),h(u(t),"_resetAndShowDefaultSuggest",x,u(t)),h(u(t),"_fold",M,u(t)),t.setFocus=function(){t._textInput._control.focus()},t._blur=function(){t._textInput._control.blur()},t._getValue=function(){return t._textInput._control.value},t}return d(n,t),a(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.searchState,n=e.searchStore,i=e.searchService,r=e.searchLogService;this._animateReaction=new q.a(t,n,i,r,this._blur,I.i)}},{key:"componentWillUnmount",value:function(){this._animateReaction.cancel()}},{key:"_finishSearchScenario",value:function(e){var t=Z[e];this.props.scenarioManager.finishScenarioIfActive(Q.f,t)}},{key:"preventClick",value:function(e){e.stopPropagation()}},{key:"preventKeyDown",value:function(e){e.preventDefault(),e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()}},{key:"_maybeRenderInputIcons",value:function(){var e=this.props,t=e.searchState,n=e.searchQuery,i=j()({"mail-SearchInput_IconContainer":!0,"is-active":t.showAdvanced||n.isAdvancedDirty});return p(z.a,{uniqueId:this.props.uniqueId,onIconAdvancedMouseDown:this.onIconAdvancedMouseDown,onIconCleanMouseDown:this.onIconCleanMouseDown,className:i})}},{key:"_maybeGetInputPlaceholder",value:function(){return this.props.searchState.isFolded?X:Y}},{key:"_getShowText",value:function(){var e=this.props.searchState,t=e.isFolded,n=e.currentShowText,i=e.shouldShowCurrentSearchText;return t||!i?"":n}},{key:"render",value:function(){var t=this;return e.createElement(H.a,{cls:"mail-SearchInput",theme:"normal",size:"m",pin:"clear-brick",iconRight:this._maybeRenderInputIcons(),placeholder:this._maybeGetInputPlaceholder(),text:this._getShowText(),ref:function(e){t._textInput=e},onFocus:this.onInputFocus,controlAttrs:{onClick:this.onInputClick,onKeyDown:this.onInputKeyDown,onChange:this.onInputChange,maxLength:U.a}})}}]),n})(e.Component),C.propTypes={searchStore:i.instanceOf(B.a).isRequired,searchService:i.instanceOf(L.b).isRequired,searchLogService:i.instanceOf(L.a).isRequired,searchQuery:i.instanceOf(F.a).isRequired,searchState:i.instanceOf(R.a).isRequired,settingsService:i.instanceOf(N.a).isRequired,shortcuts:i.instanceOf($.a).isRequired,unfoldAndShowSuggest:i.func.isRequired,scenarioManager:i.shape({finishScenarioIfActive:i.func.isRequired}),uniqueId:i.string.isRequired},b=T,y=m(b.prototype,"onInputChange",[P.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=e._getValue(),n=e.props,i=n.searchQuery,r=n.searchState,o=n.unfoldAndShowSuggest;i.currentSuggestText=t,r.currentShowText=t,i.shouldShowCurrentSearchText=!0,r.shouldShowCurrentSearchText=!0,o()}}}),S=m(b.prototype,"onIconAdvancedMouseDown",[P.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n=e.props.searchState;t.preventDefault(),t.stopPropagation(),n.showAdvanced=!n.showAdvanced}}}),w=m(b.prototype,"onIconCleanMouseDown",[P.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n=e.props,i=n.searchState,r=n.settingsService,o=n.searchLogService;i.currentShowText?(e._resetAndShowDefaultSuggest(),o.countTextCleared(),t.preventDefault(),t.stopPropagation()):(e._fold(G.a.CLICK),o.countSuggestClose()),r.isCompactHeaderMode&&Object(I.r)()}}}),k=m(b.prototype,"_handleEsc",[P.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=e.props.searchState;t.showAdvanced?t.showAdvanced=!1:t.showSuggest?t.showSuggest=!1:t.currentShowText?e._resetAndShowDefaultSuggest():e._fold(G.a.HOTKEY)}}}),x=m(b.prototype,"_resetAndShowDefaultSuggest",[P.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=e.props,n=t.searchState,i=t.searchService;n.currentShowText="",i.resetSearch(),e.props.unfoldAndShowSuggest()}}}),M=m(b.prototype,"_fold",[P.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n=e.props,i=n.searchState,r=n.searchService;i.isFolded=!0,r.resetSearch({openPageBeforeSearch:!0}),e._finishSearchScenario(t)}}}),_=b))||_)||_}).call(t,n(318),n(317))},function(e,t,n){"use strict";(function(e){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function a(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n,i){v||(v="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:v,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"a",(function(){return T}));var g,p,h,m,v,_=n(317),b=n.n(_),y=n(331),S=(n.n(y),n(343)),w=n(2274),k=n(367),x=i18n("%Search_Advanced_Search"),M=f(S.a,{id:"mail--SearchSuggest-Close"}),C=f(S.a,{id:"mail--SearchSuggest-Settings"}),T=(g=Object(y.inject)("searchLogService"))(p=Object(y.observer)((m=h=(function(e){function t(){return r(this,t),a(this,l(t).apply(this,arguments))}return u(t,e),s(t,[{key:"preventClick",value:function(e){e.preventDefault()}},{key:"render",value:function(){return f(w.a,{},void 0,f("span",{className:"mail-SearchInput_IconContainer",onMouseDown:this.props.onIconCleanMouseDown,onClick:this.preventClick},void 0,M),f("span",{className:this.props.className,onMouseDown:this.props.onIconAdvancedMouseDown,onClick:this.preventClick,title:x},void 0,C))}}]),t})(e.Component),h.propTypes={className:b.a.string.isRequired,onIconAdvancedMouseDown:b.a.func.isRequired,onIconCleanMouseDown:b.a.func.isRequired,searchLogService:b.a.instanceOf(k.a).isRequired,uniqueId:b.a.string.isRequired},p=m))||p)||p}).call(t,n(318))},function(e,t,n){"use strict";var i=n(2275);n.d(t,"a",(function(){return i.a}))},function(e,t,n){"use strict";function i(e,t,n,i){o||(o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),t&&r)for(var a in r)void 0===t[a]&&(t[a]=r[a]);else t||(t=r||{});if(1===s)t.children=i;else if(s>1){for(var c=new Array(s),l=0;l<s;l++)c[l]=arguments[l+3];t.children=c}return{$$typeof:o,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function r(e){return i("div",{className:"mail-IconsBox"},void 0,e.children)}t.a=r;var o,s=n(2276);n.n(s)},function(e,t){},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function a(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?l(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function g(e,t,n,i,r){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n.d(t,"a",(function(){return b}));var p,h,m,v=n(328),_=n(391),b=(p=m=(function(e){function t(e,n,i,o,s,u){var d;return r(this,t),d=a(this,c(t).call(this,(function(){return e.isFolded}),(function(){return d._foldingReaction()}))),d._animationTimer=null,f(l(d),"_animationEnded",h,l(d)),d.searchState=e,d.searchStore=n,d.searchService=i,d.searchLogService=o,d.blur=s,d.headTabsRecalculate=u,d}return u(t,e),s(t,[{key:"destroy",value:function(){this.searchState=null,this.searchStore=null,this.searchService=null,this.searchLogService=null,this.blur=null,this.headTabsRecalculate=null}},{key:"_foldingReaction",value:function(){var e=this.searchState,t=this.searchStore,n=this.searchLogService,i=this.blur,r=this.headTabsRecalculate;e.isFolded?(i(),e.currentShowText="",t.searchQuery.currentSuggestText="",t.dropSearchSession(),r()):n.countSearchActivation(),this._animationPlayed()}},{key:"_animationPlayed",value:function(){var e=this.searchState;this._animationTimer&&window.clearTimeout(this._animationTimer),e.isAnimated=!0,this._animationTimer=window.setTimeout(this._animationEnded,450)}}]),t})(_.a),g(p.prototype,"_foldingReaction",[v.action],Object.getOwnPropertyDescriptor(p.prototype,"_foldingReaction"),p.prototype),g(p.prototype,"_animationPlayed",[v.action],Object.getOwnPropertyDescriptor(p.prototype,"_animationPlayed"),p.prototype),h=g(p.prototype,"_animationEnded",[v.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=e.searchState,n=e.headTabsRecalculate;e._animationTimer=null,t.isAnimated=!1,t.isFolded&&(n(),setTimeout(n,10))}}}),p)},function(e,t){},function(e,t,n){"use strict";var i=n(2280);n.d(t,"a",(function(){return i.a}))},function(e,t,n){"use strict";(function(e,i,r){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function l(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?d(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n,i){k||(k="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:k,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function h(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function m(e,t,n,i,r){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n.d(t,"a",(function(){return R}));var v,_,b,y,S,w,k,x=n(342),M=n.n(x),C=n(328),T=n(331),D=(n.n(T),n(751)),O=n(425),I=n(438),P=n(367),E=n(420),A=n(536),j=n(2281),F=n(2294),R=(n.n(F),(v=Object(T.inject)("searchStore","searchService","searchState"))(_=Object(T.observer)((w=S=(function(t){function n(){var t,r;s(this,n);for(var o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return r=l(this,(t=u(n)).call.apply(t,[this].concat(a))),r.state={canBeVisible:!1},r._alignWidth=function(){if(r.isVisible){var e=r.props.anchorElement,t=e?i.findDOMNode(e):null,n=t.getBoundingClientRect(),o=r._popupElement.domElementPopup;o.style.left=n.left+"px",o.style.width=n.width+"px"}},h(d(r),"onOutsideClick",y,d(r)),r._renderSuggestItem=function(t,n){var i=r.props,o=i.searchState,s=i.onItemClick,a=o.getHighlightedSuggestItemIndex();return e.createElement(A.a.Item,{key:"".concat(t.data.target,":").concat(t.data.search_text),title:t.data.show_text,onClick:function(){s(t)},onMouseEnter:r._onItemMouseEnter.bind(d(r),n),ref:function(e){return r._onItemMounted(e,n===a)}},p(j.a,{item:t}))},r}return f(n,t),c(n,[{key:"componentDidMount",value:function(){Object(D.a)(this._alignWidth),this._alignWidth(),this.setState({canBeVisible:!0})}},{key:"componentDidUpdate",value:function(){this._alignWidth()}},{key:"componentWillUnmount",value:function(){Object(D.b)(this._alignWidth)}},{key:"_onItemMounted",value:function(e,t){e&&e.setState({hovered:t})}},{key:"_onItemMouseEnter",value:function(e){var t=this.props.searchState;t.resetCurrentSuggestItem(),t.setHighlightedSuggestItemIndex(e)}},{key:"render",value:function(){var t=this;if(!this.isVisible)return null;var n=this.props,i=n.searchStore,r=n.searchService,o=n.anchorElement,s=M()({"mail-SearchSuggest-Container":!0,"has-left-gap":r.searchContainerHasLeftGap});return e.createElement(E.a,{theme:"normal",anchor:o,visible:this.isVisible,directions:["bottom-left"],mainOffset:-1,ref:function(e){return t._popupElement=e},autoclosable:!0,onOutsideClick:this.onOutsideClick,cls:s},p(A.a,{theme:"normal",size:"m",cls:"mail-SearchSuggest"},void 0,i.suggestItems.map(this._renderSuggestItem)))}},{key:"isVisible",get:function(){var e=this.props,t=e.searchStore,n=e.searchState;return this.state.canBeVisible&&Boolean(this.props.anchorElement)&&n.showSuggest&&t.suggestItems.length>0}}]),n})(e.Component),S.propTypes={searchStore:r.instanceOf(I.a).isRequired,searchService:r.instanceOf(P.b).isRequired,searchState:r.instanceOf(O.a).isRequired,anchorElement:r.object,onItemClick:r.func.isRequired},b=w,y=m(b.prototype,"onOutsideClick",[C.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.props.searchState.showSuggest=!1}}}),m(b.prototype,"_onItemMouseEnter",[C.action],Object.getOwnPropertyDescriptor(b.prototype,"_onItemMouseEnter"),b.prototype),_=b))||_)||_)}).call(t,n(318),n(324),n(317))},function(e,t,n){"use strict";(function(e,i){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n,i){_||(_="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:_,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"a",(function(){return A}));var p,h,m,v,_,b=n(331),y=(n.n(b),n(390)),S=n(750),w=n(742),k=n(2282),x=n(2285),M=n(2286),C=n(2287),T=n(2288),D=n(2289),O=n(926),I=n(2290),P=n(2293),E=n(927),A=(n.n(E),(p=Object(b.inject)("labelsStore"))(h=Object(b.observer)((v=m=(function(e){function t(){return o(this,t),c(this,u(t).apply(this,arguments))}return d(t,e),a(t,[{key:"render",value:function(){var e=this.props,n=e.item,i=e.labelsStore,r=n.data;switch(r.target){case"history":return g(k.a,{itemData:r});case"subject":return g(x.a,{itemData:r});case"important":return g(C.a,{itemData:r});case"unread":return g(T.a,{itemData:r});case"folder":return g(D.a,{itemData:r});case"ql":return g(O.a,{itemData:r});case"contact":return g(I.a,{itemData:r});case"mail":return g(P.a,{itemData:r});case"label":return g(M.a,{itemData:r,labelColorCode:t._getLabelColor(r,i)});default:return Object(y.b)({errorType:"search-suggest-unsupported-target",target:r.target,suggestItemData:r}),null}}}],[{key:"_getLabelColor",value:function(e,t){var n=t.getLabelById(e.lid);return n?"#"+n.data.color:(Object(y.b)({errorType:"search-suggest-unknown-label",lid:e.lid,suggestItemData:e}),S.b)}}]),t})(e.PureComponent),m.propTypes={labelsStore:i.instanceOf(w.a).isRequired,item:i.object.isRequired},h=v))||h)||h)}).call(t,n(318),n(317))},function(e,t,n){"use strict";(function(e){function i(e,t,n,i){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),t&&o)for(var a in o)void 0===t[a]&&(t[a]=o[a]);else t||(t=o||{});if(1===s)t.children=i;else if(s>1){for(var c=new Array(s),l=0;l<s;l++)c[l]=arguments[l+3];t.children=c}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var r,o=n(356),s=n(343),a=i(s.a,{id:"mail--SearchSuggest-History",cls:"mail-IconContainer"}),c=function(e){var t=e.itemData;return i("div",{className:"mail-SuggestItem"},void 0,a,i(o.a,{text:t.show_text_highlighted}))};c.propTypes={itemData:e.object.isRequired},t.a=c}).call(t,n(317))},function(e,t,n){"use strict";(function(e){function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t,n,i){o||(o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),t&&r)for(var a in r)void 0===t[a]&&(t[a]=r[a]);else t||(t=r||{});if(1===s)t.children=i;else if(s>1){for(var c=new Array(s),l=0;l<s;l++)c[l]=arguments[l+3];t.children=c}return{$$typeof:o,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var o,s=n(342),a=n.n(s),c=n(2284),l=(n.n(c),function(e){var t=e.text,n=e.cls,o=void 0===n?"":n;return r("span",{className:a()(i({"mail-LimitLongText":!0},o,!0)),dangerouslySetInnerHTML:{__html:t}})});l.propTypes={text:e.string.isRequired,cls:e.string},t.a=l}).call(t,n(317))},function(e,t){},function(e,t,n){"use strict";(function(e){function i(e,t,n,i){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),t&&o)for(var a in o)void 0===t[a]&&(t[a]=o[a]);else t||(t=o||{});if(1===s)t.children=i;else if(s>1){for(var c=new Array(s),l=0;l<s;l++)c[l]=arguments[l+3];t.children=c}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var r,o=n(356),s=n(343),a=i(s.a,{id:"mail--SearchSuggest-Subject",cls:"mail-IconContainer"}),c=function(e){var t=e.itemData;return i("div",{className:"mail-SuggestItem"},void 0,a,i(o.a,{text:t.show_text_highlighted}))};c.propTypes={itemData:e.object.isRequired},t.a=c}).call(t,n(317))},function(e,t,n){"use strict";(function(e){function i(e,t,n,i){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),t&&o)for(var a in o)void 0===t[a]&&(t[a]=o[a]);else t||(t=o||{});if(1===s)t.children=i;else if(s>1){for(var c=new Array(s),l=0;l<s;l++)c[l]=arguments[l+3];t.children=c}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var r,o=n(356),s=n(343),a=function(e){var t=e.itemData,n=e.labelColorCode;return i("div",{className:"mail-SuggestItem"},void 0,i(s.a,{id:"mail--SearchSuggest-Label",color:n,cls:"mail-IconContainer"}),i(o.a,{text:t.show_text_highlighted}))};a.propTypes={itemData:e.object.isRequired,labelColorCode:e.string.isRequired},t.a=a}).call(t,n(317))},function(e,t,n){"use strict";(function(e){function i(e,t,n,i){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),t&&o)for(var a in o)void 0===t[a]&&(t[a]=o[a]);else t||(t=o||{});if(1===s)t.children=i;else if(s>1){for(var c=new Array(s),l=0;l<s;l++)c[l]=arguments[l+3];t.children=c}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var r,o=n(356),s=n(343),a=n(339),c=i("div",{className:"mail-SuggestItem-ImportantIcon_Container"},void 0,i(s.a,{id:"mail--MainToolbar-MarkUnimportant",cls:"mail-IconContainer"})),l=i(s.a,{id:"mail--SearchSuggest-Important",cls:"mail-IconContainer"}),u=function(e){var t,n=e.itemData;return t=Object(a.o)()?c:l,i("div",{className:"mail-SuggestItem"},void 0,t,i(o.a,{text:n.show_text_highlighted}))};u.propTypes={itemData:e.object.isRequired},t.a=u}).call(t,n(317))},function(e,t,n){"use strict";(function(e){function i(e,t,n,i){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),t&&o)for(var a in o)void 0===t[a]&&(t[a]=o[a]);else t||(t=o||{});if(1===s)t.children=i;else if(s>1){for(var c=new Array(s),l=0;l<s;l++)c[l]=arguments[l+3];t.children=c}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var r,o=n(356),s=n(343),a=i(s.a,{id:"mail--SearchSuggest-Unread",cls:"mail-IconContainer"}),c=function(e){var t=e.itemData;return i("div",{className:"mail-SuggestItem"},void 0,a,i(o.a,{text:t.show_text_highlighted}))};c.propTypes={itemData:e.object.isRequired},t.a=c}).call(t,n(317))},function(e,t,n){"use strict";(function(e){function i(e,t,n,i){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),t&&o)for(var a in o)void 0===t[a]&&(t[a]=o[a]);else t||(t=o||{});if(1===s)t.children=i;else if(s>1){for(var c=new Array(s),l=0;l<s;l++)c[l]=arguments[l+3];t.children=c}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var r,o=n(356),s=n(343),a=i(s.a,{id:"mail--SearchSuggest-Folder",cls:"mail-IconContainer"}),c=function(e){var t=e.itemData;return i("div",{className:"mail-SuggestItem"},void 0,a,i(o.a,{text:t.show_text_highlighted}))};c.propTypes={itemData:e.object.isRequired},t.a=c}).call(t,n(317))},function(e,t,n){"use strict";(function(e){function i(e,t,n,i){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),t&&o)for(var a in o)void 0===t[a]&&(t[a]=o[a]);else t||(t=o||{});if(1===s)t.children=i;else if(s>1){for(var c=new Array(s),l=0;l<s;l++)c[l]=arguments[l+3];t.children=c}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var r,o=n(356),s=n(752),a=function(e){var t=e.itemData;return i("div",{className:"mail-SuggestItem"},void 0,i(s.a,{email:t.email,name:t.display_name,cls:"mail-IconContainer"}),i(o.a,{text:t.display_name_highlighted,cls:"mail-SuggestItem-Contact-Name"}),i(o.a,{text:t.email_highlighted,cls:"mail-SuggestItem-Contact-Email"}))};a.propTypes={itemData:e.object.isRequired},t.a=a}).call(t,n(317))},function(e,t,n){"use strict";(function(e,i){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n,i){p||(p="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:p,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"a",(function(){return m}));var p,h=n(2292),m=(function(e){function t(){return o(this,t),c(this,u(t).apply(this,arguments))}return d(t,e),a(t,[{key:"render",value:function(){var e=this.props,t=e.cls,n=e.email,i=e.name,r={email:n,name:i||n,size:30,href:!1,mode:"MessageSnippet-Item_userpic"};return g("span",{className:t,dangerouslySetInnerHTML:{__html:Object(h.a)(r)}})}}]),t})(e.PureComponent);m.propTypes={email:i.string.isRequired,name:i.string,cls:i.string}}).call(t,n(318),n(317))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return Daria.Recipients.add(e)}},function(e,t,n){"use strict";(function(e){function i(e,t,n,i){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),t&&o)for(var a in o)void 0===t[a]&&(t[a]=o[a]);else t||(t=o||{});if(1===s)t.children=i;else if(s>1){for(var c=new Array(s),l=0;l<s;l++)c[l]=arguments[l+3];t.children=c}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var r,o=n(356),s=n(343),a=n(752),c=n(555),l=i(s.a,{id:"mail--SearchSuggest-Attach",cls:"mail-IconContainer mail-SuggestItem-Mail-AttachIcon"}),u=function(e){var t=e.itemData;return i("div",{className:"mail-SuggestItem"},void 0,i(a.a,{email:t.email,name:t.display_name,cls:"mail-IconContainer"}),i(o.a,{text:t.display_name_highlighted||t.display_name,cls:"mail-SuggestItem-Mail-From"}),i(o.a,{text:t.show_text_highlighted,cls:"mail-SuggestItem-Mail-Subject"}),t.has_attachments?l:null,i("span",{className:"mail-SuggestItem-Mail-Date"},void 0,Object(c.b)(t.received_date)))};u.propTypes={itemData:e.object.isRequired},t.a=u}).call(t,n(317))},function(e,t){},function(e,t,n){"use strict";(function(e,i){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n,i){k||(k="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:k,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function p(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function h(e,t,n,i,r){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n.d(t,"a",(function(){return q}));var m,v,_,b,y,S,w,k,x=n(2296),M=n(328),C=n(331),T=(n.n(C),n(367)),D=n(424),O=n(425),I=n(420),P=n(532),E=n(2297),A=n(2299),j=n(2302),F=n(2304),R=n(751),B=n(2308),L=(n.n(B),i18n("%Search_Options_With_Attachments")),N=g("div",{className:"mail-AdvancedParams-Row"},void 0,g(E.a,{})),$=g("div",{className:"mail-AdvancedParams-Row"},void 0,g(A.a,{})),H=g("div",{className:"mail-AdvancedParams-Row"},void 0,g(j.a,{})),z=g(F.a,{rowClass:"mail-AdvancedParams-Row"}),q=(m=Object(C.inject)("searchQuery","searchState","searchLogService"))(v=Object(C.observer)((w=S=(function(t){function n(){var e,t;o(this,n);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t=c(this,(e=l(n)).call.apply(e,[this].concat(r))),t.state={canBeVisible:!1},t._alignPopup=function(){t._popup&&t._popup.forceUpdate()},p(u(t),"onWithAttachmentsChange",b,u(t)),p(u(t),"onOutsideClick",y,u(t)),t}return d(n,t),a(n,[{key:"componentDidMount",value:function(){Object(R.a)(this._alignPopup),this.setState({canBeVisible:!0})}},{key:"componentWillUnmount",value:function(){Object(R.b)(this._alignPopup)}},{key:"_logWithAttachments",value:function(e){this.props.searchLogService.countAdvancedSearch('Чекбокс "с вложениями"',e?"Клик/проставить чекбокс":"Клик/убрать чекбокс")}},{key:"render",value:function(){var t=this;if(!this.isVisible)return null;var n=this.props,i=n.searchQuery,r=n.anchorElement;return e.createElement(I.a,{theme:"normal",anchor:r,visible:this.isVisible,directions:["bottom-right"],mainOffset:-1,ref:function(e){return t._popup=e},autoclosable:!0,onOutsideClick:this.onOutsideClick,cls:"mail-AdvancedParams"},N,$,H,g("div",{className:"mail-AdvancedParams-Row"},void 0,g(P.a,{theme:"normal",size:"s",checked:i.getAdvanced("attaches"),onChange:this.onWithAttachmentsChange},void 0,L)),z)}},{key:"isVisible",get:function(){return this.state.canBeVisible&&Boolean(this.props.anchorElement)}}]),n})(e.Component),S.propTypes={anchorElement:i.object,searchQuery:i.instanceOf(D.a).isRequired,searchState:i.instanceOf(O.a).isRequired,searchLogService:i.instanceOf(T.a).isRequired},_=w,b=h(_.prototype,"onWithAttachmentsChange",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=e.props.searchQuery,n=!t.getAdvanced("attaches");t.setAdvanced("attaches",n),e._logWithAttachments(n)}}}),y=h(_.prototype,"onOutsideClick",[M.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){if(t&&t.target){var n=t.target.classList.contains("react-datepicker__navigation"),i=Boolean(Object(x.a)(t.target,"js-prevent-popup-close"));if(n||i)return}e.props.searchState.showAdvanced=!1}}}),v=_))||v)||v}).call(t,n(318),n(317))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e,t){for(var n=e;n&&!n.classList.contains(t);)n=n.parentElement;return n}},function(e,t,n){"use strict";var i=n(2298);n.d(t,"a",(function(){return i.a}))},function(e,t,n){"use strict";(function(e,i){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n,i){S||(S="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:S,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function p(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}n.d(t,"a",(function(){return O}));var h,m,v,_,b,y,S,w=n(328),k=n(331),x=(n.n(k),n(367)),M=n(424),C=n(431),T={text:i18n("%Search_Options_All_Scopes"),metric:'Клик "Искать по всему письму"'},D=[{text:i18n("%Search_Precise_Scope_From"),scid:"hdr_from",metric:'Клик "в поле Отправитель"'},{text:i18n("%Search_Precise_Scope_To"),scid:"hdr_to",metric:'Клик "в поле Получатель"'},{text:i18n("%Search_Precise_Scope_Subject"),scid:"hdr_subject",metric:"Клик в теме письма"},{text:i18n("%Search_Precise_Scope_Body"),scid:"body_text",metric:"Клик в тексте письма"}],O=(h=Object(k.inject)("searchQuery","searchLogService"))(m=Object(k.observer)((y=b=(function(e){function t(){var e,n;o(this,t);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return n=c(this,(e=l(t)).call.apply(e,[this].concat(r))),p(u(n),"onChange",_,u(n)),n}return d(t,e),a(t,[{key:"_getScopeByScid",value:function(e){return D.find((function(t){return t.scid===e}))}},{key:"_logSelectedScope",value:function(e){var t=this._getScopeByScid(e)||T;this.props.searchLogService.countAdvancedSearch("Фильтр по области письма",t.metric)}},{key:"_getCurrentValue",value:function(){var e=this.props.searchQuery,t=e.getAdvanced("scope");return"rpopinfo"===t?"":t}},{key:"render",value:function(){return g(C.a,{theme:"normal",size:"s",type:"radio",width:"max",val:this._getCurrentValue(),onChange:this.onChange},void 0,g(C.a.Item,{val:"",cls:"js-prevent-popup-close"},void 0,T.text),g(C.a.Group,{},void 0,D.map((function(e){return g(C.a.Item,{val:e.scid,cls:"js-prevent-popup-close"},e.scid,e.text)}))))}}]),t})(e.PureComponent),b.propTypes={searchQuery:i.instanceOf(M.a).isRequired,searchLogService:i.instanceOf(x.a).isRequired},v=y,_=(function(e,t,n,i,r){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o})(v.prototype,"onChange",[w.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n=1===t.length?t[0]:"";e.props.searchQuery.setAdvanced("scope",n),e._logSelectedScope(n)}}}),m=v))||m)||m}).call(t,n(318),n(317))},function(e,t,n){"use strict";var i=n(2300);n.d(t,"a",(function(){return i.a}))},function(e,t,n){"use strict";(function(e,i){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n,i){S||(S="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:S,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function p(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}n.d(t,"a",(function(){return A}));var h,m,v,_,b,y,S,w=n(328),k=n(331),x=(n.n(k),n(342)),M=n.n(x),C=n(367),T=n(740),D=n(424),O=n(431),I=n(2301),P=(n.n(I),i18n("%Search_Options_All_Folders")),E=g(O.a.Item,{val:"",cls:"js-prevent-popup-close"},void 0,P),A=(h=Object(k.inject)("foldersStore","searchQuery","searchLogService"))(m=Object(k.observer)((y=b=(function(e){function t(){var e,n;o(this,t);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return n=c(this,(e=l(t)).call.apply(e,[this].concat(r))),p(u(n),"onChange",_,u(n)),n}return d(t,e),a(t,[{key:"_getFolderMetric",value:function(e){if(!e)return'Клик "Все папки"';var t=this.props.foldersStore,n=t.getFolderByFid(e);if(!n)return null;if(n.data.user)return"Клик в пользовательскую папку";switch(n.data.symbol){case"draft":return"Клик в Черновики";case"sent":case"outbox":return"Клик в Отправленные";case"spam":return"Клик в Спам";case"trash":return"Клик в Удалённые";case"template":return"Клик в Шаблоны";case"archive":return"Клик в Архив";case"inbox":return"Клик во Входящие";default:return"Клик в ".concat(n.data.symbol)}}},{key:"_logSelectedFid",value:function(e){var t=this.props.searchLogService,n=this._getFolderMetric(e);n&&t.countAdvancedSearch("Фильтр по папкам",n)}},{key:"_renderFolderItem",value:function(e){var t=e.data.fid,n="".concat(e.data.name," (").concat(e.data.count,")"),i=e.data.user,r=M()({"js-prevent-popup-close":!0,"mail-AdvancedParams-Folder_UserFolder":i});return g(O.a.Item,{val:t,cls:r},t,n)}},{key:"render",value:function(){var e=this.props,t=e.foldersStore,n=e.searchQuery;return g(O.a,{theme:"normal",size:"s",type:"radio",width:"max",val:n.getAdvanced("fid"),onChange:this.onChange},void 0,E,g(O.a.Group,{},void 0,t.foldersForSearch.map(this._renderFolderItem)))}}]),t})(e.PureComponent),b.propTypes={foldersStore:i.instanceOf(T.a).isRequired,searchQuery:i.instanceOf(D.a).isRequired,searchLogService:i.instanceOf(C.a).isRequired},v=y,_=(function(e,t,n,i,r){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o})(v.prototype,"onChange",[w.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n=1===t.length?t[0]:"";e.props.searchQuery.setAdvanced("fid",n),e._logSelectedFid(n)}}}),m=v))||m)||m}).call(t,n(318),n(317))},function(e,t){},function(e,t,n){"use strict";var i=n(2303);n.d(t,"a",(function(){return i.a}))},function(e,t,n){"use strict";(function(e,i){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n,i){S||(S="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:S,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function p(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}n.d(t,"a",(function(){return I}));var h,m,v,_,b,y,S,w=n(328),k=n(331),x=(n.n(k),n(367)),M=n(742),C=n(424),T=n(431),D=i18n("%Search_Options_All_Labels"),O=g(T.a.Item,{val:"",cls:"js-prevent-popup-close"},void 0,D),I=(h=Object(k.inject)("labelsStore","searchQuery","searchLogService"))(m=Object(k.observer)((y=b=(function(e){function t(){var e,n;o(this,t);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return n=c(this,(e=l(t)).call.apply(e,[this].concat(r))),p(u(n),"onChange",_,u(n)),n}return d(t,e),a(t,[{key:"_getLabelMetric",value:function(e){if(!e)return'Клик "Все метки"';var t=this.props.labelsStore,n=t.labelItemsForSearch.find((function(t){return t.value===e}));return!!n&&("unread"===n.icon?"Клик в Непрочитанные":"important"===n.icon?"Клик в Важные":"Клик в пользовательскую метку")}},{key:"_logSelectedLid",value:function(e){var t=this.props.searchLogService,n=this._getLabelMetric(e);n&&t.countAdvancedSearch("Фильтр по меткам",n)}},{key:"_renderLabelItem",value:function(e){return g(T.a.Item,{val:e.value,cls:"js-prevent-popup-close"},e.value,e.text)}},{key:"render",value:function(){var e=this.props,t=e.labelsStore,n=e.searchQuery;return g(T.a,{theme:"normal",size:"s",type:"radio",width:"max",val:n.getAdvanced("lid"),onChange:this.onChange},void 0,O,g(T.a.Group,{},void 0,t.labelItemsForSearch.map(this._renderLabelItem)))}}]),t})(e.PureComponent),b.propTypes={labelsStore:i.instanceOf(M.a).isRequired,searchQuery:i.instanceOf(C.a).isRequired,searchLogService:i.instanceOf(x.a).isRequired},v=y,_=(function(e,t,n,i,r){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o})(v.prototype,"onChange",[w.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n=e.props.searchQuery,i=1===t.length?t[0]:"";n.setAdvanced("lid",i),e._logSelectedLid(i)}}}),m=v))||m)||m}).call(t,n(318),n(317))},function(e,t,n){"use strict";var i=n(2305);n.d(t,"a",(function(){return i.a}))},function(e,t,n){"use strict";(function(e,i){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){s(e,t,n[t])}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?f(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t,n,i){T||(T="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:T,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function m(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function v(e,t,n,i,r){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function _(e){return e?e.format("YYYYMMDD"):null}function b(e){return e||null}n.d(t,"a",(function(){return H}));var y,S,w,k,x,M,C,T,D=n(339),O=n(2306),I=n.n(O),P=n(328),E=n(331),A=(n.n(E),n(342)),j=n.n(A),F=n(367),R=n(533),B=n(368),L=n(424),N=n(2307),$=(n.n(N),h("div",{className:"mail-AdvancedParamsDates-Separator"})),H=(y=Object(E.inject)("searchQuery","searchLogService"))(S=Object(E.observer)((C=M=(function(t){function n(e){var t;a(this,n),t=u(this,d(n).call(this,e)),m(f(t),"onClickDatesToggle",k,f(t)),m(f(t),"onDateFieldChange",x,f(t));var i=e.searchQuery;return t.state={isExpanded:Boolean(i.getAdvanced("from")||i.getAdvanced("to"))},t}return g(n,t),l(n,[{key:"_getOptions",value:function(){var e=this.props.searchQuery,t=new Date("1982","08","13"),n=Date.now(),i=b(e.getAdvanced("from")),r=b(e.getAdvanced("to"));return{from:{minDate:t,maxDate:r||n,selected:i},to:{minDate:i||t,maxDate:n,selected:r}}}},{key:"_logDatesToggle",value:function(e){var t=this.props.searchLogService;e?t.countAdvancedSearch("Фильтр по датам",'Клик "Указать точные даты"'):t.countAdvancedSearch("Фильтр по датам",'Клик "Письма по месяцам"')}},{key:"_logDateClick",value:function(){this.props.searchLogService.countAdvancedSearch("Фильтр по датам","Клик в датапикеры")}},{key:"render",value:function(){var t=this;if(!this.state.isExpanded)return h("div",{className:this.props.rowClass},void 0,h(B.a,{theme:"normal",onClick:this.onClickDatesToggle},void 0,i18n("%Search_Options_Enter_Dates")));var n={locale:I.a[Object(D.c)()],dateFormat:"DD.MM.YYYY",placeholderText:"01.01.2000",size:"m",width:"available",fixedHeight:!0,calendarClassName:"js-prevent-popup-close"},i=this._getOptions();return h("div",{},void 0,h("div",{className:j()(s({"mail-AdvancedParamsDates":!0},this.props.rowClass,!0))},void 0,e.createElement(R.a,o({},n,i.from,{onChange:function(e,n){return t.onDateFieldChange("from",e,n)}})),$,e.createElement(R.a,o({},n,i.to,{onChange:function(e,n){return t.onDateFieldChange("to",e,n)}}))),h("div",{className:this.props.rowClass},void 0,h(B.a,{theme:"normal",onClick:this.onClickDatesToggle},void 0,i18n("%Search_Options_By_Months"))))}}]),n})(e.PureComponent),M.propTypes={rowClass:i.string.isRequired,searchQuery:i.instanceOf(L.a).isRequired,searchLogService:i.instanceOf(F.a).isRequired},w=C,k=v(w.prototype,"onClickDatesToggle",[P.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){t.stopPropagation();var n=e.props.searchQuery,i=!e.state.isExpanded;i||(n.setAdvanced("from",null),n.setAdvanced("to",null)),e.setState({isExpanded:i}),e._logDatesToggle(i)}}}),x=v(w.prototype,"onDateFieldChange",[P.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,n,i){i.stopPropagation(),e.props.searchQuery.setAdvanced(t,_(n)),e._logDateClick()}}}),S=w))||S)||S}).call(t,n(318),n(317))},function(e,t,n){"use strict";e.exports={az:"az",be:"be",en:"en-gb",hy:"hy-am",ka:"ka",kk:"kk",ro:"ro",ru:"ru",tr:"tr",tt:"en-gb",uk:"uk"}},function(e,t){},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,i){function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r.apply(this,arguments)}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function l(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?d(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n,i){w||(w="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:w,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function h(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}var m,v,_,b,y,S,w,k=n(328),x=n(331),M=(n.n(x),n(339)),C=n(425),T=n(438),D=n(743),O=n(740),I=n(747),P=n(367),E=n(922),A=n(923),j=n(924),F=n(925),R=n(497),B=n(2310),L=n(2313),N=n(2365),$=n(2374),H=n(750),z=L.a.SEARCH_TRIGGER,q=i18n("%ServiceTabs__Search_Button"),V=i18n("%Toolbar_Mobile_SearchMessages"),U=i18n("%Search_Bubble_Remove"),W=p(R.a,{}),J=(m=Object(x.inject)("searchState","searchStore","routerStore","foldersStore","routerService","searchService","searchLogService","scenarioManager"))(v=Object(x.observer)((S=y=(function(t){function n(e,t){var i;return s(this,n),i=l(this,u(n).call(this,e,t)),h(d(i),"_changeQuery",b,d(i)),i._suggest=null,i._advancedPopupHelper=new $.a(e.searchState,e.searchStore.searchQuery),i._isSuggestVisible=i._isSuggestVisible.bind(d(i)),i._foldSuggest=i._foldSuggest.bind(d(i)),i._unfoldSuggest=i._unfoldSuggest.bind(d(i)),i._getLogo=i._getLogo.bind(d(i)),i._changeQuery=i._changeQuery.bind(d(i)),i._onFoldedChanged=i._onFoldedChanged.bind(d(i)),i._onSearchFinish=i._onSearchFinish.bind(d(i)),i._onSubmit=i._onSubmit.bind(d(i)),i._shouldFoldOnEsc=i._shouldFoldOnEsc.bind(d(i)),i.isFolded=i.isFolded.bind(d(i)),i.state={},i}return f(n,t),c(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.searchState,n=e.searchStore,i=e.routerStore,r=e.searchService,o=e.searchLogService,s=e.scenarioManager;this._navigationSearchReaction=new j.a(i,n,r,t,this.isFolded,this._foldSuggest,this._unfoldSuggest),this._searchSuggestReaction=new E.a(n,r,this._isSuggestVisible),this._searchReaction=new A.a(n,r,t,s,this.isFolded),this._advancedShowReaction=new F.a(o,t)}},{key:"componentWillUnmount",value:function(){this._navigationSearchReaction.cancel(),this._searchSuggestReaction.cancel(),this._searchReaction.cancel(),this._advancedShowReaction.cancel()}},{key:"focusInput",value:function(){this._suggest&&this._suggest.focusInput()}},{key:"toggleFolded",value:function(e){e?this._foldSuggest():this._unfoldSuggest()}},{key:"isFolded",value:function(){return!this._suggest||this._suggest.isFolded()}},{key:"_isSuggestVisible",value:function(){return Boolean(this._suggest&&this._suggest.isSuggestVisible())}},{key:"_onFoldedChanged",value:function(e){var t=this.props,n=t.searchStore,i=t.searchService,r=t.searchLogService,o=t.isCompact;e?(i.resetSearch(),i.cleanupSuggest(),n.dropSearchSession(),Object(M.i)(),o&&Object(M.r)()):r.countSearchActivation(),Object(M.p)(!e)}},{key:"_onSearchFinish",value:function(){this.props.routerService.openLastPageBeforeSearch()}},{key:"_renderItem",value:function(e){return p(N.a,{item:e})}},{key:"_shouldFoldOnEsc",value:function(){return!this.props.routerStore.isSearchResultsPage}},{key:"_getItemType",value:function(e){return e.data.target}},{key:"_onSubmit",value:function(e){var t=this.props,n=t.searchViaButton,i=t.searchViaEnterPress;e===z.ENTER_PRESS?i():n()}},{key:"_renderRocksSuggest",value:function(){var t=this,n=this.props,i=n.searchState,o=n.searchStore,s=n.toneDefault,a=n.toneActive,c=n.isCompact,l=n.selectItem,u=n.startSuggest,d=n.getItemShowText,f=n.searchService,g=n.searchLogService,p={advancedPopupHelper:this._advancedPopupHelper,__showAdvanced:i.showAdvanced},h=V,m=f.bubbles;return 1===m.length&&"folder"===m[0].type&&(h=i18n("%Search_Placeholder_In_Folder",m[0].text)),this._logShowDefaultSuggest(),e.createElement(L.a,r({ref:function(e){t._suggest=e},suggestQuery:i.currentShowText,isMobile:!1,isCompact:c,updatePaddingInModal:!1,toneDefault:s,toneActive:a,maxLength:H.a,clsActivator:"mail-GhostButton",bubbles:m,placeholderDefault:V,placeholderCustom:h,suggestItems:o.suggestItems,renderItem:this._renderItem,leftContent:this._getLogo,showClose:!0,removeSearchBubbleTitle:U,searchButtonText:q,getShowText:d,getItemType:this._getItemType,handleItemSelect:l,shouldFoldOnEsc:this._shouldFoldOnEsc,startSuggest:u,onTextChange:this._changeQuery,onClearClick:g.countTextCleared,onFoldedChanged:this._onFoldedChanged,onSubmit:this._onSubmit,onCloseClick:g.countSuggestClose,onActiveChange:M.q,onSearchFinish:this._onSearchFinish},p))}},{key:"_logShowDefaultSuggest",value:function(){var e=this.props,t=e.searchStore,n=e.searchLogService;this._isSuggestVisible()&&t.searchQuery.isDefaultSuggest&&t.hasSuggestItems&&n.logSearchSuggest({suggestWithEmptyRequest:!0})}},{key:"_foldSuggest",value:function(){this._suggest&&this._suggest.fold()}},{key:"_unfoldSuggest",value:function(){this._suggest&&this._suggest.unfold()}},{key:"_getLogo",value:function(){var t=this.props,n=t.isCompact,i=t.logo,o=t.searchLogService,s=function(e){return o.countLogoClick(e)};return p("div",{className:"mail-NewSearch-Left"},void 0,!n&&e.createElement(B.a,r({},i,{onServiceClick:this._foldSuggest,countClick:s})))}},{key:"render",value:function(){return p("div",{className:(0,this.props.getContainerClass)()},void 0,this._renderRocksSuggest(),W)}}]),n})(e.Component),y.propTypes={searchState:i.instanceOf(C.a).isRequired,searchStore:i.instanceOf(T.a).isRequired,routerStore:i.instanceOf(D.a).isRequired,foldersStore:i.instanceOf(O.a).isRequired,routerService:i.instanceOf(I.a).isRequired,searchService:i.instanceOf(P.b).isRequired,searchLogService:i.instanceOf(P.a).isRequired,scenarioManager:i.shape({startScenario:i.func.isRequired,finishScenarioIfActive:i.func.isRequired}),uniqueId:i.string.isRequired,logo:i.object.isRequired,toneDefault:i.string,toneActive:i.string,isCompact:i.bool.isRequired,getContainerClass:i.func.isRequired,getItemShowText:i.func.isRequired,startSuggest:i.func.isRequired,searchViaButton:i.func.isRequired,searchViaEnterPress:i.func.isRequired,selectItem:i.func.isRequired},_=S,b=(function(e,t,n,i,r){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o})(_.prototype,"_changeQuery",[k.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n=e.props,i=n.searchState;n.searchStore.searchQuery.currentSuggestText=t,i.currentShowText=t}}}),v=_))||v)||v;t.default=J}.call(t,n(318),n(317))},function(e,t,n){"use strict";var i=n(2311);n.d(t,"a",(function(){return i.a}))},function(e,t,n){"use strict";(function(e,i){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n,i){p||(p="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:p,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"a",(function(){return v}));var p,h=n(343),m=n(2312),v=(n.n(m),(function(e){function t(e,n){var i;return o(this,t),i=c(this,l(t).call(this,e,n)),i._onClickOrgLogo=i._onClickOrgLogo.bind(u(i)),i._onClickService=i._onClickService.bind(u(i)),i}return d(t,e),a(t,[{key:"_renderOrgLogo",value:function(){var e=this.props,t=e.orgImageSrc,n=e.orgIconId,i=e.orgUrl;return t?g("img",{src:t,className:"organization-icon"}):g("a",{className:"mail-ServiceLogo-Logo",href:i,onClick:this._onClickOrgLogo},void 0,g(h.a,{id:n,forceInline:!0}))}},{key:"_onClickOrgLogo",value:function(){(0,this.props.countClick)(!1)}},{key:"_renderServiceLogo",value:function(){var e=this.props,t=e.serviceUrl,n=e.serviceIconId;return g("a",{className:"mail-ServiceLogo-Service",href:t,onClick:this._onClickService},void 0,g(h.a,{id:n}))}},{key:"_onClickService",value:function(){var e=this.props,t=e.onServiceClick,n=e.countClick;t(),n(!0)}},{key:"_renderNdaMark",value:function(){var e=this.props.ndaUrl;return e?g("a",{href:e,className:"mail-Logo-Yandex_nda"}):null}},{key:"render",value:function(){return g("div",{className:"mail-ServiceLogo"},void 0,this._renderOrgLogo(),this._renderServiceLogo(),this._renderNdaMark())}}]),t})(e.PureComponent));v.propTypes={orgImageSrc:i.string,orgIconId:i.string,orgUrl:i.string,serviceIconId:i.string.isRequired,serviceUrl:i.string.isRequired,ndaUrl:i.string,onServiceClick:i.func,countClick:i.func},v.defaultProps={orgUrl:"",onServiceClick:function(){},countClick:function(){}}}).call(t,n(318),n(317))},function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";(function(e,i){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n,i){_||(_="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:_,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"a",(function(){return P}));var p,h,m,v,_,b=n(331),y=(n.n(b),n(390)),S=n(367),w=n(926),k=n(2366),x=n(2367),M=n(2368),C=n(2369),T=n(2371),D=n(2372),O=n(927),I=(n.n(O),n(2373)),P=(n.n(I),(p=Object(b.inject)("searchService","searchLogService"))(h=Object(b.observer)((v=m=(function(e){function t(){var e,n;o(this,t);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return n=c(this,(e=u(t)).call.apply(e,[this].concat(r))),n._onClickRemove=function(){var e=n.props,t=e.item,i=e.searchService,r=e.searchLogService;i.removeSuggestItem(t),r.countSuggestAction("Удаление прошлого запроса")},n}return d(t,e),a(t,[{key:"_isAttach",value:function(){var e=this.props.item,t=e.data,n=t.scopes,i=void 0===n?[]:n,r=t.attachments,o=void 0===r?[]:r;return 1===i.length&&"attachment"===i[0]&&o.length>0}},{key:"render",value:function(){var e=this.props.item,t=e.data;switch(t.target){case"history":return g(k.a,{itemData:t,onRemove:this._onClickRemove});case"subject":return g(D.a,{itemData:t});case"ql":return g(w.a,{itemData:t});case"contact":return g(x.a,{itemData:t});case"mail":return this._isAttach()?g(C.a,{itemData:t}):g(M.a,{itemData:t});case"show-all-results":return g(T.a,{itemData:t});default:return Object(y.b)({errorType:"search-suggest-unsupported-target",target:t.target,suggestItemData:t}),null}}}]),t})(e.PureComponent),m.propTypes={searchService:i.instanceOf(S.b).isRequired,searchLogService:i.instanceOf(S.a).isRequired,item:i.object.isRequired},h=v))||h)||h)}).call(t,n(318),n(317))},function(e,t,n){"use strict";(function(e,i){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n,i){p||(p="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:p,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"a",(function(){return S}));var p,h=n(356),m=n(343),v=n(352),_=i18n("%Search_Suggest_RemoveItemTitle"),b=g("div",{className:"mail-SuggestItem-Rocks-Icon mail-SuggestItem-Rocks-Icon_align_middle"},void 0,g(m.a,{id:"mail--SearchSuggest-History_2",cls:"mail-IconContainer"})),y=g(m.a,{id:"mail--SearchSuggest-Close"}),S=(function(e){function t(){var e,n;o(this,t);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return n=c(this,(e=u(t)).call.apply(e,[this].concat(r))),n.onRemoveClick=function(e){e.stopPropagation(),(0,n.props.onRemove)()},n}return d(t,e),a(t,[{key:"render",value:function(){var e=this.props.itemData;return g("div",{className:"mail-SuggestItem-Rocks"},void 0,b,g("div",{className:"mail-SuggestItem-Rocks-Content"},void 0,g(h.a,{text:e.show_text_highlighted})),g(v.a,{theme:"clear",size:"m",cls:"mail-SuggestItem-Rocks-History-Remove",onClick:this.onRemoveClick,title:_,controlAttrs:{"aria-label":_}},void 0,y))}}]),t})(e.Component);S.propTypes={itemData:i.object.isRequired,onRemove:i.func.isRequired},S.defaultProps={onRemove:function(){}}}).call(t,n(318),n(317))},function(e,t,n){"use strict";(function(e){function i(e,t,n,i){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),t&&o)for(var a in o)void 0===t[a]&&(t[a]=o[a]);else t||(t=o||{});if(1===s)t.children=i;else if(s>1){for(var c=new Array(s),l=0;l<s;l++)c[l]=arguments[l+3];t.children=c}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var r,o=n(356),s=n(752),a=function(e){var t=e.itemData;return i("div",{className:"mail-SuggestItem-Rocks"},void 0,i("div",{className:"mail-SuggestItem-Rocks-Icon mail-SuggestItem-Rocks-Icon_align_middle"},void 0,i(s.a,{email:t.email,name:t.display_name,cls:"mail-IconContainer"})),i("div",{className:"mail-SuggestItem-Rocks-Content"},void 0,i(o.a,{text:t.display_name_highlighted,cls:"mail-SuggestItem-Rocks-Contact-Name"}),i(o.a,{text:t.email_highlighted,cls:"mail-SuggestItem-Rocks-Contact-Email"})))};a.propTypes={itemData:e.object.isRequired},t.a=a}).call(t,n(317))},function(e,t,n){"use strict";(function(e){function i(e,t,n,i){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),t&&o)for(var a in o)void 0===t[a]&&(t[a]=o[a]);else t||(t=o||{});if(1===s)t.children=i;else if(s>1){for(var c=new Array(s),l=0;l<s;l++)c[l]=arguments[l+3];t.children=c}return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var r,o=n(356),s=n(343),a=n(555),c=i("div",{className:"mail-SuggestItem-Rocks-Icon"},void 0,i(s.a,{id:"mail--SearchSuggest-Mail",cls:"mail-IconContainer"})),l=function(e){var t=e.itemData;return i("div",{className:"mail-SuggestItem-Rocks"},void 0,c,i("div",{className:"mail-SuggestItem-Rocks-Content"},void 0,i("div",{className:"mail-SuggestItem-Rocks-Row"},void 0,i(o.a,{text:t.display_name_highlighted||t.display_name,cls:"mail-SuggestItem-Rocks-Mail-From"}),i("span",{className:"mail-SuggestItem-Rocks-Date"},void 0,Object(a.b)(t.received_date))),i("div",{className:"mail-SuggestItem-Rocks-Row"},void 0,i(o.a,{text:t.show_text_highlighted,cls:"mail-SuggestItem-Rocks-Mail-Subject"}))))};l.propTypes={itemData:e.object.isRequired},t.a=l}).call(t,n(317))},function(e,t,n){"use strict";(function(e,i){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n,i){p||(p="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:p,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"a",(function(){return y}));var p,h=n(555),m=n(2370),v=n(343),_=n(356),b=g("div",{className:"mail-SuggestItem-Rocks-Icon"},void 0,g(v.a,{id:"mail--SearchSuggest-Attach",cls:"mail-IconContainer"})),y=(function(e){function t(){return o(this,t),c(this,u(t).apply(this,arguments))}return d(t,e),a(t,[{key:"_renderAttach",value:function(e){var t=e.fileext&&"."===e.fileext[0]?e.fileext.substr(1):e.fileext;return g("li",{className:"mail-SuggestItem-Rocks-Attach-FilesItem mail-File_type_".concat(t),tabIndex:"0"},e.hid,g("span",{className:"mail-SuggestItem-Rocks-Attach-Extension mail-File-Extension"},void 0,t),g(m.a,{text:e.filename,className:"mail-SuggestItem-Rocks-Attach-FileName",font:"13px Arial, sans-serif",width:180}))}},{key:"_maybeRenderMoreAttachesButton",value:function(e){return e.length<3?null:g("li",{className:"mail-SuggestItem-Rocks-Attach-Total"},void 0,i18n("%Search_Suggest_TotalAttaches",e.length))}},{key:"render",value:function(){var e=this.props.itemData;return g("div",{className:"mail-SuggestItem-Rocks"},void 0,b,g("div",{className:"mail-SuggestItem-Rocks-Content"},void 0,g("div",{className:"mail-SuggestItem-Rocks-Row"},void 0,g(_.a,{text:e.display_name_highlighted||e.display_name,cls:"mail-SuggestItem-Rocks-Attach-From"}),g(_.a,{text:e.show_text_highlighted,cls:"mail-SuggestItem-Rocks-Attach-Subject"}),g("span",{className:"mail-SuggestItem-Rocks-Date"},void 0,Object(h.b)(e.received_date))),g("div",{className:"mail-SuggestItem-Rocks-Row"},void 0,g("ul",{className:"mail-SuggestItem-Rocks-Attach-Files"},void 0,e.attachments.slice(0,2).map(this._renderAttach),this._maybeRenderMoreAttachesButton(e.attachments)))))}}]),t})(e.Component);y.propTypes={itemData:i.object.isRequired}}).call(t,n(318),n(317))},,function(e,t,n){"use strict";(function(e){function i(e,t,n,i){o||(o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),t&&r)for(var a in r)void 0===t[a]&&(t[a]=r[a]);else t||(t=r||{});if(1===s)t.children=i;else if(s>1){for(var c=new Array(s),l=0;l<s;l++)c[l]=arguments[l+3];t.children=c}return{$$typeof:o,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function r(e){var t=e.itemData;return i("div",{className:"mail-SuggestItem-Rocks mail-SuggestItem-Rocks-AllResults"},void 0,c,i("div",{className:"mail-SuggestItem-Rocks-Content"},void 0,i(s.a,{text:i18n("%Search_Suggest_ShowAllResults",t.search_text)})))}var o,s=n(356),a=n(343),c=i("div",{className:"mail-SuggestItem-Rocks-Icon mail-SuggestItem-Rocks-Icon_align_middle"},void 0,i(a.a,{id:"mail--Header-Search",cls:"mail-IconContainer"}));r.propTypes={itemData:e.object.isRequired},t.a=r}).call(t,n(317))},function(e,t,n){"use strict";(function(e,i){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n,i){p||(p="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:p,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"a",(function(){return _}));var p,h=n(356),m=n(343),v=g("div",{className:"mail-SuggestItem-Rocks-Icon mail-SuggestItem-Rocks-Icon_align_middle"},void 0,g(m.a,{id:"mail--SearchSuggest-Mail",cls:"mail-IconContainer"})),_=(function(e){function t(){return o(this,t),c(this,u(t).apply(this,arguments))}return d(t,e),a(t,[{key:"render",value:function(){var e=this.props.itemData;return g("div",{className:"mail-SuggestItem-Rocks"},void 0,v,g("div",{className:"mail-SuggestItem-Rocks-Content"},void 0,g(h.a,{text:e.show_text_highlighted})))}}]),t})(e.Component);_.propTypes={itemData:i.object.isRequired}}).call(t,n(318),n(317))},function(e,t){},function(e,t,n){"use strict";(function(e){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function s(e,t,n,i){f||(f="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:f,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function a(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function c(e,t,n,i,r){var o={};return Object.keys(i).forEach((function(e){o[e]=i[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n.d(t,"a",(function(){return y}));var l,u,d,f,g=n(342),p=n.n(g),h=n(328),m=n(352),v=n(2375),_=n(928),b=s(v.a,{}),y=(l=d=(function(){function t(e,n){i(this,t),a(this,"_togglePopup",u,this),this.searchState=e,this.searchQuery=n,this._advancedButton=null}return o(t,[{key:"hidePopup",value:function(){this.searchState.showAdvanced=!1}},{key:"renderButton",value:function(t){var n=this,i=p()({"search-input__advanced-button":!0,"search-input__advanced-button_dirty":this.searchQuery.isAdvancedDirty});return e.createElement(m.a,{theme:"normal",view:"default",tone:t,size:"n",cls:i,ref:function(e){return n._advancedButton=e},icon:b,title:i18n("%Search_Advanced_Search"),onClick:this._togglePopup})}},{key:"renderPopup",value:function(){return s(_.a,{anchorElement:this._advancedButton})}},{key:"isPopupShown",get:function(){return this.searchState.showAdvanced}},{key:"isAdvancedDirty",get:function(){return this.searchQuery.isAdvancedDirty}}]),t})(),c(l.prototype,"hidePopup",[h.action],Object.getOwnPropertyDescriptor(l.prototype,"hidePopup"),l.prototype),u=c(l.prototype,"_togglePopup",[h.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){t.stopPropagation(),e.searchState.showAdvanced=!e.searchState.showAdvanced,e.searchState.showAdvanced||(e.searchState.showSuggest=!0)}}}),l)}).call(t,n(318))},,function(e,t,n){"use strict";(function(e){function i(e,t,n,i){s||(s="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var a in r)void 0===t[a]&&(t[a]=r[a]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var c=new Array(o),l=0;l<o;l++)c[l]=arguments[l+3];t.children=c}return{$$typeof:s,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function r(e,t){var n={reason:l,stars:e,comment:t};a.a.forcedRequest("do-client-log",{messages:JSON.stringify([n])})}function o(t){var n=document.createElement("div");document.body.appendChild(n);var o=function(i){e.unmountComponentAtNode(n),document.body.removeChild(n),t(i)};e.render(i(c.a,{onClose:o,onSend:r}),n),u.create=function(){}}var s,a=n(524),c=n(2377),l="promo-nps",u={create:o};t.a=u}).call(t,n(324))},function(e,t,n){"use strict";(function(e,i){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n,i){p||(p="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:p,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"a",(function(){return b}));var p,h=n(420),m=n(2378),v=n(2386),_=(n.n(v),{left:0,top:0}),b=(function(t){function n(){var e,t;o(this,n);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t=c(this,(e=u(n)).call.apply(e,[this].concat(r))),t.state={popupVisible:!0},t.onClose=function(e){t.setState({popupVisible:!1}),setTimeout((function(){return t.props.onClose(e)}),150)},t.ref=function(e){t._node=e&&e.domElementPopup},t}return d(n,t),a(n,[{key:"render",value:function(){var t=this,n={cls:"promo-nps",theme:"normal",target:"position",position:_,autoclosable:!0,motionless:!0,onOutsideClick:function(){return t.onClose(!1)},visible:this.state.popupVisible,ref:this.ref};return e.createElement(h.a,n,g(m.a,{onClose:this.onClose,onSend:this.props.onSend}))}}]),n})(e.PureComponent);b.propTypes={onClose:i.func.isRequired,onSend:i.func.isRequired}}).call(t,n(318),n(317))},function(e,t,n){"use strict";(function(e,i){function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r.apply(this,arguments)}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function l(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n,i){h||(h="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:h,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"a",(function(){return S}));var h,m=n(352),v=n(2379),_=n(2383),b=n(2385),y=(n.n(b),-1),S=(function(t){function n(){var e,t;s(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return t=l(this,(e=d(n)).call.apply(e,[this].concat(r))),t.state={stars:y,text:"",sent:!1},t.setStars=function(e){t.setState({stars:e})},t.setText=function(e){t.setState({text:e})},t.onLater=function(){t.props.onClose(!0)},t.onClose=function(){t.props.onClose(!1)},t.onSubmit=function(e){e.preventDefault();var n=t.state,i=n.stars,r=n.text;t.props.onSend(i,r),t.setState({sent:!0})},t}return f(n,t),c(n,[{key:"render",value:function(){var e=this.state,t=e.stars,n=e.sent,i="promo-nps__content";return n?i+=" promo-nps__content_sent":t!==y&&(i+=" promo-nps__content_show-comments"),p("form",{className:i,onSubmit:this.onSubmit},void 0,p("div",{className:"promo-nps__text"},void 0,this.text),p("div",{className:"promo-nps__stars"},void 0,p(_.a,{stars:t,onChange:this.setStars})),this.textarea,p("div",{className:"promo-nps__buttons"},void 0,this.buttons))}},{key:"text",get:function(){return this.state.sent?"Спасибо, вы помогаете делать Яндекс.Почту лучше.":"Оцените с какой вероятностью вы бы порекомендовали Яндекс.Почту?"}},{key:"textarea",get:function(){return this.state.sent?null:p(v.a,{theme:"clear",cls:"promo-nps__comment",size:"s",placeholder:"Что бы вам хотелось улучшить?",text:this.state.text,onChange:this.setText,controlAttrs:{maxLength:1e3}})}},{key:"buttons",get:function(){var t={cls:"promo-nps__button",theme:"clear",size:"s"};return this.state.sent?e.createElement(m.a,r({},t,{onClick:this.onClose}),"Закрыть"):this.state.stars!==y?[e.createElement(m.a,r({},t,{onClick:this.onClose,key:"cancel"}),"Отмена"),e.createElement(m.a,r({},t,{type:"submit",key:"send"}),"Отправить")]:e.createElement(m.a,r({},t,{onClick:this.onLater}),"Не сейчас")}}]),n})(e.PureComponent);S.propTypes={onClose:i.func.isRequired,onSend:i.func.isRequired}}).call(t,n(318),n(317))},function(e,t,n){"use strict";var i=n(2380),r=n.n(i),o=n(2382);n.n(o);t.a=r.a},,,,function(e,t,n){"use strict";(function(e,i){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n,i){p||(p="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:p,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"a",(function(){return m}));var p,h=n(2384),m=(n.n(h),(function(e){function t(){var e,n;o(this,t);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return n=c(this,(e=u(t)).call.apply(e,[this].concat(r))),n.state={stars:n.props.stars},n.onClick=function(e){var t=e.target.dataset.value;t&&n.props.onChange(Number(t))},n.onMouseOver=function(e){var t=Number(e.target.dataset.value||n.props.stars);n.setState({stars:t})},n.onMouseLeave=function(){n.setState({stars:n.props.stars})},n}return d(t,e),a(t,[{key:"star",value:function(e){var t="promo-nps-star";return e<=this.state.stars&&(t+=" ".concat(t,"_active")),g("span",{className:t,"data-value":e},e)}},{key:"render",value:function(){for(var e=[],t=0;t<=10;t++)e.push(this.star(t));return g("div",{className:"promo-nps-stars",onClick:this.onClick,onMouseOver:this.onMouseOver,onMouseLeave:this.onMouseLeave},void 0,e)}}]),t})(e.PureComponent));m.propTypes={stars:i.number.isRequired,onChange:i.func.isRequired}}).call(t,n(318),n(317))},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";(function(e,i){function r(e,t,n,i){s||(s="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var a in r)void 0===t[a]&&(t[a]=r[a]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var c=new Array(o),l=0;l<o;l++)c[l]=arguments[l+3];t.children=c}return{$$typeof:s,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function o(t){function n(e){g!==e&&(g=e,d(!0),l("показ бабла"))}function o(){d(!1),window.removeEventListener("mousedown",s),setTimeout((function(){e.unmountComponentAtNode(f),document.body.removeChild(f),t()}),200)}function s(e){var t=e.target;t&&(l(t.dataset.promoPopularContactsMetrika||"клик вне зоны бабла"),o())}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Jane.c(["Популярные контакты",e])}function d(t){var n={cls:"promo-popular-contacts",theme:"normal",target:"anchor",anchor:g,visible:t,hasTail:!0};e.render(i.createElement(a.a,n,r("div",{className:"promo-popular-contacts-message","data-promo-popular-contacts-metrika":"клик в бабл"},void 0,r(c.a,{id:"mail--Close16",cls:"promo-popular-contacts-close",data:{"data-promo-popular-contacts-metrika":"клик на крестик бабла"}}),i18n("%Compose_promo_popular_contacts"))),f)}u.create=function(){};var f=document.createElement("div");document.body.appendChild(f),(function(){window.addEventListener("mousedown",s)})();var g=null;return{setAnchor:n,close:o}}var s,a=n(420),c=n(343),l=n(2388),u=(n.n(l),{create:o});t.a=u}).call(t,n(324),n(318))},function(e,t){},function(e,t,n){"use strict";(function(e,i){function r(){var t=document.createElement("div");document.body.appendChild(t);var n=function(){t&&(e.unmountComponentAtNode(t),document.body.removeChild(t),t=null,ns.events.trigger("daria:unsubscribe-popup:hide"))},r=function(){},a=Object(s.a)(),c={isDark:a,onClose:n,onReload:r};e.render(i.createElement(o.a,c),t)}var o=n(2390),s=n(759),a={openPopup:r};t.a=a}).call(t,n(324),n(318))},function(e,t,n){"use strict";(function(e){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function a(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n,i){g||(g="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:g,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"a",(function(){return b}));var g,p=n(317),h=n.n(p),m=n(951),v=n(2395),_=(n.n(v),{CLOSE:"subscriptions.close",READY:"subscriptions.DOMReady",RELOAD:"subscriptions.reload",API_ERROR:"subscriptions.apiError",NETWORK_ERROR:"subscriptions.networkError"}),b=(function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return n=a(this,(e=l(t)).call.apply(e,[this].concat(o))),n._formFrameListener=function(e){switch(e.data){case _.READY:n._setSubscriptionsConfig();break;case _.RELOAD:n._onSubscriptionFolderReload();break;case _.CLOSE:n._onClose();break;case _.API_ERROR:case _.NETWORK_ERROR:n._onError()}},n}return u(t,e),s(t,[{key:"render",value:function(){var e=this;return f(m.a,{autoclosable:!0,cls:"mail-SubscriptionsPopup",theme:"normal",visible:!0,onOutsideClick:function(){return e.onPopupOutsideClick()}},void 0,f("div",{className:"mail-SubscriptionsPopup_dialog"},void 0,f("iframe",{className:"js-subscriptions-frame",frameBorder:"0",src:["/subscriptions","?platform=web","&locale=".concat(Daria.locale),"&noHistory=1",Daria.Config.uid?"&uid=".concat(Daria.Config.uid):"",this.props.isDark?"&darkTheme=1":""].join("")})))}},{key:"onPopupOutsideClick",value:function(){this.props.onClose()}},{key:"componentDidMount",value:function(){window.addEventListener("message",this._formFrameListener),$.Shortcuts.modalListOn("subscriptions-popup"),ns.events.on("daria:unsubscribe-popup:hide",this._onClose.bind(this))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("message",this._formFrameListener),$.Shortcuts.modalListOff("subscriptions-popup"),ns.events.off("daria:unsubscribe-popup:hide",this._onClose)}},{key:"_setSubscriptionsConfig",value:function(){var e={uid:Daria.uid,client:"liza"};$(".js-subscriptions-frame")[0].contentWindow.subscriptions.setConfig(e)}},{key:"_onSubscriptionFolderReload",value:function(){this.props.onReload()}},{key:"_onClose",value:function(){this.props.onClose()}},{key:"_onError",value:function(){this.props.onClose()}}]),t})(e.PureComponent);b.propTypes={isDark:h.a.bool.isRequired,onClose:h.a.func.isRequired,onReload:h.a.func.isRequired}}).call(t,n(318))},,,,,function(e,t){},function(e,t,n){"use strict";(function(e,i){function r(){var t=document.getElementsByClassName("js-header-settings")[0],n=document.createElement("div"),r=Jane.Promo.findPromo("promo-unsubscribe-popup");document.body.appendChild(n);var c=function(){e.unmountComponentAtNode(n),document.body.removeChild(n)},l=Object(s.a)(),u={onClose:c,anchorNode:t,promo:r,isDark:l};e.render(i.createElement(o.a,u),n),a.create=function(){}}var o=n(2397),s=n(759),a={create:r};t.a=a}).call(t,n(324),n(318))},function(e,t,n){"use strict";(function(e){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function a(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n,i){g||(g="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:g,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"a",(function(){return O}));var g,p=n(317),h=n.n(p),m=n(332),v=n(546),_=n.n(v),b=n(336),y=n.n(b),S=n(343),w=n(2398),k=n(2399),x=(n.n(k),"subscribe_promo"),M=f(S.a,{id:"mail--Subscriptions-Promo-Corner"}),C=f(m.a.Description,{className:"mail-Promo-subscriptions-message"},void 0,f(y.a,{loc:"subscriptions/promo_tip_unsubscribe"}),f("br",{}),f(y.a,{loc:"subscriptions/promo_tip_description"})),T=f(y.a,{loc:"subscriptions/Promo_cancel"}),D=f(y.a,{loc:"subscriptions/Promo_openpopup"}),O=(function(t){function n(){var e;return r(this,n),e=a(this,l(n).call(this)),e.state={popupVisible:!0},e._closeWithMetric=function(t){e.setState({popupVisible:!1}),e.props.promo.setStopShowSetting(),e.unsubscribeFiltersLogService.sendMetrics(x,[t]),e.props.onClose()},e.onOutsideClick=function(){e._closeWithMetric("Закрытие по клику вне промки")},e.onCancelClick=function(){e._closeWithMetric("Закрытие по кнопке")},e.onFilterClick=function(){e._closeWithMetric("Переход в попап"),ns.events.trigger("daria:unsubscribe-popup:show")},e.unsubscribeFiltersLogService=new w.a({},{}),e}return u(n,t),s(n,[{key:"componentDidMount",value:function(){this.props.anchorNode.addEventListener("click",this.onOutsideClick),this.unsubscribeFiltersLogService.sendMetrics(x,["Показ"])}},{key:"componentWillUnmount",value:function(){this.props.anchorNode.removeEventListener("click",this.onOutsideClick)}},{key:"render",value:function(){var t=this.props,n=t.anchorNode,i=t.isDark,r={cls:"mail-Promo-subscriptions",theme:i?"white":"normal",target:"anchor",anchor:n,autoclosable:!0,onOutsideClick:this.onOutsideClick,visible:this.state.popupVisible,hasTail:!0,to:"bottom",size:"m"},o={mods:{side:"top-left"}};return f(_.a,{lang:Daria.locale},void 0,e.createElement(m.a,r,e.createElement(m.a.Corner,o,M),C,f(m.a.Buttons,{},void 0,f(m.a.Buttons.Clear,{theme:"clear",onClick:this.onCancelClick},void 0,T),f(m.a.Buttons.Action,{theme:"action",onClick:this.onFilterClick},void 0,D))))}}]),n})(e.PureComponent);O.propTypes={onClose:h.a.func.isRequired,anchorNode:h.a.shape({addEventListener:h.a.func.isRequired,removeEventListener:h.a.func.isRequired}).isRequired,promo:h.a.object.isRequired,isDark:h.a.bool.isRequired}}).call(t,n(318))},function(e,t,n){"use strict";function i(e){return s(e)||o(e)||r()}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function o(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function s(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}n.d(t,"a",(function(){return u}));var u=(function(){function e(t,n){a(this,e),this._stores=t,this._services=n}return l(e,[{key:"sendMetrics",value:function(t,n){var r=[];switch(t){case"promo-settings":r=["Промо","показ промо"];break;case"promo-folder":r=["Промо","показ промо в левой колонке"];break;case"popup":r=["Попап рассылок"];break;case"subscribe_promo":r=["Промка"]}Jane.c([e.base].concat(i(r),i(n)))}}]),e})();u.base="Управление рассылками"},function(e,t){},function(e,t,n){"use strict";(function(e,i){var r=n(2401);t.a={render:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.render(i.createElement(r.a,n),t)},unmount:function(t){return e.unmountComponentAtNode(t)}}}).call(t,n(324),n(318))},function(e,t,n){"use strict";(function(e,i){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t){var n="".concat(t,",").concat(e);"yaplus"===t&&(n+=","+(Daria.Config.haveYandexPlus?"on":"off"));var i=M[n];if(i){var r=x.concat(i).join(",");if(n.match("yaplus,show")){if(C)return;C=!0}Jane.c(r.split(","))}}function p(e,t){var n="click"===e,i=["yaplus-tooltip-close","yaplus-tooltip-action"].indexOf(t)>-1;n&&i&&Daria.yCookie.yp(k,"1",Daria.yCookie.getExpirationDate(36500))}function h(e,t){if("show"===e&&"yaplus-tooltip"===t){var n=ns.Model.get("settings");n.getSetting("yandex-plus-toolti_s")||n.setSettingOn("yandex-plus-toolti_s")}}function m(e,t){g(e,t),p(e,t),h(e,t)}function v(e){!Daria.yCookie.ypHas(k)&&e&&Daria.yCookie.yp(k,"1",Daria.yCookie.getExpirationDate(1))}n.d(t,"a",(function(){return T}));var _=n(535),b=(n.n(_),n(531)),y=(n.n(b),n(540)),S=(n.n(y),n(2402)),w=(n.n(S),n(2426)),k=(n.n(w),"yaplustooltip"),x=["Login header.Right part","Promo Ya.Plus"],M={"yaplus,show,off":["Button Ya.Plus(off)","Show"],"yaplus,show,on":["Button Ya.Plus (on)","Show"],"yaplus,click,off":["Button Ya.Plus(off)","Click"],"yaplus,click,on":["Button Ya.Plus (on)","Click"],"yaplus-tooltip,show":["Explaining popup","Show"],"yaplus-tooltip-action,click":["Explaining popup",'Button "Interesting" (click)'],"yaplus-tooltip-close,click":["Explaining popup",'Button "Not now" (click)']},C=!1,T=(function(t){function n(){return o(this,n),c(this,u(n).apply(this,arguments))}return d(n,t),a(n,[{key:"componentWillReceiveProps",value:function(e){v(e.tooltipAutoShow)}},{key:"componentDidMount",value:function(){v(this.props.tooltipAutoShow)}},{key:"render",value:function(){var t={available:!Daria.Config.haveYandexPlus,visible:Boolean(this.props.tooltipAutoShow),tld:Daria.Config.TLD,cls:"mail-YandexPlus",enableText:"  ",eventsHandler:m};return t.available&&(t.plusLinkParams="?from=header_mail&utm_campaign=plus&utm_medium=header_mail&utm_source=yandex&source=header_mail"),e.createElement(S.Yaplus,t)}}]),n})(e.PureComponent);T.propTypes={tooltipAutoShow:i.bool}}).call(t,n(318),n(317))},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},function(e,t,n){"use strict";(function(e,i,r){function o(e,t,n,i){a||(a="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var c=new Array(o),l=0;l<o;l++)c[l]=arguments[l+3];t.children=c}return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function s(t){e.render(o(i,{lang:Object(l.c)()},void 0,r.createElement(c.Provider,t,f)),d)}var a,c=n(331),l=(n.n(c),n(339)),u=n(2428),d=document.querySelector(".js-statusline"),f=o(u.a,{anchor:d});t.a=s}).call(t,n(324),n(546),n(318))},function(e,t,n){"use strict";var i=n(2429);n.d(t,"a",(function(){return i.a}))},function(e,t,n){"use strict";(function(e,i){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){s(e,t,n[t])}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t,n,i){y||(y="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:y,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"a",(function(){return I}));var m,v,_,b,y,S=n(331),w=(n.n(S),n(2430)),k=n.n(w),x=n(332),M=n(745),C=n(957),T=n(2454),D=n(2487),O=(n.n(D),function(){for(var e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(e=Jane).c.apply(e,["Нотификации","Функциональные нотификации"].concat(n))}),I=(m=Object(S.inject)("statuslineState","themeStore"))(v=Object(S.observer)((b=_=(function(t){function n(){var e,t;a(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return t=u(this,(e=f(n)).call.apply(e,[this].concat(r))),t.subscribeShowCallback=function(e){t.props.statuslineState.addShowCallback(e)},t.unsubscribeShowCallback=function(e){t.props.statuslineState.removeShowCallback(e)},t}return g(n,t),l(n,[{key:"render",value:function(){var t=this.props,n=t.anchor,i=t.statuslineState,r=t.themeStore,o=i.isVisible,s=i.onClick,a=i.onClose,c=i.status,l=i.startAutoClose,u=i.stopAutoClose,d=r.isContentDark,f=d?"normal":"yellow",g=d?"transparent-black":"transparent-white",p={anchor:n,autoclosable:!1,cls:"mail-Statusline",mainOffset:30,onClick:s,onClose:a,onMouseOver:u,onMouseLeave:l,size:c.size,tail:!1,theme:"promo",tone:d?"dark":"default",to:"top",visible:o};return c.isCloseButtonVisible&&(p.cls+=" with-close"),e.createElement(x.a,p,c.isCloseButtonVisible&&h(x.a.Close,{onClick:a}),h("div",{onClick:s},void 0,this.getContent({isTooltipDark:d,linkTheme:f,progressLinkTheme:g,sendMetric:O.bind(null,c.name),subscribeShowCallback:this.subscribeShowCallback,unsubscribeShowCallback:this.unsubscribeShowCallback})))}},{key:"getContent",value:function(t){var n=this.props.statuslineState,i=n.status,r=T[this.toClassName(i.name)];return r?e.createElement(r,o({},i.params,t)):i.build?i.build(t):i.text?h(x.a.Description,{},void 0,i.text):null}},{key:"toClassName",value:function(e){var t=k()(e);return t.charAt(0).toUpperCase()+t.slice(1)}}]),n})(e.Component),_.propTypes={anchor:i.instanceOf(Element).isRequired,statuslineState:i.instanceOf(C.a).isRequired,themeStore:i.instanceOf(M.a).isRequired},v=b))||v)||v}).call(t,n(318),n(317))},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return r}));var r=function e(t){i(this,e),Object.assign(this,e.defaults,t)};r.defaults={hideOnTimeout:!0,hideOnClick:!0,isCloseButtonVisible:!0,params:{},size:"s",timeout:6e3}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2455);n.d(t,"AddYandexMailMaillistFail",(function(){return i.a}));var r=n(2458);n.d(t,"AddYandexMailMaillistSuccess",(function(){return r.a}));var o=n(2465);n.d(t,"ApplyFilter",(function(){return o.a}));var s=n(2466);n.d(t,"BeforeSendingMessage",(function(){return s.a}));var a=n(2467);n.d(t,"CancelSendFailed",(function(){return a.a}));var c=n(2468);n.d(t,"CantLoadData",(function(){return c.a}));var l=n(2469);n.d(t,"ConfirmMops",(function(){return l.a}));var u=n(2470);n.d(t,"CreateFilter",(function(){return u.a}));var d=n(2471);n.d(t,"EmailAddedToBlacklist",(function(){return d.a}));var f=n(2472);n.d(t,"FilterCreated",(function(){return f.a}));var g=n(2473);n.d(t,"MaxSignatureCountLimitExceeded",(function(){return g.a}));var p=n(2474);n.d(t,"MaxSignatureLengthLimitExceeded",(function(){return p.a}));var h=n(2475);n.d(t,"MessageNotSpam",(function(){return h.a}));var m=n(2476);n.d(t,"MessageSent",(function(){return m.a}));var v=n(2477);n.d(t,"MessageSentCancelling",(function(){return v.a}));var _=n(2478);n.d(t,"MessageSentDelayed",(function(){return _.a}));var b=n(2479);n.d(t,"RecipientsLimitExceeded",(function(){return b.a}));var y=n(2480);n.d(t,"SendingMessage",(function(){return y.a}));var S=n(2481);n.d(t,"SettingsSaved",(function(){return S.a}));var w=n(2482);n.d(t,"SignatureAdded",(function(){return w.a}));var k=n(2483);n.d(t,"SignatureDeleted",(function(){return k.a}));var x=n(2484);n.d(t,"TemplateNotFound",(function(){return x.a}));var M=n(2485);n.d(t,"TimelineLoadingFailed",(function(){return M.a}));var C=n(2486);n.d(t,"TooBigAttachment",(function(){return C.a}))},function(e,t,n){"use strict";var i=n(2456);n.d(t,"a",(function(){return i.a}))},function(e,t,n){"use strict";(function(e,i,r){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function l(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n,i){h||(h="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:h,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"a",(function(){return S}));var h,m=n(332),v=n(368),_=n(2457),b=(n.n(_),p(e,{loc:"statusline/action_repeat"})),y=p("div",{},void 0,p(e,{loc:"statusline/add_yandex_mail_maillist_fail"})),S=(function(e){function t(){return s(this,t),l(this,d(t).apply(this,arguments))}return f(t,e),c(t,[{key:"renderRetryButton",value:function(){var e=this.props,t=e.onRepeat,n=e.progressLinkTheme;return e.showRetryButton?p(m.a.Buttons,{},"buttons",p(v.a,{onClick:t,theme:n},void 0,b)):null}},{key:"render",value:function(){return p("div",{className:"mail-Statusline-AddYandexMailMaillistFail"},void 0,p(m.a.DescriptionWithIcon,{icon:"error"},void 0,y,this.renderRetryButton()))}}]),t})(i.Component);S.propTypes={onRepeat:r.func.isRequired,progressLinkTheme:r.string.isRequired,showRetryButton:r.bool.isRequired}}).call(t,n(336),n(318),n(317))},function(e,t){},function(e,t,n){"use strict";(function(e,i){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n,i){p||(p="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:p,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"a",(function(){return _}));var p,h=n(332),m=n(377),v=g(h.a.Description,{},void 0,g(m.a,{name:"AddYandexMailMaillistSuccess",status:"done"},void 0,g(m.a.Message,{},void 0,g(e,{loc:"statusline/add_yandex_mail_maillist_success"})))),_=(function(e){function t(){return o(this,t),c(this,u(t).apply(this,arguments))}return d(t,e),a(t,[{key:"render",value:function(){return v}}]),t})(i.Component)}).call(t,n(336),n(318))},function(e,t,n){"use strict";(function(e,i){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n,i){h||(h="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:h,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"a",(function(){return C}));var h,m=n(342),v=n.n(m),_=n(429),b=n(2460),y=n(2461),S=n(2462),w=n(2464),k=(n.n(w),p(S.a,{})),x=p(_.a,{cls:"mail-StatuslineProgress_Active",size:"xxs",progress:!0}),M=p("span",{className:"mail-StatuslineProgress_Done"}),C=(function(e){function t(){return s(this,t),l(this,d(t).apply(this,arguments))}return f(t,e),c(t,[{key:"render",value:function(){var e,t=this.props,n=t.name,i=t.status,r=t.withBar,s=void 0!==r&&r,a=t.children;return p("div",{className:v()((e={"mail-StatuslineProgress":!0},o(e,"mail-StatuslineProgress_".concat(n),Boolean(n)),o(e,"mail-StatuslineProgress_withBar",s),e))},void 0,s&&k,"active"===i&&x,"done"===i&&M,a)}}]),t})(e.Component);C.propTypes={status:i.string,name:i.string,withBar:i.bool},C.Message=b.a,C.Action=y.a}).call(t,n(318),n(317))},function(e,t,n){"use strict";(function(e){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function a(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n,i){g||(g="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:g,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"a",(function(){return p}));var g,p=(function(e){function t(){return r(this,t),a(this,l(t).apply(this,arguments))}return u(t,e),s(t,[{key:"render",value:function(){return f("div",{className:"mail-StatuslineProgress_Message"},void 0,this.props.children)}}]),t})(e.Component)}).call(t,n(318))},function(e,t,n){"use strict";(function(e){function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},i.apply(this,arguments)}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",(function(){return p}));var g=n(368),p=(function(t){function n(){return o(this,n),c(this,u(n).apply(this,arguments))}return d(n,t),a(n,[{key:"render",value:function(){return e.createElement(g.a,i({cls:"mail-StatuslineProgress_Action"},this.props),this.props.children)}}]),n})(e.Component)}).call(t,n(318))},function(e,t,n){"use strict";(function(e){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function a(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n,i){g||(g="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:g,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"a",(function(){return h}));var g,p=n(2463),h=(n.n(p),(function(e){function t(){return r(this,t),a(this,l(t).apply(this,arguments))}return u(t,e),s(t,[{key:"render",value:function(){return f("div",{className:"mail-StatuslineProgress-Bar"},void 0,f("span",{className:"mail-StatuslineProgress-Bar_Inner",style:{animationDuration:"".concat(7e3,"ms")}}))}}]),t})(e.Component))}).call(t,n(318))},function(e,t){},function(e,t){},function(e,t,n){"use strict";(function(e,i){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n,i){p||(p="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:p,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"a",(function(){return m}));var p,h=n(332),m=(function(e){function t(){var e,n;o(this,t);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return n=c(this,(e=u(t)).call.apply(e,[this].concat(r))),n.onEditButtonClick=function(){var e=n.props.filid;ns.action.run("message.filter-move.edit",{filid:e})},n.onMoveButtonClick=function(){var e=n.props.filid;ns.action.run("message.filter-move.apply",{filid:e})},n}return d(t,e),a(t,[{key:"render",value:function(){var e=this.props,t=e.message,n=e.moveButtonText,i=e.editButtonText;return g("div",{},void 0,g(h.a.Description,{},"description",t),g(h.a.Buttons,{},"buttons",g(h.a.Buttons.Clear,{onClick:this.onEditButtonClick},void 0,i),g(h.a.Buttons.Action,{onClick:this.onMoveButtonClick},void 0,n)))}}]),t})(e.Component);m.propTypes={message:i.string.isRequired,filid:i.string.isRequired,moveButtonText:i.string.isRequired,editButtonText:i.string.isRequired}}).call(t,n(318),n(317))},function(e,t,n){"use strict";(function(e,i){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n,i){p||(p="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:p,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"a",(function(){return _}));var p,h=n(332),m=n(377),v=g(h.a.Description,{},void 0,g(m.a,{status:"active"},void 0,g(m.a.Message,{},void 0,g(e,{loc:"statusline/before_sending_message"})))),_=(function(e){function t(){return o(this,t),c(this,u(t).apply(this,arguments))}return d(t,e),a(t,[{key:"render",value:function(){return v}}]),t})(i.Component)}).call(t,n(336),n(318))},function(e,t,n){"use strict";(function(e,i){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n,i){p||(p="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:p,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"a",(function(){return v}));var p,h=n(332),m=g(h.a.DescriptionWithIcon,{icon:"error"},void 0,g(e,{loc:"statusline/cancel_send_delayed_failed"})),v=(function(e){function t(){return o(this,t),c(this,u(t).apply(this,arguments))}return d(t,e),a(t,[{key:"render",value:function(){return m}}]),t})(i.Component)}).call(t,n(336),n(318))},function(e,t,n){"use strict";(function(e,i){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n,i){p||(p="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:p,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"a",(function(){return v}));var p,h=n(332),m=g(h.a.DescriptionWithIcon,{icon:"error"},void 0,g(e,{loc:"statusline/cant_load_data"},void 0,g("b",{"data-ref":"bold"}))),v=(function(e){function t(){return o(this,t),c(this,u(t).apply(this,arguments))}return d(t,e),a(t,[{key:"render",value:function(){return m}}]),t})(i.Component)}).call(t,n(336),n(318))},function(e,t,n){"use strict";(function(e,i){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n,i){p||(p="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:p,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"a",(function(){return m}));var p,h=n(332),m=(function(e){function t(){return o(this,t),c(this,u(t).apply(this,arguments))}return d(t,e),a(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.message,i=e.actionButtonText,r=e.cancelButtonText;return g("div",{},void 0,g(h.a.Description,{},"description",g("b",{},void 0,t)," ",n),g(h.a.Buttons,{},"buttons",g(h.a.Buttons.Clear,{cls:"js-cancel-mops"},void 0,r),g(h.a.Buttons.Action,{cls:"js-confirm-mops"},void 0,i)))}}]),t})(e.Component);m.propTypes={title:i.string.isRequired,message:i.string.isRequired,actionButtonText:i.string.isRequired,cancelButtonText:i.string.isRequired}}).call(t,n(318),n(317))},function(e,t,n){"use strict";(function(e,i){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n,i){p||(p="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:p,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"a",(function(){return m}));var p,h=n(332),m=(function(e){function t(){var e,n;o(this,t);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return n=c(this,(e=u(t)).call.apply(e,[this].concat(r))),n.onCancelButtonClick=function(){ns.action.run("message.filter-move.disable")},n.onMoveButtonClick=function(){var e=n.props,t=e.mid,i=e.fid;ns.action.run("message.filter-move.create",{mid:t,fid:i})},n}return d(t,e),a(t,[{key:"render",value:function(){var e=this.props,t=e.message,n=e.moveButtonText,i=e.cancelButtonText;return g("div",{},void 0,g(h.a.Description,{},"description",t),g(h.a.Buttons,{},"buttons",g(h.a.Buttons.Clear,{onClick:this.onCancelButtonClick},void 0,i),g(h.a.Buttons.Action,{onClick:this.onMoveButtonClick},void 0,n)))}}]),t})(e.Component);m.propTypes={message:i.string.isRequired,mid:i.string.isRequired,fid:i.string.isRequired,moveButtonText:i.string.isRequired,cancelButtonText:i.string.isRequired}}).call(t,n(318),n(317))},function(e,t,n){"use strict";(function(e,i,r){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function l(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n,i){h||(h="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:h,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"a",(function(){return _}));var h,m=n(368),v=n(332),_=(function(e){function t(){return s(this,t),l(this,d(t).apply(this,arguments))}return f(t,e),c(t,[{key:"render",value:function(){var e=this.props,t=e.email,n=e.linkTheme;return p(v.a.Description,{},void 0,p(i,{loc:"statusline/email_added_to_blacklist",params:{email:t}},void 0,p(m.a,{theme:n,"data-ref":"link",url:"#setup/filters"})))}}]),t})(e.Component);_.propTypes={email:r.string.isRequired,linkTheme:r.string.isRequired}}).call(t,n(318),n(336),n(317))},function(e,t,n){"use strict";(function(e,i,r){function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o.apply(this,arguments)}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function u(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t,n,i){m||(m="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:m,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"a",(function(){return b}));var m,v=n(368),_=n(332),b=(function(t){function n(){return a(this,n),u(this,f(n).apply(this,arguments))}return g(n,t),l(n,[{key:"render",value:function(){var t=this.props,n=t.linkTheme,r=t.url;return h(_.a.Description,{},void 0,h(i,{loc:"statusline/filter_created"},void 0,e.createElement(v.a,o({"data-ref":"link"},{theme:n,url:r}))))}}]),n})(e.Component);b.propTypes={linkTheme:r.string.isRequired,url:r.string.isRequired}}).call(t,n(318),n(336),n(317))},function(e,t,n){"use strict";(function(e,i){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n,i){p||(p="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:p,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"a",(function(){return v}));var p,h=n(332),m=g(h.a.Description,{},void 0,g(e,{loc:"statusline/max_signature_count_limit_exceeded"})),v=(function(e){function t(){return o(this,t),c(this,u(t).apply(this,arguments))}return d(t,e),a(t,[{key:"render",value:function(){return m}}]),t})(i.Component)}).call(t,n(336),n(318))},function(e,t,n){"use strict";(function(e,i){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n,i){p||(p="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:p,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"a",(function(){return v}));var p,h=n(332),m=g(h.a.Description,{},void 0,g(e,{loc:"statusline/max_signature_length_limit_exceeded"})),v=(function(e){function t(){return o(this,t),c(this,u(t).apply(this,arguments))}return d(t,e),a(t,[{key:"render",value:function(){return m}}]),t})(i.Component)}).call(t,n(336),n(318))},function(e,t,n){"use strict";(function(e,i,r){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function l(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n,i){h||(h="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:h,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"a",(function(){return _}));var h,m=n(368),v=n(332),_=(function(e){function t(){return s(this,t),l(this,d(t).apply(this,arguments))}return f(t,e),c(t,[{key:"render",value:function(){var e=this.props,t=e.count,n=e.linkTheme;return p(v.a.Description,{},void 0,p(i,{loc:"statusline/message_not_spam",params:{count:t}},void 0,p(m.a,{theme:n,"data-ref":"link",url:"#inbox"})))}}]),t})(e.Component);_.propTypes={count:r.number.isRequired,linkTheme:r.string.isRequired}}).call(t,n(318),n(336),n(317))},function(e,t,n){"use strict";(function(e,i){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n,i){p||(p="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:p,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var p,h=n(332),m=n(377),v=n(958),_=g(m.a,{name:"MessageSending",status:"active"},void 0,g(m.a.Message,{},void 0,g(e,{loc:"statusline/sending_message"}))),b=g(m.a.Message,{},void 0,g(e,{loc:"statusline/message_sent"})),y=(function(e){function t(){return o(this,t),c(this,u(t).apply(this,arguments))}return d(t,e),a(t,[{key:"render",value:function(){return g(h.a.Description,{},void 0,_,g(m.a,{name:"MessageSent",status:"done"},void 0,b,this.props.children))}}]),t})(i.Component);t.a=Object(v.a)(y)}).call(t,n(336),n(318))},function(e,t,n){"use strict";(function(e,i){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,n,i){p||(p="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:p,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"a",(function(){return _}));var p,h=n(332),m=n(377),v=g(h.a.Description,{},void 0,g(m.a,{status:"active"},void 0,g(m.a.Message,{},void 0,g(e,{loc:"statusline/message_sent_cancelling"})))),_=(function(e){function t(){return o(this,t),c(this,u(t).apply(this,arguments))}return d(t,e),a(t,[{key:"render",value:function(){return v}}]),t})(i.Component)}).call(t,n(336),n(318))},function(e,t,n){"use strict";(function(e,i,r){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function l(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n,i){h||(h="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:h,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var h,m=n(332),v=n(377),_=n(958),b=n(555),y=p(v.a,{name:"MessageSending",status:"active"},void 0,p(v.a.Message,{},void 0,p(e,{loc:"statusline/sending_message"}))),S=(function(t){function n(){return s(this,n),l(this,d(n).apply(this,arguments))}return f(n,t),c(n,[{key:"render",value:function(){var t=this.props.sendTime,n={date:Object(b.a)(t),time:Object(b.c)(t)};return p(m.a.Description,{},void 0,y,p(v.a,{name:"MessageSent",status:"done"},void 0,p(v.a.Message,{},void 0,p(e,{loc:"statusline/message_sent_delayed",params:n})),this.props.children))}}]),n})(i.Component);S.propTypes={sendTime:r.instanceOf(Date).isRequired},t.a=Object(_.a)(S)}).call(t,n(336),n(318),n(317))},function(e,t,n){"use strict";(function(e,i,r){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function l(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n,i){h||(h="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:h,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"a",(function(){return v}));var h,m=n(332),v=(function(e){function t(){return s(this,t),l(this,d(t).apply(this,arguments))}return f(t,e),c(t,[{key:"render",value:function(){var e=this.props.maxCount;return p(m.a.Description,{},void 0,p(i,{loc:"statusline/recipients_limit_exceeded",params:{maxCount:e}}))}}]),t})(e.Component);v.propTypes={maxCount:r.number.isRequired}}).call(t,n(318),n(336),n(317))},function(e,t,n){"use strict";(function(e,i,r){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function l(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n,i){h||(h="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:h,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"a",(function(){return y}));var h,m=n(332),v=n(377),_=p(e,{loc:"statusline/action_cancel"}),b=p(v.a.Message,{},void 0,p(e,{loc:"statusline/sending_message"})),y=(function(e){function t(){var e,n;s(this,t);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return n=l(this,(e=d(t)).call.apply(e,[this].concat(r))),n.onCancel=function(){var e=n.props,t=e.onCancel,i=e.sendMetric;t(),i("Клик","Отменить")},n}return f(t,e),c(t,[{key:"render",value:function(){var e,t=this.props,n=t.linkTheme,i=t.onCancel;return i&&(e=p(v.a.Action,{theme:n,onClick:this.onCancel},void 0,_)),p(m.a.Description,{},void 0,p(v.a,{status:"active"},void 0,b,e))}}]),t})(i.Component);y.propTypes={linkTheme:r.string.isRequired,sendMetric:r.func.isRequired,onCancel:r.func}}).call(t,n(336),n(318),n(317))},function(e,t,n){"use strict";(function(e,i,r){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function l(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n,i){h||(h="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:h,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"a",(function(){return y}));var h,m=n(332),v=n(377),_=p(v.a.Message,{},void 0,p(e,{loc:"statusline/settings_saved"})),b=p(e,{loc:"statusline/go_to_inbox"}),y=(function(e){function t(){var e,n;s(this,t);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return n=l(this,(e=d(t)).call.apply(e,[this].concat(r))),n.onLinkClick=function(){n.props.sendMetric("Клик",'Клик в "Перейти во входящие"')},n}return f(t,e),c(t,[{key:"render",value:function(){var e=this.props.progressLinkTheme;return p(m.a.Description,{},void 0,p(v.a,{status:"done"},void 0,_,p(v.a.Action,{theme:e,url:"#inbox",onClick:this.onLinkClick},void 0,b)))}}]),t})(i.Component);y.propTypes={progressLinkTheme:r.string.isRequired,sendMetric:r.func.isRequired}}).call(t,n(336),n(318),n(317))},function(e,t,n){"use strict";(function(e,i,r){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function l(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n,i){h||(h="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:h,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"a",(function(){return y}));var h,m=n(332),v=n(377),_=p(v.a.Message,{},void 0,p(e,{loc:"statusline/signature_added"})),b=p(e,{loc:"statusline/go_to_inbox"}),y=(function(e){function t(){var e,n;s(this,t);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return n=l(this,(e=d(t)).call.apply(e,[this].concat(r))),n.onLinkClick=function(){n.props.sendMetric("Клик",'Клик в "Перейти во входящие"')},n}return f(t,e),c(t,[{key:"render",value:function(){var e=this.props.progressLinkTheme;return p(m.a.Description,{},void 0,p(v.a,{status:"done"},void 0,_,p(v.a.Action,{theme:e,url:"#inbox",onClick:this.onLinkClick},void 0,b)))}}]),t})(i.Component);y.propTypes={progressLinkTheme:r.string.isRequired,sendMetric:r.func.isRequired}}).call(t,n(336),n(318),n(317))},function(e,t,n){"use strict";(function(e,i,r){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function l(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n,i){h||(h="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:h,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"a",(function(){return y}));var h,m=n(332),v=n(377),_=p(v.a.Message,{},void 0,p(e,{loc:"statusline/signature_deleted"})),b=p(e,{loc:"statusline/go_to_inbox"}),y=(function(e){function t(){var e,n;s(this,t);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return n=l(this,(e=d(t)).call.apply(e,[this].concat(r))),n.onLinkClick=function(){n.props.sendMetric("Клик",'Клик в "Перейти во входящие"')},n}return f(t,e),c(t,[{key:"render",value:function(){var e=this.props.progressLinkTheme;return p(m.a.Description,{},void 0,p(v.a,{status:"done"},void 0,_,p(v.a.Action,{theme:e,url:"#inbox",onClick:this.onLinkClick},void 0,b)))}}]),t})(i.Component);y.propTypes={progressLinkTheme:r.string.isRequired,sendMetric:r.func.isRequired}}).call(t,n(336),n(318),n(317))},function(e,t,n){"use strict";(function(e,i,r){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function l(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n,i){h||(h="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:h,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"a",(function(){return _}));var h,m=n(368),v=n(332),_=(function(e){function t(){var e,n;s(this,t);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return n=l(this,(e=d(t)).call.apply(e,[this].concat(r))),n.onRemoveButtonClick=function(){ns.action.run("toolbar.settings.button.remove",{button:"template"}),n.props.sendMetric("Клик",'Клик в "Удалите кнопку"')},n.onCreateButtonClick=function(){var e=n.props.template;ns.action.run("compose.go",{save_symbol:"template",old_tmpl:e}),n.props.sendMetric("Клик",'Клик в "Создайте новый шаблон"')},n}return f(t,e),c(t,[{key:"render",value:function(){var e=this.props.linkTheme;return p(v.a.Description,{},void 0,p(i,{loc:"statusline/template_not_found"},void 0,p(m.a,{"data-ref":"remove",theme:e,url:"#",onClick:this.onRemoveButtonClick}),p(m.a,{"data-ref":"create",theme:e,url:"#",onClick:this.onCreateButtonClick})))}}]),t})(e.Component);_.propTypes={linkTheme:r.string.isRequired,template:r.string.isRequired,sendMetric:r.func.isRequired}}).call(t,n(318),n(336),n(317))},function(e,t,n){"use strict";(function(e,i,r){function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o.apply(this,arguments)}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function u(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t,n,i){m||(m="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:m,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"a",(function(){return b}));var m,v=n(368),_=n(332),b=(function(t){function n(){return a(this,n),u(this,f(n).apply(this,arguments))}return g(n,t),l(n,[{key:"render",value:function(){var t=this.props,n=t.linkTheme,r=t.url;return h(_.a.Description,{},void 0,h(i,{loc:"statusline/timeline_loading_failed"},void 0,e.createElement(v.a,o({"data-ref":"link"},{theme:n,url:r}))))}}]),n})(e.Component);b.propTypes={linkTheme:r.string.isRequired,url:r.string.isRequired}}).call(t,n(318),n(336),n(317))},function(e,t,n){"use strict";(function(e,i,r){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function l(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t,n,i){h||(h="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var a=new Array(o),c=0;c<o;c++)a[c]=arguments[c+3];t.children=a}return{$$typeof:h,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}n.d(t,"a",(function(){return v}));var h,m=n(332),v=(function(e){function t(){return s(this,t),l(this,d(t).apply(this,arguments))}return f(t,e),c(t,[{key:"render",value:function(){var e=this.props,t=e.maxCount,n=e.maxSize;return p(m.a.Description,{},void 0,p(i,{loc:"statusline/too_big_attachment",params:{maxCount:t,maxSize:n}}))}}]),t})(e.Component);v.propTypes={maxCount:r.number.isRequired,maxSize:r.number.isRequired}}).call(t,n(318),n(336),n(317))},function(e,t){},function(e,t,n){"use strict";(function(e,i){function r(){if(!s){s=!0;var t=document.getElementsByClassName("js-header-themes-selector")[0],n=document.createElement("div"),r=Jane.Promo.findPromo("promo-close-old-themes");document.getElementsByClassName("js-mail-App")[0].classList.add("js-promo-close-themes-opened"),document.body.appendChild(n);var a=function(){r.off(),e.unmountComponentAtNode(n),document.body.removeChild(n),document.getElementsByClassName("js-mail-App")[0].classList.remove("js-promo-close-themes-opened")},c={onClose:a,anchorNode:t,promo:r};e.render(i.createElement(o.a,c),n)}}var o=n(959),s=!1,a={create:r};t.a=a}).call(t,n(324),n(318))},function(e,t){},function(e,t,n){"use strict";(function(e,i){function r(){if(!s){s=!0;var t=document.getElementsByClassName("js-header-themes-selector")[0],n=document.createElement("div"),r=Jane.Promo.findPromo("promo-close-themes-disclaimer");document.body.appendChild(n);var a=function(){r.off(),e.unmountComponentAtNode(n),document.body.removeChild(n)},c={onClose:a,anchorNode:t,promo:r};e.render(i.createElement(o.a,c),n)}}var o=n(959),s=!1,a={create:r};t.a=a}).call(t,n(324),n(318))},function(e,t,n){function i(e){return n(r(e))}function r(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var o={"./3pane-Attach.svg":2492,"./3pane-FolderOperations-Delete.svg":2493,"./3pane-FolderOperations-Read.svg":2494,"./3pane-FolderOperations-Selection.svg":2495,"./Abook-Birthday.svg":2496,"./Abook-Comment.svg":2497,"./Abook-Email.svg":2498,"./Abook-Filter.svg":2499,"./Abook-Group.svg":2500,"./Abook-Phone.svg":2501,"./Add-Icon.svg":2502,"./Arrow-Left.svg":2503,"./Attach-Download.svg":2504,"./Attach-DownloadBig.svg":2505,"./Attach-DownloadSmall.svg":2506,"./Attach-Download_Disk.svg":2507,"./Attach-Preview.svg":2508,"./Attach_Info.svg":2509,"./Attention.svg":2510,"./Avatar_avia.svg":2511,"./Avatar_hotels.svg":2512,"./Avatar_meeting.svg":2513,"./Avatar_pkpass.svg":2514,"./Avatar_recieved.svg":2515,"./Avatar_reminder.svg":2516,"./Avatar_warning.svg":2517,"./Clear-16.svg":2518,"./Close.svg":2519,"./Close16.svg":2520,"./CloseBold.svg":2521,"./Collectors-Promo-Button_gmail.svg":2522,"./Collectors-Promo-Button_hotmail.svg":2523,"./Collectors-Promo-Button_mail.svg":2524,"./Collectors-Promo-Button_rambler.svg":2525,"./Collectors-Promo-Button_yahoo.svg":2526,"./Compose-AttachComputer.svg":2527,"./Compose-AttachDisk.svg":2528,"./Compose-AttachMail.svg":2529,"./Compose-Clip.svg":2530,"./Compose-Collapse.svg":2531,"./Compose-Delay.svg":2532,"./Compose-Delete.svg":2533,"./Compose-Expand.svg":2534,"./Compose-Minimize.svg":2535,"./Compose-Notify.svg":2536,"./Compose-Remind.svg":2537,"./Compose-Sidebar.svg":2538,"./Compose-Spellcheck-En.svg":2539,"./Compose-Spellcheck-Ru.svg":2540,"./Compose-SuccessMark.svg":2541,"./Compose-ToolbarLetter.svg":2542,"./Compose-ToolbarMoney.svg":2543,"./Compose-ToolbarPostcard.svg":2544,"./Compose-ToolbarZp.svg":2545,"./Compose-Translate.svg":2546,"./Compose-WysiwygAttach.svg":2547,"./Compose-WysiwygFormattingOff.svg":2548,"./Compose-WysiwygFormattingOn.svg":2549,"./Compose-WysiwygOrthographyEng.svg":2550,"./Compose-WysiwygOrthographyRus.svg":2551,"./Compose-WysiwygTranslator.svg":2552,"./ComposeButton-Refresh.svg":2553,"./ComposeButton.svg":2554,"./ConnectService_admin.svg":2555,"./ConnectService_calendar.svg":2556,"./ConnectService_contacts.svg":2557,"./ConnectService_mail.svg":2558,"./ConnectService_main.svg":2559,"./ConnectService_people.svg":2560,"./ConnectService_wiki.svg":2561,"./ConnectService_yadisk.svg":2562,"./ConnectService_yamb.svg":2563,"./DonePromo-QR-Signature.svg":2564,"./DragZones-Delete.svg":2565,"./DragZones-Read.svg":2566,"./DragZones-Unread.svg":2567,"./ExtendedSearch-Flag.svg":2568,"./ExtendedSearch-Unreads.svg":2569,"./File-Icon_ai.svg":2570,"./File-Icon_application.svg":2571,"./File-Icon_archive.svg":2572,"./File-Icon_audio.svg":2573,"./File-Icon_avi.svg":2574,"./File-Icon_bmp.svg":2575,"./File-Icon_book.svg":2576,"./File-Icon_cdr.svg":2577,"./File-Icon_csv.svg":2578,"./File-Icon_development.svg":2579,"./File-Icon_djvu.svg":2580,"./File-Icon_doc.svg":2581,"./File-Icon_eml.svg":2582,"./File-Icon_exe.svg":2583,"./File-Icon_executable.svg":2584,"./File-Icon_flash.svg":2585,"./File-Icon_fonts.svg":2586,"./File-Icon_general.svg":2587,"./File-Icon_gif.svg":2588,"./File-Icon_image.svg":2589,"./File-Icon_jpg.svg":2590,"./File-Icon_mail.svg":2591,"./File-Icon_mov.svg":2592,"./File-Icon_mp3.svg":2593,"./File-Icon_mp4.svg":2594,"./File-Icon_none.svg":2595,"./File-Icon_odp.svg":2596,"./File-Icon_ods.svg":2597,"./File-Icon_odt.svg":2598,"./File-Icon_pcx.svg":2599,"./File-Icon_pdf.svg":2600,"./File-Icon_pls.svg":2601,"./File-Icon_png.svg":2602,"./File-Icon_ppt.svg":2603,"./File-Icon_psd.svg":2604,"./File-Icon_rar.svg":2605,"./File-Icon_rtf.svg":2606,"./File-Icon_script.svg":2607,"./File-Icon_srt.svg":2608,"./File-Icon_text.svg":2609,"./File-Icon_tiff.svg":2610,"./File-Icon_txt.svg":2611,"./File-Icon_video.svg":2612,"./File-Icon_virus.svg":2613,"./File-Icon_wav.svg":2614,"./File-Icon_wma.svg":2615,"./File-Icon_wmv.svg":2616,"./File-Icon_xls.svg":2617,"./File-Icon_zip.svg":2618,"./Folder_archive.svg":2619,"./Folder_attach.svg":2620,"./Folder_draft.svg":2621,"./Folder_folder.svg":2622,"./Folder_important.svg":2623,"./Folder_important_new.svg":2624,"./Folder_inbox.svg":2625,"./Folder_notification.svg":2626,"./Folder_outbox.svg":2627,"./Folder_sent.svg":2628,"./Folder_spam.svg":2629,"./Folder_trash.svg":2630,"./Folder_unread.svg":2631,"./Footer-Android.svg":2632,"./Footer-Apple.svg":2633,"./GoToThread.svg":2634,"./Header-Bug.svg":2635,"./Header-Search.svg":2636,"./Header-Settings.svg":2637,"./Header-Themes.svg":2638,"./Help.svg":2639,"./ICS-Confirm.svg":2640,"./ICS-Decline.svg":2641,"./ICS-Owner.svg":2642,"./ICS-Question.svg":2643,"./ICS-Repeat.svg":2644,"./ICS-person.svg":2645,"./Icon-dkim-01.svg":2646,"./Icon-dkim-02.svg":2647,"./Icon-dkim-03.svg":2648,"./Inbox-CheckboxCheckMark-Small.svg":2649,"./Inbox-CheckboxCheckMark.svg":2650,"./Inbox-CleanFolder.svg":2651,"./Inbox-DelayMessage.svg":2652,"./Inbox-Deselect.svg":2653,"./Inbox-Flag.svg":2654,"./Inbox-LongLoad.svg":2655,"./Inbox-MuteThread.svg":2656,"./Inbox-ReadSwitch.svg":2657,"./Inbox-ReadSwitch_active.svg":2658,"./Inbox-Remind.svg":2659,"./Inbox-RepliedMessage.svg":2660,"./Inbox-RepliedMessageBoth.svg":2661,"./Inbox-RepliedMessageOther.svg":2662,"./Inbox-SelectAll.svg":2663,"./Inbox-SelectFolder.svg":2664,"./Inbox-Unread.svg":2665,"./InboxFilters-Attach.svg":2666,"./InboxFilters-Clock.svg":2667,"./InboxFilters-Clock_active.svg":2668,"./InboxFilters-Flag.svg":2669,"./InboxFilters-Inbox.svg":2670,"./InboxFilters-MailTypes-Hotels.svg":2671,"./InboxFilters-MailTypes-Inbox.svg":2672,"./InboxFilters-MailTypes-People.svg":2673,"./InboxFilters-MailTypes-Sale.svg":2674,"./InboxFilters-MailTypes-Social.svg":2675,"./InboxFilters-MailTypes-Ticket.svg":2676,"./InboxFilters-MailTypes-ZP.svg":2677,"./InboxFilters-Pin.svg":2678,"./InboxFilters-Pin_active.svg":2679,"./InboxFilters-Read.svg":2680,"./Info.svg":2681,"./LeftColumn-Flag.svg":2682,"./Link-Earth.svg":2683,"./Locked.svg":2684,"./Mail-Question.svg":2685,"./MainToolbar-AddBtn.svg":2686,"./MainToolbar-AddContact.svg":2687,"./MainToolbar-AddGroup.svg":2688,"./MainToolbar-AddTemplate.svg":2689,"./MainToolbar-Archive.svg":2690,"./MainToolbar-Attachment.svg":2691,"./MainToolbar-Compose.svg":2692,"./MainToolbar-Delete.svg":2693,"./MainToolbar-DeleteGroup.svg":2694,"./MainToolbar-Edit.svg":2695,"./MainToolbar-Folder.svg":2696,"./MainToolbar-Forward.svg":2697,"./MainToolbar-Important.svg":2698,"./MainToolbar-MagicFolder.svg":2699,"./MainToolbar-MagicTag.svg":2700,"./MainToolbar-MarkImportant.svg":2701,"./MainToolbar-MarkUnimportant.svg":2702,"./MainToolbar-Money.svg":2703,"./MainToolbar-More.svg":2704,"./MainToolbar-MoveUp.svg":2705,"./MainToolbar-MoveUpSmall.svg":2706,"./MainToolbar-Pin.svg":2707,"./MainToolbar-Pin_active.svg":2708,"./MainToolbar-Read.svg":2709,"./MainToolbar-Refresh.svg":2710,"./MainToolbar-Reply.svg":2711,"./MainToolbar-Replyall.svg":2712,"./MainToolbar-Restored.svg":2713,"./MainToolbar-Search.svg":2714,"./MainToolbar-SmartForward.svg":2715,"./MainToolbar-Spam.svg":2716,"./MainToolbar-Tag.svg":2717,"./MainToolbar-Template.svg":2718,"./MainToolbar-Unread.svg":2719,"./MainToolbar-Unspam.svg":2720,"./MainToolbar-Unsubscribe.svg":2721,"./Message-CopyQuote.svg":2722,"./Message-Dkim_false.svg":2723,"./Message-Dkim_none.svg":2724,"./Message-Dkim_true.svg":2725,"./Message-DnD.svg":2726,"./Message-InfoIcon.svg":2727,"./Message-InfoIconBig.svg":2728,"./Message-MarkImportant.svg":2729,"./Message-MarkUnimportant.svg":2730,"./Message-PrevNext.svg":2731,"./Message-Quotation.svg":2732,"./Message-RedAlert.svg":2733,"./Message-RightColumn-Letters.svg":2734,"./Message-RightColumn-Links.svg":2735,"./Message-RightColumn-Thread.svg":2736,"./Message-WidgetHoles.svg":2737,"./Message-YellowAlert.svg":2738,"./MessageToolbar-Clock.svg":2739,"./MessageToolbar-Compose.svg":2740,"./MessageToolbar-Delete.svg":2741,"./MessageToolbar-More.svg":2742,"./MessageToolbar-Pin.svg":2743,"./MessageToolbar-Pin_active.svg":2744,"./MessageToolbar-Reply.svg":2745,"./NewTabs-Default.svg":2746,"./NewTabs-News.svg":2747,"./NewTabs-Social.svg":2748,"./OAuthProvierLogo_gmail.svg":2749,"./OAuthProvierLogo_mailru.svg":2750,"./OAuthProvierLogo_outlook.svg":2751,"./Pancakes.svg":2752,"./Priority-Star.svg":2753,"./Search-MailTypes-Hotel.svg":2754,"./Search-MailTypes-People.svg":2755,"./Search-MailTypes-Sale.svg":2756,"./Search-MailTypes-Social.svg":2757,"./Search-MailTypes-Ticket.svg":2758,"./Search-MailTypes-ZP.svg":2759,"./SearchSuggest-Attach.svg":2760,"./SearchSuggest-Close.svg":2761,"./SearchSuggest-Folder.svg":2762,"./SearchSuggest-History.svg":2763,"./SearchSuggest-History_2.svg":2764,"./SearchSuggest-Important.svg":2765,"./SearchSuggest-Label.svg":2766,"./SearchSuggest-Mail.svg":2767,"./SearchSuggest-Ql.svg":2768,"./SearchSuggest-Settings.svg":2769,"./SearchSuggest-Subject.svg":2770,"./SearchSuggest-Unread.svg":2771,"./SecurityLevel-low.svg":2772,"./SecurityLevel-middle.svg":2773,"./Service_admin.svg":2774,"./Service_afisha.svg":2775,"./Service_browser.svg":2776,"./Service_calendar.svg":2777,"./Service_contacts.svg":2778,"./Service_direct.svg":2779,"./Service_images.svg":2780,"./Service_mail-corp.svg":2781,"./Service_mail-prod.svg":2782,"./Service_main.svg":2783,"./Service_maps.svg":2784,"./Service_market.svg":2785,"./Service_metrika.svg":2786,"./Service_money.svg":2787,"./Service_music.svg":2788,"./Service_news.svg":2789,"./Service_people.svg":2790,"./Service_pogoda.svg":2791,"./Service_q.svg":2792,"./Service_search_en.svg":2793,"./Service_search_ru.svg":2794,"./Service_startrek.svg":2795,"./Service_stub_A.svg":2796,"./Service_stub_B.svg":2797,"./Service_stub_D.svg":2798,"./Service_stub_EE.svg":2799,"./Service_stub_G.svg":2800,"./Service_stub_J.svg":2801,"./Service_stub_L.svg":2802,"./Service_stub_O.svg":2803,"./Service_stub_P.svg":2804,"./Service_stub_S.svg":2805,"./Service_stub_T.svg":2806,"./Service_stub_Y.svg":2807,"./Service_stub_diary_en.svg":2808,"./Service_stub_diary_ru.svg":2809,"./Service_stub_doc_en.svg":2810,"./Service_stub_doc_ru.svg":2811,"./Service_stub_golem_en.svg":2812,"./Service_stub_golem_ru.svg":2813,"./Service_stub_idm_en.svg":2814,"./Service_stub_idm_ru.svg":2815,"./Service_stub_invite_en.svg":2816,"./Service_stub_invite_ru.svg":2817,"./Service_stub_jabber_en.svg":2818,"./Service_stub_jabber_ru.svg":2819,"./Service_stub_lego_en.svg":2820,"./Service_stub_lego_ru.svg":2821,"./Service_stub_lib_en.svg":2822,"./Service_stub_lib_ru.svg":2823,"./Service_stub_magazine_en.svg":2824,"./Service_stub_magazine_ru.svg":2825,"./Service_stub_ml_en.svg":2826,"./Service_stub_ml_ru.svg":2827,"./Service_stub_otrs_en.svg":2828,"./Service_stub_otrs_ru.svg":2829,"./Service_stub_planner_en.svg":2830,"./Service_stub_planner_ru.svg":2831,"./Service_stub_stat_en.svg":2832,"./Service_stub_stat_ru.svg":2833,"./Service_tv.svg":2834,"./Service_wiki.svg":2835,"./Service_yadisk.svg":2836,"./Service_yamb.svg":2837,"./Settings-InterfaceSwitch.svg":2838,"./Settings.svg":2839,"./Subscriptions-Promo-Corner.svg":2840,"./Suggest-More.svg":2841,"./Theme-Pin.svg":2842,"./Themes-AddImg.svg":2843,"./Themes-Edit.svg":2844,"./Themes-Seasons_autumn.svg":2845,"./Themes-Seasons_rotation.svg":2846,"./Themes-Seasons_spring.svg":2847,"./Themes-Seasons_summer.svg":2848,"./Themes-Seasons_winter.svg":2849,"./Timeline-Add-Event.svg":2850,"./Timeline-Attendees.svg":2851,"./Timeline-Calendar.svg":2852,"./Timeline-Location.svg":2853,"./Todo-Calendar.svg":2854,"./Todo-Circlemark.svg":2855,"./Todo-Edit.svg":2856,"./Todo-Letter.svg":2857,"./ToolbarOnSelection-Delete.svg":2858,"./ToolbarOnSelection-Reply.svg":2859,"./ToolbarOnSelection-SmallClock.svg":2860,"./Unlocked.svg":2861,"./UnsubscribeFilters-Done.svg":2862,"./UnsubscribeFilters-Error-sidebar.svg":2863,"./UnsubscribeFilters-Error.svg":2864,"./UnsubscribePopup-Done-big.svg":2865,"./ViewSettings-Icon.svg":2866,"./ViewSettings-InboxType_1.svg":2867,"./ViewSettings-InboxType_2.svg":2868,"./ViewSettings-InboxType_3.svg":2869,"./ViewSettings-LineHeight1.svg":2870,"./ViewSettings-LineHeight2.svg":2871,"./ViewSettings-LineHeight3.svg":2872,"./Widgets-Avatar-Calendar.svg":2873,"./Widgets-Avatar-Error.svg":2874,"./Widgets-Avatar-Reminder.svg":2875,"./Widgets-Done-big.svg":2876,"./Widgets-Done.svg":2877,"./Widgets-Person.svg":2878,"./Widgets-PlaneBothWays.svg":2879,"./Widgets-PlaneOneWay.svg":2880,"./Widgets-Print.svg":2881,"./Widgets_bounce-not-ok-dark.svg":2882,"./Widgets_bounce-not-ok-gray-dark.svg":2883,"./Widgets_bounce-not-ok-gray-light.svg":2884,"./Widgets_bounce-not-ok-light.svg":2885,"./Widgets_bounce-ok-dark.svg":2886,"./Widgets_bounce-ok-gray-dark.svg":2887,"./Widgets_bounce-ok-gray-light.svg":2888,"./Widgets_bounce-ok-light.svg":2889,"./Widgets_eshop-dark.svg":2890,"./Widgets_eshop-light.svg":2891,"./Widgets_hotels-dark.svg":2892,"./Widgets_hotels-light.svg":2893,"./Widgets_hotels-pink-dark.svg":2894,"./Widgets_hotels-pink-light.svg":2895,"./Widgets_tickets-dark.svg":2896,"./Widgets_tickets-light.svg":2897,"./Widgets_tracker.svg":2898,"./Widgets_trips-blue-dark.svg":2899,"./Widgets_trips-blue-light.svg":2900,"./Widgets_trips-dark.svg":2901,"./Widgets_trips-light.svg":2902,"./Wz-attachment.svg":2903};i.keys=function(){return Object.keys(o)},i.resolve=r,e.exports=i,i.id=2491},function(e,t,n){e.exports={id:"svgicon-mail--3pane-Attach-usage",viewBox:"-93 96 8 10",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--3pane-Attach",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--3pane-FolderOperations-Delete-usage",viewBox:"37 -1.5 25 28",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--3pane-FolderOperations-Delete",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--3pane-FolderOperations-Read-usage",viewBox:"25.5 -2.5 28 28",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--3pane-FolderOperations-Read",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--3pane-FolderOperations-Selection-usage",viewBox:"25.5 -2.5 28 28",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--3pane-FolderOperations-Selection",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Abook-Birthday-usage",viewBox:"53.5 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Abook-Birthday",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Abook-Comment-usage",viewBox:"261 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Abook-Comment",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Abook-Email-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Abook-Email",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Abook-Filter-usage",viewBox:"0 0 15 14",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Abook-Filter",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Abook-Group-usage",viewBox:"81.5 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Abook-Group",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Abook-Phone-usage",viewBox:"26.9 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Abook-Phone",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Add-Icon-usage",viewBox:"0 0 14 14",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Add-Icon",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Arrow-Left-usage",viewBox:"0 0 12 21",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Arrow-Left",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Attach-Download-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Attach-Download",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Attach-DownloadBig-usage",viewBox:"0 0 12 18",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Attach-DownloadBig",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Attach-DownloadSmall-usage",viewBox:"0 0 10 12",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Attach-DownloadSmall",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Attach-Download_Disk-usage",viewBox:"0 0 24 24",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Attach-Download_Disk",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Attach-Preview-usage",viewBox:"41.5 3.5 19 14",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Attach-Preview",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Attach_Info-usage",viewBox:"-32 280.5 8 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Attach_Info",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Attention-usage",viewBox:"0 0 27 24",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Attention",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Avatar_avia-usage",viewBox:"0 0 30 30",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Avatar_avia",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Avatar_hotels-usage",viewBox:"0 0 30 30",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Avatar_hotels",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Avatar_meeting-usage",viewBox:"0 0 30 30",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Avatar_meeting",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Avatar_pkpass-usage",viewBox:"0 0 30 30",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Avatar_pkpass",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Avatar_recieved-usage",viewBox:"0 0 30 30",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Avatar_recieved",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Avatar_reminder-usage",viewBox:"0 0 30 30",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Avatar_reminder",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Avatar_warning-usage",viewBox:"0 0 30 30",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Avatar_warning",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Clear-16-usage",viewBox:"0 0 20 20",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Clear-16",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Close-usage",viewBox:"0 0 14 14",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Close",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Close16-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Close16",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--CloseBold-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--CloseBold",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Collectors-Promo-Button_gmail-usage",viewBox:"0 0 16 12",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Collectors-Promo-Button_gmail",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Collectors-Promo-Button_hotmail-usage",viewBox:"0 0 104 105",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Collectors-Promo-Button_hotmail",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Collectors-Promo-Button_mail-usage",viewBox:"0 0 14 14",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Collectors-Promo-Button_mail",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Collectors-Promo-Button_rambler-usage",viewBox:"0 0 14 14",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Collectors-Promo-Button_rambler",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Collectors-Promo-Button_yahoo-usage",viewBox:"0 0 14 14",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Collectors-Promo-Button_yahoo",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Compose-AttachComputer-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Compose-AttachComputer",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Compose-AttachDisk-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Compose-AttachDisk",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Compose-AttachMail-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Compose-AttachMail",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Compose-Clip-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Compose-Clip",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Compose-Collapse-usage",viewBox:"0 0 14 14",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Compose-Collapse",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Compose-Delay-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Compose-Delay",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Compose-Delete-usage",viewBox:"0 841.9 18 18",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Compose-Delete",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Compose-Expand-usage",viewBox:"0 0 14 14",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Compose-Expand",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Compose-Minimize-usage",viewBox:"0 0 14 14",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Compose-Minimize",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Compose-Notify-usage",viewBox:"0 0 18 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Compose-Notify",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Compose-Remind-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Compose-Remind",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Compose-Sidebar-usage",viewBox:"0 0 14 14",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Compose-Sidebar",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Compose-Spellcheck-En-usage",viewBox:"0 0 31.3 12",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Compose-Spellcheck-En",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Compose-Spellcheck-Ru-usage",viewBox:"0 0 28 12",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Compose-Spellcheck-Ru",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Compose-SuccessMark-usage",viewBox:"0 0 54 52",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Compose-SuccessMark",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Compose-ToolbarLetter-usage",viewBox:"0 0 18 18",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Compose-ToolbarLetter",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Compose-ToolbarMoney-usage",viewBox:"0 0 18 18",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Compose-ToolbarMoney",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Compose-ToolbarPostcard-usage",viewBox:"0 0 18 18",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Compose-ToolbarPostcard",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Compose-ToolbarZp-usage",viewBox:"0 0 18 18",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Compose-ToolbarZp",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Compose-Translate-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Compose-Translate",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Compose-WysiwygAttach-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Compose-WysiwygAttach",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Compose-WysiwygFormattingOff-usage",viewBox:"18.5 2.5 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Compose-WysiwygFormattingOff",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Compose-WysiwygFormattingOn-usage",viewBox:"18.5 -3.5 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Compose-WysiwygFormattingOn",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Compose-WysiwygOrthographyEng-usage",viewBox:"0 0 31.3 12",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Compose-WysiwygOrthographyEng",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Compose-WysiwygOrthographyRus-usage",viewBox:"0 0 28 12",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Compose-WysiwygOrthographyRus",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Compose-WysiwygTranslator-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Compose-WysiwygTranslator",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--ComposeButton-Refresh-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--ComposeButton-Refresh",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--ComposeButton-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--ComposeButton",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--ConnectService_admin-usage",viewBox:"0 0 42 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--ConnectService_admin",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--ConnectService_calendar-usage",viewBox:"0 0 42 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--ConnectService_calendar",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--ConnectService_contacts-usage",viewBox:"0 0 36 45",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--ConnectService_contacts",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--ConnectService_mail-usage",viewBox:"0 0 42 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--ConnectService_mail",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--ConnectService_main-usage",viewBox:"0 0 42 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--ConnectService_main",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--ConnectService_people-usage",viewBox:"0 0 42 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--ConnectService_people",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--ConnectService_wiki-usage",viewBox:"0 0 42 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--ConnectService_wiki",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--ConnectService_yadisk-usage",viewBox:"0 0 48 31",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--ConnectService_yadisk",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--ConnectService_yamb-usage",viewBox:"0 0 45.4 45.4",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--ConnectService_yamb",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--DonePromo-QR-Signature-usage",viewBox:"0 0 63.9 66",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--DonePromo-QR-Signature",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--DragZones-Delete-usage",viewBox:"3 0.5 50 56",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--DragZones-Delete",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--DragZones-Read-usage",viewBox:"0 0 57 56",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--DragZones-Read",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--DragZones-Unread-usage",viewBox:"0 0 57 56",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--DragZones-Unread",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--ExtendedSearch-Flag-usage",viewBox:"0 0 14 14",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--ExtendedSearch-Flag",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--ExtendedSearch-Unreads-usage",viewBox:"0 0 14 12",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--ExtendedSearch-Unreads",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_ai-usage",viewBox:"0 0 14 12.3",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_ai",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_application-usage",viewBox:"0 0 17.2 14.1",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_application",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_archive-usage",viewBox:"0 0 6.9 21.7",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_archive",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_audio-usage",viewBox:"0 0 12.7 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_audio",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_avi-usage",viewBox:"0 0 15.3 12.3",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_avi",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_bmp-usage",viewBox:"0 0 14.6 10.6",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_bmp",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_book-usage",viewBox:"0 0 14.8 10.6",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_book",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_cdr-usage",viewBox:"0 0 13.6 17.8",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_cdr",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_csv-usage",viewBox:"0 0 12.3 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_csv",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_development-usage",viewBox:"0 0 16.3 10.1",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_development",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_djvu-usage",viewBox:"0 0 12.3 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_djvu",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_doc-usage",viewBox:"0 0 15.3 14.8",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_doc",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_eml-usage",viewBox:"0 0 14.8 13.6",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_eml",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_exe-usage",viewBox:"0 0 17.2 14.1",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_exe",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_executable-usage",viewBox:"0 0 17.2 14.1",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_executable",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_flash-usage",viewBox:"0 0 13.6 16.3",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_flash",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_fonts-usage",viewBox:"0 0 17.3 10.1",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_fonts",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_general-usage",viewBox:"0 0 12.7 17.6",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_general",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_gif-usage",viewBox:"0 0 14.6 10.6",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_gif",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_image-usage",viewBox:"0 0 14.6 10.6",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_image",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_jpg-usage",viewBox:"0 0 14.6 10.6",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_jpg",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_mail-usage",viewBox:"0 0 14.8 13.6",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_mail",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_mov-usage",viewBox:"0 0 13.6 13.4",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_mov",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_mp3-usage",viewBox:"0 0 12.7 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_mp3",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_mp4-usage",viewBox:"0 0 15.3 12.3",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_mp4",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_none-usage",viewBox:"0 0 22.3 14.8",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_none",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_odp-usage",viewBox:"0 0 17.3 12.1",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_odp",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_ods-usage",viewBox:"0 0 17.3 12.1",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_ods",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_odt-usage",viewBox:"0 0 12 11",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_odt",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_pcx-usage",viewBox:"0 0 14.6 10.6",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_pcx",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_pdf-usage",viewBox:"0 0 17.1 17.1",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_pdf",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_pls-usage",viewBox:"0 0 12.7 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_pls",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_png-usage",viewBox:"0 0 14.6 10.6",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_png",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_ppt-usage",viewBox:"0 0 15.5 14.8",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_ppt",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_psd-usage",viewBox:"0 0 14.8 12.5",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_psd",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_rar-usage",viewBox:"0 0 6.9 21.7",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_rar",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_rtf-usage",viewBox:"0 0 12 11",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_rtf",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_script-usage",viewBox:"0 0 16.3 10.1",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_script",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_srt-usage",viewBox:"0 0 15.3 12.3",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_srt",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_text-usage",viewBox:"0 0 12 11",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_text",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_tiff-usage",viewBox:"0 0 14.6 10.6",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_tiff",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_txt-usage",viewBox:"0 0 12 11",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_txt",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_video-usage",viewBox:"0 0 15.3 12.3",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_video",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_virus-usage",viewBox:"0 0 3.2 17.8",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_virus",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_wav-usage",viewBox:"0 0 12.7 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_wav",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_wma-usage",viewBox:"0 0 12.7 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_wma",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_wmv-usage",viewBox:"0 0 15.3 12.3",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_wmv",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_xls-usage",viewBox:"0 0 15 14.8",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_xls",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--File-Icon_zip-usage",viewBox:"0 0 6.9 21.7",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--File-Icon_zip",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Folder_archive-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Folder_archive",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Folder_attach-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Folder_attach",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Folder_draft-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Folder_draft",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Folder_folder-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Folder_folder",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Folder_important-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Folder_important",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Folder_important_new-usage",viewBox:"0 0 13 11",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Folder_important_new",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Folder_inbox-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Folder_inbox",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Folder_notification-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Folder_notification",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Folder_outbox-usage",viewBox:"0 0 16 21",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Folder_outbox",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Folder_sent-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Folder_sent",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Folder_spam-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Folder_spam",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Folder_trash-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Folder_trash",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Folder_unread-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Folder_unread",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Footer-Android-usage",viewBox:"0 0 28 28",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Footer-Android",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Footer-Apple-usage",viewBox:"0 0 28 28",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Footer-Apple",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--GoToThread-usage",viewBox:"0 0 13 13",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--GoToThread",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Header-Bug-usage",viewBox:"-583 408.9 24 24",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Header-Bug",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Header-Search-usage",viewBox:"0 0 20 20",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Header-Search",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Header-Settings-usage",viewBox:"1.5 2 20 19",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Header-Settings",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Header-Themes-usage",viewBox:"4.5 1.5 18 18",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Header-Themes",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Help-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Help",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--ICS-Confirm-usage",viewBox:"0 0 11 11",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--ICS-Confirm",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--ICS-Decline-usage",viewBox:"0 0 11 11",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--ICS-Decline",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--ICS-Owner-usage",viewBox:"0 0 12 11",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--ICS-Owner",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--ICS-Question-usage",viewBox:"0 0 11 11",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--ICS-Question",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--ICS-Repeat-usage",viewBox:"-2.5 -5.5 16 14",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--ICS-Repeat",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--ICS-person-usage",viewBox:"0 0 17 10",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--ICS-person",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Icon-dkim-01-usage",viewBox:"0 0 12 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Icon-dkim-01",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Icon-dkim-02-usage",viewBox:"0 0 12 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Icon-dkim-02",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Icon-dkim-03-usage",viewBox:"0 0 12 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Icon-dkim-03",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Inbox-CheckboxCheckMark-Small-usage",viewBox:"0 0 12 9",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Inbox-CheckboxCheckMark-Small",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Inbox-CheckboxCheckMark-usage",viewBox:"0 0 30 30",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Inbox-CheckboxCheckMark",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Inbox-CleanFolder-usage",viewBox:"0 0 12 12",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Inbox-CleanFolder",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Inbox-DelayMessage-usage",viewBox:"-266 415.9 14 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Inbox-DelayMessage",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Inbox-Deselect-usage",viewBox:"0 0 18 20",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Inbox-Deselect",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Inbox-Flag-usage",viewBox:"-93 97 10 10",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Inbox-Flag",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Inbox-LongLoad-usage",viewBox:"-87.5 -27.5 71 71",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Inbox-LongLoad",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Inbox-MuteThread-usage",viewBox:"0 0 14 13",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Inbox-MuteThread",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Inbox-ReadSwitch-usage",viewBox:"0 0 10 10",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Inbox-ReadSwitch",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Inbox-ReadSwitch_active-usage",viewBox:"0 0 10 10",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Inbox-ReadSwitch_active",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Inbox-Remind-usage",viewBox:"-2 0 10 10",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Inbox-Remind",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Inbox-RepliedMessage-usage",viewBox:"0 0 14 14",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Inbox-RepliedMessage",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Inbox-RepliedMessageBoth-usage",viewBox:"0 0 14 14",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Inbox-RepliedMessageBoth",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Inbox-RepliedMessageOther-usage",viewBox:"0 0 14 14",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Inbox-RepliedMessageOther",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Inbox-SelectAll-usage",viewBox:"0 0 18 20",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Inbox-SelectAll",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Inbox-SelectFolder-usage",viewBox:"-512 99 18 18",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Inbox-SelectFolder",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Inbox-Unread-usage",viewBox:"-95 97 9 8",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Inbox-Unread",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--InboxFilters-Attach-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--InboxFilters-Attach",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--InboxFilters-Clock-usage",viewBox:"41.479 0.5 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--InboxFilters-Clock",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--InboxFilters-Clock_active-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--InboxFilters-Clock_active",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--InboxFilters-Flag-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--InboxFilters-Flag",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--InboxFilters-Inbox-usage",viewBox:"3.5 2.5 18 18",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--InboxFilters-Inbox",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--InboxFilters-MailTypes-Hotels-usage",viewBox:"-1830.5 1003.5 18 18",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--InboxFilters-MailTypes-Hotels",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--InboxFilters-MailTypes-Inbox-usage",viewBox:"3.5 2.5 18 18",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--InboxFilters-MailTypes-Inbox",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--InboxFilters-MailTypes-People-usage",viewBox:"0 0 18 18",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--InboxFilters-MailTypes-People",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--InboxFilters-MailTypes-Sale-usage",viewBox:"-1831.5 1003.5 18 18",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--InboxFilters-MailTypes-Sale",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--InboxFilters-MailTypes-Social-usage",viewBox:"-1830.5 1003.5 18 17.8",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--InboxFilters-MailTypes-Social",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--InboxFilters-MailTypes-Ticket-usage",viewBox:"0 0 18 18",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--InboxFilters-MailTypes-Ticket",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--InboxFilters-MailTypes-ZP-usage",viewBox:"-1831.5 1003.5 18 17.9",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--InboxFilters-MailTypes-ZP",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--InboxFilters-Pin-usage",viewBox:"0 0 15 18",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--InboxFilters-Pin",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--InboxFilters-Pin_active-usage",viewBox:"0 0 15 18",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--InboxFilters-Pin_active",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--InboxFilters-Read-usage",viewBox:"0 0 18 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--InboxFilters-Read",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Info-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Info",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--LeftColumn-Flag-usage",viewBox:"-95 96 9 10",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--LeftColumn-Flag",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Link-Earth-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Link-Earth",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Locked-usage",viewBox:"0 0 15 15",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Locked",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Mail-Question-usage",viewBox:"0 0 11 11",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Mail-Question",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--MainToolbar-AddBtn-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--MainToolbar-AddBtn",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--MainToolbar-AddContact-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--MainToolbar-AddContact",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--MainToolbar-AddGroup-usage",viewBox:"0 0 16 17",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--MainToolbar-AddGroup",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--MainToolbar-AddTemplate-usage",viewBox:"0 0 17 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--MainToolbar-AddTemplate",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--MainToolbar-Archive-usage",viewBox:"0 -2 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--MainToolbar-Archive",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--MainToolbar-Attachment-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--MainToolbar-Attachment",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--MainToolbar-Compose-usage",viewBox:"0 0 17 17",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--MainToolbar-Compose",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--MainToolbar-Delete-usage",viewBox:"0 0 14 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--MainToolbar-Delete",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--MainToolbar-DeleteGroup-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--MainToolbar-DeleteGroup",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--MainToolbar-Edit-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--MainToolbar-Edit",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--MainToolbar-Folder-usage",viewBox:"0 0 17 14",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--MainToolbar-Folder",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--MainToolbar-Forward-usage",viewBox:"0 0 17 14",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--MainToolbar-Forward",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--MainToolbar-Important-usage",viewBox:"0 0 13 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--MainToolbar-Important",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--MainToolbar-MagicFolder-usage",viewBox:"0 -2 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--MainToolbar-MagicFolder",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--MainToolbar-MagicTag-usage",viewBox:"0 0 15 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--MainToolbar-MagicTag",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--MainToolbar-MarkImportant-usage",viewBox:"0 0 14 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--MainToolbar-MarkImportant",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--MainToolbar-MarkUnimportant-usage",viewBox:"0 0 14 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--MainToolbar-MarkUnimportant",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--MainToolbar-Money-usage",viewBox:"1 17 18 18",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--MainToolbar-Money",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--MainToolbar-More-usage",viewBox:"0 0 16 4",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--MainToolbar-More",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--MainToolbar-MoveUp-usage",viewBox:"0 0 16 15",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--MainToolbar-MoveUp",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--MainToolbar-MoveUpSmall-usage",viewBox:"0 0 12 14",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--MainToolbar-MoveUpSmall",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--MainToolbar-Pin-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--MainToolbar-Pin",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--MainToolbar-Pin_active-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--MainToolbar-Pin_active",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--MainToolbar-Read-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--MainToolbar-Read",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--MainToolbar-Refresh-usage",viewBox:"0 0 16 15",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--MainToolbar-Refresh",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--MainToolbar-Reply-usage",viewBox:"0 0 17 14",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--MainToolbar-Reply",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--MainToolbar-Replyall-usage",viewBox:"0 0 23 14",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--MainToolbar-Replyall",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--MainToolbar-Restored-usage",viewBox:"0 0 16 17",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--MainToolbar-Restored",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--MainToolbar-Search-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--MainToolbar-Search",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--MainToolbar-SmartForward-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--MainToolbar-SmartForward",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--MainToolbar-Spam-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--MainToolbar-Spam",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--MainToolbar-Tag-usage",viewBox:"-0.5 -0.5 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--MainToolbar-Tag",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--MainToolbar-Template-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--MainToolbar-Template",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--MainToolbar-Unread-usage",viewBox:"0 0 17 14",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--MainToolbar-Unread",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--MainToolbar-Unspam-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--MainToolbar-Unspam",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--MainToolbar-Unsubscribe-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--MainToolbar-Unsubscribe",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Message-CopyQuote-usage",viewBox:"-15 14 21 21",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Message-CopyQuote",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Message-Dkim_false-usage",viewBox:"0 0 12 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Message-Dkim_false",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Message-Dkim_none-usage",viewBox:"0 0 12 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Message-Dkim_none",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Message-Dkim_true-usage",viewBox:"0 0 12 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Message-Dkim_true",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Message-DnD-usage",viewBox:"0 0 6 10",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Message-DnD",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Message-InfoIcon-usage",viewBox:"-30.5 291.52 20.958 20.958",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Message-InfoIcon",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Message-InfoIconBig-usage",viewBox:"-58.5 273.5 36 36",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Message-InfoIconBig",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Message-MarkImportant-usage",viewBox:"0 0 12 14",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Message-MarkImportant",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Message-MarkUnimportant-usage",viewBox:"0 0 12 14",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Message-MarkUnimportant",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Message-PrevNext-usage",viewBox:"-3 3 14 14",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Message-PrevNext",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Message-Quotation-usage",viewBox:"0 0 11 10",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Message-Quotation",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Message-RedAlert-usage",viewBox:"60.5 9 30 40",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Message-RedAlert",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Message-RightColumn-Letters-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Message-RightColumn-Letters",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Message-RightColumn-Links-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Message-RightColumn-Links",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Message-RightColumn-Thread-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Message-RightColumn-Thread",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Message-WidgetHoles-usage",viewBox:"0 0 6 65",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Message-WidgetHoles",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Message-YellowAlert-usage",viewBox:"60.5 9 30 40",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Message-YellowAlert",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--MessageToolbar-Clock-usage",viewBox:"0 0 18 18",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--MessageToolbar-Clock",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--MessageToolbar-Compose-usage",viewBox:"0 841.9 18 18",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--MessageToolbar-Compose",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--MessageToolbar-Delete-usage",viewBox:"0 841.9 18 18",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--MessageToolbar-Delete",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--MessageToolbar-More-usage",viewBox:"0 841.9 18 18",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--MessageToolbar-More",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--MessageToolbar-Pin-usage",viewBox:"1.5 1.5 18 18",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--MessageToolbar-Pin",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--MessageToolbar-Pin_active-usage",viewBox:"10.5 2.5 18 18",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--MessageToolbar-Pin_active",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--MessageToolbar-Reply-usage",viewBox:"0 841.9 18 18",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--MessageToolbar-Reply",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--NewTabs-Default-usage",viewBox:"0 0 14 11",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--NewTabs-Default",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--NewTabs-News-usage",viewBox:"0 0 14 14",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--NewTabs-News",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--NewTabs-Social-usage",viewBox:"0 0 14 14",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--NewTabs-Social",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--OAuthProvierLogo_gmail-usage",viewBox:"0 0 21 17",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--OAuthProvierLogo_gmail",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--OAuthProvierLogo_mailru-usage",viewBox:"0 0 20 20",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--OAuthProvierLogo_mailru",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--OAuthProvierLogo_outlook-usage",viewBox:"0 0 19 20",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--OAuthProvierLogo_outlook",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Pancakes-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Pancakes",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Priority-Star-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Priority-Star",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Search-MailTypes-Hotel-usage",viewBox:"-1841.5 992.5 40 40",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Search-MailTypes-Hotel",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Search-MailTypes-People-usage",viewBox:"-1841.5 992.5 40 40",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Search-MailTypes-People",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Search-MailTypes-Sale-usage",viewBox:"-1841.5 992.5 40 40",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Search-MailTypes-Sale",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Search-MailTypes-Social-usage",viewBox:"-1841.5 992.5 40 40",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Search-MailTypes-Social",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Search-MailTypes-Ticket-usage",viewBox:"-1841.5 992.5 40 40",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Search-MailTypes-Ticket",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Search-MailTypes-ZP-usage",viewBox:"-1841.5 992.5 40 40",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Search-MailTypes-ZP",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--SearchSuggest-Attach-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--SearchSuggest-Attach",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--SearchSuggest-Close-usage",viewBox:"0 0 14 14",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--SearchSuggest-Close",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--SearchSuggest-Folder-usage",viewBox:"0 0 30 30",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--SearchSuggest-Folder",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--SearchSuggest-History-usage",viewBox:"0 0 30 30",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--SearchSuggest-History",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--SearchSuggest-History_2-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--SearchSuggest-History_2",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--SearchSuggest-Important-usage",viewBox:"0 0 30 30",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--SearchSuggest-Important",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--SearchSuggest-Label-usage",viewBox:"0 0 30 30",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--SearchSuggest-Label",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--SearchSuggest-Mail-usage",viewBox:"0 0 18 14",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--SearchSuggest-Mail",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--SearchSuggest-Ql-usage",viewBox:"0 0 30 30",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--SearchSuggest-Ql",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--SearchSuggest-Settings-usage",viewBox:"0 0 17 14",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--SearchSuggest-Settings",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--SearchSuggest-Subject-usage",viewBox:"0 0 30 30",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--SearchSuggest-Subject",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--SearchSuggest-Unread-usage",viewBox:"0 0 30 30",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--SearchSuggest-Unread",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--SecurityLevel-low-usage",viewBox:"0 0 28 29",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--SecurityLevel-low",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--SecurityLevel-middle-usage",viewBox:"0 0 28 29",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--SecurityLevel-middle",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_admin-usage",viewBox:"0 0 42 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_admin",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_afisha-usage",viewBox:"0 0 36 48",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_afisha",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_browser-usage",viewBox:"0 0 48 48",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_browser",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_calendar-usage",viewBox:"0 0 44 36",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_calendar",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_contacts-usage",viewBox:"0 0 42 33",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_contacts",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_direct-usage",viewBox:"0 0 40 39",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_direct",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_images-usage",viewBox:"0 0 52 48",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_images",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_mail-corp-usage",viewBox:"0 0 42 30",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_mail-corp",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_mail-prod-usage",viewBox:"0 0 42 30",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_mail-prod",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_main-usage",viewBox:"0 0 42 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_main",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_maps-usage",viewBox:"0 0 30 48",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_maps",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_market-usage",viewBox:"0 0 40 40",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_market",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_metrika-usage",viewBox:"0 0 40 40",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_metrika",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_money-usage",viewBox:"0 0 36 46",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_money",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_music-usage",viewBox:"0 0 32 40",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_music",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_news-usage",viewBox:"0 0 48 36",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_news",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_people-usage",viewBox:"0 0 42 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_people",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_pogoda-usage",viewBox:"0 0 48 48",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_pogoda",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_q-usage",viewBox:"0 0 40 40",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_q",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_search_en-usage",viewBox:"0 0 22 40",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_search_en",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_search_ru-usage",viewBox:"0 0 19 40",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_search_ru",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_startrek-usage",viewBox:"0 0 42 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_startrek",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_stub_A-usage",viewBox:"0 0 42 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_stub_A",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_stub_B-usage",viewBox:"0 0 42 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_stub_B",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_stub_D-usage",viewBox:"0 0 42 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_stub_D",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_stub_EE-usage",viewBox:"0 0 42 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_stub_EE",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_stub_G-usage",viewBox:"0 0 42 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_stub_G",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_stub_J-usage",viewBox:"0 0 42 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_stub_J",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_stub_L-usage",viewBox:"0 0 42 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_stub_L",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_stub_O-usage",viewBox:"0 0 42 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_stub_O",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_stub_P-usage",viewBox:"0 0 42 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_stub_P",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_stub_S-usage",viewBox:"0 0 42 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_stub_S",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_stub_T-usage",viewBox:"0 0 42 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_stub_T",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_stub_Y-usage",viewBox:"0 0 42 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_stub_Y",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_stub_diary_en-usage",viewBox:"0 0 43 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_stub_diary_en",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_stub_diary_ru-usage",viewBox:"0 0 42 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_stub_diary_ru",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_stub_doc_en-usage",viewBox:"0 0 43 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_stub_doc_en",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_stub_doc_ru-usage",viewBox:"0 0 42 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_stub_doc_ru",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_stub_golem_en-usage",viewBox:"0 0 42 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_stub_golem_en",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_stub_golem_ru-usage",viewBox:"0 0 42 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_stub_golem_ru",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_stub_idm_en-usage",viewBox:"0 0 42 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_stub_idm_en",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_stub_idm_ru-usage",viewBox:"0 0 42 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_stub_idm_ru",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_stub_invite_en-usage",viewBox:"0 0 42 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_stub_invite_en",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_stub_invite_ru-usage",viewBox:"0 0 42 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_stub_invite_ru",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_stub_jabber_en-usage",viewBox:"0 0 42 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_stub_jabber_en",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_stub_jabber_ru-usage",viewBox:"0 0 42 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_stub_jabber_ru",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_stub_lego_en-usage",viewBox:"0 0 42 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_stub_lego_en",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_stub_lego_ru-usage",viewBox:"0 0 42 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_stub_lego_ru",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_stub_lib_en-usage",viewBox:"0 0 42 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_stub_lib_en",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_stub_lib_ru-usage",viewBox:"0 0 42 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_stub_lib_ru",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_stub_magazine_en-usage",viewBox:"0 0 42 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_stub_magazine_en",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_stub_magazine_ru-usage",viewBox:"0 0 42 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_stub_magazine_ru",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_stub_ml_en-usage",viewBox:"0 0 42 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_stub_ml_en",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_stub_ml_ru-usage",viewBox:"0 0 42 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_stub_ml_ru",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_stub_otrs_en-usage",viewBox:"0 0 42 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_stub_otrs_en",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_stub_otrs_ru-usage",viewBox:"0 0 42 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_stub_otrs_ru",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_stub_planner_en-usage",viewBox:"0 0 43 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_stub_planner_en",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_stub_planner_ru-usage",viewBox:"0 0 42 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_stub_planner_ru",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_stub_stat_en-usage",viewBox:"0 0 42 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_stub_stat_en",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_stub_stat_ru-usage",viewBox:"0 0 42 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_stub_stat_ru",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_tv-usage",viewBox:"0 0 44 31",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_tv",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_wiki-usage",viewBox:"0 0 42 42",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_wiki",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_yadisk-usage",viewBox:"0 0 48 32",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_yadisk",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Service_yamb-usage",viewBox:"0 0 45.4 45.4",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Service_yamb",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Settings-InterfaceSwitch-usage",viewBox:"-25.5 30.5 18 20",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Settings-InterfaceSwitch",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Settings-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Settings",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Subscriptions-Promo-Corner-usage",viewBox:"0 0 67 49",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Subscriptions-Promo-Corner",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Suggest-More-usage",viewBox:"0 0 38 38",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Suggest-More",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Theme-Pin-usage",viewBox:"0 0 13 13",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Theme-Pin",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Themes-AddImg-usage",viewBox:"25.5 16.5 63 44",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Themes-AddImg",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Themes-Edit-usage",viewBox:"0 0 33.324 33.238",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Themes-Edit",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Themes-Seasons_autumn-usage",viewBox:"0 0 19 22",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Themes-Seasons_autumn",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Themes-Seasons_rotation-usage",viewBox:"0 0 18 20",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Themes-Seasons_rotation",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Themes-Seasons_spring-usage",viewBox:"0 0 16 24",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Themes-Seasons_spring",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Themes-Seasons_summer-usage",viewBox:"0 0 24 25",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Themes-Seasons_summer",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Themes-Seasons_winter-usage",viewBox:"0 0 22 24",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Themes-Seasons_winter",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Timeline-Add-Event-usage",viewBox:"0 0 18 18",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Timeline-Add-Event",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Timeline-Attendees-usage",viewBox:"0 0 10 10",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Timeline-Attendees",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Timeline-Calendar-usage",viewBox:"0 0 18 18",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Timeline-Calendar",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Timeline-Location-usage",viewBox:"0 0 10 10",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Timeline-Location",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Todo-Calendar-usage",viewBox:"-3 3 14 14",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Todo-Calendar",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Todo-Circlemark-usage",viewBox:"-2 4 18 18",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Todo-Circlemark",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Todo-Edit-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Todo-Edit",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Todo-Letter-usage",viewBox:"0 0 15 12",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Todo-Letter",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--ToolbarOnSelection-Delete-usage",viewBox:"-17.5 810.5 18 18",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--ToolbarOnSelection-Delete",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--ToolbarOnSelection-Reply-usage",viewBox:"0 0 18 18",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--ToolbarOnSelection-Reply",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--ToolbarOnSelection-SmallClock-usage",viewBox:"40.479 -0.5 18 18",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--ToolbarOnSelection-SmallClock",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Unlocked-usage",viewBox:"0 0 15 15",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Unlocked",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--UnsubscribeFilters-Done-usage",viewBox:"0 0 30 30",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--UnsubscribeFilters-Done",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--UnsubscribeFilters-Error-sidebar-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--UnsubscribeFilters-Error-sidebar",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--UnsubscribeFilters-Error-usage",viewBox:"0 0 25 22",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--UnsubscribeFilters-Error",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--UnsubscribePopup-Done-big-usage",viewBox:"0 0 90 90",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--UnsubscribePopup-Done-big",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--ViewSettings-Icon-usage",viewBox:"0 0 18 18",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--ViewSettings-Icon",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--ViewSettings-InboxType_1-usage",viewBox:"0 0 72 72",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--ViewSettings-InboxType_1",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--ViewSettings-InboxType_2-usage",viewBox:"0 0 72 72",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--ViewSettings-InboxType_2",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--ViewSettings-InboxType_3-usage",viewBox:"0 0 72 72",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--ViewSettings-InboxType_3",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--ViewSettings-LineHeight1-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--ViewSettings-LineHeight1",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--ViewSettings-LineHeight2-usage",viewBox:"0 0 16 17",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--ViewSettings-LineHeight2",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--ViewSettings-LineHeight3-usage",viewBox:"0 0 16 18",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--ViewSettings-LineHeight3",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Widgets-Avatar-Calendar-usage",viewBox:"0 0 30 30",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Widgets-Avatar-Calendar",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Widgets-Avatar-Error-usage",viewBox:"4.5 4.5 30 30",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Widgets-Avatar-Error",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Widgets-Avatar-Reminder-usage",viewBox:"4.5 5.5 30 30",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Widgets-Avatar-Reminder",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Widgets-Done-big-usage",viewBox:"0 0 91 91",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Widgets-Done-big",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Widgets-Done-usage",viewBox:"0 0 25 24",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Widgets-Done",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Widgets-Person-usage",viewBox:"0 0 9 10",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Widgets-Person",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Widgets-PlaneBothWays-usage",viewBox:"0 0 17 21",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Widgets-PlaneBothWays",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Widgets-PlaneOneWay-usage",viewBox:"1.5 1 12 11",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Widgets-PlaneOneWay",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Widgets-Print-usage",viewBox:"0 0 15 14",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Widgets-Print",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Widgets_bounce-not-ok-dark-usage",viewBox:"0 0 38 38",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Widgets_bounce-not-ok-dark",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Widgets_bounce-not-ok-gray-dark-usage",viewBox:"0 0 38 38",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Widgets_bounce-not-ok-gray-dark",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Widgets_bounce-not-ok-gray-light-usage",viewBox:"0 0 38 38",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Widgets_bounce-not-ok-gray-light",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Widgets_bounce-not-ok-light-usage",viewBox:"0 0 38 38",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Widgets_bounce-not-ok-light",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Widgets_bounce-ok-dark-usage",viewBox:"0 0 38 38",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Widgets_bounce-ok-dark",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Widgets_bounce-ok-gray-dark-usage",viewBox:"0 0 38 38",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Widgets_bounce-ok-gray-dark",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Widgets_bounce-ok-gray-light-usage",viewBox:"0 0 38 38",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Widgets_bounce-ok-gray-light",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Widgets_bounce-ok-light-usage",viewBox:"0 0 38 38",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Widgets_bounce-ok-light",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Widgets_eshop-dark-usage",viewBox:"0 0 38 38",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Widgets_eshop-dark",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Widgets_eshop-light-usage",viewBox:"0 0 38 38",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Widgets_eshop-light",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Widgets_hotels-dark-usage",viewBox:"0 0 38 38",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Widgets_hotels-dark",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Widgets_hotels-light-usage",viewBox:"0 0 38 38",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Widgets_hotels-light",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Widgets_hotels-pink-dark-usage",viewBox:"0 0 38 38",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Widgets_hotels-pink-dark",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Widgets_hotels-pink-light-usage",viewBox:"0 0 38 38",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Widgets_hotels-pink-light",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Widgets_tickets-dark-usage",viewBox:"0 0 38 38",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Widgets_tickets-dark",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Widgets_tickets-light-usage",viewBox:"0 0 38 38",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Widgets_tickets-light",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Widgets_tracker-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Widgets_tracker",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Widgets_trips-blue-dark-usage",viewBox:"0 0 38 38",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Widgets_trips-blue-dark",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Widgets_trips-blue-light-usage",viewBox:"0 0 38 38",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Widgets_trips-blue-light",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Widgets_trips-dark-usage",viewBox:"0 0 38 38",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Widgets_trips-dark",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Widgets_trips-light-usage",viewBox:"0 0 38 38",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Widgets_trips-light",toString:function(){return this.url}}},function(e,t,n){e.exports={id:"svgicon-mail--Wz-attachment-usage",viewBox:"0 0 16 16",url:n.p+"../../server/routes/helpers/template/svg/svgicon-mail.svg#svgicon-mail--Wz-attachment",toString:function(){return this.url}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";(function(e,i){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){return!!e&&(e.preventDefault&&e.preventDefault(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.returnValue=!1,!1)}n.d(t,"a",(function(){return p}));var p=(function(e){function t(){return o(this,t),c(this,u(t).apply(this,arguments))}return d(t,e),a(t,[{key:"componentDidMount",value:function(){window.addEventListener("wheel",g),window.addEventListener("mousewheel",g),window.addEventListener("touchmove",g)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("wheel",g),window.removeEventListener("mousewheel",g),window.removeEventListener("touchmove",g)}},{key:"render",value:function(){return this.props.children}}]),t})(e.Component);p.propTypes={children:i.element.isRequired}}).call(t,n(318),n(317))}]));